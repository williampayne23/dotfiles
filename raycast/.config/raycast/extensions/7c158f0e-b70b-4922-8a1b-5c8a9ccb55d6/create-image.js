"use strict";var Ir=Object.create;var ye=Object.defineProperty;var Sr=Object.getOwnPropertyDescriptor;var br=Object.getOwnPropertyNames;var Cr=Object.getPrototypeOf,yr=Object.prototype.hasOwnProperty;var p=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),wr=(e,t)=>{for(var n in t)ye(e,n,{get:t[n],enumerable:!0})},ct=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of br(t))!yr.call(e,i)&&i!==n&&ye(e,i,{get:()=>t[i],enumerable:!(r=Sr(t,i))||r.enumerable});return e};var q=(e,t,n)=>(n=e!=null?Ir(Cr(e)):{},ct(t||!e||!e.__esModule?ye(n,"default",{value:e,enumerable:!0}):n,e)),Pr=e=>ct(ye({},"__esModule",{value:!0}),e);var ut=p((Po,dt)=>{dt.exports=mt;mt.sync=Rr;var pt=require("fs");function $r(e,t){var n=t.pathExt!==void 0?t.pathExt:process.env.PATHEXT;if(!n||(n=n.split(";"),n.indexOf("")!==-1))return!0;for(var r=0;r<n.length;r++){var i=n[r].toLowerCase();if(i&&e.substr(-i.length).toLowerCase()===i)return!0}return!1}function lt(e,t,n){return!e.isSymbolicLink()&&!e.isFile()?!1:$r(t,n)}function mt(e,t,n){pt.stat(e,function(r,i){n(r,r?!1:lt(i,e,t))})}function Rr(e,t){return lt(pt.statSync(e),e,t)}});var St=p(($o,It)=>{It.exports=ft;ft.sync=vr;var ht=require("fs");function ft(e,t,n){ht.stat(e,function(r,i){n(r,r?!1:gt(i,t))})}function vr(e,t){return gt(ht.statSync(e),t)}function gt(e,t){return e.isFile()&&xr(e,t)}function xr(e,t){var n=e.mode,r=e.uid,i=e.gid,o=t.uid!==void 0?t.uid:process.getuid&&process.getuid(),a=t.gid!==void 0?t.gid:process.getgid&&process.getgid(),s=parseInt("100",8),l=parseInt("010",8),c=parseInt("001",8),S=s|l,$=n&c||n&l&&i===a||n&s&&r===o||n&S&&o===0;return $}});var Ct=p((vo,bt)=>{var Ro=require("fs"),we;process.platform==="win32"||global.TESTING_WINDOWS?we=ut():we=St();bt.exports=He;He.sync=Tr;function He(e,t,n){if(typeof t=="function"&&(n=t,t={}),!n){if(typeof Promise!="function")throw new TypeError("callback not provided");return new Promise(function(r,i){He(e,t||{},function(o,a){o?i(o):r(a)})})}we(e,t||{},function(r,i){r&&(r.code==="EACCES"||t&&t.ignoreErrors)&&(r=null,i=!1),n(r,i)})}function Tr(e,t){try{return we.sync(e,t||{})}catch(n){if(t&&t.ignoreErrors||n.code==="EACCES")return!1;throw n}}});var xt=p((xo,vt)=>{var ne=process.platform==="win32"||process.env.OSTYPE==="cygwin"||process.env.OSTYPE==="msys",yt=require("path"),Fr=ne?";":":",wt=Ct(),Pt=e=>Object.assign(new Error(`not found: ${e}`),{code:"ENOENT"}),$t=(e,t)=>{let n=t.colon||Fr,r=e.match(/\//)||ne&&e.match(/\\/)?[""]:[...ne?[process.cwd()]:[],...(t.path||process.env.PATH||"").split(n)],i=ne?t.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM":"",o=ne?i.split(n):[""];return ne&&e.indexOf(".")!==-1&&o[0]!==""&&o.unshift(""),{pathEnv:r,pathExt:o,pathExtExe:i}},Rt=(e,t,n)=>{typeof t=="function"&&(n=t,t={}),t||(t={});let{pathEnv:r,pathExt:i,pathExtExe:o}=$t(e,t),a=[],s=c=>new Promise((S,$)=>{if(c===r.length)return t.all&&a.length?S(a):$(Pt(e));let C=r[c],W=/^".*"$/.test(C)?C.slice(1,-1):C,G=yt.join(W,e),T=!W&&/^\.[\\\/]/.test(e)?e.slice(0,2)+G:G;S(l(T,c,0))}),l=(c,S,$)=>new Promise((C,W)=>{if($===i.length)return C(s(S+1));let G=i[$];wt(c+G,{pathExt:o},(T,z)=>{if(!T&&z)if(t.all)a.push(c+G);else return C(c+G);return C(l(c,S,$+1))})});return n?s(0).then(c=>n(null,c),n):s(0)},Dr=(e,t)=>{t=t||{};let{pathEnv:n,pathExt:r,pathExtExe:i}=$t(e,t),o=[];for(let a=0;a<n.length;a++){let s=n[a],l=/^".*"$/.test(s)?s.slice(1,-1):s,c=yt.join(l,e),S=!l&&/^\.[\\\/]/.test(e)?e.slice(0,2)+c:c;for(let $=0;$<r.length;$++){let C=S+r[$];try{if(wt.sync(C,{pathExt:i}))if(t.all)o.push(C);else return C}catch{}}}if(t.all&&o.length)return o;if(t.nothrow)return null;throw Pt(e)};vt.exports=Rt;Rt.sync=Dr});var Me=p((To,je)=>{"use strict";var Tt=(e={})=>{let t=e.env||process.env;return(e.platform||process.platform)!=="win32"?"PATH":Object.keys(t).reverse().find(r=>r.toUpperCase()==="PATH")||"Path"};je.exports=Tt;je.exports.default=Tt});var Gt=p((Fo,Wt)=>{"use strict";var Ft=require("path"),Wr=xt(),Gr=Me();function Dt(e,t){let n=e.options.env||process.env,r=process.cwd(),i=e.options.cwd!=null,o=i&&process.chdir!==void 0&&!process.chdir.disabled;if(o)try{process.chdir(e.options.cwd)}catch{}let a;try{a=Wr.sync(e.command,{path:n[Gr({env:n})],pathExt:t?Ft.delimiter:void 0})}catch{}finally{o&&process.chdir(r)}return a&&(a=Ft.resolve(i?e.options.cwd:"",a)),a}function Nr(e){return Dt(e)||Dt(e,!0)}Wt.exports=Nr});var Nt=p((Do,qe)=>{"use strict";var Ue=/([()\][%!^"`<>&|;, *?])/g;function Ar(e){return e=e.replace(Ue,"^$1"),e}function kr(e,t){return e=`${e}`,e=e.replace(/(\\*)"/g,'$1$1\\"'),e=e.replace(/(\\*)$/,"$1$1"),e=`"${e}"`,e=e.replace(Ue,"^$1"),t&&(e=e.replace(Ue,"^$1")),e}qe.exports.command=Ar;qe.exports.argument=kr});var kt=p((Wo,At)=>{"use strict";At.exports=/^#!(.*)/});var Et=p((Go,Ot)=>{"use strict";var Or=kt();Ot.exports=(e="")=>{let t=e.match(Or);if(!t)return null;let[n,r]=t[0].replace(/#! ?/,"").split(" "),i=n.split("/").pop();return i==="env"?r:r?`${i} ${r}`:i}});var Bt=p((No,Lt)=>{"use strict";var _e=require("fs"),Er=Et();function Lr(e){let n=Buffer.alloc(150),r;try{r=_e.openSync(e,"r"),_e.readSync(r,n,0,150,0),_e.closeSync(r)}catch{}return Er(n.toString())}Lt.exports=Lr});var Ut=p((Ao,Mt)=>{"use strict";var Br=require("path"),Ht=Gt(),jt=Nt(),Hr=Bt(),jr=process.platform==="win32",Mr=/\.(?:com|exe)$/i,Ur=/node_modules[\\/].bin[\\/][^\\/]+\.cmd$/i;function qr(e){e.file=Ht(e);let t=e.file&&Hr(e.file);return t?(e.args.unshift(e.file),e.command=t,Ht(e)):e.file}function _r(e){if(!jr)return e;let t=qr(e),n=!Mr.test(t);if(e.options.forceShell||n){let r=Ur.test(t);e.command=Br.normalize(e.command),e.command=jt.command(e.command),e.args=e.args.map(o=>jt.argument(o,r));let i=[e.command].concat(e.args).join(" ");e.args=["/d","/s","/c",`"${i}"`],e.command=process.env.comspec||"cmd.exe",e.options.windowsVerbatimArguments=!0}return e}function Xr(e,t,n){t&&!Array.isArray(t)&&(n=t,t=null),t=t?t.slice(0):[],n=Object.assign({},n);let r={command:e,args:t,options:n,file:void 0,original:{command:e,args:t}};return n.shell?r:_r(r)}Mt.exports=Xr});var Xt=p((ko,_t)=>{"use strict";var Xe=process.platform==="win32";function Ke(e,t){return Object.assign(new Error(`${t} ${e.command} ENOENT`),{code:"ENOENT",errno:"ENOENT",syscall:`${t} ${e.command}`,path:e.command,spawnargs:e.args})}function Kr(e,t){if(!Xe)return;let n=e.emit;e.emit=function(r,i){if(r==="exit"){let o=qt(i,t,"spawn");if(o)return n.call(e,"error",o)}return n.apply(e,arguments)}}function qt(e,t){return Xe&&e===1&&!t.file?Ke(t.original,"spawn"):null}function zr(e,t){return Xe&&e===1&&!t.file?Ke(t.original,"spawnSync"):null}_t.exports={hookChildProcess:Kr,verifyENOENT:qt,verifyENOENTSync:zr,notFoundError:Ke}});var Yt=p((Oo,re)=>{"use strict";var Kt=require("child_process"),ze=Ut(),Ye=Xt();function zt(e,t,n){let r=ze(e,t,n),i=Kt.spawn(r.command,r.args,r.options);return Ye.hookChildProcess(i,r),i}function Yr(e,t,n){let r=ze(e,t,n),i=Kt.spawnSync(r.command,r.args,r.options);return i.error=i.error||Ye.verifyENOENTSync(i.status,r),i}re.exports=zt;re.exports.spawn=zt;re.exports.sync=Yr;re.exports._parse=ze;re.exports._enoent=Ye});var Qt=p((Eo,Jt)=>{"use strict";Jt.exports=e=>{let t=typeof e=="string"?`
`:`
`.charCodeAt(),n=typeof e=="string"?"\r":"\r".charCodeAt();return e[e.length-1]===t&&(e=e.slice(0,e.length-1)),e[e.length-1]===n&&(e=e.slice(0,e.length-1)),e}});var en=p((Lo,ue)=>{"use strict";var de=require("path"),Zt=Me(),Vt=e=>{e={cwd:process.cwd(),path:process.env[Zt()],execPath:process.execPath,...e};let t,n=de.resolve(e.cwd),r=[];for(;t!==n;)r.push(de.join(n,"node_modules/.bin")),t=n,n=de.resolve(n,"..");let i=de.resolve(e.cwd,e.execPath,"..");return r.push(i),r.concat(e.path).join(de.delimiter)};ue.exports=Vt;ue.exports.default=Vt;ue.exports.env=e=>{e={env:process.env,...e};let t={...e.env},n=Zt({env:t});return e.path=t[n],t[n]=ue.exports(e),t}});var nn=p((Bo,Je)=>{"use strict";var tn=(e,t)=>{for(let n of Reflect.ownKeys(t))Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n));return e};Je.exports=tn;Je.exports.default=tn});var on=p((Ho,$e)=>{"use strict";var Jr=nn(),Pe=new WeakMap,rn=(e,t={})=>{if(typeof e!="function")throw new TypeError("Expected a function");let n,r=0,i=e.displayName||e.name||"<anonymous>",o=function(...a){if(Pe.set(o,++r),r===1)n=e.apply(this,a),e=null;else if(t.throw===!0)throw new Error(`Function \`${i}\` can only be called once`);return n};return Jr(o,e),Pe.set(o,r),o};$e.exports=rn;$e.exports.default=rn;$e.exports.callCount=e=>{if(!Pe.has(e))throw new Error(`The given function \`${e.name}\` is not wrapped by the \`onetime\` package`);return Pe.get(e)}});var an=p(Re=>{"use strict";Object.defineProperty(Re,"__esModule",{value:!0});Re.SIGNALS=void 0;var Qr=[{name:"SIGHUP",number:1,action:"terminate",description:"Terminal closed",standard:"posix"},{name:"SIGINT",number:2,action:"terminate",description:"User interruption with CTRL-C",standard:"ansi"},{name:"SIGQUIT",number:3,action:"core",description:"User interruption with CTRL-\\",standard:"posix"},{name:"SIGILL",number:4,action:"core",description:"Invalid machine instruction",standard:"ansi"},{name:"SIGTRAP",number:5,action:"core",description:"Debugger breakpoint",standard:"posix"},{name:"SIGABRT",number:6,action:"core",description:"Aborted",standard:"ansi"},{name:"SIGIOT",number:6,action:"core",description:"Aborted",standard:"bsd"},{name:"SIGBUS",number:7,action:"core",description:"Bus error due to misaligned, non-existing address or paging error",standard:"bsd"},{name:"SIGEMT",number:7,action:"terminate",description:"Command should be emulated but is not implemented",standard:"other"},{name:"SIGFPE",number:8,action:"core",description:"Floating point arithmetic error",standard:"ansi"},{name:"SIGKILL",number:9,action:"terminate",description:"Forced termination",standard:"posix",forced:!0},{name:"SIGUSR1",number:10,action:"terminate",description:"Application-specific signal",standard:"posix"},{name:"SIGSEGV",number:11,action:"core",description:"Segmentation fault",standard:"ansi"},{name:"SIGUSR2",number:12,action:"terminate",description:"Application-specific signal",standard:"posix"},{name:"SIGPIPE",number:13,action:"terminate",description:"Broken pipe or socket",standard:"posix"},{name:"SIGALRM",number:14,action:"terminate",description:"Timeout or timer",standard:"posix"},{name:"SIGTERM",number:15,action:"terminate",description:"Termination",standard:"ansi"},{name:"SIGSTKFLT",number:16,action:"terminate",description:"Stack is empty or overflowed",standard:"other"},{name:"SIGCHLD",number:17,action:"ignore",description:"Child process terminated, paused or unpaused",standard:"posix"},{name:"SIGCLD",number:17,action:"ignore",description:"Child process terminated, paused or unpaused",standard:"other"},{name:"SIGCONT",number:18,action:"unpause",description:"Unpaused",standard:"posix",forced:!0},{name:"SIGSTOP",number:19,action:"pause",description:"Paused",standard:"posix",forced:!0},{name:"SIGTSTP",number:20,action:"pause",description:'Paused using CTRL-Z or "suspend"',standard:"posix"},{name:"SIGTTIN",number:21,action:"pause",description:"Background process cannot read terminal input",standard:"posix"},{name:"SIGBREAK",number:21,action:"terminate",description:"User interruption with CTRL-BREAK",standard:"other"},{name:"SIGTTOU",number:22,action:"pause",description:"Background process cannot write to terminal output",standard:"posix"},{name:"SIGURG",number:23,action:"ignore",description:"Socket received out-of-band data",standard:"bsd"},{name:"SIGXCPU",number:24,action:"core",description:"Process timed out",standard:"bsd"},{name:"SIGXFSZ",number:25,action:"core",description:"File too big",standard:"bsd"},{name:"SIGVTALRM",number:26,action:"terminate",description:"Timeout or timer",standard:"bsd"},{name:"SIGPROF",number:27,action:"terminate",description:"Timeout or timer",standard:"bsd"},{name:"SIGWINCH",number:28,action:"ignore",description:"Terminal window size changed",standard:"bsd"},{name:"SIGIO",number:29,action:"terminate",description:"I/O is available",standard:"other"},{name:"SIGPOLL",number:29,action:"terminate",description:"Watched event",standard:"other"},{name:"SIGINFO",number:29,action:"ignore",description:"Request for process information",standard:"other"},{name:"SIGPWR",number:30,action:"terminate",description:"Device running out of power",standard:"systemv"},{name:"SIGSYS",number:31,action:"core",description:"Invalid system call",standard:"other"},{name:"SIGUNUSED",number:31,action:"terminate",description:"Invalid system call",standard:"other"}];Re.SIGNALS=Qr});var Qe=p(ie=>{"use strict";Object.defineProperty(ie,"__esModule",{value:!0});ie.SIGRTMAX=ie.getRealtimeSignals=void 0;var Zr=function(){let e=cn-sn+1;return Array.from({length:e},Vr)};ie.getRealtimeSignals=Zr;var Vr=function(e,t){return{name:`SIGRT${t+1}`,number:sn+t,action:"terminate",description:"Application-specific signal (realtime)",standard:"posix"}},sn=34,cn=64;ie.SIGRTMAX=cn});var pn=p(ve=>{"use strict";Object.defineProperty(ve,"__esModule",{value:!0});ve.getSignals=void 0;var ei=require("os"),ti=an(),ni=Qe(),ri=function(){let e=(0,ni.getRealtimeSignals)();return[...ti.SIGNALS,...e].map(ii)};ve.getSignals=ri;var ii=function({name:e,number:t,description:n,action:r,forced:i=!1,standard:o}){let{signals:{[e]:a}}=ei.constants,s=a!==void 0;return{name:e,number:s?a:t,description:n,supported:s,action:r,forced:i,standard:o}}});var mn=p(oe=>{"use strict";Object.defineProperty(oe,"__esModule",{value:!0});oe.signalsByNumber=oe.signalsByName=void 0;var oi=require("os"),ln=pn(),ai=Qe(),si=function(){return(0,ln.getSignals)().reduce(ci,{})},ci=function(e,{name:t,number:n,description:r,supported:i,action:o,forced:a,standard:s}){return{...e,[t]:{name:t,number:n,description:r,supported:i,action:o,forced:a,standard:s}}},pi=si();oe.signalsByName=pi;var li=function(){let e=(0,ln.getSignals)(),t=ai.SIGRTMAX+1,n=Array.from({length:t},(r,i)=>mi(i,e));return Object.assign({},...n)},mi=function(e,t){let n=di(e,t);if(n===void 0)return{};let{name:r,description:i,supported:o,action:a,forced:s,standard:l}=n;return{[e]:{name:r,number:e,description:i,supported:o,action:a,forced:s,standard:l}}},di=function(e,t){let n=t.find(({name:r})=>oi.constants.signals[r]===e);return n!==void 0?n:t.find(r=>r.number===e)},ui=li();oe.signalsByNumber=ui});var un=p((_o,dn)=>{"use strict";var{signalsByName:hi}=mn(),fi=({timedOut:e,timeout:t,errorCode:n,signal:r,signalDescription:i,exitCode:o,isCanceled:a})=>e?`timed out after ${t} milliseconds`:a?"was canceled":n!==void 0?`failed with ${n}`:r!==void 0?`was killed with ${r} (${i})`:o!==void 0?`failed with exit code ${o}`:"failed",gi=({stdout:e,stderr:t,all:n,error:r,signal:i,exitCode:o,command:a,escapedCommand:s,timedOut:l,isCanceled:c,killed:S,parsed:{options:{timeout:$}}})=>{o=o===null?void 0:o,i=i===null?void 0:i;let C=i===void 0?void 0:hi[i].description,W=r&&r.code,T=`Command ${fi({timedOut:l,timeout:$,errorCode:W,signal:i,signalDescription:C,exitCode:o,isCanceled:c})}: ${a}`,z=Object.prototype.toString.call(r)==="[object Error]",j=z?`${T}
${r.message}`:T,ee=[j,t,e].filter(Boolean).join(`
`);return z?(r.originalMessage=r.message,r.message=ee):r=new Error(ee),r.shortMessage=j,r.command=a,r.escapedCommand=s,r.exitCode=o,r.signal=i,r.signalDescription=C,r.stdout=e,r.stderr=t,n!==void 0&&(r.all=n),"bufferedData"in r&&delete r.bufferedData,r.failed=!0,r.timedOut=!!l,r.isCanceled=c,r.killed=S&&!l,r};dn.exports=gi});var fn=p((Xo,Ze)=>{"use strict";var xe=["stdin","stdout","stderr"],Ii=e=>xe.some(t=>e[t]!==void 0),hn=e=>{if(!e)return;let{stdio:t}=e;if(t===void 0)return xe.map(r=>e[r]);if(Ii(e))throw new Error(`It's not possible to provide \`stdio\` in combination with one of ${xe.map(r=>`\`${r}\``).join(", ")}`);if(typeof t=="string")return t;if(!Array.isArray(t))throw new TypeError(`Expected \`stdio\` to be of type \`string\` or \`Array\`, got \`${typeof t}\``);let n=Math.max(t.length,xe.length);return Array.from({length:n},(r,i)=>t[i])};Ze.exports=hn;Ze.exports.node=e=>{let t=hn(e);return t==="ipc"?"ipc":t===void 0||typeof t=="string"?[t,t,t,"ipc"]:t.includes("ipc")?t:[...t,"ipc"]}});var gn=p((Ko,Te)=>{Te.exports=["SIGABRT","SIGALRM","SIGHUP","SIGINT","SIGTERM"];process.platform!=="win32"&&Te.exports.push("SIGVTALRM","SIGXCPU","SIGXFSZ","SIGUSR2","SIGTRAP","SIGSYS","SIGQUIT","SIGIOT");process.platform==="linux"&&Te.exports.push("SIGIO","SIGPOLL","SIGPWR","SIGSTKFLT","SIGUNUSED")});var yn=p((zo,ce)=>{var I=global.process,Q=function(e){return e&&typeof e=="object"&&typeof e.removeListener=="function"&&typeof e.emit=="function"&&typeof e.reallyExit=="function"&&typeof e.listeners=="function"&&typeof e.kill=="function"&&typeof e.pid=="number"&&typeof e.on=="function"};Q(I)?(In=require("assert"),ae=gn(),Sn=/^win/i.test(I.platform),he=require("events"),typeof he!="function"&&(he=he.EventEmitter),I.__signal_exit_emitter__?w=I.__signal_exit_emitter__:(w=I.__signal_exit_emitter__=new he,w.count=0,w.emitted={}),w.infinite||(w.setMaxListeners(1/0),w.infinite=!0),ce.exports=function(e,t){if(!Q(global.process))return function(){};In.equal(typeof e,"function","a callback must be provided for exit handler"),se===!1&&Ve();var n="exit";t&&t.alwaysLast&&(n="afterexit");var r=function(){w.removeListener(n,e),w.listeners("exit").length===0&&w.listeners("afterexit").length===0&&Fe()};return w.on(n,e),r},Fe=function(){!se||!Q(global.process)||(se=!1,ae.forEach(function(t){try{I.removeListener(t,De[t])}catch{}}),I.emit=We,I.reallyExit=et,w.count-=1)},ce.exports.unload=Fe,Z=function(t,n,r){w.emitted[t]||(w.emitted[t]=!0,w.emit(t,n,r))},De={},ae.forEach(function(e){De[e]=function(){if(Q(global.process)){var n=I.listeners(e);n.length===w.count&&(Fe(),Z("exit",null,e),Z("afterexit",null,e),Sn&&e==="SIGHUP"&&(e="SIGINT"),I.kill(I.pid,e))}}}),ce.exports.signals=function(){return ae},se=!1,Ve=function(){se||!Q(global.process)||(se=!0,w.count+=1,ae=ae.filter(function(t){try{return I.on(t,De[t]),!0}catch{return!1}}),I.emit=Cn,I.reallyExit=bn)},ce.exports.load=Ve,et=I.reallyExit,bn=function(t){Q(global.process)&&(I.exitCode=t||0,Z("exit",I.exitCode,null),Z("afterexit",I.exitCode,null),et.call(I,I.exitCode))},We=I.emit,Cn=function(t,n){if(t==="exit"&&Q(global.process)){n!==void 0&&(I.exitCode=n);var r=We.apply(this,arguments);return Z("exit",I.exitCode,null),Z("afterexit",I.exitCode,null),r}else return We.apply(this,arguments)}):ce.exports=function(){return function(){}};var In,ae,Sn,he,w,Fe,Z,De,se,Ve,et,bn,We,Cn});var Pn=p((Yo,wn)=>{"use strict";var Si=require("os"),bi=yn(),Ci=1e3*5,yi=(e,t="SIGTERM",n={})=>{let r=e(t);return wi(e,t,n,r),r},wi=(e,t,n,r)=>{if(!Pi(t,n,r))return;let i=Ri(n),o=setTimeout(()=>{e("SIGKILL")},i);o.unref&&o.unref()},Pi=(e,{forceKillAfterTimeout:t},n)=>$i(e)&&t!==!1&&n,$i=e=>e===Si.constants.signals.SIGTERM||typeof e=="string"&&e.toUpperCase()==="SIGTERM",Ri=({forceKillAfterTimeout:e=!0})=>{if(e===!0)return Ci;if(!Number.isFinite(e)||e<0)throw new TypeError(`Expected the \`forceKillAfterTimeout\` option to be a non-negative integer, got \`${e}\` (${typeof e})`);return e},vi=(e,t)=>{e.kill()&&(t.isCanceled=!0)},xi=(e,t,n)=>{e.kill(t),n(Object.assign(new Error("Timed out"),{timedOut:!0,signal:t}))},Ti=(e,{timeout:t,killSignal:n="SIGTERM"},r)=>{if(t===0||t===void 0)return r;let i,o=new Promise((s,l)=>{i=setTimeout(()=>{xi(e,n,l)},t)}),a=r.finally(()=>{clearTimeout(i)});return Promise.race([o,a])},Fi=({timeout:e})=>{if(e!==void 0&&(!Number.isFinite(e)||e<0))throw new TypeError(`Expected the \`timeout\` option to be a non-negative integer, got \`${e}\` (${typeof e})`)},Di=async(e,{cleanup:t,detached:n},r)=>{if(!t||n)return r;let i=bi(()=>{e.kill()});return r.finally(()=>{i()})};wn.exports={spawnedKill:yi,spawnedCancel:vi,setupTimeout:Ti,validateTimeout:Fi,setExitHandler:Di}});var Rn=p((Jo,$n)=>{"use strict";var L=e=>e!==null&&typeof e=="object"&&typeof e.pipe=="function";L.writable=e=>L(e)&&e.writable!==!1&&typeof e._write=="function"&&typeof e._writableState=="object";L.readable=e=>L(e)&&e.readable!==!1&&typeof e._read=="function"&&typeof e._readableState=="object";L.duplex=e=>L.writable(e)&&L.readable(e);L.transform=e=>L.duplex(e)&&typeof e._transform=="function";$n.exports=L});var xn=p((Qo,vn)=>{"use strict";var{PassThrough:Wi}=require("stream");vn.exports=e=>{e={...e};let{array:t}=e,{encoding:n}=e,r=n==="buffer",i=!1;t?i=!(n||r):n=n||"utf8",r&&(n=null);let o=new Wi({objectMode:i});n&&o.setEncoding(n);let a=0,s=[];return o.on("data",l=>{s.push(l),i?a=s.length:a+=l.length}),o.getBufferedValue=()=>t?s:r?Buffer.concat(s,a):s.join(""),o.getBufferedLength=()=>a,o}});var Tn=p((Zo,fe)=>{"use strict";var{constants:Gi}=require("buffer"),Ni=require("stream"),{promisify:Ai}=require("util"),ki=xn(),Oi=Ai(Ni.pipeline),Ge=class extends Error{constructor(){super("maxBuffer exceeded"),this.name="MaxBufferError"}};async function tt(e,t){if(!e)throw new Error("Expected a stream");t={maxBuffer:1/0,...t};let{maxBuffer:n}=t,r=ki(t);return await new Promise((i,o)=>{let a=s=>{s&&r.getBufferedLength()<=Gi.MAX_LENGTH&&(s.bufferedData=r.getBufferedValue()),o(s)};(async()=>{try{await Oi(e,r),i()}catch(s){a(s)}})(),r.on("data",()=>{r.getBufferedLength()>n&&a(new Ge)})}),r.getBufferedValue()}fe.exports=tt;fe.exports.buffer=(e,t)=>tt(e,{...t,encoding:"buffer"});fe.exports.array=(e,t)=>tt(e,{...t,array:!0});fe.exports.MaxBufferError=Ge});var Dn=p((Vo,Fn)=>{"use strict";var{PassThrough:Ei}=require("stream");Fn.exports=function(){var e=[],t=new Ei({objectMode:!0});return t.setMaxListeners(0),t.add=n,t.isEmpty=r,t.on("unpipe",i),Array.prototype.slice.call(arguments).forEach(n),t;function n(o){return Array.isArray(o)?(o.forEach(n),this):(e.push(o),o.once("end",i.bind(null,o)),o.once("error",t.emit.bind(t,"error")),o.pipe(t,{end:!1}),this)}function r(){return e.length==0}function i(o){e=e.filter(function(a){return a!==o}),!e.length&&t.readable&&t.end()}}});var An=p((ea,Nn)=>{"use strict";var Gn=Rn(),Wn=Tn(),Li=Dn(),Bi=(e,t)=>{t===void 0||e.stdin===void 0||(Gn(t)?t.pipe(e.stdin):e.stdin.end(t))},Hi=(e,{all:t})=>{if(!t||!e.stdout&&!e.stderr)return;let n=Li();return e.stdout&&n.add(e.stdout),e.stderr&&n.add(e.stderr),n},nt=async(e,t)=>{if(e){e.destroy();try{return await t}catch(n){return n.bufferedData}}},rt=(e,{encoding:t,buffer:n,maxBuffer:r})=>{if(!(!e||!n))return t?Wn(e,{encoding:t,maxBuffer:r}):Wn.buffer(e,{maxBuffer:r})},ji=async({stdout:e,stderr:t,all:n},{encoding:r,buffer:i,maxBuffer:o},a)=>{let s=rt(e,{encoding:r,buffer:i,maxBuffer:o}),l=rt(t,{encoding:r,buffer:i,maxBuffer:o}),c=rt(n,{encoding:r,buffer:i,maxBuffer:o*2});try{return await Promise.all([a,s,l,c])}catch(S){return Promise.all([{error:S,signal:S.signal,timedOut:S.timedOut},nt(e,s),nt(t,l),nt(n,c)])}},Mi=({input:e})=>{if(Gn(e))throw new TypeError("The `input` option cannot be a stream in sync mode")};Nn.exports={handleInput:Bi,makeAllStream:Hi,getSpawnedResult:ji,validateInputSync:Mi}});var On=p((ta,kn)=>{"use strict";var Ui=(async()=>{})().constructor.prototype,qi=["then","catch","finally"].map(e=>[e,Reflect.getOwnPropertyDescriptor(Ui,e)]),_i=(e,t)=>{for(let[n,r]of qi){let i=typeof t=="function"?(...o)=>Reflect.apply(r.value,t(),o):r.value.bind(t);Reflect.defineProperty(e,n,{...r,value:i})}return e},Xi=e=>new Promise((t,n)=>{e.on("exit",(r,i)=>{t({exitCode:r,signal:i})}),e.on("error",r=>{n(r)}),e.stdin&&e.stdin.on("error",r=>{n(r)})});kn.exports={mergePromise:_i,getSpawnedPromise:Xi}});var Bn=p((na,Ln)=>{"use strict";var En=(e,t=[])=>Array.isArray(t)?[e,...t]:[e],Ki=/^[\w.-]+$/,zi=/"/g,Yi=e=>typeof e!="string"||Ki.test(e)?e:`"${e.replace(zi,'\\"')}"`,Ji=(e,t)=>En(e,t).join(" "),Qi=(e,t)=>En(e,t).map(n=>Yi(n)).join(" "),Zi=/ +/g,Vi=e=>{let t=[];for(let n of e.trim().split(Zi)){let r=t[t.length-1];r&&r.endsWith("\\")?t[t.length-1]=`${r.slice(0,-1)} ${n}`:t.push(n)}return t};Ln.exports={joinCommand:Ji,getEscapedCommand:Qi,parseCommand:Vi}});var Xn=p((ra,pe)=>{"use strict";var eo=require("path"),it=require("child_process"),to=Yt(),no=Qt(),ro=en(),io=on(),Ne=un(),jn=fn(),{spawnedKill:oo,spawnedCancel:ao,setupTimeout:so,validateTimeout:co,setExitHandler:po}=Pn(),{handleInput:lo,getSpawnedResult:mo,makeAllStream:uo,validateInputSync:ho}=An(),{mergePromise:Hn,getSpawnedPromise:fo}=On(),{joinCommand:Mn,parseCommand:Un,getEscapedCommand:qn}=Bn(),go=1e3*1e3*100,Io=({env:e,extendEnv:t,preferLocal:n,localDir:r,execPath:i})=>{let o=t?{...process.env,...e}:e;return n?ro.env({env:o,cwd:r,execPath:i}):o},_n=(e,t,n={})=>{let r=to._parse(e,t,n);return e=r.command,t=r.args,n=r.options,n={maxBuffer:go,buffer:!0,stripFinalNewline:!0,extendEnv:!0,preferLocal:!1,localDir:n.cwd||process.cwd(),execPath:process.execPath,encoding:"utf8",reject:!0,cleanup:!0,all:!1,windowsHide:!0,...n},n.env=Io(n),n.stdio=jn(n),process.platform==="win32"&&eo.basename(e,".exe")==="cmd"&&t.unshift("/q"),{file:e,args:t,options:n,parsed:r}},ge=(e,t,n)=>typeof t!="string"&&!Buffer.isBuffer(t)?n===void 0?void 0:"":e.stripFinalNewline?no(t):t,Ae=(e,t,n)=>{let r=_n(e,t,n),i=Mn(e,t),o=qn(e,t);co(r.options);let a;try{a=it.spawn(r.file,r.args,r.options)}catch(W){let G=new it.ChildProcess,T=Promise.reject(Ne({error:W,stdout:"",stderr:"",all:"",command:i,escapedCommand:o,parsed:r,timedOut:!1,isCanceled:!1,killed:!1}));return Hn(G,T)}let s=fo(a),l=so(a,r.options,s),c=po(a,r.options,l),S={isCanceled:!1};a.kill=oo.bind(null,a.kill.bind(a)),a.cancel=ao.bind(null,a,S);let C=io(async()=>{let[{error:W,exitCode:G,signal:T,timedOut:z},j,ee,te]=await mo(a,r.options,c),Se=ge(r.options,j),J=ge(r.options,ee),be=ge(r.options,te);if(W||G!==0||T!==null){let Ce=Ne({error:W,exitCode:G,signal:T,stdout:Se,stderr:J,all:be,command:i,escapedCommand:o,parsed:r,timedOut:z,isCanceled:S.isCanceled,killed:a.killed});if(!r.options.reject)return Ce;throw Ce}return{command:i,escapedCommand:o,exitCode:0,stdout:Se,stderr:J,all:be,failed:!1,timedOut:!1,isCanceled:!1,killed:!1}});return lo(a,r.options.input),a.all=uo(a,r.options),Hn(a,C)};pe.exports=Ae;pe.exports.sync=(e,t,n)=>{let r=_n(e,t,n),i=Mn(e,t),o=qn(e,t);ho(r.options);let a;try{a=it.spawnSync(r.file,r.args,r.options)}catch(c){throw Ne({error:c,stdout:"",stderr:"",all:"",command:i,escapedCommand:o,parsed:r,timedOut:!1,isCanceled:!1,killed:!1})}let s=ge(r.options,a.stdout,a.error),l=ge(r.options,a.stderr,a.error);if(a.error||a.status!==0||a.signal!==null){let c=Ne({stdout:s,stderr:l,error:a.error,signal:a.signal,exitCode:a.status,command:i,escapedCommand:o,parsed:r,timedOut:a.error&&a.error.code==="ETIMEDOUT",isCanceled:!1,killed:a.signal!==null});if(!r.options.reject)return c;throw c}return{command:i,escapedCommand:o,exitCode:0,stdout:s,stderr:l,failed:!1,timedOut:!1,isCanceled:!1,killed:!1}};pe.exports.command=(e,t)=>{let[n,...r]=Un(e);return Ae(n,r,t)};pe.exports.commandSync=(e,t)=>{let[n,...r]=Un(e);return Ae.sync(n,r,t)};pe.exports.node=(e,t,n={})=>{t&&!Array.isArray(t)&&typeof t=="object"&&(n=t,t=[]);let r=jn.node(n),i=process.execArgv.filter(s=>!s.startsWith("--inspect")),{nodePath:o=process.execPath,nodeOptions:a=i}=n;return Ae(o,[...a,e,...Array.isArray(t)?t:[]],{...n,stdin:void 0,stdout:void 0,stderr:void 0,stdio:r,shell:!1})}});var yo={};wr(yo,{default:()=>sr});module.exports=Pr(yo);var D=require("@raycast/api");var ot=q(require("node:process"),1),at=q(Xn(),1);async function Y(e,{humanReadableOutput:t=!0}={}){if(ot.default.platform!=="darwin")throw new Error("macOS only");let n=t?[]:["-ss"],{stdout:r}=await(0,at.default)("osascript",["-e",e,n]);return r}function ke(e,{humanReadableOutput:t=!0}={}){if(ot.default.platform!=="darwin")throw new Error("macOS only");let n=t?[]:["-ss"],{stdout:r}=at.default.sync("osascript",["-e",e,...n]);return r}var X=[1024,512,256,128,100,64,50,32],Ie=async(e,t,n)=>Y(`use framework "Foundation"
        use framework "Quartz"
        
        set theCIImage to current application's CIImage's imageWithColor:(current application's CIColor's grayColor())
        set theBounds to current application's NSMakeRect(0, 0, ${e}, ${t})
        set croppedOutput to theCIImage's imageByCroppingToRect:theBounds
        
        -- Convert back to NSImage and save to file
        set theRep to current application's NSCIImageRep's imageRepWithCIImage:croppedOutput
        set theResult to current application's NSImage's alloc()'s initWithSize:(theRep's |size|())
        theResult's addRepresentation:theRep
        ${n==null?`set theTIFFData to theResult's TIFFRepresentation()
              set theBitmapImageRep to current application's NSBitmapImageRep's imageRepWithData:theTIFFData
              set theResultData to theBitmapImageRep's representationUsingType:(current application's NSPNGFileType) |properties|:(missing value)
              set theBase64String to theResultData's base64EncodedStringWithOptions:0
              return "data:image/png;base64," & theBase64String`:`saveImage(theResult, "${n}")
        
        on saveImage(imageToSave, destinationPath)
            -- Saves an NSImage to the supplied file path
            set theTIFFData to imageToSave's TIFFRepresentation()
            set theBitmapImageRep to current application's NSBitmapImageRep's imageRepWithData:theTIFFData
            set theResultData to theBitmapImageRep's representationUsingType:(current application's NSPNGFileType) |properties|:(missing value)
            theResultData's writeToFile:destinationPath atomically:false
        end saveImage`}`),B=async(e,t)=>Y(`use framework "Foundation"
      use framework "Quartz"
      use scripting additions
      
      set filterName to "${e}"
      set theFilter to current application's CIFilter's filterWithName:filterName
      theFilter's setDefaults()

      set imgWidth to 256
      set imgHeight to 256
  
      set theCIImage to current application's CIImage's emptyImage()
      ${Object.entries(t).map(([n,r])=>`theFilter's setValue:(${r}) forKey:"${n}"`).join(`
`)}
      
      set theBounds to current application's NSMakeRect(0, 0, imgWidth, imgHeight)
      set uncroppedOutput to theFilter's valueForKey:(current application's kCIOutputImageKey)
      set croppedOutput to uncroppedOutput's imageByCroppingToRect:theBounds
      
      -- Convert back to NSImage and save to file
      set theRep to current application's NSCIImageRep's imageRepWithCIImage:croppedOutput
      set theResult to current application's NSImage's alloc()'s initWithSize:(theRep's |size|())
      theResult's addRepresentation:theRep

      -- Saves an NSImage to the supplied file path
      set theTIFFData to theResult's TIFFRepresentation()
      set theBitmapImageRep to current application's NSBitmapImageRep's imageRepWithData:theTIFFData
      set theResultData to theBitmapImageRep's representationUsingType:(current application's NSPNGFileType) |properties|:(missing value)
      set theBase64String to (theResultData's base64EncodedStringWithOptions:0) as text
      return "data:image/png;base64," & theBase64String
  `),_=async(e,t,n,r,i)=>Y(`use framework "Foundation"
    use framework "Quartz"
    use scripting additions
    
    set filterName to "${t}"
    set theFilter to current application's CIFilter's filterWithName:filterName
    theFilter's setDefaults()

    set imgWidth to ${n}
    set imgHeight to ${r}

    set theCIImage to current application's CIImage's emptyImage()
    ${Object.entries(i).map(([o,a])=>`theFilter's setValue:(${a}) forKey:"${o}"`).join(`
`)}
    
    set theBounds to current application's NSMakeRect(0, 0, imgWidth, imgHeight)
    set uncroppedOutput to theFilter's valueForKey:(current application's kCIOutputImageKey)
    set croppedOutput to uncroppedOutput's imageByCroppingToRect:theBounds
    
    -- Convert back to NSImage and save to file
    set theRep to current application's NSCIImageRep's imageRepWithCIImage:croppedOutput
    set theResult to current application's NSImage's alloc()'s initWithSize:(theRep's |size|())
    theResult's addRepresentation:theRep
    saveImage(theResult, "${e}")
    
    on saveImage(imageToSave, destinationPath)
        -- Saves an NSImage to the supplied file path
        set theTIFFData to imageToSave's TIFFRepresentation()
        set theBitmapImageRep to current application's NSBitmapImageRep's imageRepWithData:theTIFFData
        set theResultData to theBitmapImageRep's representationUsingType:(current application's NSPNGFileType) |properties|:(missing value)
        theResultData's writeToFile:destinationPath atomically:false
    end saveImage`),d={Checkerboard:{applyMethod:_,CIFilterName:"CICheckerboardGenerator",name:"Checkerboard",thumbnail:"thumbnails/checkerboard.webp"},ConstantColor:{applyMethod:_,CIFilterName:"CIConstantColorGenerator",name:"Constant Color",thumbnail:"thumbnails/constant_color.webp"},LenticularHalo:{applyMethod:_,CIFilterName:"CILenticularHaloGenerator",name:"Lenticular Halo",thumbnail:"thumbnails/lenticular_halo.webp"},LinearGradient:{applyMethod:_,CIFilterName:"CILinearGradient",name:"Linear Gradient",thumbnail:"thumbnails/linear_gradient.webp"},RadialGradient:{applyMethod:_,CIFilterName:"CIRadialGradient",name:"Radial Gradient",thumbnail:"thumbnails/radial_gradient.webp"},Random:{applyMethod:_,CIFilterName:"CIRandomGenerator",name:"Random",thumbnail:"thumbnails/random.webp"},StarShine:{applyMethod:_,CIFilterName:"CIStarShineGenerator",name:"Star Shine",thumbnail:"thumbnails/star_shine.webp"},Stripes:{applyMethod:_,CIFilterName:"CIStripesGenerator",name:"Stripes",thumbnail:"thumbnails/stripes.webp"},Sunbeams:{applyMethod:_,CIFilterName:"CISunbeamsGenerator",name:"Sunbeams",thumbnail:"thumbnails/sunbeams.webp"}},Kn=(e,t,n,r)=>[{inputColor0:`current application's CIColor's colorWithRed:${e[0]/255} green:${t[0]/255} blue:${n[0]/255} alpha:${r[0]/255}`,inputColor1:`current application's CIColor's colorWithRed:${e[1]/255} green:${t[1]/255} blue:${n[1]/255} alpha:${r[1]/255}`,inputWidth:"imgWidth / 4"},{inputColor0:`current application's CIColor's colorWithRed:${e[2]/255} green:${t[2]/255} blue:${n[2]/255} alpha:${r[2]/255}`,inputColor1:`current application's CIColor's colorWithRed:${e[3]/255} green:${t[3]/255} blue:${n[3]/255} alpha:${r[3]/255}`,inputWidth:"imgWidth / 8"},{inputColor0:`current application's CIColor's colorWithRed:${e[4]/255} green:${t[4]/255} blue:${n[4]/255} alpha:${r[4]/255}`,inputColor1:`current application's CIColor's colorWithRed:${e[5]/255} green:${t[5]/255} blue:${n[5]/255} alpha:${r[5]/255}`,inputWidth:"imgWidth / 16"},{inputColor0:`current application's CIColor's colorWithRed:${e[6]/255} green:${t[6]/255} blue:${n[6]/255} alpha:${r[6]/255}`,inputColor1:`current application's CIColor's colorWithRed:${e[7]/255} green:${t[7]/255} blue:${n[7]/255} alpha:${r[7]/255}`,inputWidth:"imgWidth / 32"},{inputColor0:`current application's CIColor's colorWithRed:${e[8]/255} green:${t[8]/255} blue:${n[8]/255} alpha:${r[8]/255}`,inputColor1:`current application's CIColor's colorWithRed:${e[9]/255} green:${t[9]/255} blue:${n[9]/255} alpha:${r[9]/255}`,inputWidth:"imgWidth / 64"}],zn=(e,t,n,r)=>[{inputColor0:`current application's CIColor's colorWithRed:${e[0]/255} green:${t[0]/255} blue:${n[0]/255} alpha:${r[0]/255}`,inputColor1:`current application's CIColor's colorWithRed:${e[1]/255} green:${t[1]/255} blue:${n[1]/255} alpha:${r[1]/255}`,inputWidth:"imgWidth / 4"},{inputColor0:`current application's CIColor's colorWithRed:${e[2]/255} green:${t[2]/255} blue:${n[2]/255} alpha:${r[2]/255}`,inputColor1:`current application's CIColor's colorWithRed:${e[3]/255} green:${t[3]/255} blue:${n[3]/255} alpha:${r[3]/255}`,inputWidth:"imgWidth / 8"},{inputColor0:`current application's CIColor's colorWithRed:${e[4]/255} green:${t[4]/255} blue:${n[4]/255} alpha:${r[4]/255}`,inputColor1:`current application's CIColor's colorWithRed:${e[5]/255} green:${t[5]/255} blue:${n[5]/255} alpha:${r[5]/255}`,inputWidth:"imgWidth / 16"},{inputColor0:`current application's CIColor's colorWithRed:${e[6]/255} green:${t[6]/255} blue:${n[6]/255} alpha:${r[6]/255}`,inputColor1:`current application's CIColor's colorWithRed:${e[7]/255} green:${t[7]/255} blue:${n[7]/255} alpha:${r[7]/255}`,inputWidth:"imgWidth / 32"},{inputColor0:`current application's CIColor's colorWithRed:${e[8]/255} green:${t[8]/255} blue:${n[8]/255} alpha:${r[8]/255}`,inputColor1:`current application's CIColor's colorWithRed:${e[9]/255} green:${t[9]/255} blue:${n[9]/255} alpha:${r[9]/255}`,inputWidth:"imgWidth / 64"}],Yn=(e,t,n)=>Array(10).fill(0).map((r,i)=>({inputColor:`current application's CIColor's colorWithRed:${e[i]/255} green:${t[i]/255} blue:${n[i]/255} alpha:1.0`})),Jn=(e,t,n,r)=>[{inputColor0:`current application's CIColor's colorWithRed:${e[0]/255} green:${t[0]/255} blue:${n[0]/255} alpha:${r[0]/255}`,inputColor1:`current application's CIColor's colorWithRed:${e[1]/255} green:${t[1]/255} blue:${n[1]/255} alpha:${r[1]/255}`,inputPoint0:"current application's CIVector's vectorWithX:((random number) * imgWidth) Y:((random number) * imgHeight)",inputPoint1:"current application's CIVector's vectorWithX:((random number) * imgWidth) Y:((random number) * imgHeight)"},{inputColor0:`current application's CIColor's colorWithRed:${e[2]/255} green:${t[2]/255} blue:${n[2]/255} alpha:${r[2]/255}`,inputColor1:`current application's CIColor's colorWithRed:${e[3]/255} green:${t[3]/255} blue:${n[3]/255} alpha:${r[3]/255}`,inputPoint0:"current application's CIVector's vectorWithX:((random number) * imgWidth) Y:((random number) * imgHeight)",inputPoint1:"current application's CIVector's vectorWithX:((random number) * imgWidth) Y:((random number) * imgHeight)"},{inputColor0:`current application's CIColor's colorWithRed:${e[4]/255} green:${t[4]/255} blue:${n[4]/255} alpha:${r[4]/255}`,inputColor1:`current application's CIColor's colorWithRed:${e[5]/255} green:${t[5]/255} blue:${n[5]/255} alpha:${r[5]/255}`,inputPoint0:"current application's CIVector's vectorWithX:((random number) * imgWidth) Y:((random number) * imgHeight)",inputPoint1:"current application's CIVector's vectorWithX:((random number) * imgWidth) Y:((random number) * imgHeight)"},{inputColor0:`current application's CIColor's colorWithRed:${e[6]/255} green:${t[6]/255} blue:${n[6]/255} alpha:${r[6]/255}`,inputColor1:`current application's CIColor's colorWithRed:${e[7]/255} green:${t[7]/255} blue:${n[7]/255} alpha:${r[7]/255}`,inputPoint0:"current application's CIVector's vectorWithX:((random number) * imgWidth) Y:((random number) * imgHeight)",inputPoint1:"current application's CIVector's vectorWithX:((random number) * imgWidth) Y:((random number) * imgHeight)"},{inputColor0:`current application's CIColor's colorWithRed:${e[8]/255} green:${t[8]/255} blue:${n[8]/255} alpha:${r[8]/255}`,inputColor1:`current application's CIColor's colorWithRed:${e[9]/255} green:${t[9]/255} blue:${n[9]/255} alpha:${r[9]/255}`,inputPoint0:"current application's CIVector's vectorWithX:((random number) * imgWidth) Y:((random number) * imgHeight)",inputPoint1:"current application's CIVector's vectorWithX:((random number) * imgWidth) Y:((random number) * imgHeight)"}],Qn=(e,t,n,r)=>[{inputColor0:`current application's CIColor's colorWithRed:${e[0]/255} green:${t[0]/255} blue:${n[0]/255} alpha:${r[0]/255}`,inputColor1:`current application's CIColor's colorWithRed:${e[1]/255} green:${t[1]/255} blue:${n[1]/255} alpha:${r[1]/255}`,inputCenter:"current application's CIVector's vectorWithX:((random number) * imgWidth) Y:((random number) * imgHeight)",inputRadius0:"((random number) * imgWidth)",inputRadius1:"((random number) * imgWidth)"},{inputColor0:`current application's CIColor's colorWithRed:${e[2]/255} green:${t[2]/255} blue:${n[2]/255} alpha:${r[2]/255}`,inputColor1:`current application's CIColor's colorWithRed:${e[3]/255} green:${t[3]/255} blue:${n[3]/255} alpha:${r[3]/255}`,inputCenter:"current application's CIVector's vectorWithX:((random number) * imgWidth) Y:((random number) * imgHeight)",inputRadius0:"((random number) * imgWidth)",inputRadius1:"((random number) * imgWidth)"},{inputColor0:`current application's CIColor's colorWithRed:${e[4]/255} green:${t[4]/255} blue:${n[4]/255} alpha:${r[4]/255}`,inputColor1:`current application's CIColor's colorWithRed:${e[5]/255} green:${t[5]/255} blue:${n[5]/255} alpha:${r[5]/255}`,inputCenter:"current application's CIVector's vectorWithX:((random number) * imgWidth) Y:((random number) * imgHeight)",inputRadius0:"((random number) * imgWidth)",inputRadius1:"((random number) * imgWidth)"},{inputColor0:`current application's CIColor's colorWithRed:${e[6]/255} green:${t[6]/255} blue:${n[6]/255} alpha:${r[6]/255}`,inputColor1:`current application's CIColor's colorWithRed:${e[7]/255} green:${t[7]/255} blue:${n[7]/255} alpha:${r[7]/255}`,inputCenter:"current application's CIVector's vectorWithX:((random number) * imgWidth) Y:((random number) * imgHeight)",inputRadius0:"((random number) * imgWidth)",inputRadius1:"((random number) * imgWidth)"},{inputColor0:`current application's CIColor's colorWithRed:${e[8]/255} green:${t[8]/255} blue:${n[8]/255} alpha:${r[8]/255}`,inputColor1:`current application's CIColor's colorWithRed:${e[9]/255} green:${t[9]/255} blue:${n[9]/255} alpha:${r[9]/255}`,inputCenter:"current application's CIVector's vectorWithX:((random number) * imgWidth) Y:((random number) * imgHeight)",inputRadius0:"((random number) * imgWidth)",inputRadius1:"((random number) * imgWidth)"}],Zn=(e,t,n,r)=>({inputColor:`current application's CIColor's colorWithRed:${e[0]/255} green:${t[0]/255} blue:${n[0]/255} alpha:${r[0]/255}`,inputCrossScale:"((random number) * 10)",inputCrossAngle:"((random number) * 90)",inputCrossOpacity:"((random number) * 9) - 8",inputCrossWidth:"((random number) * imgWidth / 5)",inputEpsilon:"((random number) * 1)",inputRadius:"((random number) * imgWidth / 10)",inputCenter:"current application's CIVector's vectorWithX:((random number) * imgWidth) Y:((random number) * imgHeight)"}),Vn=(e,t,n,r)=>({inputColor:`current application's CIColor's colorWithRed:${e[0]/255} green:${t[0]/255} blue:${n[0]/255} alpha:${r[0]/255}`,inputHaloRadius:"((random number) * imgWidth / 10)",inputHaloWidth:"((random number) * imgWidth / 10)",inputStriationStrength:"((random number) * 1)",inputStriationContrast:"((random number) * 5)",inputTime:"((random number) * 10)",inputCenter:"current application's CIVector's vectorWithX:((random number) * imgWidth) Y:((random number) * imgHeight)",inputHaloOverlap:"((random number) * 0.99)"}),er=(e,t,n,r)=>({inputColor:`current application's CIColor's colorWithRed:${e[0]/255} green:${t[0]/255} blue:${n[0]/255} alpha:${r[0]/255}`,inputSunRadius:"((random number) * imgWidth / 10)",inputMaxStriationRadius:"((random number) * imgWidth / 10)",inputStriationStrength:"((random number) * 1)",inputStriationContrast:"((random number) * 5)",inputTime:"((random number) * 10)",inputCenter:"current application's CIVector's vectorWithX:((random number) * imgWidth) Y:((random number) * imgHeight)"});var or=q(require("os")),ar=q(require("path")),u=require("@raycast/api");var V=q(require("fs")),le=q(require("os")),R=q(require("path"));var v=require("@raycast/api");var tr=async e=>{let t=Array.isArray(e)?e:[e];await Y(`use framework "Foundation"
      use framework "PDFKit"
      use scripting additions
  
      set thePasteboard to current application's NSPasteboard's generalPasteboard()
      thePasteboard's clearContents()
      
      -- Handle PDFs separately
      set pdfPaths to {"${t.filter(n=>n.endsWith(".pdf")).join('", "')}"}
  
      set pdfItems to current application's NSMutableArray's alloc()'s init()
      repeat with pdfPath in pdfPaths
        if length of pdfPath is not 0 then
          set pdfItem to current application's NSPasteboardItem's alloc()'s init()
          set pdfData to current application's NSData's dataWithContentsOfFile:pdfPath
          pdfItem's setData:pdfData forType:(current application's NSPasteboardTypePDF)
          pdfItems's addObject:pdfItem
        end if
      end repeat
  
      if pdfItems's |count|() > 0 then
        thePasteboard's writeObjects:pdfItems
      end if
        
      -- Handle all other image types
      set theFiles to {"${t.join('", "')}"}
    
      set theImages to {}
      repeat with theFile in theFiles
        if length of theFile is not 0 then
          set theImage to (current application's NSImage's alloc()'s initWithContentsOfFile:theFile)
          if theImage is not missing value then
            copy theImage to end of theImages
          end if
        end if
      end repeat
      
      if (count theImages) > 0 then
        thePasteboard's writeObjects:theImages
      end if`)};var Oe=async()=>{let t=(await v.LocalStorage.getItem("itemsToRemove")??"").toString().split(", ");for(let n of t)V.existsSync(n)&&await V.promises.rm(n);await v.LocalStorage.removeItem("itemsToRemove")};var Ee=async e=>{let t=(0,v.getPreferenceValues)();t.imageResultHandling=="copyToClipboard"?(await tr(e),nr(e)):t.imageResultHandling=="openInPreview"&&(console.log(e),await So(e),nr(e))};var So=async e=>{let t=Array.isArray(e)?e:[e],n=t.some(r=>R.default.extname(r)==".svg");await Y(`use framework "Foundation"
    use scripting additions
    set pageImages to {${t.map(r=>`current application's NSURL's fileURLWithPath:"${r}"`).join(", ")}}

    set workspace to current application's NSWorkspace's sharedWorkspace()
    set config to current application's NSWorkspaceOpenConfiguration's configuration()

    ${n?`tell application "Finder"
            set safariPath to POSIX path of ((application file id "com.apple.Safari") as text)
            set safariURL to current application's NSURL's fileURLWithPath:safariPath
          end tell

          workspace's openURLs:pageImages withApplicationAtURL:safariURL configuration:config completionHandler:(missing value)
          
          tell application "Safari"
            set finished to false
            set iter to 0
            repeat while ((count of windows) = 0 or finished is not true) and iter < 10
              delay 0.5
              set iter to iter + 1

              set currentStatus to true
              repeat with doc in (path of documents as list)
                repeat with thePath in {"${t.map(r=>encodeURI(`file://${r}`)).join('", "')}"}
                  if thePath is not in doc then
                    set currentStatus to false
                  end if
                end repeat
              end repeat
              set finished to currentStatus
            end repeat
          end tell
          `:`tell application "Finder"
            set previewPath to POSIX path of ((application file id "com.apple.Preview") as text)
            set previewURL to current application's NSURL's fileURLWithPath:previewPath
          end tell

          workspace's openURLs:pageImages withApplicationAtURL:previewURL configuration:config completionHandler:(missing value)
          
          tell application "Preview"
            set finished to false
            set iter to 0
            repeat while ((count of windows) = 0 or finished is not true) and iter < 10
              delay 0.5
              set iter to iter + 1

              set currentStatus to true
              repeat with doc in (path of documents as list)
                repeat with thePath in {"${t.join('", "')}"}
                  if thePath is not in doc then
                    set currentStatus to false
                  end if
                end repeat
              end repeat
              set finished to currentStatus
            end repeat
          end tell`}`)},nr=e=>{let t=Array.isArray(e)?e:[e];for(let n of t)V.unlinkSync(n)},bo=()=>ke(`use framework "Foundation"
    use scripting additions
    set workspace to current application's NSWorkspace's sharedWorkspace()
    set runningApps to workspace's runningApplications()
    
    set targetApp to missing value
    repeat with theApp in runningApps
      if theApp's ownsMenuBar() then
        set targetApp to theApp
        exit repeat
      end if
    end repeat
    
    if targetApp is missing value then
      return "Finder"
    else
      return targetApp's localizedName() as text
    end if`),Co=()=>{let e="Finder";try{e=bo()}catch{console.error("Couldn't get frontmost application")}try{if(e=="Path Finder")return ke(`tell application "Path Finder"
          if 1 \u2264 (count finder windows) then
            get POSIX path of (target of finder window 1)
          else
            get POSIX path of desktop
          end if
        end tell`)}catch{console.error("Couldn't get current directory of Path Finder")}return ke(`tell application "Finder"
      if 1 <= (count Finder windows) then
        get POSIX path of (target of window 1 as alias)
      else
        get POSIX path of (desktop as alias)
      end if
    end tell`)},Le=(e,t=!1)=>{let n=(0,v.getPreferenceValues)();return e.map(r=>{let i=r;if(n.imageResultHandling=="saveToDownloads"?i=R.default.join(le.homedir(),"Downloads",R.default.basename(i)):n.imageResultHandling=="saveToDesktop"?i=R.default.join(le.homedir(),"Desktop",R.default.basename(i)):(n.imageResultHandling=="saveInContainingFolder"||n.imageResultHandling=="replaceOriginal")&&(n.inputMethod=="Clipboard"||t)?i=R.default.join(Co(),R.default.basename(i)):(n.imageResultHandling=="copyToClipboard"||n.imageResultHandling=="openInPreview")&&(i=R.default.join(le.tmpdir(),R.default.basename(i))),n.imageResultHandling!="replaceOriginal"&&le.tmpdir()!=R.default.dirname(i)){let o=2;for(;V.existsSync(i);)i=R.default.join(R.default.dirname(i),R.default.basename(i,R.default.extname(i))+` (${o})${R.default.extname(i)}`),o++}return i})},Be=async(e,t,n)=>{console.error(t),n?(n.title=e,n.message=t.message,n.style=v.Toast.Style.Failure,n.primaryAction={title:"Copy Error",onAction:async()=>{await v.Clipboard.copy(t.message)}}):n=await(0,v.showToast)({title:e,message:t.message,style:v.Toast.Style.Failure,primaryAction:{title:"Copy Error",onAction:async()=>{await v.Clipboard.copy(t.message)}}})};var A=require("react"),x=require("@raycast/api");var rr=q(require("os")),ir=q(require("path")),P=require("@raycast/api");var K=require("react/jsx-runtime");function O(e){let{generator:t,width:n,height:r,preview:i,options:o,objectType:a,regeneratePreviews:s}=e;return(0,K.jsxs)(P.ActionPanel,{children:[(0,K.jsx)(P.Action,{title:`Create ${a}`,icon:P.Icon.Image,onAction:async()=>{let l=Le([ir.default.join(rr.default.tmpdir(),`${a.replaceAll(" ","_").toLowerCase()}.png`)],!0),c=await(0,P.showToast)({title:`Creating ${a}...`,style:P.Toast.Style.Animated});try{await t.applyMethod(l[0],t.CIFilterName,n,r,o),await Ee(l),c.title=`Created ${a}`,c.style=P.Toast.Style.Success}catch(S){await Be(`Failed To Create ${a}`,S,c)}finally{Oe()}}}),(0,K.jsx)(P.Action,{title:"Randomize Colors",icon:P.Icon.Shuffle,shortcut:{modifiers:["cmd"],key:"r"},onAction:s}),(0,K.jsxs)(P.ActionPanel.Section,{title:"Clipboard Actions",children:[(0,K.jsx)(P.Action.Paste,{title:"Paste Preview In Active App",shortcut:{modifiers:["cmd","shift"],key:"v"},content:{html:`<img src="${i}" />`}}),(0,K.jsx)(P.Action.CopyToClipboard,{title:"Copy Preview Image",shortcut:{modifiers:["cmd","shift"],key:"c"},content:{html:`<img src="${i}" />`}}),(0,K.jsx)(P.Action.CopyToClipboard,{title:"Copy Preview Data URL",content:i,shortcut:{modifiers:["cmd","shift"],key:"u"}})]})]})}var g=require("react/jsx-runtime");function st(e){let{width:t,height:n}=e,[r,i]=(0,A.useState)(!0),[o,a]=(0,A.useState)(Array(5).fill(["",{}])),[s,l]=(0,A.useState)(Array(5).fill(["",{}])),[c,S]=(0,A.useState)(Array(10).fill(["","",{}])),[$,C]=(0,A.useState)(Array(5).fill(["",{}])),[W,G]=(0,A.useState)(Array(5).fill(["",{}])),[T,z]=(0,A.useState)(""),[j,ee]=(0,A.useState)(["",{}]),[te,Se]=(0,A.useState)(["",{}]),[J,be]=(0,A.useState)(["",{}]),Ce=()=>{let m=Array(10).fill(0).map(()=>Math.floor(Math.random()*256)),b=Array(10).fill(0).map(()=>Math.floor(Math.random()*256)),h=Array(10).fill(0).map(()=>Math.floor(Math.random()*256)),k=Array(10).fill(0).map(()=>Math.floor(Math.random()*256));return{redValues:m,greenValues:b,blueValues:h,alphaValues:k}},E=async()=>{i(!0);let{redValues:m,greenValues:b,blueValues:h,alphaValues:k}=Ce();Promise.all([Promise.all(Kn(m,b,h,k).map(async(f,y)=>{let M=await B(d.Checkerboard.CIFilterName,f);a(U=>{let N=[...U];return N[y]=[M,f],N})})),Promise.all(zn(m,b,h,k).map(async(f,y)=>{let M=await B(d.Stripes.CIFilterName,f);l(U=>{let N=[...U];return N[y]=[M,f],N})})),Promise.all(Yn(m,b,h).map(async(f,y)=>{let M=await B(d.ConstantColor.CIFilterName,f);S(U=>{let N=[...U];return N[y]=[M,`#${m[y].toString(16).padEnd(2,"0")}${b[y].toString(16).padEnd(2,"0")}${h[y].toString(16).padEnd(2,"0")}`,f],N})})),Promise.all(Jn(m,b,h,k).map(async(f,y)=>{let M=await B(d.LinearGradient.CIFilterName,f);C(U=>{let N=[...U];return N[y]=[M,f],N})})),Promise.all(Qn(m,b,h,k).map(async(f,y)=>{let M=await B(d.RadialGradient.CIFilterName,f);G(U=>{let N=[...U];return N[y]=[M,f],N})})),Promise.resolve((async()=>{let f=await B(d.Random.CIFilterName,{});z(f)})()),Promise.resolve((async()=>{let f=Zn(m,b,h,k),y=await B(d.StarShine.CIFilterName,f);ee([y,f])})()),Promise.resolve((async()=>{let f=Vn(m,b,h,k),y=await B(d.LenticularHalo.CIFilterName,f);Se([y,f])})()),Promise.resolve((async()=>{let f=er(m,b,h,k),y=await B(d.Sunbeams.CIFilterName,f);be([y,f])})())]).then(()=>i(!1))};(0,A.useEffect)(()=>{E()},[]);let cr=o.map(([m,b],h)=>(0,g.jsx)(x.Grid.Item,{title:`Checkerboard ${h+1}`,content:{source:m==""?d.Checkerboard.thumbnail:m},actions:(0,g.jsx)(O,{objectType:"Checkerboard",generator:d.Checkerboard,width:t,height:n,preview:m,options:b,regeneratePreviews:E})},`Checkerboard ${h+1}`)),pr=s.map(([m,b],h)=>(0,g.jsx)(x.Grid.Item,{title:`Stripes ${h+1}`,content:{source:m==""?d.Stripes.thumbnail:m},actions:(0,g.jsx)(O,{objectType:"Stripes",generator:d.Stripes,width:t,height:n,preview:m,options:b,regeneratePreviews:E})},`Stripes ${h+1}`)),lr=c.map(([m,b,h],k)=>(0,g.jsx)(x.Grid.Item,{title:b,content:{source:m==""?d.ConstantColor.thumbnail:m},actions:(0,g.jsx)(O,{objectType:b,generator:d.ConstantColor,width:t,height:n,preview:m,options:h,regeneratePreviews:E})},`Solid Color ${k+1}`)),mr=$.map(([m,b],h)=>(0,g.jsx)(x.Grid.Item,{title:`Linear Gradient ${h+1}`,content:{source:m==""?d.LinearGradient.thumbnail:m},actions:(0,g.jsx)(O,{objectType:"Linear Gradient",generator:d.LinearGradient,width:t,height:n,preview:m,options:b,regeneratePreviews:E})},`Linear Gradient ${h+1}`)),dr=W.map(([m,b],h)=>(0,g.jsx)(x.Grid.Item,{title:`Radial Gradient ${h+1}`,content:{source:m==""?d.RadialGradient.thumbnail:m},actions:(0,g.jsx)(O,{objectType:"Radial Gradient",generator:d.RadialGradient,width:t,height:n,preview:m,options:b,regeneratePreviews:E})},`Radial Gradient ${h+1}`)),ur=(0,g.jsx)(x.Grid.Item,{title:"Random",content:{source:T==""?d.Random.thumbnail:T},actions:(0,g.jsx)(O,{objectType:"Random",generator:d.Random,width:t,height:n,preview:T,options:{},regeneratePreviews:E})},"Random"),hr=(0,g.jsx)(x.Grid.Item,{title:"Star Shine",content:{source:j[0]==""?d.StarShine.thumbnail:j[0]},actions:(0,g.jsx)(O,{objectType:"Star Shine",generator:d.StarShine,width:t,height:n,preview:j[0],options:j[1],regeneratePreviews:E})},"Star Shine"),fr=(0,g.jsx)(x.Grid.Item,{title:"Lenticular Halo",content:{source:te[0]==""?d.LenticularHalo.thumbnail:te[0]},actions:(0,g.jsx)(O,{objectType:"Lenticular Halo",generator:d.LenticularHalo,width:t,height:n,preview:te[0],options:te[1],regeneratePreviews:E})},"Lenticular Halo"),gr=(0,g.jsx)(x.Grid.Item,{title:"Sunbeams",content:{source:J[0]==""?d.Sunbeams.thumbnail:J[0]},actions:(0,g.jsx)(O,{objectType:"Sunbeams",generator:d.Sunbeams,width:t,height:n,preview:J[0],options:J[1],regeneratePreviews:E})},"Sunbeams");return(0,g.jsxs)(x.Grid,{navigationTitle:"Image Pattern Options",isLoading:r,inset:x.Grid.Inset.Small,children:[(0,g.jsxs)(x.Grid.Section,{title:"Patterns",children:[cr,pr]}),(0,g.jsx)(x.Grid.Section,{title:"Solid Colors",children:lr}),(0,g.jsxs)(x.Grid.Section,{title:"Gradients",children:[mr,dr]}),(0,g.jsxs)(x.Grid.Section,{title:"Other",children:[fr,ur,hr,gr]})]})}var H=require("react/jsx-runtime");function me(e){let{width:t,height:n}=e;return(0,H.jsxs)(u.ActionPanel,{children:[(0,H.jsx)(u.Action.Push,{title:`Select Size ${t}x${n}`,icon:u.Icon.Center,target:(0,H.jsx)(st,{width:t,height:n})}),(0,H.jsx)(u.Action,{title:`Create ${t}x${n} Placeholder`,icon:u.Icon.Image,shortcut:{modifiers:["cmd"],key:"p"},onAction:async()=>{let r=Le([ar.default.join(or.default.tmpdir(),`${t}x${n}.png`)],!0),i=await(0,u.showToast)({title:"Creating Placeholder...",style:u.Toast.Style.Animated});try{await Ie(t,n,r[0]),await Ee(r),i.title="Created Placeholder",i.style=u.Toast.Style.Success}catch(o){await Be("Failed To Create Placeholder",o,i)}finally{Oe()}}}),(0,H.jsxs)(u.ActionPanel.Section,{title:"Clipboard Actions",children:[(0,H.jsx)(u.Action,{title:"Paste Placeholder In Active App",icon:u.Icon.Clipboard,shortcut:{modifiers:["cmd","shift"],key:"v"},onAction:async()=>{let r=await Ie(t,n);await u.Clipboard.paste({html:`<img src="${r}" />`}),await(0,u.showHUD)("Pasted Placeholder Image")}}),(0,H.jsx)(u.Action,{title:"Copy Placeholder Image",icon:u.Icon.Clipboard,shortcut:{modifiers:["cmd","shift"],key:"c"},onAction:async()=>{let r=await Ie(t,n);await u.Clipboard.copy({html:`<img src="${r}" />`}),await(0,u.showHUD)("Copied Placeholder Image")}}),(0,H.jsx)(u.Action,{title:"Copy Placeholder Data URL",icon:u.Icon.Clipboard,shortcut:{modifiers:["cmd","shift"],key:"u"},onAction:async()=>{let r=await Ie(t,n);await u.Clipboard.copy(r),await(0,u.showHUD)("Copied Placeholder Data URL")}})]})]})}var F=require("react/jsx-runtime");function sr(){let e=X.map(i=>X.filter(o=>i==o).map(o=>(0,F.jsx)(D.Grid.Item,{title:`${i}x${o}`,content:{source:`thumbnails/${i}x${o}.webp`},actions:(0,F.jsx)(me,{width:i,height:o})},`${i}x${o}`))),t=X.map(i=>X.filter(o=>i/o>4/3&&i/o<15/3).map(o=>(0,F.jsx)(D.Grid.Item,{title:`${i}x${o}`,content:{source:`thumbnails/${i}x${o}.webp`,tintColor:D.Color.Red},actions:(0,F.jsx)(me,{width:i,height:o})},`${i}x${o}`))),n=X.map(i=>X.filter(o=>o/i>4/3&&o/i<15/3).map(o=>(0,F.jsx)(D.Grid.Item,{title:`${i}x${o}`,content:{source:`thumbnails/${i}x${o}.webp`,tintColor:D.Color.Green},actions:(0,F.jsx)(me,{width:i,height:o})},`${i}x${o}`))),r=X.map(i=>X.filter(o=>o/i>15/3||i/o>15/3).map(o=>(0,F.jsx)(D.Grid.Item,{title:`${i}x${o}`,content:{source:`thumbnails/${i}x${o}.webp`,tintColor:D.Color.Blue},actions:(0,F.jsx)(me,{width:i,height:o})},`${i}x${o}`)));return(0,F.jsxs)(D.Grid,{navigationTitle:"Image Size Options",searchBarPlaceholder:"Search image sizes...",inset:D.Grid.Inset.Small,isLoading:!1,children:[(0,F.jsx)(D.Grid.Section,{title:"Square",children:e}),(0,F.jsx)(D.Grid.Section,{title:"Wide",children:t}),(0,F.jsx)(D.Grid.Section,{title:"Tall",children:n}),(0,F.jsx)(D.Grid.Section,{title:"Extreme",children:r})]})}
