var X=Object.create;var x=Object.defineProperty;var _=Object.getOwnPropertyDescriptor;var j=Object.getOwnPropertyNames;var z=Object.getPrototypeOf,H=Object.prototype.hasOwnProperty;var k=e=>x(e,"__esModule",{value:!0});var V=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),q=(e,t)=>{for(var o in t)x(e,o,{get:t[o],enumerable:!0})},P=(e,t,o,a)=>{if(t&&typeof t=="object"||typeof t=="function")for(let u of j(t))!H.call(e,u)&&(o||u!=="default")&&x(e,u,{get:()=>t[u],enumerable:!(a=_(t,u))||a.enumerable});return e},L=(e,t)=>P(k(x(e!=null?X(z(e)):{},"default",!t&&e&&e.__esModule?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e),W=(e=>(t,o)=>e&&e.get(t)||(o=P(k({}),t,1),e&&e.set(t,o),o))(typeof WeakMap!="undefined"?new WeakMap:0);var $=V((Z,y)=>{(function(){var e={milliseconds:{patterns:["millisecond","mil","milli","ms"],value:.001,formats:{chrono:null,micro:"ms",short:"mil",long:"millisecond",plural:"milliseconds"}},seconds:{patterns:["second","sec","s"],value:1,formats:{chrono:"",micro:"s",short:"sec",long:"second",plural:"seconds"}},minutes:{patterns:["minute","min","m(?!s)"],value:60,formats:{chrono:":",micro:"m",short:"min",long:"minute",plural:"minutes"}},hours:{patterns:["hour","hr","h"],value:3600,formats:{chrono:":",micro:"h",short:"hr",long:"hour",plural:"hours"}},days:{patterns:["day","dy","d"],value:86400,formats:{chrono:":",micro:"d",short:"day",long:"day",plural:"days"}},weeks:{patterns:["week","wk","w"],value:604800,formats:{chrono:":",micro:"w",short:"wk",long:"week",plural:"weeks"}},months:{patterns:["month","mon","mo","mth"],value:2628e3,formats:{chrono:":",micro:"m",short:"mth",long:"month",plural:"months"}},years:{patterns:["year","yr","y"],value:31536e3,formats:{chrono:":",micro:"y",short:"yr",long:"year",plural:"years"}}},t=function(n,i){if(!T(n))throw"juration.stringify(): Unable to stringify a non-numeric value";if(typeof i=="object"&&i.format!==void 0&&i.format!=="micro"&&i.format!=="short"&&i.format!=="long"&&i.format!=="chrono")throw"juration.stringify(): format cannot be '"+i.format+"', and must be either 'chrono', micro', 'short', or 'long'";var l={format:"short",units:void 0},m=v(l,i),g=["years","months","days","hours","minutes","seconds"],c=[];m.format!=="chrono"&&g.push("milliseconds");for(var h=n,f=0,s=0,b=g.length;s<b&&(m.units==null||f<m.units);s++){var d=e[g[s]];c[s]=Math.floor(Math.round(h*1e3)/1e3/d.value),(c[s]>0||f>0)&&f++,m.format==="micro"||m.format==="chrono"?c[s]+=d.formats[m.format]:c[s]+=" "+u(c[s],d.formats[m.format]),h=h%d.value}var A="";for(s=0,b=c.length;s<b;s++)c[s].charAt(0)!=="0"&&m.format!="chrono"?A+=c[s]+" ":m.format=="chrono"&&(A+=a(c[s]+"","0",s==c.length-1?2:3));return A.replace(/\s+$/,"").replace(/^(00:)+/g,"").replace(/^0/,"")},o=function(n){for(var i in e)for(var l=0,m=e[i].patterns.length;l<m;l++){var g=new RegExp("((?:\\d+\\.\\d+)|\\d+)\\s?("+e[i].patterns[l]+"s?(?=\\s|\\d|\\b))","gi");n=n.replace(g,function(b,d,A){return" "+(d*e[i].value).toString()+" "})}for(var c=0,h=n.replace(/(?!\.)\W+/g," ").replace(/^\s+|\s+$|(?:and|plus|with)\s?/g,"").split(" "),f=0,s=h.length;f<s;f++)if(h[f]&&isFinite(h[f]))c+=parseFloat(h[f]);else throw h[f]?"juration.parse(): Unable to parse: "+h[f].replace(/^\d+/g,""):"juration.parse(): Unable to parse: a falsey value";return c},a=function(n,i,l){if(!n||!i||n.length>=l)return n;for(var m=(l-n.length)/i.length,g=0;g<m;g++)n=i+n;return n},u=function(n,i,l){return n==1?i:l||i+"s"},T=function(n){return!isNaN(parseFloat(n))&&isFinite(n)},v=function(n,i){for(var l in i)i[l]!==void 0&&(n[l]=i[l]);return n},S=function(n){if(typeof require<"u"){require("./languages/"+n);return}},C={UNITS:e,setLanguage:S,parse:o,stringify:t,humanize:t};typeof y=="object"&&y&&typeof y.exports=="object"?y.exports=C:(window.juration=C,typeof define=="function"&&define.amd&&define("juration",[],function(){return C}))})()});var Q={};q(Q,{default:()=>R});var r=require("@raycast/api"),p=require("react");var F=require("child_process"),w=L(require("fs")),I=L($());function M(e){if(e=="X"){w.writeFileSync("/Users/willpayne/bin/Config/Touchbar/Timer/timerEnd","X");return}let t=new Date;t.setSeconds(t.getSeconds()+I.default.parse(e));let o=I.default.humanize(I.default.parse(e),{format:"chrono"}),a=Math.floor(+t/1e3);return w.writeFileSync("/Users/willpayne/bin/Config/Touchbar/Timer/timerEnd",`${a}`),o}function N(){let e=w.readFileSync("/Users/willpayne/bin/Config/Touchbar/Timer/timerEnd","utf8");if(e==="X")return"00:00";let t=parseInt(e)-Math.floor(Date.now()/1e3),o=t%3600%60,a=Math.floor((t-o)%3600/60),u=Math.floor((t-a*60-o)/3600),T=`${o}`,v=`${a}`,S=`${u}`;return(o+"").length==1&&(T="0"+o),(a+"").length==1&&(v="0"+a),(u+"").length==1&&(S="0"+u),u>0?S+":"+v+":"+T:isNaN(o)||isNaN(a)?"":v+":"+T}function E(){return new Promise((e,t)=>{(0,F.exec)("osascript '/Users/willpayne/bin/Config/Touchbar/Timer/GetVisibleState.scpt'",(o,a,u)=>{e(a==`true
`)})})}function D(){(0,F.exec)("osascript '/Users/willpayne/bin/Config/Touchbar/Timer/ToggleVisible.scpt'")}function R(){let[e,t]=(0,p.useState)("");return _jsx(r.List,{searchBarPlaceholder:"Add a timer",onSearchTextChange:t,enableFiltering:!0,throttle:!0},_jsx(B,{searchText:e}),_jsx(U,{time:"5 Mins"}),_jsx(U,{time:"10 Mins"}),_jsx(U,{time:"25 Mins"}),_jsx(U,{time:"50 Mins"}),_jsx(G,null),_jsx(J,null))}function B({searchText:e}){let{time:t}=K();return _jsx(r.List.Item,{key:t,title:t==""?"Start timer":`Current time: ${t}`,accessories:[{text:e}],keywords:[e],actions:_jsx(r.ActionPanel,null,_jsx(r.Action,{title:"Set Timer",onAction:()=>{try{let o=M(e);(0,r.closeMainWindow)(),(0,r.popToRoot)(),(0,r.showHUD)("Timer set to "+o)}catch{(0,r.showToast)({title:"That's not a valid time",style:r.Toast.Style.Failure})}}}))})}function U({time:e}){return _jsx(r.List.Item,{title:e,actions:_jsx(r.ActionPanel,null,_jsx(r.Action,{title:"Set Timer",onAction:()=>{let t=M(e);(0,r.closeMainWindow)(),(0,r.popToRoot)(),(0,r.showHUD)("Timer set to "+t)}}))})}function G(){return _jsx(r.List.Item,{title:"Reset",actions:_jsx(r.ActionPanel,null,_jsx(r.Action,{title:"Set Timer",onAction:()=>{M("X"),(0,r.showHUD)("Timer reset"),(0,r.popToRoot)(),(0,r.closeMainWindow)()}}))})}function J(){let[e,t]=(0,p.useState)(!0);return(0,p.useEffect)(()=>{E().then(o=>t(o))},[]),_jsx(r.List.Item,{title:"Toggle",accessories:[{text:e?"Visible":"Hidden"}],actions:_jsx(r.ActionPanel,null,_jsx(r.Action,{title:"Set Timer",onAction:()=>{t(o=>!o),D(),(0,r.showHUD)(e?"Timer not visible":"Timer visible"),(0,r.popToRoot)(),(0,r.closeMainWindow)()}}))})}function K(){let[e,t]=(0,p.useState)(N());function o(){let a=N();t(a)}return(0,p.useEffect)(()=>{let a=setInterval(o,1e3);return()=>clearInterval(a)},[]),{time:e}}module.exports=W(Q);0&&(module.exports={});
