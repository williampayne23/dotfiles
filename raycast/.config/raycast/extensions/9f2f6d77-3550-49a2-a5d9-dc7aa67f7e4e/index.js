var In=Object.create;var ce=Object.defineProperty,Ln=Object.defineProperties,Dn=Object.getOwnPropertyDescriptor,Un=Object.getOwnPropertyDescriptors,Mn=Object.getOwnPropertyNames,Kt=Object.getOwnPropertySymbols,Nn=Object.getPrototypeOf,Yt=Object.prototype.hasOwnProperty,Bn=Object.prototype.propertyIsEnumerable;var Qt=(t,e,r)=>e in t?ce(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,E=(t,e)=>{for(var r in e||(e={}))Yt.call(e,r)&&Qt(t,r,e[r]);if(Kt)for(var r of Kt(e))Bn.call(e,r)&&Qt(t,r,e[r]);return t},A=(t,e)=>Ln(t,Un(e)),Xt=t=>ce(t,"__esModule",{value:!0});var v=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),zn=(t,e)=>{for(var r in e)ce(t,r,{get:e[r],enumerable:!0})},Zt=(t,e,r,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of Mn(e))!Yt.call(t,n)&&(r||n!=="default")&&ce(t,n,{get:()=>e[n],enumerable:!(s=Dn(e,n))||s.enumerable});return t},$n=(t,e)=>Zt(Xt(ce(t!=null?In(Nn(t)):{},"default",!e&&t&&t.__esModule?{get:()=>t.default,enumerable:!0}:{value:t,enumerable:!0})),t),Fn=(t=>(e,r)=>t&&t.get(e)||(r=Zt(Xt({}),e,1),t&&t.set(e,r),r))(typeof WeakMap!="undefined"?new WeakMap:0);var B=v((N,be)=>{"use strict";Object.defineProperty(N,"__esModule",{value:!0});var er=["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function Vn(t){return er.includes(t)}var Wn=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","FormData","URLSearchParams","HTMLElement",...er];function Gn(t){return Wn.includes(t)}var Jn=["null","undefined","string","number","bigint","boolean","symbol"];function Kn(t){return Jn.includes(t)}function Y(t){return e=>typeof e===t}var{toString:tr}=Object.prototype,ue=t=>{let e=tr.call(t).slice(8,-1);if(/HTML\w+Element/.test(e)&&a.domElement(t))return"HTMLElement";if(Gn(e))return e},R=t=>e=>ue(e)===t;function a(t){if(t===null)return"null";switch(typeof t){case"undefined":return"undefined";case"string":return"string";case"number":return"number";case"boolean":return"boolean";case"function":return"Function";case"bigint":return"bigint";case"symbol":return"symbol";default:}if(a.observable(t))return"Observable";if(a.array(t))return"Array";if(a.buffer(t))return"Buffer";let e=ue(t);if(e)return e;if(t instanceof String||t instanceof Boolean||t instanceof Number)throw new TypeError("Please don't use object wrappers for primitive types");return"Object"}a.undefined=Y("undefined");a.string=Y("string");var Qn=Y("number");a.number=t=>Qn(t)&&!a.nan(t);a.bigint=Y("bigint");a.function_=Y("function");a.null_=t=>t===null;a.class_=t=>a.function_(t)&&t.toString().startsWith("class ");a.boolean=t=>t===!0||t===!1;a.symbol=Y("symbol");a.numericString=t=>a.string(t)&&!a.emptyStringOrWhitespace(t)&&!Number.isNaN(Number(t));a.array=(t,e)=>Array.isArray(t)?a.function_(e)?t.every(e):!0:!1;a.buffer=t=>{var e,r,s,n;return(n=(s=(r=(e=t)===null||e===void 0?void 0:e.constructor)===null||r===void 0?void 0:r.isBuffer)===null||s===void 0?void 0:s.call(r,t))!==null&&n!==void 0?n:!1};a.nullOrUndefined=t=>a.null_(t)||a.undefined(t);a.object=t=>!a.null_(t)&&(typeof t=="object"||a.function_(t));a.iterable=t=>{var e;return a.function_((e=t)===null||e===void 0?void 0:e[Symbol.iterator])};a.asyncIterable=t=>{var e;return a.function_((e=t)===null||e===void 0?void 0:e[Symbol.asyncIterator])};a.generator=t=>a.iterable(t)&&a.function_(t.next)&&a.function_(t.throw);a.asyncGenerator=t=>a.asyncIterable(t)&&a.function_(t.next)&&a.function_(t.throw);a.nativePromise=t=>R("Promise")(t);var Yn=t=>{var e,r;return a.function_((e=t)===null||e===void 0?void 0:e.then)&&a.function_((r=t)===null||r===void 0?void 0:r.catch)};a.promise=t=>a.nativePromise(t)||Yn(t);a.generatorFunction=R("GeneratorFunction");a.asyncGeneratorFunction=t=>ue(t)==="AsyncGeneratorFunction";a.asyncFunction=t=>ue(t)==="AsyncFunction";a.boundFunction=t=>a.function_(t)&&!t.hasOwnProperty("prototype");a.regExp=R("RegExp");a.date=R("Date");a.error=R("Error");a.map=t=>R("Map")(t);a.set=t=>R("Set")(t);a.weakMap=t=>R("WeakMap")(t);a.weakSet=t=>R("WeakSet")(t);a.int8Array=R("Int8Array");a.uint8Array=R("Uint8Array");a.uint8ClampedArray=R("Uint8ClampedArray");a.int16Array=R("Int16Array");a.uint16Array=R("Uint16Array");a.int32Array=R("Int32Array");a.uint32Array=R("Uint32Array");a.float32Array=R("Float32Array");a.float64Array=R("Float64Array");a.bigInt64Array=R("BigInt64Array");a.bigUint64Array=R("BigUint64Array");a.arrayBuffer=R("ArrayBuffer");a.sharedArrayBuffer=R("SharedArrayBuffer");a.dataView=R("DataView");a.directInstanceOf=(t,e)=>Object.getPrototypeOf(t)===e.prototype;a.urlInstance=t=>R("URL")(t);a.urlString=t=>{if(!a.string(t))return!1;try{return new URL(t),!0}catch{return!1}};a.truthy=t=>Boolean(t);a.falsy=t=>!t;a.nan=t=>Number.isNaN(t);a.primitive=t=>a.null_(t)||Kn(typeof t);a.integer=t=>Number.isInteger(t);a.safeInteger=t=>Number.isSafeInteger(t);a.plainObject=t=>{if(tr.call(t)!=="[object Object]")return!1;let e=Object.getPrototypeOf(t);return e===null||e===Object.getPrototypeOf({})};a.typedArray=t=>Vn(ue(t));var Xn=t=>a.safeInteger(t)&&t>=0;a.arrayLike=t=>!a.nullOrUndefined(t)&&!a.function_(t)&&Xn(t.length);a.inRange=(t,e)=>{if(a.number(e))return t>=Math.min(0,e)&&t<=Math.max(e,0);if(a.array(e)&&e.length===2)return t>=Math.min(...e)&&t<=Math.max(...e);throw new TypeError(`Invalid range: ${JSON.stringify(e)}`)};var Zn=1,ei=["innerHTML","ownerDocument","style","attributes","nodeValue"];a.domElement=t=>a.object(t)&&t.nodeType===Zn&&a.string(t.nodeName)&&!a.plainObject(t)&&ei.every(e=>e in t);a.observable=t=>{var e,r,s,n;return t?t===((r=(e=t)[Symbol.observable])===null||r===void 0?void 0:r.call(e))||t===((n=(s=t)["@@observable"])===null||n===void 0?void 0:n.call(s)):!1};a.nodeStream=t=>a.object(t)&&a.function_(t.pipe)&&!a.observable(t);a.infinite=t=>t===1/0||t===-1/0;var rr=t=>e=>a.integer(e)&&Math.abs(e%2)===t;a.evenInteger=rr(0);a.oddInteger=rr(1);a.emptyArray=t=>a.array(t)&&t.length===0;a.nonEmptyArray=t=>a.array(t)&&t.length>0;a.emptyString=t=>a.string(t)&&t.length===0;a.nonEmptyString=t=>a.string(t)&&t.length>0;var ti=t=>a.string(t)&&!/\S/.test(t);a.emptyStringOrWhitespace=t=>a.emptyString(t)||ti(t);a.emptyObject=t=>a.object(t)&&!a.map(t)&&!a.set(t)&&Object.keys(t).length===0;a.nonEmptyObject=t=>a.object(t)&&!a.map(t)&&!a.set(t)&&Object.keys(t).length>0;a.emptySet=t=>a.set(t)&&t.size===0;a.nonEmptySet=t=>a.set(t)&&t.size>0;a.emptyMap=t=>a.map(t)&&t.size===0;a.nonEmptyMap=t=>a.map(t)&&t.size>0;a.propertyKey=t=>a.any([a.string,a.number,a.symbol],t);a.formData=t=>R("FormData")(t);a.urlSearchParams=t=>R("URLSearchParams")(t);var sr=(t,e,r)=>{if(!a.function_(e))throw new TypeError(`Invalid predicate: ${JSON.stringify(e)}`);if(r.length===0)throw new TypeError("Invalid number of values");return t.call(r,e)};a.any=(t,...e)=>(a.array(t)?t:[t]).some(s=>sr(Array.prototype.some,s,e));a.all=(t,...e)=>sr(Array.prototype.every,t,e);var _=(t,e,r,s={})=>{if(!t){let{multipleValues:n}=s,o=n?`received values of types ${[...new Set(r.map(i=>`\`${a(i)}\``))].join(", ")}`:`received value of type \`${a(r)}\``;throw new TypeError(`Expected value which is \`${e}\`, ${o}.`)}};N.assert={undefined:t=>_(a.undefined(t),"undefined",t),string:t=>_(a.string(t),"string",t),number:t=>_(a.number(t),"number",t),bigint:t=>_(a.bigint(t),"bigint",t),function_:t=>_(a.function_(t),"Function",t),null_:t=>_(a.null_(t),"null",t),class_:t=>_(a.class_(t),"Class",t),boolean:t=>_(a.boolean(t),"boolean",t),symbol:t=>_(a.symbol(t),"symbol",t),numericString:t=>_(a.numericString(t),"string with a number",t),array:(t,e)=>{_(a.array(t),"Array",t),e&&t.forEach(e)},buffer:t=>_(a.buffer(t),"Buffer",t),nullOrUndefined:t=>_(a.nullOrUndefined(t),"null or undefined",t),object:t=>_(a.object(t),"Object",t),iterable:t=>_(a.iterable(t),"Iterable",t),asyncIterable:t=>_(a.asyncIterable(t),"AsyncIterable",t),generator:t=>_(a.generator(t),"Generator",t),asyncGenerator:t=>_(a.asyncGenerator(t),"AsyncGenerator",t),nativePromise:t=>_(a.nativePromise(t),"native Promise",t),promise:t=>_(a.promise(t),"Promise",t),generatorFunction:t=>_(a.generatorFunction(t),"GeneratorFunction",t),asyncGeneratorFunction:t=>_(a.asyncGeneratorFunction(t),"AsyncGeneratorFunction",t),asyncFunction:t=>_(a.asyncFunction(t),"AsyncFunction",t),boundFunction:t=>_(a.boundFunction(t),"Function",t),regExp:t=>_(a.regExp(t),"RegExp",t),date:t=>_(a.date(t),"Date",t),error:t=>_(a.error(t),"Error",t),map:t=>_(a.map(t),"Map",t),set:t=>_(a.set(t),"Set",t),weakMap:t=>_(a.weakMap(t),"WeakMap",t),weakSet:t=>_(a.weakSet(t),"WeakSet",t),int8Array:t=>_(a.int8Array(t),"Int8Array",t),uint8Array:t=>_(a.uint8Array(t),"Uint8Array",t),uint8ClampedArray:t=>_(a.uint8ClampedArray(t),"Uint8ClampedArray",t),int16Array:t=>_(a.int16Array(t),"Int16Array",t),uint16Array:t=>_(a.uint16Array(t),"Uint16Array",t),int32Array:t=>_(a.int32Array(t),"Int32Array",t),uint32Array:t=>_(a.uint32Array(t),"Uint32Array",t),float32Array:t=>_(a.float32Array(t),"Float32Array",t),float64Array:t=>_(a.float64Array(t),"Float64Array",t),bigInt64Array:t=>_(a.bigInt64Array(t),"BigInt64Array",t),bigUint64Array:t=>_(a.bigUint64Array(t),"BigUint64Array",t),arrayBuffer:t=>_(a.arrayBuffer(t),"ArrayBuffer",t),sharedArrayBuffer:t=>_(a.sharedArrayBuffer(t),"SharedArrayBuffer",t),dataView:t=>_(a.dataView(t),"DataView",t),urlInstance:t=>_(a.urlInstance(t),"URL",t),urlString:t=>_(a.urlString(t),"string with a URL",t),truthy:t=>_(a.truthy(t),"truthy",t),falsy:t=>_(a.falsy(t),"falsy",t),nan:t=>_(a.nan(t),"NaN",t),primitive:t=>_(a.primitive(t),"primitive",t),integer:t=>_(a.integer(t),"integer",t),safeInteger:t=>_(a.safeInteger(t),"integer",t),plainObject:t=>_(a.plainObject(t),"plain object",t),typedArray:t=>_(a.typedArray(t),"TypedArray",t),arrayLike:t=>_(a.arrayLike(t),"array-like",t),domElement:t=>_(a.domElement(t),"HTMLElement",t),observable:t=>_(a.observable(t),"Observable",t),nodeStream:t=>_(a.nodeStream(t),"Node.js Stream",t),infinite:t=>_(a.infinite(t),"infinite number",t),emptyArray:t=>_(a.emptyArray(t),"empty array",t),nonEmptyArray:t=>_(a.nonEmptyArray(t),"non-empty array",t),emptyString:t=>_(a.emptyString(t),"empty string",t),nonEmptyString:t=>_(a.nonEmptyString(t),"non-empty string",t),emptyStringOrWhitespace:t=>_(a.emptyStringOrWhitespace(t),"empty string or whitespace",t),emptyObject:t=>_(a.emptyObject(t),"empty object",t),nonEmptyObject:t=>_(a.nonEmptyObject(t),"non-empty object",t),emptySet:t=>_(a.emptySet(t),"empty set",t),nonEmptySet:t=>_(a.nonEmptySet(t),"non-empty set",t),emptyMap:t=>_(a.emptyMap(t),"empty map",t),nonEmptyMap:t=>_(a.nonEmptyMap(t),"non-empty map",t),propertyKey:t=>_(a.propertyKey(t),"PropertyKey",t),formData:t=>_(a.formData(t),"FormData",t),urlSearchParams:t=>_(a.urlSearchParams(t),"URLSearchParams",t),evenInteger:t=>_(a.evenInteger(t),"even integer",t),oddInteger:t=>_(a.oddInteger(t),"odd integer",t),directInstanceOf:(t,e)=>_(a.directInstanceOf(t,e),"T",t),inRange:(t,e)=>_(a.inRange(t,e),"in range",t),any:(t,...e)=>_(a.any(t,...e),"predicate returns truthy for any value",e,{multipleValues:!0}),all:(t,...e)=>_(a.all(t,...e),"predicate returns truthy for all values",e,{multipleValues:!0})};Object.defineProperties(a,{class:{value:a.class_},function:{value:a.function_},null:{value:a.null_}});Object.defineProperties(N.assert,{class:{value:N.assert.class_},function:{value:N.assert.function_},null:{value:N.assert.null_}});N.default=a;be.exports=a;be.exports.default=a;be.exports.assert=N.assert});var nr=v((Ya,Me)=>{"use strict";var Ue=class extends Error{constructor(e){super(e||"Promise was canceled");this.name="CancelError"}get isCanceled(){return!0}},he=class{static fn(e){return(...r)=>new he((s,n,o)=>{r.push(o),e(...r).then(s,n)})}constructor(e){this._cancelHandlers=[],this._isPending=!0,this._isCanceled=!1,this._rejectOnCancel=!0,this._promise=new Promise((r,s)=>{this._reject=s;let n=c=>{(!this._isCanceled||!i.shouldReject)&&(this._isPending=!1,r(c))},o=c=>{this._isPending=!1,s(c)},i=c=>{if(!this._isPending)throw new Error("The `onCancel` handler was attached after the promise settled.");this._cancelHandlers.push(c)};return Object.defineProperties(i,{shouldReject:{get:()=>this._rejectOnCancel,set:c=>{this._rejectOnCancel=c}}}),e(n,o,i)})}then(e,r){return this._promise.then(e,r)}catch(e){return this._promise.catch(e)}finally(e){return this._promise.finally(e)}cancel(e){if(!(!this._isPending||this._isCanceled)){if(this._isCanceled=!0,this._cancelHandlers.length>0)try{for(let r of this._cancelHandlers)r()}catch(r){this._reject(r);return}this._rejectOnCancel&&this._reject(new Ue(e))}}get isCanceled(){return this._isCanceled}};Object.setPrototypeOf(he.prototype,Promise.prototype);Me.exports=he;Me.exports.CancelError=Ue});var ir=v((Be,ze)=>{"use strict";Object.defineProperty(Be,"__esModule",{value:!0});function ri(t){return t.encrypted}var Ne=(t,e)=>{let r;typeof e=="function"?r={connect:e}:r=e;let s=typeof r.connect=="function",n=typeof r.secureConnect=="function",o=typeof r.close=="function",i=()=>{s&&r.connect(),ri(t)&&n&&(t.authorized?r.secureConnect():t.authorizationError||t.once("secureConnect",r.secureConnect)),o&&t.once("close",r.close)};t.writable&&!t.connecting?i():t.connecting?t.once("connect",i):t.destroyed&&o&&r.close(t._hadError)};Be.default=Ne;ze.exports=Ne;ze.exports.default=Ne});var or=v((Fe,Ve)=>{"use strict";Object.defineProperty(Fe,"__esModule",{value:!0});var si=ir(),ni=require("util"),ii=Number(process.versions.node.split(".")[0]),$e=t=>{if(t.timings)return t.timings;let e={start:Date.now(),socket:void 0,lookup:void 0,connect:void 0,secureConnect:void 0,upload:void 0,response:void 0,end:void 0,error:void 0,abort:void 0,phases:{wait:void 0,dns:void 0,tcp:void 0,tls:void 0,request:void 0,firstByte:void 0,download:void 0,total:void 0}};t.timings=e;let r=c=>{let h=c.emit.bind(c);c.emit=(l,...g)=>(l==="error"&&(e.error=Date.now(),e.phases.total=e.error-e.start,c.emit=h),h(l,...g))};r(t);let s=()=>{e.abort=Date.now(),(!e.response||ii>=13)&&(e.phases.total=Date.now()-e.start)};t.prependOnceListener("abort",s);let n=c=>{if(e.socket=Date.now(),e.phases.wait=e.socket-e.start,ni.types.isProxy(c))return;let h=()=>{e.lookup=Date.now(),e.phases.dns=e.lookup-e.socket};c.prependOnceListener("lookup",h),si.default(c,{connect:()=>{e.connect=Date.now(),e.lookup===void 0&&(c.removeListener("lookup",h),e.lookup=e.connect,e.phases.dns=e.lookup-e.socket),e.phases.tcp=e.connect-e.lookup},secureConnect:()=>{e.secureConnect=Date.now(),e.phases.tls=e.secureConnect-e.connect}})};t.socket?n(t.socket):t.prependOnceListener("socket",n);let o=()=>{var c;e.upload=Date.now(),e.phases.request=e.upload-((c=e.secureConnect)!==null&&c!==void 0?c:e.connect)};return(()=>typeof t.writableFinished=="boolean"?t.writableFinished:t.finished&&t.outputSize===0&&(!t.socket||t.socket.writableLength===0))()?o():t.prependOnceListener("finish",o),t.prependOnceListener("response",c=>{e.response=Date.now(),e.phases.firstByte=e.response-e.upload,c.timings=e,r(c),c.prependOnceListener("end",()=>{e.end=Date.now(),e.phases.download=e.end-e.response,e.phases.total=e.end-e.start}),c.prependOnceListener("aborted",s)}),e};Fe.default=$e;Ve.exports=$e;Ve.exports.default=$e});var dr=v((Xa,Ke)=>{"use strict";var{V4MAPPED:oi,ADDRCONFIG:ai,ALL:fr,promises:{Resolver:ar},lookup:ci}=require("dns"),{promisify:We}=require("util"),ui=require("os"),X=Symbol("cacheableLookupCreateConnection"),Ge=Symbol("cacheableLookupInstance"),cr=Symbol("expires"),hi=typeof fr=="number",ur=t=>{if(!(t&&typeof t.createConnection=="function"))throw new Error("Expected an Agent instance as the first argument")},li=t=>{for(let e of t)e.family!==6&&(e.address=`::ffff:${e.address}`,e.family=6)},hr=()=>{let t=!1,e=!1;for(let r of Object.values(ui.networkInterfaces()))for(let s of r)if(!s.internal&&(s.family==="IPv6"?e=!0:t=!0,t&&e))return{has4:t,has6:e};return{has4:t,has6:e}},fi=t=>Symbol.iterator in t,lr={ttl:!0},di={all:!0},Je=class{constructor({cache:e=new Map,maxTtl:r=1/0,fallbackDuration:s=3600,errorTtl:n=.15,resolver:o=new ar,lookup:i=ci}={}){if(this.maxTtl=r,this.errorTtl=n,this._cache=e,this._resolver=o,this._dnsLookup=We(i),this._resolver instanceof ar?(this._resolve4=this._resolver.resolve4.bind(this._resolver),this._resolve6=this._resolver.resolve6.bind(this._resolver)):(this._resolve4=We(this._resolver.resolve4.bind(this._resolver)),this._resolve6=We(this._resolver.resolve6.bind(this._resolver))),this._iface=hr(),this._pending={},this._nextRemovalTime=!1,this._hostnamesToFallback=new Set,s<1)this._fallback=!1;else{this._fallback=!0;let c=setInterval(()=>{this._hostnamesToFallback.clear()},s*1e3);c.unref&&c.unref()}this.lookup=this.lookup.bind(this),this.lookupAsync=this.lookupAsync.bind(this)}set servers(e){this.clear(),this._resolver.setServers(e)}get servers(){return this._resolver.getServers()}lookup(e,r,s){if(typeof r=="function"?(s=r,r={}):typeof r=="number"&&(r={family:r}),!s)throw new Error("Callback must be a function.");this.lookupAsync(e,r).then(n=>{r.all?s(null,n):s(null,n.address,n.family,n.expires,n.ttl)},s)}async lookupAsync(e,r={}){typeof r=="number"&&(r={family:r});let s=await this.query(e);if(r.family===6){let n=s.filter(o=>o.family===6);r.hints&oi&&(hi&&r.hints&fr||n.length===0)?li(s):s=n}else r.family===4&&(s=s.filter(n=>n.family===4));if(r.hints&ai){let{_iface:n}=this;s=s.filter(o=>o.family===6?n.has6:n.has4)}if(s.length===0){let n=new Error(`cacheableLookup ENOTFOUND ${e}`);throw n.code="ENOTFOUND",n.hostname=e,n}return r.all?s:s[0]}async query(e){let r=await this._cache.get(e);if(!r){let s=this._pending[e];if(s)r=await s;else{let n=this.queryAndCache(e);this._pending[e]=n;try{r=await n}finally{delete this._pending[e]}}}return r=r.map(s=>E({},s)),r}async _resolve(e){let r=async l=>{try{return await l}catch(g){if(g.code==="ENODATA"||g.code==="ENOTFOUND")return[];throw g}},[s,n]=await Promise.all([this._resolve4(e,lr),this._resolve6(e,lr)].map(l=>r(l))),o=0,i=0,c=0,h=Date.now();for(let l of s)l.family=4,l.expires=h+l.ttl*1e3,o=Math.max(o,l.ttl);for(let l of n)l.family=6,l.expires=h+l.ttl*1e3,i=Math.max(i,l.ttl);return s.length>0?n.length>0?c=Math.min(o,i):c=o:c=i,{entries:[...s,...n],cacheTtl:c}}async _lookup(e){try{return{entries:await this._dnsLookup(e,{all:!0}),cacheTtl:0}}catch{return{entries:[],cacheTtl:0}}}async _set(e,r,s){if(this.maxTtl>0&&s>0){s=Math.min(s,this.maxTtl)*1e3,r[cr]=Date.now()+s;try{await this._cache.set(e,r,s)}catch(n){this.lookupAsync=async()=>{let o=new Error("Cache Error. Please recreate the CacheableLookup instance.");throw o.cause=n,o}}fi(this._cache)&&this._tick(s)}}async queryAndCache(e){if(this._hostnamesToFallback.has(e))return this._dnsLookup(e,di);let r=await this._resolve(e);r.entries.length===0&&this._fallback&&(r=await this._lookup(e),r.entries.length!==0&&this._hostnamesToFallback.add(e));let s=r.entries.length===0?this.errorTtl:r.cacheTtl;return await this._set(e,r.entries,s),r.entries}_tick(e){let r=this._nextRemovalTime;(!r||e<r)&&(clearTimeout(this._removalTimeout),this._nextRemovalTime=e,this._removalTimeout=setTimeout(()=>{this._nextRemovalTime=!1;let s=1/0,n=Date.now();for(let[o,i]of this._cache){let c=i[cr];n>=c?this._cache.delete(o):c<s&&(s=c)}s!==1/0&&this._tick(s-n)},e),this._removalTimeout.unref&&this._removalTimeout.unref())}install(e){if(ur(e),X in e)throw new Error("CacheableLookup has been already installed");e[X]=e.createConnection,e[Ge]=this,e.createConnection=(r,s)=>("lookup"in r||(r.lookup=this.lookup),e[X](r,s))}uninstall(e){if(ur(e),e[X]){if(e[Ge]!==this)throw new Error("The agent is not owned by this CacheableLookup instance");e.createConnection=e[X],delete e[X],delete e[Ge]}}updateInterfaceInfo(){let{_iface:e}=this;this._iface=hr(),(e.has4&&!this._iface.has4||e.has6&&!this._iface.has6)&&this._cache.clear()}clear(e){if(e){this._cache.delete(e);return}this._cache.clear()}};Ke.exports=Je;Ke.exports.default=Je});var yr=v((Za,pr)=>{"use strict";var mi="text/plain",pi="us-ascii",mr=(t,e)=>e.some(r=>r instanceof RegExp?r.test(t):r===t),yi=(t,{stripHash:e})=>{let r=/^data:(?<type>[^,]*?),(?<data>[^#]*?)(?:#(?<hash>.*))?$/.exec(t);if(!r)throw new Error(`Invalid URL: ${t}`);let{type:s,data:n,hash:o}=r.groups,i=s.split(";");o=e?"":o;let c=!1;i[i.length-1]==="base64"&&(i.pop(),c=!0);let h=(i.shift()||"").toLowerCase(),g=[...i.map(m=>{let[p,d=""]=m.split("=").map(y=>y.trim());return p==="charset"&&(d=d.toLowerCase(),d===pi)?"":`${p}${d?`=${d}`:""}`}).filter(Boolean)];return c&&g.push("base64"),(g.length!==0||h&&h!==mi)&&g.unshift(h),`data:${g.join(";")},${c?n.trim():n}${o?`#${o}`:""}`},_i=(t,e)=>{if(e=E({defaultProtocol:"http:",normalizeProtocol:!0,forceHttp:!1,forceHttps:!1,stripAuthentication:!0,stripHash:!1,stripTextFragment:!0,stripWWW:!0,removeQueryParameters:[/^utm_\w+/i],removeTrailingSlash:!0,removeSingleSlash:!0,removeDirectoryIndex:!1,sortQueryParameters:!0},e),t=t.trim(),/^data:/i.test(t))return yi(t,e);if(/^view-source:/i.test(t))throw new Error("`view-source:` is not supported as it is a non-standard protocol");let r=t.startsWith("//");!r&&/^\.*\//.test(t)||(t=t.replace(/^(?!(?:\w+:)?\/\/)|^\/\//,e.defaultProtocol));let n=new URL(t);if(e.forceHttp&&e.forceHttps)throw new Error("The `forceHttp` and `forceHttps` options cannot be used together");if(e.forceHttp&&n.protocol==="https:"&&(n.protocol="http:"),e.forceHttps&&n.protocol==="http:"&&(n.protocol="https:"),e.stripAuthentication&&(n.username="",n.password=""),e.stripHash?n.hash="":e.stripTextFragment&&(n.hash=n.hash.replace(/#?:~:text.*?$/i,"")),n.pathname&&(n.pathname=n.pathname.replace(/(?<!\b(?:[a-z][a-z\d+\-.]{1,50}:))\/{2,}/g,"/")),n.pathname)try{n.pathname=decodeURI(n.pathname)}catch{}if(e.removeDirectoryIndex===!0&&(e.removeDirectoryIndex=[/^index\.[a-z]+$/]),Array.isArray(e.removeDirectoryIndex)&&e.removeDirectoryIndex.length>0){let i=n.pathname.split("/"),c=i[i.length-1];mr(c,e.removeDirectoryIndex)&&(i=i.slice(0,i.length-1),n.pathname=i.slice(1).join("/")+"/")}if(n.hostname&&(n.hostname=n.hostname.replace(/\.$/,""),e.stripWWW&&/^www\.(?!www\.)(?:[a-z\-\d]{1,63})\.(?:[a-z.\-\d]{2,63})$/.test(n.hostname)&&(n.hostname=n.hostname.replace(/^www\./,""))),Array.isArray(e.removeQueryParameters))for(let i of[...n.searchParams.keys()])mr(i,e.removeQueryParameters)&&n.searchParams.delete(i);e.removeQueryParameters===!0&&(n.search=""),e.sortQueryParameters&&n.searchParams.sort(),e.removeTrailingSlash&&(n.pathname=n.pathname.replace(/\/$/,""));let o=t;return t=n.toString(),!e.removeSingleSlash&&n.pathname==="/"&&!o.endsWith("/")&&n.hash===""&&(t=t.replace(/\/$/,"")),(e.removeTrailingSlash||n.pathname==="/")&&n.hash===""&&e.removeSingleSlash&&(t=t.replace(/\/$/,"")),r&&!e.normalizeProtocol&&(t=t.replace(/^http:\/\//,"//")),e.stripProtocol&&(t=t.replace(/^(?:https?:)?\/\//,"")),t};pr.exports=_i});var br=v((ec,gr)=>{gr.exports=_r;function _r(t,e){if(t&&e)return _r(t)(e);if(typeof t!="function")throw new TypeError("need wrapper function");return Object.keys(t).forEach(function(s){r[s]=t[s]}),r;function r(){for(var s=new Array(arguments.length),n=0;n<s.length;n++)s[n]=arguments[n];var o=t.apply(this,s),i=s[s.length-1];return typeof o=="function"&&o!==i&&Object.keys(i).forEach(function(c){o[c]=i[c]}),o}}});var Ye=v((tc,Qe)=>{var wr=br();Qe.exports=wr(we);Qe.exports.strict=wr(Er);we.proto=we(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return we(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return Er(this)},configurable:!0})});function we(t){var e=function(){return e.called?e.value:(e.called=!0,e.value=t.apply(this,arguments))};return e.called=!1,e}function Er(t){var e=function(){if(e.called)throw new Error(e.onceError);return e.called=!0,e.value=t.apply(this,arguments)},r=t.name||"Function wrapped with `once`";return e.onceError=r+" shouldn't be called more than once",e.called=!1,e}});var Tr=v((rc,Sr)=>{var gi=Ye(),bi=function(){},wi=function(t){return t.setHeader&&typeof t.abort=="function"},Ei=function(t){return t.stdio&&Array.isArray(t.stdio)&&t.stdio.length===3},vr=function(t,e,r){if(typeof e=="function")return vr(t,null,e);e||(e={}),r=gi(r||bi);var s=t._writableState,n=t._readableState,o=e.readable||e.readable!==!1&&t.readable,i=e.writable||e.writable!==!1&&t.writable,c=!1,h=function(){t.writable||l()},l=function(){i=!1,o||r.call(t)},g=function(){o=!1,i||r.call(t)},m=function(f){r.call(t,f?new Error("exited with error code: "+f):null)},p=function(f){r.call(t,f)},d=function(){process.nextTick(y)},y=function(){if(!c){if(o&&!(n&&n.ended&&!n.destroyed))return r.call(t,new Error("premature close"));if(i&&!(s&&s.ended&&!s.destroyed))return r.call(t,new Error("premature close"))}},b=function(){t.req.on("finish",l)};return wi(t)?(t.on("complete",l),t.on("abort",d),t.req?b():t.on("request",b)):i&&!s&&(t.on("end",h),t.on("close",h)),Ei(t)&&t.on("exit",m),t.on("end",g),t.on("finish",l),e.error!==!1&&t.on("error",p),t.on("close",d),function(){c=!0,t.removeListener("complete",l),t.removeListener("abort",d),t.removeListener("request",b),t.req&&t.req.removeListener("finish",l),t.removeListener("end",h),t.removeListener("close",h),t.removeListener("finish",l),t.removeListener("exit",m),t.removeListener("end",g),t.removeListener("error",p),t.removeListener("close",d)}};Sr.exports=vr});var xr=v((sc,Pr)=>{var vi=Ye(),Si=Tr(),Xe=require("fs"),le=function(){},Ti=/^v?\.0/.test(process.version),Ee=function(t){return typeof t=="function"},Ri=function(t){return!Ti||!Xe?!1:(t instanceof(Xe.ReadStream||le)||t instanceof(Xe.WriteStream||le))&&Ee(t.close)},Pi=function(t){return t.setHeader&&Ee(t.abort)},xi=function(t,e,r,s){s=vi(s);var n=!1;t.on("close",function(){n=!0}),Si(t,{readable:e,writable:r},function(i){if(i)return s(i);n=!0,s()});var o=!1;return function(i){if(!n&&!o){if(o=!0,Ri(t))return t.close(le);if(Pi(t))return t.abort();if(Ee(t.destroy))return t.destroy();s(i||new Error("stream was destroyed"))}}},Rr=function(t){t()},Ci=function(t,e){return t.pipe(e)},ki=function(){var t=Array.prototype.slice.call(arguments),e=Ee(t[t.length-1]||le)&&t.pop()||le;if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new Error("pump requires two streams per minimum");var r,s=t.map(function(n,o){var i=o<t.length-1,c=o>0;return xi(n,i,c,function(h){r||(r=h),h&&s.forEach(Rr),!i&&(s.forEach(Rr),e(r))})});return t.reduce(Ci)};Pr.exports=ki});var kr=v((nc,Cr)=>{"use strict";var{PassThrough:Ai}=require("stream");Cr.exports=t=>{t=E({},t);let{array:e}=t,{encoding:r}=t,s=r==="buffer",n=!1;e?n=!(r||s):r=r||"utf8",s&&(r=null);let o=new Ai({objectMode:n});r&&o.setEncoding(r);let i=0,c=[];return o.on("data",h=>{c.push(h),n?i=c.length:i+=h.length}),o.getBufferedValue=()=>e?c:s?Buffer.concat(c,i):c.join(""),o.getBufferedLength=()=>i,o}});var Ar=v((ic,Z)=>{"use strict";var{constants:Oi}=require("buffer"),qi=xr(),ji=kr(),Ze=class extends Error{constructor(){super("maxBuffer exceeded");this.name="MaxBufferError"}};async function ve(t,e){if(!t)return Promise.reject(new Error("Expected a stream"));e=E({maxBuffer:1/0},e);let{maxBuffer:r}=e,s;return await new Promise((n,o)=>{let i=c=>{c&&s.getBufferedLength()<=Oi.MAX_LENGTH&&(c.bufferedData=s.getBufferedValue()),o(c)};s=qi(t,ji(e),c=>{if(c){i(c);return}n()}),s.on("data",()=>{s.getBufferedLength()>r&&i(new Ze)})}),s.getBufferedValue()}Z.exports=ve;Z.exports.default=ve;Z.exports.buffer=(t,e)=>ve(t,A(E({},e),{encoding:"buffer"}));Z.exports.array=(t,e)=>ve(t,A(E({},e),{array:!0}));Z.exports.MaxBufferError=Ze});var qr=v((ac,Or)=>{"use strict";var Hi=new Set([200,203,204,206,300,301,404,405,410,414,501]),Ii=new Set([200,203,204,300,301,302,303,307,308,404,405,410,414,501]),Li=new Set([500,502,503,504]),Di={date:!0,connection:!0,"keep-alive":!0,"proxy-authenticate":!0,"proxy-authorization":!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0},Ui={"content-length":!0,"content-encoding":!0,"transfer-encoding":!0,"content-range":!0};function J(t){let e=parseInt(t,10);return isFinite(e)?e:0}function Mi(t){return t?Li.has(t.status):!0}function et(t){let e={};if(!t)return e;let r=t.trim().split(/\s*,\s*/);for(let s of r){let[n,o]=s.split(/\s*=\s*/,2);e[n]=o===void 0?!0:o.replace(/^"|"$/g,"")}return e}function Ni(t){let e=[];for(let r in t){let s=t[r];e.push(s===!0?r:r+"="+s)}if(!!e.length)return e.join(", ")}Or.exports=class{constructor(e,r,{shared:s,cacheHeuristic:n,immutableMinTimeToLive:o,ignoreCargoCult:i,_fromObject:c}={}){if(c){this._fromObject(c);return}if(!r||!r.headers)throw Error("Response headers missing");this._assertRequestHasHeaders(e),this._responseTime=this.now(),this._isShared=s!==!1,this._cacheHeuristic=n!==void 0?n:.1,this._immutableMinTtl=o!==void 0?o:24*3600*1e3,this._status="status"in r?r.status:200,this._resHeaders=r.headers,this._rescc=et(r.headers["cache-control"]),this._method="method"in e?e.method:"GET",this._url=e.url,this._host=e.headers.host,this._noAuthorization=!e.headers.authorization,this._reqHeaders=r.headers.vary?e.headers:null,this._reqcc=et(e.headers["cache-control"]),i&&"pre-check"in this._rescc&&"post-check"in this._rescc&&(delete this._rescc["pre-check"],delete this._rescc["post-check"],delete this._rescc["no-cache"],delete this._rescc["no-store"],delete this._rescc["must-revalidate"],this._resHeaders=Object.assign({},this._resHeaders,{"cache-control":Ni(this._rescc)}),delete this._resHeaders.expires,delete this._resHeaders.pragma),r.headers["cache-control"]==null&&/no-cache/.test(r.headers.pragma)&&(this._rescc["no-cache"]=!0)}now(){return Date.now()}storable(){return!!(!this._reqcc["no-store"]&&(this._method==="GET"||this._method==="HEAD"||this._method==="POST"&&this._hasExplicitExpiration())&&Ii.has(this._status)&&!this._rescc["no-store"]&&(!this._isShared||!this._rescc.private)&&(!this._isShared||this._noAuthorization||this._allowsStoringAuthenticated())&&(this._resHeaders.expires||this._rescc["max-age"]||this._isShared&&this._rescc["s-maxage"]||this._rescc.public||Hi.has(this._status)))}_hasExplicitExpiration(){return this._isShared&&this._rescc["s-maxage"]||this._rescc["max-age"]||this._resHeaders.expires}_assertRequestHasHeaders(e){if(!e||!e.headers)throw Error("Request headers missing")}satisfiesWithoutRevalidation(e){this._assertRequestHasHeaders(e);let r=et(e.headers["cache-control"]);return r["no-cache"]||/no-cache/.test(e.headers.pragma)||r["max-age"]&&this.age()>r["max-age"]||r["min-fresh"]&&this.timeToLive()<1e3*r["min-fresh"]||this.stale()&&!(r["max-stale"]&&!this._rescc["must-revalidate"]&&(r["max-stale"]===!0||r["max-stale"]>this.age()-this.maxAge()))?!1:this._requestMatches(e,!1)}_requestMatches(e,r){return(!this._url||this._url===e.url)&&this._host===e.headers.host&&(!e.method||this._method===e.method||r&&e.method==="HEAD")&&this._varyMatches(e)}_allowsStoringAuthenticated(){return this._rescc["must-revalidate"]||this._rescc.public||this._rescc["s-maxage"]}_varyMatches(e){if(!this._resHeaders.vary)return!0;if(this._resHeaders.vary==="*")return!1;let r=this._resHeaders.vary.trim().toLowerCase().split(/\s*,\s*/);for(let s of r)if(e.headers[s]!==this._reqHeaders[s])return!1;return!0}_copyWithoutHopByHopHeaders(e){let r={};for(let s in e)Di[s]||(r[s]=e[s]);if(e.connection){let s=e.connection.trim().split(/\s*,\s*/);for(let n of s)delete r[n]}if(r.warning){let s=r.warning.split(/,/).filter(n=>!/^\s*1[0-9][0-9]/.test(n));s.length?r.warning=s.join(",").trim():delete r.warning}return r}responseHeaders(){let e=this._copyWithoutHopByHopHeaders(this._resHeaders),r=this.age();return r>3600*24&&!this._hasExplicitExpiration()&&this.maxAge()>3600*24&&(e.warning=(e.warning?`${e.warning}, `:"")+'113 - "rfc7234 5.5.4"'),e.age=`${Math.round(r)}`,e.date=new Date(this.now()).toUTCString(),e}date(){let e=Date.parse(this._resHeaders.date);return isFinite(e)?e:this._responseTime}age(){let e=this._ageValue(),r=(this.now()-this._responseTime)/1e3;return e+r}_ageValue(){return J(this._resHeaders.age)}maxAge(){if(!this.storable()||this._rescc["no-cache"]||this._isShared&&this._resHeaders["set-cookie"]&&!this._rescc.public&&!this._rescc.immutable||this._resHeaders.vary==="*")return 0;if(this._isShared){if(this._rescc["proxy-revalidate"])return 0;if(this._rescc["s-maxage"])return J(this._rescc["s-maxage"])}if(this._rescc["max-age"])return J(this._rescc["max-age"]);let e=this._rescc.immutable?this._immutableMinTtl:0,r=this.date();if(this._resHeaders.expires){let s=Date.parse(this._resHeaders.expires);return Number.isNaN(s)||s<r?0:Math.max(e,(s-r)/1e3)}if(this._resHeaders["last-modified"]){let s=Date.parse(this._resHeaders["last-modified"]);if(isFinite(s)&&r>s)return Math.max(e,(r-s)/1e3*this._cacheHeuristic)}return e}timeToLive(){let e=this.maxAge()-this.age(),r=e+J(this._rescc["stale-if-error"]),s=e+J(this._rescc["stale-while-revalidate"]);return Math.max(0,e,r,s)*1e3}stale(){return this.maxAge()<=this.age()}_useStaleIfError(){return this.maxAge()+J(this._rescc["stale-if-error"])>this.age()}useStaleWhileRevalidate(){return this.maxAge()+J(this._rescc["stale-while-revalidate"])>this.age()}static fromObject(e){return new this(void 0,void 0,{_fromObject:e})}_fromObject(e){if(this._responseTime)throw Error("Reinitialized");if(!e||e.v!==1)throw Error("Invalid serialization");this._responseTime=e.t,this._isShared=e.sh,this._cacheHeuristic=e.ch,this._immutableMinTtl=e.imm!==void 0?e.imm:24*3600*1e3,this._status=e.st,this._resHeaders=e.resh,this._rescc=e.rescc,this._method=e.m,this._url=e.u,this._host=e.h,this._noAuthorization=e.a,this._reqHeaders=e.reqh,this._reqcc=e.reqcc}toObject(){return{v:1,t:this._responseTime,sh:this._isShared,ch:this._cacheHeuristic,imm:this._immutableMinTtl,st:this._status,resh:this._resHeaders,rescc:this._rescc,m:this._method,u:this._url,h:this._host,a:this._noAuthorization,reqh:this._reqHeaders,reqcc:this._reqcc}}revalidationHeaders(e){this._assertRequestHasHeaders(e);let r=this._copyWithoutHopByHopHeaders(e.headers);if(delete r["if-range"],!this._requestMatches(e,!0)||!this.storable())return delete r["if-none-match"],delete r["if-modified-since"],r;if(this._resHeaders.etag&&(r["if-none-match"]=r["if-none-match"]?`${r["if-none-match"]}, ${this._resHeaders.etag}`:this._resHeaders.etag),r["accept-ranges"]||r["if-match"]||r["if-unmodified-since"]||this._method&&this._method!="GET"){if(delete r["if-modified-since"],r["if-none-match"]){let n=r["if-none-match"].split(/,/).filter(o=>!/^\s*W\//.test(o));n.length?r["if-none-match"]=n.join(",").trim():delete r["if-none-match"]}}else this._resHeaders["last-modified"]&&!r["if-modified-since"]&&(r["if-modified-since"]=this._resHeaders["last-modified"]);return r}revalidatedPolicy(e,r){if(this._assertRequestHasHeaders(e),this._useStaleIfError()&&Mi(r))return{modified:!1,matches:!1,policy:this};if(!r||!r.headers)throw Error("Response headers missing");let s=!1;if(r.status!==void 0&&r.status!=304?s=!1:r.headers.etag&&!/^\s*W\//.test(r.headers.etag)?s=this._resHeaders.etag&&this._resHeaders.etag.replace(/^\s*W\//,"")===r.headers.etag:this._resHeaders.etag&&r.headers.etag?s=this._resHeaders.etag.replace(/^\s*W\//,"")===r.headers.etag.replace(/^\s*W\//,""):this._resHeaders["last-modified"]?s=this._resHeaders["last-modified"]===r.headers["last-modified"]:!this._resHeaders.etag&&!this._resHeaders["last-modified"]&&!r.headers.etag&&!r.headers["last-modified"]&&(s=!0),!s)return{policy:new this.constructor(e,r),modified:r.status!=304,matches:!1};let n={};for(let i in this._resHeaders)n[i]=i in r.headers&&!Ui[i]?r.headers[i]:this._resHeaders[i];let o=Object.assign({},r,{status:this._status,method:this._method,headers:n});return{policy:new this.constructor(e,o,{shared:this._isShared,cacheHeuristic:this._cacheHeuristic,immutableMinTimeToLive:this._immutableMinTtl}),modified:!1,matches:!0}}}});var Se=v((cc,jr)=>{"use strict";jr.exports=t=>{let e={};for(let[r,s]of Object.entries(t))e[r.toLowerCase()]=s;return e}});var Lr=v((uc,Ir)=>{"use strict";var Bi=require("stream").Readable,zi=Se(),Hr=class extends Bi{constructor(e,r,s,n){if(typeof e!="number")throw new TypeError("Argument `statusCode` should be a number");if(typeof r!="object")throw new TypeError("Argument `headers` should be an object");if(!(s instanceof Buffer))throw new TypeError("Argument `body` should be a buffer");if(typeof n!="string")throw new TypeError("Argument `url` should be a string");super();this.statusCode=e,this.headers=zi(r),this.body=s,this.url=n}_read(){this.push(this.body),this.push(null)}};Ir.exports=Hr});var Ur=v((hc,Dr)=>{"use strict";var $i=["destroy","setTimeout","socket","headers","trailers","rawHeaders","statusCode","httpVersion","httpVersionMinor","httpVersionMajor","rawTrailers","statusMessage"];Dr.exports=(t,e)=>{let r=new Set(Object.keys(t).concat($i));for(let s of r)s in e||(e[s]=typeof t[s]=="function"?t[s].bind(t):t[s])}});var Nr=v((lc,Mr)=>{"use strict";var Fi=require("stream").PassThrough,Vi=Ur(),Wi=t=>{if(!(t&&t.pipe))throw new TypeError("Parameter `response` must be a response stream.");let e=new Fi;return Vi(t,e),t.pipe(e)};Mr.exports=Wi});var Br=v(tt=>{tt.stringify=function t(e){if(typeof e>"u")return e;if(e&&Buffer.isBuffer(e))return JSON.stringify(":base64:"+e.toString("base64"));if(e&&e.toJSON&&(e=e.toJSON()),e&&typeof e=="object"){var r="",s=Array.isArray(e);r=s?"[":"{";var n=!0;for(var o in e){var i=typeof e[o]=="function"||!s&&typeof e[o]>"u";Object.hasOwnProperty.call(e,o)&&!i&&(n||(r+=","),n=!1,s?e[o]==null?r+="null":r+=t(e[o]):e[o]!==void 0&&(r+=t(o)+":"+t(e[o])))}return r+=s?"]":"}",r}else return typeof e=="string"?JSON.stringify(/^:/.test(e)?":"+e:e):typeof e>"u"?"null":JSON.stringify(e)};tt.parse=function(t){return JSON.parse(t,function(e,r){return typeof r=="string"?/^:base64:/.test(r)?Buffer.from(r.substring(8),"base64"):/^:/.test(r)?r.substring(1):r:r})}});var Vr=v((dc,Fr)=>{"use strict";var Gi=require("events"),zr=Br(),Ji=t=>{let e={redis:"@keyv/redis",mongodb:"@keyv/mongo",mongo:"@keyv/mongo",sqlite:"@keyv/sqlite",postgresql:"@keyv/postgres",postgres:"@keyv/postgres",mysql:"@keyv/mysql"};if(t.adapter||t.uri){let r=t.adapter||/^[^:]*/.exec(t.uri)[0];return new(require(e[r]))(t)}return new Map},$r=class extends Gi{constructor(e,r){super();if(this.opts=Object.assign({namespace:"keyv",serialize:zr.stringify,deserialize:zr.parse},typeof e=="string"?{uri:e}:e,r),!this.opts.store){let s=Object.assign({},this.opts);this.opts.store=Ji(s)}typeof this.opts.store.on=="function"&&this.opts.store.on("error",s=>this.emit("error",s)),this.opts.store.namespace=this.opts.namespace}_getKeyPrefix(e){return`${this.opts.namespace}:${e}`}get(e,r){let s=this._getKeyPrefix(e),{store:n}=this.opts;return Promise.resolve().then(()=>n.get(s)).then(o=>typeof o=="string"?this.opts.deserialize(o):o).then(o=>{if(o!==void 0){if(typeof o.expires=="number"&&Date.now()>o.expires){this.delete(e);return}return r&&r.raw?o:o.value}})}set(e,r,s){let n=this._getKeyPrefix(e);typeof s>"u"&&(s=this.opts.ttl),s===0&&(s=void 0);let{store:o}=this.opts;return Promise.resolve().then(()=>{let i=typeof s=="number"?Date.now()+s:null;return r={value:r,expires:i},this.opts.serialize(r)}).then(i=>o.set(n,i,s)).then(()=>!0)}delete(e){let r=this._getKeyPrefix(e),{store:s}=this.opts;return Promise.resolve().then(()=>s.delete(r))}clear(){let{store:e}=this.opts;return Promise.resolve().then(()=>e.clear())}};Fr.exports=$r});var Jr=v((mc,Gr)=>{"use strict";var Ki=require("events"),Te=require("url"),Qi=yr(),Yi=Ar(),rt=qr(),Wr=Lr(),Xi=Se(),Zi=Nr(),eo=Vr(),U=class{constructor(e,r){if(typeof e!="function")throw new TypeError("Parameter `request` must be a function");return this.cache=new eo({uri:typeof r=="string"&&r,store:typeof r!="string"&&r,namespace:"cacheable-request"}),this.createCacheableRequest(e)}createCacheableRequest(e){return(r,s)=>{let n;if(typeof r=="string")n=st(Te.parse(r)),r={};else if(r instanceof Te.URL)n=st(Te.parse(r.toString())),r={};else{let[m,...p]=(r.path||"").split("?"),d=p.length>0?`?${p.join("?")}`:"";n=st(A(E({},r),{pathname:m,search:d}))}r=E(E({headers:{},method:"GET",cache:!0,strictTtl:!1,automaticFailover:!1},r),to(n)),r.headers=Xi(r.headers);let o=new Ki,i=Qi(Te.format(n),{stripWWW:!1,removeTrailingSlash:!1,stripAuthentication:!1}),c=`${r.method}:${i}`,h=!1,l=!1,g=m=>{l=!0;let p=!1,d,y=new Promise(f=>{d=()=>{p||(p=!0,f())}}),b=f=>{if(h&&!m.forceRefresh){f.status=f.statusCode;let P=rt.fromObject(h.cachePolicy).revalidatedPolicy(m,f);if(!P.modified){let q=P.policy.responseHeaders();f=new Wr(h.statusCode,q,h.body,h.url),f.cachePolicy=P.policy,f.fromCache=!0}}f.fromCache||(f.cachePolicy=new rt(m,f,m),f.fromCache=!1);let w;m.cache&&f.cachePolicy.storable()?(w=Zi(f),(async()=>{try{let P=Yi.buffer(f);if(await Promise.race([y,new Promise(Le=>f.once("end",Le))]),p)return;let q=await P,M={cachePolicy:f.cachePolicy.toObject(),url:f.url,statusCode:f.fromCache?h.statusCode:f.statusCode,body:q},Q=m.strictTtl?f.cachePolicy.timeToLive():void 0;m.maxTtl&&(Q=Q?Math.min(Q,m.maxTtl):m.maxTtl),await this.cache.set(c,M,Q)}catch(P){o.emit("error",new U.CacheError(P))}})()):m.cache&&h&&(async()=>{try{await this.cache.delete(c)}catch(P){o.emit("error",new U.CacheError(P))}})(),o.emit("response",w||f),typeof s=="function"&&s(w||f)};try{let f=e(m,b);f.once("error",d),f.once("abort",d),o.emit("request",f)}catch(f){o.emit("error",new U.RequestError(f))}};return(async()=>{let m=async d=>{await Promise.resolve();let y=d.cache?await this.cache.get(c):void 0;if(typeof y>"u")return g(d);let b=rt.fromObject(y.cachePolicy);if(b.satisfiesWithoutRevalidation(d)&&!d.forceRefresh){let f=b.responseHeaders(),w=new Wr(y.statusCode,f,y.body,y.url);w.cachePolicy=b,w.fromCache=!0,o.emit("response",w),typeof s=="function"&&s(w)}else h=y,d.headers=b.revalidationHeaders(d),g(d)},p=d=>o.emit("error",new U.CacheError(d));this.cache.once("error",p),o.on("response",()=>this.cache.removeListener("error",p));try{await m(r)}catch(d){r.automaticFailover&&!l&&g(r),o.emit("error",new U.CacheError(d))}})(),o}}};function to(t){let e=E({},t);return e.path=`${t.pathname||"/"}${t.search||""}`,delete e.pathname,delete e.search,e}function st(t){return{protocol:t.protocol,auth:t.auth,hostname:t.hostname||t.host||"localhost",port:t.port,pathname:t.pathname,search:t.search}}U.RequestError=class extends Error{constructor(t){super(t.message);this.name="RequestError",Object.assign(this,t)}};U.CacheError=class extends Error{constructor(t){super(t.message);this.name="CacheError",Object.assign(this,t)}};Gr.exports=U});var Qr=v((pc,Kr)=>{"use strict";var ro=["aborted","complete","headers","httpVersion","httpVersionMinor","httpVersionMajor","method","rawHeaders","rawTrailers","setTimeout","socket","statusCode","statusMessage","trailers","url"];Kr.exports=(t,e)=>{if(e._readableState.autoDestroy)throw new Error("The second stream must have the `autoDestroy` option set to `false`");let r=new Set(Object.keys(t).concat(ro)),s={};for(let n of r)n in e||(s[n]={get(){let o=t[n];return typeof o=="function"?o.bind(t):o},set(o){t[n]=o},enumerable:!0,configurable:!1});return Object.defineProperties(e,s),t.once("aborted",()=>{e.destroy(),e.emit("aborted")}),t.once("close",()=>{t.complete&&e.readable?e.once("end",()=>{e.emit("close")}):e.emit("close")}),e}});var Xr=v((yc,Yr)=>{"use strict";var{Transform:so,PassThrough:no}=require("stream"),nt=require("zlib"),io=Qr();Yr.exports=t=>{let e=(t.headers["content-encoding"]||"").toLowerCase();if(!["gzip","deflate","br"].includes(e))return t;let r=e==="br";if(r&&typeof nt.createBrotliDecompress!="function")return t.destroy(new Error("Brotli is not supported on Node.js < 12")),t;let s=!0,n=new so({transform(c,h,l){s=!1,l(null,c)},flush(c){c()}}),o=new no({autoDestroy:!1,destroy(c,h){t.destroy(),h(c)}}),i=r?nt.createBrotliDecompress():nt.createUnzip();return i.once("error",c=>{if(s&&!t.readable){o.end();return}o.destroy(c)}),io(t,o),t.pipe(n).pipe(i).pipe(o),o}});var it=v((_c,es)=>{"use strict";var Zr=class{constructor(e={}){if(!(e.maxSize&&e.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");this.maxSize=e.maxSize,this.onEviction=e.onEviction,this.cache=new Map,this.oldCache=new Map,this._size=0}_set(e,r){if(this.cache.set(e,r),this._size++,this._size>=this.maxSize){if(this._size=0,typeof this.onEviction=="function")for(let[s,n]of this.oldCache.entries())this.onEviction(s,n);this.oldCache=this.cache,this.cache=new Map}}get(e){if(this.cache.has(e))return this.cache.get(e);if(this.oldCache.has(e)){let r=this.oldCache.get(e);return this.oldCache.delete(e),this._set(e,r),r}}set(e,r){return this.cache.has(e)?this.cache.set(e,r):this._set(e,r),this}has(e){return this.cache.has(e)||this.oldCache.has(e)}peek(e){if(this.cache.has(e))return this.cache.get(e);if(this.oldCache.has(e))return this.oldCache.get(e)}delete(e){let r=this.cache.delete(e);return r&&this._size--,this.oldCache.delete(e)||r}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}*keys(){for(let[e]of this)yield e}*values(){for(let[,e]of this)yield e}*[Symbol.iterator](){for(let e of this.cache)yield e;for(let e of this.oldCache){let[r]=e;this.cache.has(r)||(yield e)}}get size(){let e=0;for(let r of this.oldCache.keys())this.cache.has(r)||e++;return Math.min(this._size+e,this.maxSize)}};es.exports=Zr});var at=v((gc,ns)=>{"use strict";var oo=require("events"),ao=require("tls"),co=require("http2"),uo=it(),j=Symbol("currentStreamsCount"),ts=Symbol("request"),H=Symbol("cachedOriginSet"),ee=Symbol("gracefullyClosing"),ho=["maxDeflateDynamicTableSize","maxSessionMemory","maxHeaderListPairs","maxOutstandingPings","maxReservedRemoteStreams","maxSendHeaderBlockLength","paddingStrategy","localAddress","path","rejectUnauthorized","minDHSize","ca","cert","clientCertEngine","ciphers","key","pfx","servername","minVersion","maxVersion","secureProtocol","crl","honorCipherOrder","ecdhCurve","dhparam","secureOptions","sessionIdContext"],lo=(t,e,r)=>{let s=0,n=t.length;for(;s<n;){let o=s+n>>>1;r(t[o],e)?s=o+1:n=o}return s},fo=(t,e)=>t.remoteSettings.maxConcurrentStreams>e.remoteSettings.maxConcurrentStreams,ot=(t,e)=>{for(let r of t)r[H].length<e[H].length&&r[H].every(s=>e[H].includes(s))&&r[j]+e[j]<=e.remoteSettings.maxConcurrentStreams&&ss(r)},mo=(t,e)=>{for(let r of t)e[H].length<r[H].length&&e[H].every(s=>r[H].includes(s))&&e[j]+r[j]<=r.remoteSettings.maxConcurrentStreams&&ss(e)},rs=({agent:t,isFree:e})=>{let r={};for(let s in t.sessions){let o=t.sessions[s].filter(i=>{let c=i[z.kCurrentStreamsCount]<i.remoteSettings.maxConcurrentStreams;return e?c:!c});o.length!==0&&(r[s]=o)}return r},ss=t=>{t[ee]=!0,t[j]===0&&t.close()},z=class extends oo{constructor({timeout:e=6e4,maxSessions:r=1/0,maxFreeSessions:s=10,maxCachedTlsSessions:n=100}={}){super();this.sessions={},this.queue={},this.timeout=e,this.maxSessions=r,this.maxFreeSessions=s,this._freeSessionsCount=0,this._sessionsCount=0,this.settings={enablePush:!1},this.tlsSessionCache=new uo({maxSize:n})}static normalizeOrigin(e,r){return typeof e=="string"&&(e=new URL(e)),r&&e.hostname!==r&&(e.hostname=r),e.origin}normalizeOptions(e){let r="";if(e)for(let s of ho)e[s]&&(r+=`:${e[s]}`);return r}_tryToCreateNewSession(e,r){if(!(e in this.queue)||!(r in this.queue[e]))return;let s=this.queue[e][r];this._sessionsCount<this.maxSessions&&!s.completed&&(s.completed=!0,s())}getSession(e,r,s){return new Promise((n,o)=>{Array.isArray(s)?(s=[...s],n()):s=[{resolve:n,reject:o}];let i=this.normalizeOptions(r),c=z.normalizeOrigin(e,r&&r.servername);if(c===void 0){for(let{reject:g}of s)g(new TypeError("The `origin` argument needs to be a string or an URL object"));return}if(i in this.sessions){let g=this.sessions[i],m=-1,p=-1,d;for(let y of g){let b=y.remoteSettings.maxConcurrentStreams;if(b<m)break;if(y[H].includes(c)){let f=y[j];if(f>=b||y[ee]||y.destroyed)continue;d||(m=b),f>p&&(d=y,p=f)}}if(d){if(s.length!==1){for(let{reject:y}of s){let b=new Error(`Expected the length of listeners to be 1, got ${s.length}.
Please report this to https://github.com/szmarczak/http2-wrapper/`);y(b)}return}s[0].resolve(d);return}}if(i in this.queue){if(c in this.queue[i]){this.queue[i][c].listeners.push(...s),this._tryToCreateNewSession(i,c);return}}else this.queue[i]={};let h=()=>{i in this.queue&&this.queue[i][c]===l&&(delete this.queue[i][c],Object.keys(this.queue[i]).length===0&&delete this.queue[i])},l=()=>{let g=`${c}:${i}`,m=!1;try{let p=co.connect(e,E({createConnection:this.createConnection,settings:this.settings,session:this.tlsSessionCache.get(g)},r));p[j]=0,p[ee]=!1;let d=()=>p[j]<p.remoteSettings.maxConcurrentStreams,y=!0;p.socket.once("session",f=>{this.tlsSessionCache.set(g,f)}),p.once("error",f=>{for(let{reject:w}of s)w(f);this.tlsSessionCache.delete(g)}),p.setTimeout(this.timeout,()=>{p.destroy()}),p.once("close",()=>{if(m){y&&this._freeSessionsCount--,this._sessionsCount--;let f=this.sessions[i];f.splice(f.indexOf(p),1),f.length===0&&delete this.sessions[i]}else{let f=new Error("Session closed without receiving a SETTINGS frame");f.code="HTTP2WRAPPER_NOSETTINGS";for(let{reject:w}of s)w(f);h()}this._tryToCreateNewSession(i,c)});let b=()=>{if(!(!(i in this.queue)||!d())){for(let f of p[H])if(f in this.queue[i]){let{listeners:w}=this.queue[i][f];for(;w.length!==0&&d();)w.shift().resolve(p);let P=this.queue[i];if(P[f].listeners.length===0&&(delete P[f],Object.keys(P).length===0)){delete this.queue[i];break}if(!d())break}}};p.on("origin",()=>{p[H]=p.originSet,!!d()&&(b(),ot(this.sessions[i],p))}),p.once("remoteSettings",()=>{if(p.ref(),p.unref(),this._sessionsCount++,l.destroyed){let f=new Error("Agent has been destroyed");for(let w of s)w.reject(f);p.destroy();return}p[H]=p.originSet;{let f=this.sessions;if(i in f){let w=f[i];w.splice(lo(w,p,fo),0,p)}else f[i]=[p]}this._freeSessionsCount+=1,m=!0,this.emit("session",p),b(),h(),p[j]===0&&this._freeSessionsCount>this.maxFreeSessions&&p.close(),s.length!==0&&(this.getSession(c,r,s),s.length=0),p.on("remoteSettings",()=>{b(),ot(this.sessions[i],p)})}),p[ts]=p.request,p.request=(f,w)=>{if(p[ee])throw new Error("The session is gracefully closing. No new streams are allowed.");let P=p[ts](f,w);return p.ref(),++p[j],p[j]===p.remoteSettings.maxConcurrentStreams&&this._freeSessionsCount--,P.once("close",()=>{if(y=d(),--p[j],!p.destroyed&&!p.closed&&(mo(this.sessions[i],p),d()&&!p.closed)){y||(this._freeSessionsCount++,y=!0);let q=p[j]===0;q&&p.unref(),q&&(this._freeSessionsCount>this.maxFreeSessions||p[ee])?p.close():(ot(this.sessions[i],p),b())}}),P}}catch(p){for(let d of s)d.reject(p);h()}};l.listeners=s,l.completed=!1,l.destroyed=!1,this.queue[i][c]=l,this._tryToCreateNewSession(i,c)})}request(e,r,s,n){return new Promise((o,i)=>{this.getSession(e,r,[{reject:i,resolve:c=>{try{o(c.request(s,n))}catch(h){i(h)}}}])})}createConnection(e,r){return z.connect(e,r)}static connect(e,r){r.ALPNProtocols=["h2"];let s=e.port||443,n=e.hostname||e.host;return typeof r.servername>"u"&&(r.servername=n),ao.connect(s,n,r)}closeFreeSessions(){for(let e of Object.values(this.sessions))for(let r of e)r[j]===0&&r.close()}destroy(e){for(let r of Object.values(this.sessions))for(let s of r)s.destroy(e);for(let r of Object.values(this.queue))for(let s of Object.values(r))s.destroyed=!0;this.queue={}}get freeSessions(){return rs({agent:this,isFree:!0})}get busySessions(){return rs({agent:this,isFree:!1})}};z.kCurrentStreamsCount=j;z.kGracefullyClosing=ee;ns.exports={Agent:z,globalAgent:new z}});var ct=v((bc,os)=>{"use strict";var{Readable:po}=require("stream"),is=class extends po{constructor(e,r){super({highWaterMark:r,autoDestroy:!1});this.statusCode=null,this.statusMessage="",this.httpVersion="2.0",this.httpVersionMajor=2,this.httpVersionMinor=0,this.headers={},this.trailers={},this.req=null,this.aborted=!1,this.complete=!1,this.upgrade=null,this.rawHeaders=[],this.rawTrailers=[],this.socket=e,this.connection=e,this._dumped=!1}_destroy(e){this.req._request.destroy(e)}setTimeout(e,r){return this.req.setTimeout(e,r),this}_dump(){this._dumped||(this._dumped=!0,this.removeAllListeners("data"),this.resume())}_read(){this.req&&this.req._request.resume()}};os.exports=is});var ut=v((wc,as)=>{"use strict";as.exports=t=>{let e={protocol:t.protocol,hostname:typeof t.hostname=="string"&&t.hostname.startsWith("[")?t.hostname.slice(1,-1):t.hostname,host:t.host,hash:t.hash,search:t.search,pathname:t.pathname,href:t.href,path:`${t.pathname||""}${t.search||""}`};return typeof t.port=="string"&&t.port.length!==0&&(e.port=Number(t.port)),(t.username||t.password)&&(e.auth=`${t.username||""}:${t.password||""}`),e}});var us=v((Ec,cs)=>{"use strict";cs.exports=(t,e,r)=>{for(let s of r)t.on(s,(...n)=>e.emit(s,...n))}});var ls=v((vc,hs)=>{"use strict";hs.exports=t=>{switch(t){case":method":case":scheme":case":authority":case":path":return!0;default:return!1}}});var ds=v((Tc,fs)=>{"use strict";var te=(t,e,r)=>{fs.exports[e]=class extends t{constructor(...n){super(typeof r=="string"?r:r(n));this.name=`${super.name} [${e}]`,this.code=e}}};te(TypeError,"ERR_INVALID_ARG_TYPE",t=>{let e=t[0].includes(".")?"property":"argument",r=t[1],s=Array.isArray(r);return s&&(r=`${r.slice(0,-1).join(", ")} or ${r.slice(-1)}`),`The "${t[0]}" ${e} must be ${s?"one of":"of"} type ${r}. Received ${typeof t[2]}`});te(TypeError,"ERR_INVALID_PROTOCOL",t=>`Protocol "${t[0]}" not supported. Expected "${t[1]}"`);te(Error,"ERR_HTTP_HEADERS_SENT",t=>`Cannot ${t[0]} headers after they are sent to the client`);te(TypeError,"ERR_INVALID_HTTP_TOKEN",t=>`${t[0]} must be a valid HTTP token [${t[1]}]`);te(TypeError,"ERR_HTTP_INVALID_HEADER_VALUE",t=>`Invalid value "${t[0]} for header "${t[1]}"`);te(TypeError,"ERR_INVALID_CHAR",t=>`Invalid character in ${t[0]} [${t[1]}]`)});var dt=v((Rc,Es)=>{"use strict";var yo=require("http2"),{Writable:_o}=require("stream"),{Agent:ms,globalAgent:go}=at(),bo=ct(),wo=ut(),Eo=us(),vo=ls(),{ERR_INVALID_ARG_TYPE:ht,ERR_INVALID_PROTOCOL:So,ERR_HTTP_HEADERS_SENT:ps,ERR_INVALID_HTTP_TOKEN:To,ERR_HTTP_INVALID_HEADER_VALUE:Ro,ERR_INVALID_CHAR:Po}=ds(),{HTTP2_HEADER_STATUS:ys,HTTP2_HEADER_METHOD:_s,HTTP2_HEADER_PATH:gs,HTTP2_METHOD_CONNECT:xo}=yo.constants,O=Symbol("headers"),lt=Symbol("origin"),ft=Symbol("session"),bs=Symbol("options"),Re=Symbol("flushedHeaders"),fe=Symbol("jobs"),Co=/^[\^`\-\w!#$%&*+.|~]+$/,ko=/[^\t\u0020-\u007E\u0080-\u00FF]/,ws=class extends _o{constructor(e,r,s){super({autoDestroy:!1});let n=typeof e=="string"||e instanceof URL;if(n&&(e=wo(e instanceof URL?e:new URL(e))),typeof r=="function"||r===void 0?(s=r,r=n?e:E({},e)):r=E(E({},e),r),r.h2session)this[ft]=r.h2session;else if(r.agent===!1)this.agent=new ms({maxFreeSessions:0});else if(typeof r.agent>"u"||r.agent===null)typeof r.createConnection=="function"?(this.agent=new ms({maxFreeSessions:0}),this.agent.createConnection=r.createConnection):this.agent=go;else if(typeof r.agent.request=="function")this.agent=r.agent;else throw new ht("options.agent",["Agent-like Object","undefined","false"],r.agent);if(r.protocol&&r.protocol!=="https:")throw new So(r.protocol,"https:");let o=r.port||r.defaultPort||this.agent&&this.agent.defaultPort||443,i=r.hostname||r.host||"localhost";delete r.hostname,delete r.host,delete r.port;let{timeout:c}=r;if(r.timeout=void 0,this[O]=Object.create(null),this[fe]=[],this.socket=null,this.connection=null,this.method=r.method||"GET",this.path=r.path,this.res=null,this.aborted=!1,this.reusedSocket=!1,r.headers)for(let[h,l]of Object.entries(r.headers))this.setHeader(h,l);r.auth&&!("authorization"in this[O])&&(this[O].authorization="Basic "+Buffer.from(r.auth).toString("base64")),r.session=r.tlsSession,r.path=r.socketPath,this[bs]=r,o===443?(this[lt]=`https://${i}`,":authority"in this[O]||(this[O][":authority"]=i)):(this[lt]=`https://${i}:${o}`,":authority"in this[O]||(this[O][":authority"]=`${i}:${o}`)),c&&this.setTimeout(c),s&&this.once("response",s),this[Re]=!1}get method(){return this[O][_s]}set method(e){e&&(this[O][_s]=e.toUpperCase())}get path(){return this[O][gs]}set path(e){e&&(this[O][gs]=e)}get _mustNotHaveABody(){return this.method==="GET"||this.method==="HEAD"||this.method==="DELETE"}_write(e,r,s){if(this._mustNotHaveABody){s(new Error("The GET, HEAD and DELETE methods must NOT have a body"));return}this.flushHeaders();let n=()=>this._request.write(e,r,s);this._request?n():this[fe].push(n)}_final(e){if(this.destroyed)return;this.flushHeaders();let r=()=>{if(this._mustNotHaveABody){e();return}this._request.end(e)};this._request?r():this[fe].push(r)}abort(){this.res&&this.res.complete||(this.aborted||process.nextTick(()=>this.emit("abort")),this.aborted=!0,this.destroy())}_destroy(e,r){this.res&&this.res._dump(),this._request&&this._request.destroy(),r(e)}async flushHeaders(){if(this[Re]||this.destroyed)return;this[Re]=!0;let e=this.method===xo,r=s=>{if(this._request=s,this.destroyed){s.destroy();return}e||Eo(s,this,["timeout","continue","close","error"]);let n=i=>(...c)=>{!this.writable&&!this.destroyed?i(...c):this.once("finish",()=>{i(...c)})};s.once("response",n((i,c,h)=>{let l=new bo(this.socket,s.readableHighWaterMark);this.res=l,l.req=this,l.statusCode=i[ys],l.headers=i,l.rawHeaders=h,l.once("end",()=>{this.aborted?(l.aborted=!0,l.emit("aborted")):(l.complete=!0,l.socket=null,l.connection=null)}),e?(l.upgrade=!0,this.emit("connect",l,s,Buffer.alloc(0))?this.emit("close"):s.destroy()):(s.on("data",g=>{!l._dumped&&!l.push(g)&&s.pause()}),s.once("end",()=>{l.push(null)}),this.emit("response",l)||l._dump())})),s.once("headers",n(i=>this.emit("information",{statusCode:i[ys]}))),s.once("trailers",n((i,c,h)=>{let{res:l}=this;l.trailers=i,l.rawTrailers=h}));let{socket:o}=s.session;this.socket=o,this.connection=o;for(let i of this[fe])i();this.emit("socket",this.socket)};if(this[ft])try{r(this[ft].request(this[O]))}catch(s){this.emit("error",s)}else{this.reusedSocket=!0;try{r(await this.agent.request(this[lt],this[bs],this[O]))}catch(s){this.emit("error",s)}}}getHeader(e){if(typeof e!="string")throw new ht("name","string",e);return this[O][e.toLowerCase()]}get headersSent(){return this[Re]}removeHeader(e){if(typeof e!="string")throw new ht("name","string",e);if(this.headersSent)throw new ps("remove");delete this[O][e.toLowerCase()]}setHeader(e,r){if(this.headersSent)throw new ps("set");if(typeof e!="string"||!Co.test(e)&&!vo(e))throw new To("Header name",e);if(typeof r>"u")throw new Ro(r,e);if(ko.test(r))throw new Po("header content",e);this[O][e.toLowerCase()]=r}setNoDelay(){}setSocketKeepAlive(){}setTimeout(e,r){let s=()=>this._request.setTimeout(e,r);return this._request?s():this[fe].push(s),this}get maxHeadersCount(){if(!this.destroyed&&this._request)return this._request.session.localSettings.maxHeaderListSize}set maxHeadersCount(e){}};Es.exports=ws});var Ss=v((Pc,vs)=>{"use strict";var Ao=require("tls");vs.exports=(t={},e=Ao.connect)=>new Promise((r,s)=>{let n=!1,o,i=async()=>{await h,o.off("timeout",c),o.off("error",s),t.resolveSocket?(r({alpnProtocol:o.alpnProtocol,socket:o,timeout:n}),n&&(await Promise.resolve(),o.emit("timeout"))):(o.destroy(),r({alpnProtocol:o.alpnProtocol,timeout:n}))},c=async()=>{n=!0,i()},h=(async()=>{try{o=await e(t,i),o.on("error",s),o.once("timeout",c)}catch(l){s(l)}})()})});var Rs=v((xc,Ts)=>{"use strict";var Oo=require("net");Ts.exports=t=>{let e=t.host,r=t.headers&&t.headers.host;return r&&(r.startsWith("[")?r.indexOf("]")===-1?e=r:e=r.slice(1,-1):e=r.split(":",1)[0]),Oo.isIP(e)?"":e}});var Cs=v((Cc,pt)=>{"use strict";var Ps=require("http"),mt=require("https"),qo=Ss(),jo=it(),Ho=dt(),Io=Rs(),Lo=ut(),Pe=new jo({maxSize:100}),de=new Map,xs=(t,e,r)=>{e._httpMessage={shouldKeepAlive:!0};let s=()=>{t.emit("free",e,r)};e.on("free",s);let n=()=>{t.removeSocket(e,r)};e.on("close",n);let o=()=>{t.removeSocket(e,r),e.off("close",n),e.off("free",s),e.off("agentRemove",o)};e.on("agentRemove",o),t.emit("free",e,r)},Do=async t=>{let e=`${t.host}:${t.port}:${t.ALPNProtocols.sort()}`;if(!Pe.has(e)){if(de.has(e))return(await de.get(e)).alpnProtocol;let{path:r,agent:s}=t;t.path=t.socketPath;let n=qo(t);de.set(e,n);try{let{socket:o,alpnProtocol:i}=await n;if(Pe.set(e,i),t.path=r,i==="h2")o.destroy();else{let{globalAgent:c}=mt,h=mt.Agent.prototype.createConnection;s?s.createConnection===h?xs(s,o,t):o.destroy():c.createConnection===h?xs(c,o,t):o.destroy()}return de.delete(e),i}catch(o){throw de.delete(e),o}}return Pe.get(e)};pt.exports=async(t,e,r)=>{if((typeof t=="string"||t instanceof URL)&&(t=Lo(new URL(t))),typeof e=="function"&&(r=e,e=void 0),e=A(E(E({ALPNProtocols:["h2","http/1.1"]},t),e),{resolveSocket:!0}),!Array.isArray(e.ALPNProtocols)||e.ALPNProtocols.length===0)throw new Error("The `ALPNProtocols` option must be an Array with at least one entry");e.protocol=e.protocol||"https:";let s=e.protocol==="https:";e.host=e.hostname||e.host||"localhost",e.session=e.tlsSession,e.servername=e.servername||Io(e),e.port=e.port||(s?443:80),e._defaultAgent=s?mt.globalAgent:Ps.globalAgent;let n=e.agent;if(n){if(n.addRequest)throw new Error("The `options.agent` object can contain only `http`, `https` or `http2` properties");e.agent=n[s?"https":"http"]}return s&&await Do(e)==="h2"?(n&&(e.agent=n.http2),new Ho(e,r)):Ps.request(e,r)};pt.exports.protocolCache=Pe});var As=v((kc,ks)=>{"use strict";var Uo=require("http2"),Mo=at(),yt=dt(),No=ct(),Bo=Cs(),zo=(t,e,r)=>new yt(t,e,r),$o=(t,e,r)=>{let s=new yt(t,e,r);return s.end(),s};ks.exports=A(E(A(E({},Uo),{ClientRequest:yt,IncomingMessage:No}),Mo),{request:zo,get:$o,auto:Bo})});var gt=v(_t=>{"use strict";Object.defineProperty(_t,"__esModule",{value:!0});var Os=B();_t.default=t=>Os.default.nodeStream(t)&&Os.default.function_(t.getBoundary)});var Is=v(bt=>{"use strict";Object.defineProperty(bt,"__esModule",{value:!0});var js=require("fs"),Hs=require("util"),qs=B(),Fo=gt(),Vo=Hs.promisify(js.stat);bt.default=async(t,e)=>{if(e&&"content-length"in e)return Number(e["content-length"]);if(!t)return 0;if(qs.default.string(t))return Buffer.byteLength(t);if(qs.default.buffer(t))return t.length;if(Fo.default(t))return Hs.promisify(t.getLength.bind(t))();if(t instanceof js.ReadStream){let{size:r}=await Vo(t.path);return r===0?void 0:r}}});var Et=v(wt=>{"use strict";Object.defineProperty(wt,"__esModule",{value:!0});function Wo(t,e,r){let s={};for(let n of r)s[n]=(...o)=>{e.emit(n,...o)},t.on(n,s[n]);return()=>{for(let n of r)t.off(n,s[n])}}wt.default=Wo});var Ls=v(vt=>{"use strict";Object.defineProperty(vt,"__esModule",{value:!0});vt.default=()=>{let t=[];return{once(e,r,s){e.once(r,s),t.push({origin:e,event:r,fn:s})},unhandleAll(){for(let e of t){let{origin:r,event:s,fn:n}=e;r.removeListener(s,n)}t.length=0}}}});var Us=v(me=>{"use strict";Object.defineProperty(me,"__esModule",{value:!0});me.TimeoutError=void 0;var Go=require("net"),Jo=Ls(),Ds=Symbol("reentry"),Ko=()=>{},St=class extends Error{constructor(e,r){super(`Timeout awaiting '${r}' for ${e}ms`);this.event=r,this.name="TimeoutError",this.code="ETIMEDOUT"}};me.TimeoutError=St;me.default=(t,e,r)=>{if(Ds in t)return Ko;t[Ds]=!0;let s=[],{once:n,unhandleAll:o}=Jo.default(),i=(m,p,d)=>{var y;let b=setTimeout(p,m,m,d);(y=b.unref)===null||y===void 0||y.call(b);let f=()=>{clearTimeout(b)};return s.push(f),f},{host:c,hostname:h}=r,l=(m,p)=>{t.destroy(new St(m,p))},g=()=>{for(let m of s)m();o()};if(t.once("error",m=>{if(g(),t.listenerCount("error")===0)throw m}),t.once("close",g),n(t,"response",m=>{n(m,"end",g)}),typeof e.request<"u"&&i(e.request,l,"request"),typeof e.socket<"u"){let m=()=>{l(e.socket,"socket")};t.setTimeout(e.socket,m),s.push(()=>{t.removeListener("timeout",m)})}return n(t,"socket",m=>{var p;let{socketPath:d}=t;if(m.connecting){let y=Boolean(d??Go.isIP((p=h??c)!==null&&p!==void 0?p:"")!==0);if(typeof e.lookup<"u"&&!y&&typeof m.address().address>"u"){let b=i(e.lookup,l,"lookup");n(m,"lookup",b)}if(typeof e.connect<"u"){let b=()=>i(e.connect,l,"connect");y?n(m,"connect",b()):n(m,"lookup",f=>{f===null&&n(m,"connect",b())})}typeof e.secureConnect<"u"&&r.protocol==="https:"&&n(m,"connect",()=>{let b=i(e.secureConnect,l,"secureConnect");n(m,"secureConnect",b)})}if(typeof e.send<"u"){let y=()=>i(e.send,l,"send");m.connecting?n(m,"connect",()=>{n(t,"upload-complete",y())}):n(t,"upload-complete",y())}}),typeof e.response<"u"&&n(t,"upload-complete",()=>{let m=i(e.response,l,"response");n(t,"response",m)}),g}});var Ns=v(Tt=>{"use strict";Object.defineProperty(Tt,"__esModule",{value:!0});var Ms=B();Tt.default=t=>{t=t;let e={protocol:t.protocol,hostname:Ms.default.string(t.hostname)&&t.hostname.startsWith("[")?t.hostname.slice(1,-1):t.hostname,host:t.host,hash:t.hash,search:t.search,pathname:t.pathname,href:t.href,path:`${t.pathname||""}${t.search||""}`};return Ms.default.string(t.port)&&t.port.length>0&&(e.port=Number(t.port)),(t.username||t.password)&&(e.auth=`${t.username||""}:${t.password||""}`),e}});var Bs=v(Rt=>{"use strict";Object.defineProperty(Rt,"__esModule",{value:!0});var Qo=require("url"),Yo=["protocol","host","hostname","port","pathname","search"];Rt.default=(t,e)=>{var r,s;if(e.path){if(e.pathname)throw new TypeError("Parameters `path` and `pathname` are mutually exclusive.");if(e.search)throw new TypeError("Parameters `path` and `search` are mutually exclusive.");if(e.searchParams)throw new TypeError("Parameters `path` and `searchParams` are mutually exclusive.")}if(e.search&&e.searchParams)throw new TypeError("Parameters `search` and `searchParams` are mutually exclusive.");if(!t){if(!e.protocol)throw new TypeError("No URL protocol specified");t=`${e.protocol}//${(s=(r=e.hostname)!==null&&r!==void 0?r:e.host)!==null&&s!==void 0?s:""}`}let n=new Qo.URL(t);if(e.path){let o=e.path.indexOf("?");o===-1?e.pathname=e.path:(e.pathname=e.path.slice(0,o),e.search=e.path.slice(o+1)),delete e.path}for(let o of Yo)e[o]&&(n[o]=e[o].toString());return n}});var $s=v(Pt=>{"use strict";Object.defineProperty(Pt,"__esModule",{value:!0});var zs=class{constructor(){this.weakMap=new WeakMap,this.map=new Map}set(e,r){typeof e=="object"?this.weakMap.set(e,r):this.map.set(e,r)}get(e){return typeof e=="object"?this.weakMap.get(e):this.map.get(e)}has(e){return typeof e=="object"?this.weakMap.has(e):this.map.has(e)}};Pt.default=zs});var Ct=v(xt=>{"use strict";Object.defineProperty(xt,"__esModule",{value:!0});var Xo=async t=>{let e=[],r=0;for await(let s of t)e.push(s),r+=Buffer.byteLength(s);return Buffer.isBuffer(e[0])?Buffer.concat(e,r):Buffer.from(e.join(""))};xt.default=Xo});var Vs=v(K=>{"use strict";Object.defineProperty(K,"__esModule",{value:!0});K.dnsLookupIpVersionToFamily=K.isDnsLookupIpVersion=void 0;var Fs={auto:0,ipv4:4,ipv6:6};K.isDnsLookupIpVersion=t=>t in Fs;K.dnsLookupIpVersionToFamily=t=>{if(K.isDnsLookupIpVersion(t))return Fs[t];throw new Error("Invalid DNS lookup IP version")}});var kt=v(xe=>{"use strict";Object.defineProperty(xe,"__esModule",{value:!0});xe.isResponseOk=void 0;xe.isResponseOk=t=>{let{statusCode:e}=t,r=t.request.options.followRedirect?299:399;return e>=200&&e<=r||e===304}});var Gs=v(At=>{"use strict";Object.defineProperty(At,"__esModule",{value:!0});var Ws=new Set;At.default=t=>{Ws.has(t)||(Ws.add(t),process.emitWarning(`Got: ${t}`,{type:"DeprecationWarning"}))}});var Js=v(Ot=>{"use strict";Object.defineProperty(Ot,"__esModule",{value:!0});var x=B(),Zo=(t,e)=>{if(x.default.null_(t.encoding))throw new TypeError("To get a Buffer, set `options.responseType` to `buffer` instead");x.assert.any([x.default.string,x.default.undefined],t.encoding),x.assert.any([x.default.boolean,x.default.undefined],t.resolveBodyOnly),x.assert.any([x.default.boolean,x.default.undefined],t.methodRewriting),x.assert.any([x.default.boolean,x.default.undefined],t.isStream),x.assert.any([x.default.string,x.default.undefined],t.responseType),t.responseType===void 0&&(t.responseType="text");let{retry:r}=t;if(e?t.retry=E({},e.retry):t.retry={calculateDelay:s=>s.computedValue,limit:0,methods:[],statusCodes:[],errorCodes:[],maxRetryAfter:void 0},x.default.object(r)?(t.retry=E(E({},t.retry),r),t.retry.methods=[...new Set(t.retry.methods.map(s=>s.toUpperCase()))],t.retry.statusCodes=[...new Set(t.retry.statusCodes)],t.retry.errorCodes=[...new Set(t.retry.errorCodes)]):x.default.number(r)&&(t.retry.limit=r),x.default.undefined(t.retry.maxRetryAfter)&&(t.retry.maxRetryAfter=Math.min(...[t.timeout.request,t.timeout.connect].filter(x.default.number))),x.default.object(t.pagination)){e&&(t.pagination=E(E({},e.pagination),t.pagination));let{pagination:s}=t;if(!x.default.function_(s.transform))throw new Error("`options.pagination.transform` must be implemented");if(!x.default.function_(s.shouldContinue))throw new Error("`options.pagination.shouldContinue` must be implemented");if(!x.default.function_(s.filter))throw new TypeError("`options.pagination.filter` must be implemented");if(!x.default.function_(s.paginate))throw new Error("`options.pagination.paginate` must be implemented")}return t.responseType==="json"&&t.headers.accept===void 0&&(t.headers.accept="application/json"),t};Ot.default=Zo});var Ks=v(pe=>{"use strict";Object.defineProperty(pe,"__esModule",{value:!0});pe.retryAfterStatusCodes=void 0;pe.retryAfterStatusCodes=new Set([413,429,503]);var ea=({attemptCount:t,retryOptions:e,error:r,retryAfter:s})=>{if(t>e.limit)return 0;let n=e.methods.includes(r.options.method),o=e.errorCodes.includes(r.code),i=r.response&&e.statusCodes.includes(r.response.statusCode);if(!n||!o&&!i)return 0;if(r.response){if(s)return e.maxRetryAfter===void 0||s>e.maxRetryAfter?0:s;if(r.response.statusCode===413)return 0}let c=Math.random()*100;return 2**(t-1)*1e3+c};pe.default=ea});var _e=v(T=>{"use strict";Object.defineProperty(T,"__esModule",{value:!0});T.UnsupportedProtocolError=T.ReadError=T.TimeoutError=T.UploadError=T.CacheError=T.HTTPError=T.MaxRedirectsError=T.RequestError=T.setNonEnumerableProperties=T.knownHookEvents=T.withoutBody=T.kIsNormalizedAlready=void 0;var Qs=require("util"),Ys=require("stream"),ta=require("fs"),F=require("url"),Xs=require("http"),qt=require("http"),ra=require("https"),sa=or(),na=dr(),Zs=Jr(),ia=Xr(),oa=As(),aa=Se(),u=B(),ca=Is(),en=gt(),ua=Et(),tn=Us(),ha=Ns(),rn=Bs(),la=$s(),fa=Ct(),sn=Vs(),da=kt(),V=Gs(),ma=Js(),pa=Ks(),jt,k=Symbol("request"),Ae=Symbol("response"),re=Symbol("responseSize"),se=Symbol("downloadedSize"),ne=Symbol("bodySize"),ie=Symbol("uploadedSize"),Ce=Symbol("serverResponsesPiped"),nn=Symbol("unproxyEvents"),on=Symbol("isFromCache"),Ht=Symbol("cancelTimeouts"),an=Symbol("startedReading"),oe=Symbol("stopReading"),ke=Symbol("triggerRead"),W=Symbol("body"),ye=Symbol("jobs"),cn=Symbol("originalResponse"),un=Symbol("retryTimeout");T.kIsNormalizedAlready=Symbol("isNormalizedAlready");var ya=u.default.string(process.versions.brotli);T.withoutBody=new Set(["GET","HEAD"]);T.knownHookEvents=["init","beforeRequest","beforeRedirect","beforeError","beforeRetry","afterResponse"];function _a(t){for(let e in t){let r=t[e];if(!u.default.string(r)&&!u.default.number(r)&&!u.default.boolean(r)&&!u.default.null_(r)&&!u.default.undefined(r))throw new TypeError(`The \`searchParams\` value '${String(r)}' must be a string, number, boolean or null`)}}function ga(t){return u.default.object(t)&&!("statusCode"in t)}var It=new la.default,ba=async t=>new Promise((e,r)=>{let s=n=>{r(n)};t.pending||e(),t.once("error",s),t.once("ready",()=>{t.off("error",s),e()})}),wa=new Set([300,301,302,303,304,307,308]),Ea=["context","body","json","form"];T.setNonEnumerableProperties=(t,e)=>{let r={};for(let s of t)if(!!s)for(let n of Ea)n in s&&(r[n]={writable:!0,configurable:!0,enumerable:!1,value:s[n]});Object.defineProperties(e,r)};var C=class extends Error{constructor(e,r,s){var n,o;super(e);if(Error.captureStackTrace(this,this.constructor),this.name="RequestError",this.code=(n=r.code)!==null&&n!==void 0?n:"ERR_GOT_REQUEST_ERROR",s instanceof zt?(Object.defineProperty(this,"request",{enumerable:!1,value:s}),Object.defineProperty(this,"response",{enumerable:!1,value:s[Ae]}),Object.defineProperty(this,"options",{enumerable:!1,value:s.options})):Object.defineProperty(this,"options",{enumerable:!1,value:s}),this.timings=(o=this.request)===null||o===void 0?void 0:o.timings,u.default.string(r.stack)&&u.default.string(this.stack)){let i=this.stack.indexOf(this.message)+this.message.length,c=this.stack.slice(i).split(`
`).reverse(),h=r.stack.slice(r.stack.indexOf(r.message)+r.message.length).split(`
`).reverse();for(;h.length!==0&&h[0]===c[0];)c.shift();this.stack=`${this.stack.slice(0,i)}${c.reverse().join(`
`)}${h.reverse().join(`
`)}`}}};T.RequestError=C;var Lt=class extends C{constructor(e){super(`Redirected ${e.options.maxRedirects} times. Aborting.`,{},e);this.name="MaxRedirectsError",this.code="ERR_TOO_MANY_REDIRECTS"}};T.MaxRedirectsError=Lt;var Dt=class extends C{constructor(e){super(`Response code ${e.statusCode} (${e.statusMessage})`,{},e.request);this.name="HTTPError",this.code="ERR_NON_2XX_3XX_RESPONSE"}};T.HTTPError=Dt;var Ut=class extends C{constructor(e,r){super(e.message,e,r);this.name="CacheError",this.code=this.code==="ERR_GOT_REQUEST_ERROR"?"ERR_CACHE_ACCESS":this.code}};T.CacheError=Ut;var Mt=class extends C{constructor(e,r){super(e.message,e,r);this.name="UploadError",this.code=this.code==="ERR_GOT_REQUEST_ERROR"?"ERR_UPLOAD":this.code}};T.UploadError=Mt;var Nt=class extends C{constructor(e,r,s){super(e.message,e,s);this.name="TimeoutError",this.event=e.event,this.timings=r}};T.TimeoutError=Nt;var Oe=class extends C{constructor(e,r){super(e.message,e,r);this.name="ReadError",this.code=this.code==="ERR_GOT_REQUEST_ERROR"?"ERR_READING_RESPONSE_STREAM":this.code}};T.ReadError=Oe;var Bt=class extends C{constructor(e){super(`Unsupported protocol "${e.url.protocol}"`,{},e);this.name="UnsupportedProtocolError",this.code="ERR_UNSUPPORTED_PROTOCOL"}};T.UnsupportedProtocolError=Bt;var va=["socket","connect","continue","information","upgrade","timeout"],zt=class extends Ys.Duplex{constructor(e,r={},s){super({autoDestroy:!1,highWaterMark:0});this[se]=0,this[ie]=0,this.requestInitialized=!1,this[Ce]=new Set,this.redirects=[],this[oe]=!1,this[ke]=!1,this[ye]=[],this.retryCount=0,this._progressCallbacks=[];let n=()=>this._unlockWrite(),o=()=>this._lockWrite();this.on("pipe",l=>{l.prependListener("data",n),l.on("data",o),l.prependListener("end",n),l.on("end",o)}),this.on("unpipe",l=>{l.off("data",n),l.off("data",o),l.off("end",n),l.off("end",o)}),this.on("pipe",l=>{l instanceof qt.IncomingMessage&&(this.options.headers=E(E({},l.headers),this.options.headers))});let{json:i,body:c,form:h}=r;if((i||c||h)&&this._lockWrite(),T.kIsNormalizedAlready in r)this.options=r;else try{this.options=this.constructor.normalizeArguments(e,r,s)}catch(l){u.default.nodeStream(r.body)&&r.body.destroy(),this.destroy(l);return}(async()=>{var l;try{this.options.body instanceof ta.ReadStream&&await ba(this.options.body);let{url:g}=this.options;if(!g)throw new TypeError("Missing `url` property");if(this.requestUrl=g.toString(),decodeURI(this.requestUrl),await this._finalizeBody(),await this._makeRequest(),this.destroyed){(l=this[k])===null||l===void 0||l.destroy();return}for(let m of this[ye])m();this[ye].length=0,this.requestInitialized=!0}catch(g){if(g instanceof C){this._beforeError(g);return}this.destroyed||this.destroy(g)}})()}static normalizeArguments(e,r,s){var n,o,i,c,h;let l=r;if(u.default.object(e)&&!u.default.urlInstance(e))r=E(E(E({},s),e),r);else{if(e&&r&&r.url!==void 0)throw new TypeError("The `url` option is mutually exclusive with the `input` argument");r=E(E({},s),r),e!==void 0&&(r.url=e),u.default.urlInstance(r.url)&&(r.url=new F.URL(r.url.toString()))}if(r.cache===!1&&(r.cache=void 0),r.dnsCache===!1&&(r.dnsCache=void 0),u.assert.any([u.default.string,u.default.undefined],r.method),u.assert.any([u.default.object,u.default.undefined],r.headers),u.assert.any([u.default.string,u.default.urlInstance,u.default.undefined],r.prefixUrl),u.assert.any([u.default.object,u.default.undefined],r.cookieJar),u.assert.any([u.default.object,u.default.string,u.default.undefined],r.searchParams),u.assert.any([u.default.object,u.default.string,u.default.undefined],r.cache),u.assert.any([u.default.object,u.default.number,u.default.undefined],r.timeout),u.assert.any([u.default.object,u.default.undefined],r.context),u.assert.any([u.default.object,u.default.undefined],r.hooks),u.assert.any([u.default.boolean,u.default.undefined],r.decompress),u.assert.any([u.default.boolean,u.default.undefined],r.ignoreInvalidCookies),u.assert.any([u.default.boolean,u.default.undefined],r.followRedirect),u.assert.any([u.default.number,u.default.undefined],r.maxRedirects),u.assert.any([u.default.boolean,u.default.undefined],r.throwHttpErrors),u.assert.any([u.default.boolean,u.default.undefined],r.http2),u.assert.any([u.default.boolean,u.default.undefined],r.allowGetBody),u.assert.any([u.default.string,u.default.undefined],r.localAddress),u.assert.any([sn.isDnsLookupIpVersion,u.default.undefined],r.dnsLookupIpVersion),u.assert.any([u.default.object,u.default.undefined],r.https),u.assert.any([u.default.boolean,u.default.undefined],r.rejectUnauthorized),r.https&&(u.assert.any([u.default.boolean,u.default.undefined],r.https.rejectUnauthorized),u.assert.any([u.default.function_,u.default.undefined],r.https.checkServerIdentity),u.assert.any([u.default.string,u.default.object,u.default.array,u.default.undefined],r.https.certificateAuthority),u.assert.any([u.default.string,u.default.object,u.default.array,u.default.undefined],r.https.key),u.assert.any([u.default.string,u.default.object,u.default.array,u.default.undefined],r.https.certificate),u.assert.any([u.default.string,u.default.undefined],r.https.passphrase),u.assert.any([u.default.string,u.default.buffer,u.default.array,u.default.undefined],r.https.pfx)),u.assert.any([u.default.object,u.default.undefined],r.cacheOptions),u.default.string(r.method)?r.method=r.method.toUpperCase():r.method="GET",r.headers===(s==null?void 0:s.headers)?r.headers=E({},r.headers):r.headers=aa(E(E({},s==null?void 0:s.headers),r.headers)),"slashes"in r)throw new TypeError("The legacy `url.Url` has been deprecated. Use `URL` instead.");if("auth"in r)throw new TypeError("Parameter `auth` is deprecated. Use `username` / `password` instead.");if("searchParams"in r&&r.searchParams&&r.searchParams!==(s==null?void 0:s.searchParams)){let d;if(u.default.string(r.searchParams)||r.searchParams instanceof F.URLSearchParams)d=new F.URLSearchParams(r.searchParams);else{_a(r.searchParams),d=new F.URLSearchParams;for(let y in r.searchParams){let b=r.searchParams[y];b===null?d.append(y,""):b!==void 0&&d.append(y,b)}}(n=s==null?void 0:s.searchParams)===null||n===void 0||n.forEach((y,b)=>{d.has(b)||d.append(b,y)}),r.searchParams=d}if(r.username=(o=r.username)!==null&&o!==void 0?o:"",r.password=(i=r.password)!==null&&i!==void 0?i:"",u.default.undefined(r.prefixUrl)?r.prefixUrl=(c=s==null?void 0:s.prefixUrl)!==null&&c!==void 0?c:"":(r.prefixUrl=r.prefixUrl.toString(),r.prefixUrl!==""&&!r.prefixUrl.endsWith("/")&&(r.prefixUrl+="/")),u.default.string(r.url)){if(r.url.startsWith("/"))throw new Error("`input` must not start with a slash when using `prefixUrl`");r.url=rn.default(r.prefixUrl+r.url,r)}else(u.default.undefined(r.url)&&r.prefixUrl!==""||r.protocol)&&(r.url=rn.default(r.prefixUrl,r));if(r.url){"port"in r&&delete r.port;let{prefixUrl:d}=r;Object.defineProperty(r,"prefixUrl",{set:b=>{let f=r.url;if(!f.href.startsWith(b))throw new Error(`Cannot change \`prefixUrl\` from ${d} to ${b}: ${f.href}`);r.url=new F.URL(b+f.href.slice(d.length)),d=b},get:()=>d});let{protocol:y}=r.url;if(y==="unix:"&&(y="http:",r.url=new F.URL(`http://unix${r.url.pathname}${r.url.search}`)),r.searchParams&&(r.url.search=r.searchParams.toString()),y!=="http:"&&y!=="https:")throw new Bt(r);r.username===""?r.username=r.url.username:r.url.username=r.username,r.password===""?r.password=r.url.password:r.url.password=r.password}let{cookieJar:g}=r;if(g){let{setCookie:d,getCookieString:y}=g;u.assert.function_(d),u.assert.function_(y),d.length===4&&y.length===0&&(d=Qs.promisify(d.bind(r.cookieJar)),y=Qs.promisify(y.bind(r.cookieJar)),r.cookieJar={setCookie:d,getCookieString:y})}let{cache:m}=r;if(m&&(It.has(m)||It.set(m,new Zs((d,y)=>{let b=d[k](d,y);return u.default.promise(b)&&(b.once=(f,w)=>{if(f==="error")b.catch(w);else if(f==="abort")(async()=>{try{(await b).once("abort",w)}catch{}})();else throw new Error(`Unknown HTTP2 promise event: ${f}`);return b}),b},m))),r.cacheOptions=E({},r.cacheOptions),r.dnsCache===!0)jt||(jt=new na.default),r.dnsCache=jt;else if(!u.default.undefined(r.dnsCache)&&!r.dnsCache.lookup)throw new TypeError(`Parameter \`dnsCache\` must be a CacheableLookup instance or a boolean, got ${u.default(r.dnsCache)}`);u.default.number(r.timeout)?r.timeout={request:r.timeout}:s&&r.timeout!==s.timeout?r.timeout=E(E({},s.timeout),r.timeout):r.timeout=E({},r.timeout),r.context||(r.context={});let p=r.hooks===(s==null?void 0:s.hooks);r.hooks=E({},r.hooks);for(let d of T.knownHookEvents)if(d in r.hooks)if(u.default.array(r.hooks[d]))r.hooks[d]=[...r.hooks[d]];else throw new TypeError(`Parameter \`${d}\` must be an Array, got ${u.default(r.hooks[d])}`);else r.hooks[d]=[];if(s&&!p)for(let d of T.knownHookEvents)s.hooks[d].length>0&&(r.hooks[d]=[...s.hooks[d],...r.hooks[d]]);if("family"in r&&V.default('"options.family" was never documented, please use "options.dnsLookupIpVersion"'),(s==null?void 0:s.https)&&(r.https=E(E({},s.https),r.https)),"rejectUnauthorized"in r&&V.default('"options.rejectUnauthorized" is now deprecated, please use "options.https.rejectUnauthorized"'),"checkServerIdentity"in r&&V.default('"options.checkServerIdentity" was never documented, please use "options.https.checkServerIdentity"'),"ca"in r&&V.default('"options.ca" was never documented, please use "options.https.certificateAuthority"'),"key"in r&&V.default('"options.key" was never documented, please use "options.https.key"'),"cert"in r&&V.default('"options.cert" was never documented, please use "options.https.certificate"'),"passphrase"in r&&V.default('"options.passphrase" was never documented, please use "options.https.passphrase"'),"pfx"in r&&V.default('"options.pfx" was never documented, please use "options.https.pfx"'),"followRedirects"in r)throw new TypeError("The `followRedirects` option does not exist. Use `followRedirect` instead.");if(r.agent){for(let d in r.agent)if(d!=="http"&&d!=="https"&&d!=="http2")throw new TypeError(`Expected the \`options.agent\` properties to be \`http\`, \`https\` or \`http2\`, got \`${d}\``)}return r.maxRedirects=(h=r.maxRedirects)!==null&&h!==void 0?h:0,T.setNonEnumerableProperties([s,l],r),ma.default(r,s)}_lockWrite(){let e=()=>{throw new TypeError("The payload has been already provided")};this.write=e,this.end=e}_unlockWrite(){this.write=super.write,this.end=super.end}async _finalizeBody(){let{options:e}=this,{headers:r}=e,s=!u.default.undefined(e.form),n=!u.default.undefined(e.json),o=!u.default.undefined(e.body),i=s||n||o,c=T.withoutBody.has(e.method)&&!(e.method==="GET"&&e.allowGetBody);if(this._cannotHaveBody=c,i){if(c)throw new TypeError(`The \`${e.method}\` method cannot be used with a body`);if([o,s,n].filter(h=>h).length>1)throw new TypeError("The `body`, `json` and `form` options are mutually exclusive");if(o&&!(e.body instanceof Ys.Readable)&&!u.default.string(e.body)&&!u.default.buffer(e.body)&&!en.default(e.body))throw new TypeError("The `body` option must be a stream.Readable, string or Buffer");if(s&&!u.default.object(e.form))throw new TypeError("The `form` option must be an Object");{let h=!u.default.string(r["content-type"]);o?(en.default(e.body)&&h&&(r["content-type"]=`multipart/form-data; boundary=${e.body.getBoundary()}`),this[W]=e.body):s?(h&&(r["content-type"]="application/x-www-form-urlencoded"),this[W]=new F.URLSearchParams(e.form).toString()):(h&&(r["content-type"]="application/json"),this[W]=e.stringifyJson(e.json));let l=await ca.default(this[W],e.headers);u.default.undefined(r["content-length"])&&u.default.undefined(r["transfer-encoding"])&&!c&&!u.default.undefined(l)&&(r["content-length"]=String(l))}}else c?this._lockWrite():this._unlockWrite();this[ne]=Number(r["content-length"])||void 0}async _onResponseBase(e){let{options:r}=this,{url:s}=r;this[cn]=e,r.decompress&&(e=ia(e));let n=e.statusCode,o=e;o.statusMessage=o.statusMessage?o.statusMessage:Xs.STATUS_CODES[n],o.url=r.url.toString(),o.requestUrl=this.requestUrl,o.redirectUrls=this.redirects,o.request=this,o.isFromCache=e.fromCache||!1,o.ip=this.ip,o.retryCount=this.retryCount,this[on]=o.isFromCache,this[re]=Number(e.headers["content-length"])||void 0,this[Ae]=e,e.once("end",()=>{this[re]=this[se],this.emit("downloadProgress",this.downloadProgress)}),e.once("error",c=>{e.destroy(),this._beforeError(new Oe(c,this))}),e.once("aborted",()=>{this._beforeError(new Oe({name:"Error",message:"The server aborted pending request",code:"ECONNRESET"},this))}),this.emit("downloadProgress",this.downloadProgress);let i=e.headers["set-cookie"];if(u.default.object(r.cookieJar)&&i){let c=i.map(async h=>r.cookieJar.setCookie(h,s.toString()));r.ignoreInvalidCookies&&(c=c.map(async h=>h.catch(()=>{})));try{await Promise.all(c)}catch(h){this._beforeError(h);return}}if(r.followRedirect&&e.headers.location&&wa.has(n)){if(e.resume(),this[k]&&(this[Ht](),delete this[k],this[nn]()),(n===303&&r.method!=="GET"&&r.method!=="HEAD"||!r.methodRewriting)&&(r.method="GET","body"in r&&delete r.body,"json"in r&&delete r.json,"form"in r&&delete r.form,this[W]=void 0,delete r.headers["content-length"]),this.redirects.length>=r.maxRedirects){this._beforeError(new Lt(this));return}try{let h=Buffer.from(e.headers.location,"binary").toString(),l=new F.URL(h,s),g=l.toString();decodeURI(g),l.hostname!==s.hostname||l.port!==s.port?("host"in r.headers&&delete r.headers.host,"cookie"in r.headers&&delete r.headers.cookie,"authorization"in r.headers&&delete r.headers.authorization,(r.username||r.password)&&(r.username="",r.password="")):(l.username=r.username,l.password=r.password),this.redirects.push(g),r.url=l;for(let m of r.hooks.beforeRedirect)await m(r,o);this.emit("redirect",o,r),await this._makeRequest()}catch(h){this._beforeError(h);return}return}if(r.isStream&&r.throwHttpErrors&&!da.isResponseOk(o)){this._beforeError(new Dt(o));return}e.on("readable",()=>{this[ke]&&this._read()}),this.on("resume",()=>{e.resume()}),this.on("pause",()=>{e.pause()}),e.once("end",()=>{this.push(null)}),this.emit("response",e);for(let c of this[Ce])if(!c.headersSent){for(let h in e.headers){let l=r.decompress?h!=="content-encoding":!0,g=e.headers[h];l&&c.setHeader(h,g)}c.statusCode=n}}async _onResponse(e){try{await this._onResponseBase(e)}catch(r){this._beforeError(r)}}_onRequest(e){let{options:r}=this,{timeout:s,url:n}=r;sa.default(e),this[Ht]=tn.default(e,s,n);let o=r.cache?"cacheableResponse":"response";e.once(o,h=>{this._onResponse(h)}),e.once("error",h=>{var l;e.destroy(),(l=e.res)===null||l===void 0||l.removeAllListeners("end"),h=h instanceof tn.TimeoutError?new Nt(h,this.timings,this):new C(h.message,h,this),this._beforeError(h)}),this[nn]=ua.default(e,this,va),this[k]=e,this.emit("uploadProgress",this.uploadProgress);let i=this[W],c=this.redirects.length===0?this:e;u.default.nodeStream(i)?(i.pipe(c),i.once("error",h=>{this._beforeError(new Mt(h,this))})):(this._unlockWrite(),u.default.undefined(i)?(this._cannotHaveBody||this._noPipe)&&(c.end(),this._lockWrite()):(this._writeRequest(i,void 0,()=>{}),c.end(),this._lockWrite())),this.emit("request",e)}async _createCacheableRequest(e,r){return new Promise((s,n)=>{Object.assign(r,ha.default(e)),delete r.url;let o,i=It.get(r.cache)(r,async c=>{c._readableState.autoDestroy=!1,o&&(await o).emit("cacheableResponse",c),s(c)});r.url=e,i.once("error",n),i.once("request",async c=>{o=c,s(o)})})}async _makeRequest(){var e,r,s,n,o;let{options:i}=this,{headers:c}=i;for(let w in c)if(u.default.undefined(c[w]))delete c[w];else if(u.default.null_(c[w]))throw new TypeError(`Use \`undefined\` instead of \`null\` to delete the \`${w}\` header`);if(i.decompress&&u.default.undefined(c["accept-encoding"])&&(c["accept-encoding"]=ya?"gzip, deflate, br":"gzip, deflate"),i.cookieJar){let w=await i.cookieJar.getCookieString(i.url.toString());u.default.nonEmptyString(w)&&(i.headers.cookie=w)}for(let w of i.hooks.beforeRequest){let P=await w(i);if(!u.default.undefined(P)){i.request=()=>P;break}}i.body&&this[W]!==i.body&&(this[W]=i.body);let{agent:h,request:l,timeout:g,url:m}=i;if(i.dnsCache&&!("lookup"in i)&&(i.lookup=i.dnsCache.lookup),m.hostname==="unix"){let w=/(?<socketPath>.+?):(?<path>.+)/.exec(`${m.pathname}${m.search}`);if(w==null?void 0:w.groups){let{socketPath:P,path:q}=w.groups;Object.assign(i,{socketPath:P,path:q,host:""})}}let p=m.protocol==="https:",d;i.http2?d=oa.auto:d=p?ra.request:Xs.request;let y=(e=i.request)!==null&&e!==void 0?e:d,b=i.cache?this._createCacheableRequest:y;h&&!i.http2&&(i.agent=h[p?"https":"http"]),i[k]=y,delete i.request,delete i.timeout;let f=i;if(f.shared=(r=i.cacheOptions)===null||r===void 0?void 0:r.shared,f.cacheHeuristic=(s=i.cacheOptions)===null||s===void 0?void 0:s.cacheHeuristic,f.immutableMinTimeToLive=(n=i.cacheOptions)===null||n===void 0?void 0:n.immutableMinTimeToLive,f.ignoreCargoCult=(o=i.cacheOptions)===null||o===void 0?void 0:o.ignoreCargoCult,i.dnsLookupIpVersion!==void 0)try{f.family=sn.dnsLookupIpVersionToFamily(i.dnsLookupIpVersion)}catch{throw new Error("Invalid `dnsLookupIpVersion` option value")}i.https&&("rejectUnauthorized"in i.https&&(f.rejectUnauthorized=i.https.rejectUnauthorized),i.https.checkServerIdentity&&(f.checkServerIdentity=i.https.checkServerIdentity),i.https.certificateAuthority&&(f.ca=i.https.certificateAuthority),i.https.certificate&&(f.cert=i.https.certificate),i.https.key&&(f.key=i.https.key),i.https.passphrase&&(f.passphrase=i.https.passphrase),i.https.pfx&&(f.pfx=i.https.pfx));try{let w=await b(m,f);u.default.undefined(w)&&(w=d(m,f)),i.request=l,i.timeout=g,i.agent=h,i.https&&("rejectUnauthorized"in i.https&&delete f.rejectUnauthorized,i.https.checkServerIdentity&&delete f.checkServerIdentity,i.https.certificateAuthority&&delete f.ca,i.https.certificate&&delete f.cert,i.https.key&&delete f.key,i.https.passphrase&&delete f.passphrase,i.https.pfx&&delete f.pfx),ga(w)?this._onRequest(w):this.writable?(this.once("finish",()=>{this._onResponse(w)}),this._unlockWrite(),this.end(),this._lockWrite()):this._onResponse(w)}catch(w){throw w instanceof Zs.CacheError?new Ut(w,this):new C(w.message,w,this)}}async _error(e){try{for(let r of this.options.hooks.beforeError)e=await r(e)}catch(r){e=new C(r.message,r,this)}this.destroy(e)}_beforeError(e){if(this[oe])return;let{options:r}=this,s=this.retryCount+1;this[oe]=!0,e instanceof C||(e=new C(e.message,e,this));let n=e,{response:o}=n;(async()=>{if(o&&!o.body){o.setEncoding(this._readableState.encoding);try{o.rawBody=await fa.default(o),o.body=o.rawBody.toString()}catch{}}if(this.listenerCount("retry")!==0){let i;try{let c;o&&"retry-after"in o.headers&&(c=Number(o.headers["retry-after"]),Number.isNaN(c)?(c=Date.parse(o.headers["retry-after"])-Date.now(),c<=0&&(c=1)):c*=1e3),i=await r.retry.calculateDelay({attemptCount:s,retryOptions:r.retry,error:n,retryAfter:c,computedValue:pa.default({attemptCount:s,retryOptions:r.retry,error:n,retryAfter:c,computedValue:0})})}catch(c){this._error(new C(c.message,c,this));return}if(i){let c=async()=>{try{for(let h of this.options.hooks.beforeRetry)await h(this.options,n,s)}catch(h){this._error(new C(h.message,e,this));return}this.destroyed||(this.destroy(),this.emit("retry",s,e))};this[un]=setTimeout(c,i);return}}this._error(n)})()}_read(){this[ke]=!0;let e=this[Ae];if(e&&!this[oe]){e.readableLength&&(this[ke]=!1);let r;for(;(r=e.read())!==null;){this[se]+=r.length,this[an]=!0;let s=this.downloadProgress;s.percent<1&&this.emit("downloadProgress",s),this.push(r)}}}_write(e,r,s){let n=()=>{this._writeRequest(e,r,s)};this.requestInitialized?n():this[ye].push(n)}_writeRequest(e,r,s){this[k].destroyed||(this._progressCallbacks.push(()=>{this[ie]+=Buffer.byteLength(e,r);let n=this.uploadProgress;n.percent<1&&this.emit("uploadProgress",n)}),this[k].write(e,r,n=>{!n&&this._progressCallbacks.length>0&&this._progressCallbacks.shift()(),s(n)}))}_final(e){let r=()=>{for(;this._progressCallbacks.length!==0;)this._progressCallbacks.shift()();if(!(k in this)){e();return}if(this[k].destroyed){e();return}this[k].end(s=>{s||(this[ne]=this[ie],this.emit("uploadProgress",this.uploadProgress),this[k].emit("upload-complete")),e(s)})};this.requestInitialized?r():this[ye].push(r)}_destroy(e,r){var s;this[oe]=!0,clearTimeout(this[un]),k in this&&(this[Ht](),((s=this[Ae])===null||s===void 0?void 0:s.complete)||this[k].destroy()),e!==null&&!u.default.undefined(e)&&!(e instanceof C)&&(e=new C(e.message,e,this)),r(e)}get _isAboutToError(){return this[oe]}get ip(){var e;return(e=this.socket)===null||e===void 0?void 0:e.remoteAddress}get aborted(){var e,r,s;return((r=(e=this[k])===null||e===void 0?void 0:e.destroyed)!==null&&r!==void 0?r:this.destroyed)&&!((s=this[cn])===null||s===void 0?void 0:s.complete)}get socket(){var e,r;return(r=(e=this[k])===null||e===void 0?void 0:e.socket)!==null&&r!==void 0?r:void 0}get downloadProgress(){let e;return this[re]?e=this[se]/this[re]:this[re]===this[se]?e=1:e=0,{percent:e,transferred:this[se],total:this[re]}}get uploadProgress(){let e;return this[ne]?e=this[ie]/this[ne]:this[ne]===this[ie]?e=1:e=0,{percent:e,transferred:this[ie],total:this[ne]}}get timings(){var e;return(e=this[k])===null||e===void 0?void 0:e.timings}get isFromCache(){return this[on]}pipe(e,r){if(this[an])throw new Error("Failed to pipe. The response has been emitted already.");return e instanceof qt.ServerResponse&&this[Ce].add(e),super.pipe(e,r)}unpipe(e){return e instanceof qt.ServerResponse&&this[Ce].delete(e),super.unpipe(e),this}};T.default=zt});var ge=v(D=>{"use strict";var Sa=D&&D.__createBinding||(Object.create?function(t,e,r,s){s===void 0&&(s=r),Object.defineProperty(t,s,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,s){s===void 0&&(s=r),t[s]=e[r]}),Ta=D&&D.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Sa(e,t,r)};Object.defineProperty(D,"__esModule",{value:!0});D.CancelError=D.ParseError=void 0;var hn=_e(),ln=class extends hn.RequestError{constructor(e,r){let{options:s}=r.request;super(`${e.message} in "${s.url.toString()}"`,e,r.request);this.name="ParseError",this.code=this.code==="ERR_GOT_REQUEST_ERROR"?"ERR_BODY_PARSE_FAILURE":this.code}};D.ParseError=ln;var fn=class extends hn.RequestError{constructor(e){super("Promise was canceled",{},e);this.name="CancelError",this.code="ERR_CANCELED"}get isCanceled(){return!0}};D.CancelError=fn;Ta(_e(),D)});var mn=v($t=>{"use strict";Object.defineProperty($t,"__esModule",{value:!0});var dn=ge(),Ra=(t,e,r,s)=>{let{rawBody:n}=t;try{if(e==="text")return n.toString(s);if(e==="json")return n.length===0?"":r(n.toString());if(e==="buffer")return n;throw new dn.ParseError({message:`Unknown body type '${e}'`,name:"Error"},t)}catch(o){throw new dn.ParseError(o,t)}};$t.default=Ra});var Ft=v(G=>{"use strict";var Pa=G&&G.__createBinding||(Object.create?function(t,e,r,s){s===void 0&&(s=r),Object.defineProperty(t,s,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,s){s===void 0&&(s=r),t[s]=e[r]}),xa=G&&G.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Pa(e,t,r)};Object.defineProperty(G,"__esModule",{value:!0});var Ca=require("events"),ka=B(),Aa=nr(),qe=ge(),pn=mn(),yn=_e(),Oa=Et(),qa=Ct(),_n=kt(),ja=["request","response","redirect","uploadProgress","downloadProgress"];function gn(t){let e,r,s=new Ca.EventEmitter,n=new Aa((i,c,h)=>{let l=g=>{let m=new yn.default(void 0,t);m.retryCount=g,m._noPipe=!0,h(()=>m.destroy()),h.shouldReject=!1,h(()=>c(new qe.CancelError(m))),e=m,m.once("response",async y=>{var b;if(y.retryCount=g,y.request.aborted)return;let f;try{f=await qa.default(m),y.rawBody=f}catch{return}if(m._isAboutToError)return;let w=((b=y.headers["content-encoding"])!==null&&b!==void 0?b:"").toLowerCase(),P=["gzip","deflate","br"].includes(w),{options:q}=m;if(P&&!q.decompress)y.body=f;else try{y.body=pn.default(y,q.responseType,q.parseJson,q.encoding)}catch(M){if(y.body=f.toString(),_n.isResponseOk(y)){m._beforeError(M);return}}try{for(let[M,Q]of q.hooks.afterResponse.entries())y=await Q(y,async Le=>{let ae=yn.default.normalizeArguments(void 0,A(E({},Le),{retry:{calculateDelay:()=>0},throwHttpErrors:!1,resolveBodyOnly:!1}),q);ae.hooks.afterResponse=ae.hooks.afterResponse.slice(0,M);for(let Hn of ae.hooks.beforeRetry)await Hn(ae);let De=gn(ae);return h(()=>{De.catch(()=>{}),De.cancel()}),De})}catch(M){m._beforeError(new qe.RequestError(M.message,M,m));return}if(!_n.isResponseOk(y)){m._beforeError(new qe.HTTPError(y));return}r=y,i(m.options.resolveBodyOnly?y.body:y)});let p=y=>{if(n.isCanceled)return;let{options:b}=m;if(y instanceof qe.HTTPError&&!b.throwHttpErrors){let{response:f}=y;i(m.options.resolveBodyOnly?f.body:f);return}c(y)};m.once("error",p);let d=m.options.body;m.once("retry",(y,b)=>{var f,w;if(d===((f=b.request)===null||f===void 0?void 0:f.options.body)&&ka.default.nodeStream((w=b.request)===null||w===void 0?void 0:w.options.body)){p(b);return}l(y)}),Oa.default(m,s,ja)};l(0)});n.on=(i,c)=>(s.on(i,c),n);let o=i=>{let c=(async()=>{await n;let{options:h}=r.request;return pn.default(r,i,h.parseJson,h.encoding)})();return Object.defineProperties(c,Object.getOwnPropertyDescriptors(n)),c};return n.json=()=>{let{headers:i}=e.options;return!e.writableFinished&&i.accept===void 0&&(i.accept="application/json"),o("json")},n.buffer=()=>o("buffer"),n.text=()=>o("text"),n}G.default=gn;xa(ge(),G)});var bn=v(Vt=>{"use strict";Object.defineProperty(Vt,"__esModule",{value:!0});var Ha=ge();function Ia(t,...e){let r=(async()=>{if(t instanceof Ha.RequestError)try{for(let n of e)if(n)for(let o of n)t=await o(t)}catch(n){t=n}throw t})(),s=()=>r;return r.json=s,r.text=s,r.buffer=s,r.on=s,r}Vt.default=Ia});var vn=v(Wt=>{"use strict";Object.defineProperty(Wt,"__esModule",{value:!0});var wn=B();function En(t){for(let e of Object.values(t))(wn.default.plainObject(e)||wn.default.array(e))&&En(e);return Object.freeze(t)}Wt.default=En});var Tn=v(Sn=>{"use strict";Object.defineProperty(Sn,"__esModule",{value:!0})});var Gt=v(L=>{"use strict";var La=L&&L.__createBinding||(Object.create?function(t,e,r,s){s===void 0&&(s=r),Object.defineProperty(t,s,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,s){s===void 0&&(s=r),t[s]=e[r]}),Da=L&&L.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&La(e,t,r)};Object.defineProperty(L,"__esModule",{value:!0});L.defaultHandler=void 0;var Rn=B(),I=Ft(),Ua=bn(),He=_e(),Ma=vn(),Na={RequestError:I.RequestError,CacheError:I.CacheError,ReadError:I.ReadError,HTTPError:I.HTTPError,MaxRedirectsError:I.MaxRedirectsError,TimeoutError:I.TimeoutError,ParseError:I.ParseError,CancelError:I.CancelError,UnsupportedProtocolError:I.UnsupportedProtocolError,UploadError:I.UploadError},Ba=async t=>new Promise(e=>{setTimeout(e,t)}),{normalizeArguments:je}=He.default,Pn=(...t)=>{let e;for(let r of t)e=je(void 0,r,e);return e},za=t=>t.isStream?new He.default(void 0,t):I.default(t),$a=t=>"defaults"in t&&"options"in t.defaults,Fa=["get","post","put","patch","head","delete"];L.defaultHandler=(t,e)=>e(t);var xn=(t,e)=>{if(t)for(let r of t)r(e)},Cn=t=>{t._rawHandlers=t.handlers,t.handlers=t.handlers.map(s=>(n,o)=>{let i,c=s(n,h=>(i=o(h),i));if(c!==i&&!n.isStream&&i){let h=c,{then:l,catch:g,finally:m}=h;Object.setPrototypeOf(h,Object.getPrototypeOf(i)),Object.defineProperties(h,Object.getOwnPropertyDescriptors(i)),h.then=l,h.catch=g,h.finally=m}return c});let e=(s,n={},o)=>{var i,c;let h=0,l=g=>t.handlers[h++](g,h===t.handlers.length?za:l);if(Rn.default.plainObject(s)){let g=E(E({},s),n);He.setNonEnumerableProperties([s,n],g),n=g,s=void 0}try{let g;try{xn(t.options.hooks.init,n),xn((i=n.hooks)===null||i===void 0?void 0:i.init,n)}catch(p){g=p}let m=je(s,n,o??t.options);if(m[He.kIsNormalizedAlready]=!0,g)throw new I.RequestError(g.message,g,m);return l(m)}catch(g){if(n.isStream)throw g;return Ua.default(g,t.options.hooks.beforeError,(c=n.hooks)===null||c===void 0?void 0:c.beforeError)}};e.extend=(...s)=>{let n=[t.options],o=[...t._rawHandlers],i;for(let c of s)$a(c)?(n.push(c.defaults.options),o.push(...c.defaults._rawHandlers),i=c.defaults.mutableDefaults):(n.push(c),"handlers"in c&&o.push(...c.handlers),i=c.mutableDefaults);return o=o.filter(c=>c!==L.defaultHandler),o.length===0&&o.push(L.defaultHandler),Cn({options:Pn(...n),handlers:o,mutableDefaults:Boolean(i)})};let r=async function*(s,n){let o=je(s,n,t.options);o.resolveBodyOnly=!1;let i=o.pagination;if(!Rn.default.object(i))throw new TypeError("`options.pagination` must be implemented");let c=[],{countLimit:h}=i,l=0;for(;l<i.requestLimit;){l!==0&&await Ba(i.backoff);let g=await e(void 0,void 0,o),m=await i.transform(g),p=[];for(let y of m)if(i.filter(y,c,p)&&(!i.shouldContinue(y,c,p)||(yield y,i.stackAllItems&&c.push(y),p.push(y),--h<=0)))return;let d=i.paginate(g,c,p);if(d===!1)return;d===g.request.options?o=g.request.options:d!==void 0&&(o=je(void 0,d,o)),l++}};e.paginate=r,e.paginate.all=async(s,n)=>{let o=[];for await(let i of r(s,n))o.push(i);return o},e.paginate.each=r,e.stream=(s,n)=>e(s,A(E({},n),{isStream:!0}));for(let s of Fa)e[s]=(n,o)=>e(n,A(E({},o),{method:s})),e.stream[s]=(n,o)=>e(n,A(E({},o),{method:s,isStream:!0}));return Object.assign(e,Na),Object.defineProperty(e,"defaults",{value:t.mutableDefaults?t:Ma.default(t),writable:t.mutableDefaults,configurable:t.mutableDefaults,enumerable:!0}),e.mergeOptions=Pn,e};L.default=Cn;Da(Tn(),L)});var On=v(($,Ie)=>{"use strict";var Va=$&&$.__createBinding||(Object.create?function(t,e,r,s){s===void 0&&(s=r),Object.defineProperty(t,s,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,s){s===void 0&&(s=r),t[s]=e[r]}),kn=$&&$.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Va(e,t,r)};Object.defineProperty($,"__esModule",{value:!0});var Wa=require("url"),An=Gt(),Ga={options:{method:"GET",retry:{limit:2,methods:["GET","PUT","HEAD","DELETE","OPTIONS","TRACE"],statusCodes:[408,413,429,500,502,503,504,521,522,524],errorCodes:["ETIMEDOUT","ECONNRESET","EADDRINUSE","ECONNREFUSED","EPIPE","ENOTFOUND","ENETUNREACH","EAI_AGAIN"],maxRetryAfter:void 0,calculateDelay:({computedValue:t})=>t},timeout:{},headers:{"user-agent":"got (https://github.com/sindresorhus/got)"},hooks:{init:[],beforeRequest:[],beforeRedirect:[],beforeRetry:[],beforeError:[],afterResponse:[]},cache:void 0,dnsCache:void 0,decompress:!0,throwHttpErrors:!0,followRedirect:!0,isStream:!1,responseType:"text",resolveBodyOnly:!1,maxRedirects:10,prefixUrl:"",methodRewriting:!0,ignoreInvalidCookies:!1,context:{},http2:!1,allowGetBody:!1,https:void 0,pagination:{transform:t=>t.request.options.responseType==="json"?t.body:JSON.parse(t.body),paginate:t=>{if(!Reflect.has(t.headers,"link"))return!1;let e=t.headers.link.split(","),r;for(let s of e){let n=s.split(";");if(n[1].includes("next")){r=n[0].trimStart().trim(),r=r.slice(1,-1);break}}return r?{url:new Wa.URL(r)}:!1},filter:()=>!0,shouldContinue:()=>!0,countLimit:1/0,backoff:0,requestLimit:1e4,stackAllItems:!0},parseJson:t=>JSON.parse(t),stringifyJson:t=>JSON.stringify(t),cacheOptions:{}},handlers:[An.defaultHandler],mutableDefaults:!1},Jt=An.default(Ga);$.default=Jt;Ie.exports=Jt;Ie.exports.default=Jt;Ie.exports.__esModule=!0;kn(Gt(),$);kn(Ft(),$)});var Ka={};zn(Ka,{default:()=>jn});var S=require("@raycast/api"),qn=$n(On());function jn(){return _jsx(S.Form,{actions:_jsx(S.ActionPanel,null,_jsx(Ja,null),_jsx(S.Action.OpenInBrowser,{url:"https://share.doppler.com"}))},_jsx(S.Form.TextArea,{id:"secret",title:"Secret",placeholder:"Enter sensitive data to securely share..."}),_jsx(S.Form.Dropdown,{id:"expireViews",title:"Expire After Views",storeValue:!0},_jsx(S.Form.Dropdown.Item,{value:"1",title:"1 View"}),_jsx(S.Form.Dropdown.Item,{value:"2",title:"2 Views"}),_jsx(S.Form.Dropdown.Item,{value:"3",title:"3 Views"}),_jsx(S.Form.Dropdown.Item,{value:"5",title:"5 Views"}),_jsx(S.Form.Dropdown.Item,{value:"10",title:"10 Views"}),_jsx(S.Form.Dropdown.Item,{value:"20",title:"20 Views"}),_jsx(S.Form.Dropdown.Item,{value:"50",title:"50 Views"}),_jsx(S.Form.Dropdown.Item,{value:"-1",title:"Unlimited Views"})),_jsx(S.Form.Dropdown,{id:"expireDays",title:"Expire After Days",storeValue:!0},_jsx(S.Form.Dropdown.Item,{value:"1",title:"1 Day"}),_jsx(S.Form.Dropdown.Item,{value:"2",title:"2 Days"}),_jsx(S.Form.Dropdown.Item,{value:"3",title:"3 Days"}),_jsx(S.Form.Dropdown.Item,{value:"7",title:"1 Week"}),_jsx(S.Form.Dropdown.Item,{value:"14",title:"2 Weeks"}),_jsx(S.Form.Dropdown.Item,{value:"30",title:"1 Month"}),_jsx(S.Form.Dropdown.Item,{value:"90",title:"3 Months"})))}function Ja(){async function t(e){if(!e.secret){(0,S.showToast)({style:S.Toast.Style.Failure,title:"Secret is required"});return}let r=await(0,S.showToast)({style:S.Toast.Style.Animated,title:"Sharing secret"});try{let{body:s}=await qn.default.post("https://api.doppler.com/v1/share/secrets/plain",{json:{secret:e.secret,expire_views:e.expireViews,expire_days:e.expireDays},responseType:"json"});await S.Clipboard.copy(s.authenticated_url),r.style=S.Toast.Style.Success,r.title="Shared secret",r.message="Copied link to clipboard"}catch(s){r.style=S.Toast.Style.Failure,r.title="Failed sharing secret",r.message=String(s)}}return _jsx(S.Action.SubmitForm,{icon:S.Icon.Upload,title:"Share Secret",onSubmit:t})}module.exports=Fn(Ka);0&&(module.exports={});
