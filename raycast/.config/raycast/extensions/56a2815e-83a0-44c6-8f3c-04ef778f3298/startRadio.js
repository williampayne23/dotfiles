"use strict";var Vl=Object.create;var Nr=Object.defineProperty;var Yl=Object.getOwnPropertyDescriptor;var Kl=Object.getOwnPropertyNames;var Xl=Object.getPrototypeOf,Zl=Object.prototype.hasOwnProperty;var Wt=(r,t)=>()=>(r&&(t=r(r=0)),t);var P=(r,t)=>()=>(t||r((t={exports:{}}).exports,t),t.exports),Vn=(r,t)=>{for(var o in t)Nr(r,o,{get:t[o],enumerable:!0})},Qs=(r,t,o,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of Kl(t))!Zl.call(r,i)&&i!==o&&Nr(r,i,{get:()=>t[i],enumerable:!(s=Yl(t,i))||s.enumerable});return r};var ae=(r,t,o)=>(o=r!=null?Vl(Xl(r)):{},Qs(t||!r||!r.__esModule?Nr(o,"default",{value:r,enumerable:!0}):o,r)),ec=r=>Qs(Nr({},"__esModule",{value:!0}),r);var Gs=P((Hr,Hs)=>{(function(r,t){typeof Hr=="object"&&typeof Hs<"u"?t(Hr):typeof define=="function"&&define.amd?define(["exports"],t):(r=typeof globalThis<"u"?globalThis:r||self,t(r.WebStreamsPolyfill={}))})(Hr,function(r){"use strict";let t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol:e=>`Symbol(${e})`;function o(){}function s(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global}let i=s();function u(e){return typeof e=="object"&&e!==null||typeof e=="function"}let c=o,m=Promise,b=Promise.prototype.then,h=Promise.resolve.bind(m),O=Promise.reject.bind(m);function E(e){return new m(e)}function w(e){return h(e)}function _(e){return O(e)}function S(e,n,a){return b.call(e,n,a)}function T(e,n,a){S(S(e,n,a),void 0,c)}function x(e,n){T(e,n)}function C(e,n){T(e,void 0,n)}function z(e,n,a){return S(e,n,a)}function W(e){S(e,void 0,c)}let v=(()=>{let e=i&&i.queueMicrotask;if(typeof e=="function")return e;let n=w(void 0);return a=>S(n,a)})();function D(e,n,a){if(typeof e!="function")throw new TypeError("Argument is not a function");return Function.prototype.apply.call(e,n,a)}function I(e,n,a){try{return w(D(e,n,a))}catch(l){return _(l)}}let ne=16384;class V{constructor(){this._cursor=0,this._size=0,this._front={_elements:[],_next:void 0},this._back=this._front,this._cursor=0,this._size=0}get length(){return this._size}push(n){let a=this._back,l=a;a._elements.length===ne-1&&(l={_elements:[],_next:void 0}),a._elements.push(n),l!==a&&(this._back=l,a._next=l),++this._size}shift(){let n=this._front,a=n,l=this._cursor,f=l+1,g=n._elements,y=g[l];return f===ne&&(a=n._next,f=0),--this._size,this._cursor=f,n!==a&&(this._front=a),g[l]=void 0,y}forEach(n){let a=this._cursor,l=this._front,f=l._elements;for(;(a!==f.length||l._next!==void 0)&&!(a===f.length&&(l=l._next,f=l._elements,a=0,f.length===0));)n(f[a]),++a}peek(){let n=this._front,a=this._cursor;return n._elements[a]}}function ar(e,n){e._ownerReadableStream=n,n._reader=e,n._state==="readable"?Et(e):n._state==="closed"?yn(e):ir(e,n._storedError)}function wt(e,n){let a=e._ownerReadableStream;return be(a,n)}function de(e){e._ownerReadableStream._state==="readable"?Rt(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):Sn(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")),e._ownerReadableStream._reader=void 0,e._ownerReadableStream=void 0}function Ce(e){return new TypeError("Cannot "+e+" a stream using a released reader")}function Et(e){e._closedPromise=E((n,a)=>{e._closedPromise_resolve=n,e._closedPromise_reject=a})}function ir(e,n){Et(e),Rt(e,n)}function yn(e){Et(e),ur(e)}function Rt(e,n){e._closedPromise_reject!==void 0&&(W(e._closedPromise),e._closedPromise_reject(n),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}function Sn(e,n){ir(e,n)}function ur(e){e._closedPromise_resolve!==void 0&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}let lr=t("[[AbortSteps]]"),cr=t("[[ErrorSteps]]"),jt=t("[[CancelSteps]]"),Tt=t("[[PullSteps]]"),dr=Number.isFinite||function(e){return typeof e=="number"&&isFinite(e)},_n=Math.trunc||function(e){return e<0?Math.ceil(e):Math.floor(e)};function On(e){return typeof e=="object"||typeof e=="function"}function fe(e,n){if(e!==void 0&&!On(e))throw new TypeError(`${n} is not an object.`)}function oe(e,n){if(typeof e!="function")throw new TypeError(`${n} is not a function.`)}function wn(e){return typeof e=="object"&&e!==null||typeof e=="function"}function fr(e,n){if(!wn(e))throw new TypeError(`${n} is not an object.`)}function pe(e,n,a){if(e===void 0)throw new TypeError(`Parameter ${n} is required in '${a}'.`)}function Pt(e,n,a){if(e===void 0)throw new TypeError(`${n} is required in '${a}'.`)}function En(e){return Number(e)}function $o(e){return e===0?0:e}function ku(e){return $o(_n(e))}function zo(e,n){let l=Number.MAX_SAFE_INTEGER,f=Number(e);if(f=$o(f),!dr(f))throw new TypeError(`${n} is not a finite number`);if(f=ku(f),f<0||f>l)throw new TypeError(`${n} is outside the accepted range of ${0} to ${l}, inclusive`);return!dr(f)||f===0?0:f}function Rn(e,n){if(!Be(e))throw new TypeError(`${n} is not a ReadableStream.`)}function Xe(e){return new xt(e)}function Do(e,n){e._reader._readRequests.push(n)}function jn(e,n,a){let f=e._reader._readRequests.shift();a?f._closeSteps():f._chunkSteps(n)}function pr(e){return e._reader._readRequests.length}function Fo(e){let n=e._reader;return!(n===void 0||!ve(n))}class xt{constructor(n){if(pe(n,1,"ReadableStreamDefaultReader"),Rn(n,"First parameter"),$e(n))throw new TypeError("This stream has already been locked for exclusive reading by another reader");ar(this,n),this._readRequests=new V}get closed(){return ve(this)?this._closedPromise:_(mr("closed"))}cancel(n=void 0){return ve(this)?this._ownerReadableStream===void 0?_(Ce("cancel")):wt(this,n):_(mr("cancel"))}read(){if(!ve(this))return _(mr("read"));if(this._ownerReadableStream===void 0)return _(Ce("read from"));let n,a,l=E((g,y)=>{n=g,a=y});return kt(this,{_chunkSteps:g=>n({value:g,done:!1}),_closeSteps:()=>n({value:void 0,done:!0}),_errorSteps:g=>a(g)}),l}releaseLock(){if(!ve(this))throw mr("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");de(this)}}}Object.defineProperties(xt.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(xt.prototype,t.toStringTag,{value:"ReadableStreamDefaultReader",configurable:!0});function ve(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_readRequests")?!1:e instanceof xt}function kt(e,n){let a=e._ownerReadableStream;a._disturbed=!0,a._state==="closed"?n._closeSteps():a._state==="errored"?n._errorSteps(a._storedError):a._readableStreamController[Tt](n)}function mr(e){return new TypeError(`ReadableStreamDefaultReader.prototype.${e} can only be used on a ReadableStreamDefaultReader`)}let Uo=Object.getPrototypeOf(Object.getPrototypeOf(async function*(){}).prototype);class Lo{constructor(n,a){this._ongoingPromise=void 0,this._isFinished=!1,this._reader=n,this._preventCancel=a}next(){let n=()=>this._nextSteps();return this._ongoingPromise=this._ongoingPromise?z(this._ongoingPromise,n,n):n(),this._ongoingPromise}return(n){let a=()=>this._returnSteps(n);return this._ongoingPromise?z(this._ongoingPromise,a,a):a()}_nextSteps(){if(this._isFinished)return Promise.resolve({value:void 0,done:!0});let n=this._reader;if(n._ownerReadableStream===void 0)return _(Ce("iterate"));let a,l,f=E((y,R)=>{a=y,l=R});return kt(n,{_chunkSteps:y=>{this._ongoingPromise=void 0,v(()=>a({value:y,done:!1}))},_closeSteps:()=>{this._ongoingPromise=void 0,this._isFinished=!0,de(n),a({value:void 0,done:!0})},_errorSteps:y=>{this._ongoingPromise=void 0,this._isFinished=!0,de(n),l(y)}}),f}_returnSteps(n){if(this._isFinished)return Promise.resolve({value:n,done:!0});this._isFinished=!0;let a=this._reader;if(a._ownerReadableStream===void 0)return _(Ce("finish iterating"));if(!this._preventCancel){let l=wt(a,n);return de(a),z(l,()=>({value:n,done:!0}))}return de(a),w({value:n,done:!0})}}let Mo={next(){return Wo(this)?this._asyncIteratorImpl.next():_(Qo("next"))},return(e){return Wo(this)?this._asyncIteratorImpl.return(e):_(Qo("return"))}};Uo!==void 0&&Object.setPrototypeOf(Mo,Uo);function Cu(e,n){let a=Xe(e),l=new Lo(a,n),f=Object.create(Mo);return f._asyncIteratorImpl=l,f}function Wo(e){if(!u(e)||!Object.prototype.hasOwnProperty.call(e,"_asyncIteratorImpl"))return!1;try{return e._asyncIteratorImpl instanceof Lo}catch{return!1}}function Qo(e){return new TypeError(`ReadableStreamAsyncIterator.${e} can only be used on a ReadableSteamAsyncIterator`)}let No=Number.isNaN||function(e){return e!==e};function Ct(e){return e.slice()}function Ho(e,n,a,l,f){new Uint8Array(e).set(new Uint8Array(a,l,f),n)}function gm(e){return e}function br(e){return!1}function Go(e,n,a){if(e.slice)return e.slice(n,a);let l=a-n,f=new ArrayBuffer(l);return Ho(f,0,e,n,l),f}function vu(e){return!(typeof e!="number"||No(e)||e<0)}function Jo(e){let n=Go(e.buffer,e.byteOffset,e.byteOffset+e.byteLength);return new Uint8Array(n)}function Tn(e){let n=e._queue.shift();return e._queueTotalSize-=n.size,e._queueTotalSize<0&&(e._queueTotalSize=0),n.value}function Pn(e,n,a){if(!vu(a)||a===1/0)throw new RangeError("Size must be a finite, non-NaN, non-negative number.");e._queue.push({value:n,size:a}),e._queueTotalSize+=a}function Au(e){return e._queue.peek().value}function Ae(e){e._queue=new V,e._queueTotalSize=0}class vt{constructor(){throw new TypeError("Illegal constructor")}get view(){if(!xn(this))throw An("view");return this._view}respond(n){if(!xn(this))throw An("respond");if(pe(n,1,"respond"),n=zo(n,"First parameter"),this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");br(this._view.buffer),_r(this._associatedReadableByteStreamController,n)}respondWithNewView(n){if(!xn(this))throw An("respondWithNewView");if(pe(n,1,"respondWithNewView"),!ArrayBuffer.isView(n))throw new TypeError("You can only respond with array buffer views");if(this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");br(n.buffer),Or(this._associatedReadableByteStreamController,n)}}Object.defineProperties(vt.prototype,{respond:{enumerable:!0},respondWithNewView:{enumerable:!0},view:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(vt.prototype,t.toStringTag,{value:"ReadableStreamBYOBRequest",configurable:!0});class Ze{constructor(){throw new TypeError("Illegal constructor")}get byobRequest(){if(!Fe(this))throw qt("byobRequest");return vn(this)}get desiredSize(){if(!Fe(this))throw qt("desiredSize");return rs(this)}close(){if(!Fe(this))throw qt("close");if(this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");let n=this._controlledReadableByteStream._state;if(n!=="readable")throw new TypeError(`The stream (in ${n} state) is not in the readable state and cannot be closed`);At(this)}enqueue(n){if(!Fe(this))throw qt("enqueue");if(pe(n,1,"enqueue"),!ArrayBuffer.isView(n))throw new TypeError("chunk must be an array buffer view");if(n.byteLength===0)throw new TypeError("chunk must have non-zero byteLength");if(n.buffer.byteLength===0)throw new TypeError("chunk's buffer must have non-zero byteLength");if(this._closeRequested)throw new TypeError("stream is closed or draining");let a=this._controlledReadableByteStream._state;if(a!=="readable")throw new TypeError(`The stream (in ${a} state) is not in the readable state and cannot be enqueued to`);Sr(this,n)}error(n=void 0){if(!Fe(this))throw qt("error");me(this,n)}[jt](n){Vo(this),Ae(this);let a=this._cancelAlgorithm(n);return yr(this),a}[Tt](n){let a=this._controlledReadableByteStream;if(this._queueTotalSize>0){let f=this._queue.shift();this._queueTotalSize-=f.byteLength,Zo(this);let g=new Uint8Array(f.buffer,f.byteOffset,f.byteLength);n._chunkSteps(g);return}let l=this._autoAllocateChunkSize;if(l!==void 0){let f;try{f=new ArrayBuffer(l)}catch(y){n._errorSteps(y);return}let g={buffer:f,bufferByteLength:l,byteOffset:0,byteLength:l,bytesFilled:0,elementSize:1,viewConstructor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(g)}Do(a,n),Ue(this)}}Object.defineProperties(Ze.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},byobRequest:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Ze.prototype,t.toStringTag,{value:"ReadableByteStreamController",configurable:!0});function Fe(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledReadableByteStream")?!1:e instanceof Ze}function xn(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_associatedReadableByteStreamController")?!1:e instanceof vt}function Ue(e){if(!$u(e))return;if(e._pulling){e._pullAgain=!0;return}e._pulling=!0;let a=e._pullAlgorithm();T(a,()=>{e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,Ue(e))},l=>{me(e,l)})}function Vo(e){Cn(e),e._pendingPullIntos=new V}function kn(e,n){let a=!1;e._state==="closed"&&(a=!0);let l=Yo(n);n.readerType==="default"?jn(e,l,a):Fu(e,l,a)}function Yo(e){let n=e.bytesFilled,a=e.elementSize;return new e.viewConstructor(e.buffer,e.byteOffset,n/a)}function hr(e,n,a,l){e._queue.push({buffer:n,byteOffset:a,byteLength:l}),e._queueTotalSize+=l}function Ko(e,n){let a=n.elementSize,l=n.bytesFilled-n.bytesFilled%a,f=Math.min(e._queueTotalSize,n.byteLength-n.bytesFilled),g=n.bytesFilled+f,y=g-g%a,R=f,k=!1;y>l&&(R=y-n.bytesFilled,k=!0);let q=e._queue;for(;R>0;){let B=q.peek(),$=Math.min(R,B.byteLength),M=n.byteOffset+n.bytesFilled;Ho(n.buffer,M,B.buffer,B.byteOffset,$),B.byteLength===$?q.shift():(B.byteOffset+=$,B.byteLength-=$),e._queueTotalSize-=$,Xo(e,$,n),R-=$}return k}function Xo(e,n,a){a.bytesFilled+=n}function Zo(e){e._queueTotalSize===0&&e._closeRequested?(yr(e),Lt(e._controlledReadableByteStream)):Ue(e)}function Cn(e){e._byobRequest!==null&&(e._byobRequest._associatedReadableByteStreamController=void 0,e._byobRequest._view=null,e._byobRequest=null)}function es(e){for(;e._pendingPullIntos.length>0;){if(e._queueTotalSize===0)return;let n=e._pendingPullIntos.peek();Ko(e,n)&&(gr(e),kn(e._controlledReadableByteStream,n))}}function qu(e,n,a){let l=e._controlledReadableByteStream,f=1;n.constructor!==DataView&&(f=n.constructor.BYTES_PER_ELEMENT);let g=n.constructor,y=n.buffer,R={buffer:y,bufferByteLength:y.byteLength,byteOffset:n.byteOffset,byteLength:n.byteLength,bytesFilled:0,elementSize:f,viewConstructor:g,readerType:"byob"};if(e._pendingPullIntos.length>0){e._pendingPullIntos.push(R),ss(l,a);return}if(l._state==="closed"){let k=new g(R.buffer,R.byteOffset,0);a._closeSteps(k);return}if(e._queueTotalSize>0){if(Ko(e,R)){let k=Yo(R);Zo(e),a._chunkSteps(k);return}if(e._closeRequested){let k=new TypeError("Insufficient bytes to fill elements in the given buffer");me(e,k),a._errorSteps(k);return}}e._pendingPullIntos.push(R),ss(l,a),Ue(e)}function Iu(e,n){let a=e._controlledReadableByteStream;if(qn(a))for(;as(a)>0;){let l=gr(e);kn(a,l)}}function Bu(e,n,a){if(Xo(e,n,a),a.bytesFilled<a.elementSize)return;gr(e);let l=a.bytesFilled%a.elementSize;if(l>0){let f=a.byteOffset+a.bytesFilled,g=Go(a.buffer,f-l,f);hr(e,g,0,g.byteLength)}a.bytesFilled-=l,kn(e._controlledReadableByteStream,a),es(e)}function ts(e,n){let a=e._pendingPullIntos.peek();Cn(e),e._controlledReadableByteStream._state==="closed"?Iu(e):Bu(e,n,a),Ue(e)}function gr(e){return e._pendingPullIntos.shift()}function $u(e){let n=e._controlledReadableByteStream;return n._state!=="readable"||e._closeRequested||!e._started?!1:!!(Fo(n)&&pr(n)>0||qn(n)&&as(n)>0||rs(e)>0)}function yr(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0}function At(e){let n=e._controlledReadableByteStream;if(!(e._closeRequested||n._state!=="readable")){if(e._queueTotalSize>0){e._closeRequested=!0;return}if(e._pendingPullIntos.length>0&&e._pendingPullIntos.peek().bytesFilled>0){let l=new TypeError("Insufficient bytes to fill elements in the given buffer");throw me(e,l),l}yr(e),Lt(n)}}function Sr(e,n){let a=e._controlledReadableByteStream;if(e._closeRequested||a._state!=="readable")return;let l=n.buffer,f=n.byteOffset,g=n.byteLength,y=l;if(e._pendingPullIntos.length>0){let R=e._pendingPullIntos.peek();br(R.buffer),R.buffer=R.buffer}if(Cn(e),Fo(a))if(pr(a)===0)hr(e,y,f,g);else{e._pendingPullIntos.length>0&&gr(e);let R=new Uint8Array(y,f,g);jn(a,R,!1)}else qn(a)?(hr(e,y,f,g),es(e)):hr(e,y,f,g);Ue(e)}function me(e,n){let a=e._controlledReadableByteStream;a._state==="readable"&&(Vo(e),Ae(e),yr(e),Cs(a,n))}function vn(e){if(e._byobRequest===null&&e._pendingPullIntos.length>0){let n=e._pendingPullIntos.peek(),a=new Uint8Array(n.buffer,n.byteOffset+n.bytesFilled,n.byteLength-n.bytesFilled),l=Object.create(vt.prototype);Du(l,e,a),e._byobRequest=l}return e._byobRequest}function rs(e){let n=e._controlledReadableByteStream._state;return n==="errored"?null:n==="closed"?0:e._strategyHWM-e._queueTotalSize}function _r(e,n){let a=e._pendingPullIntos.peek();if(e._controlledReadableByteStream._state==="closed"){if(n!==0)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream")}else{if(n===0)throw new TypeError("bytesWritten must be greater than 0 when calling respond() on a readable stream");if(a.bytesFilled+n>a.byteLength)throw new RangeError("bytesWritten out of range")}a.buffer=a.buffer,ts(e,n)}function Or(e,n){let a=e._pendingPullIntos.peek();if(e._controlledReadableByteStream._state==="closed"){if(n.byteLength!==0)throw new TypeError("The view's length must be 0 when calling respondWithNewView() on a closed stream")}else if(n.byteLength===0)throw new TypeError("The view's length must be greater than 0 when calling respondWithNewView() on a readable stream");if(a.byteOffset+a.bytesFilled!==n.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(a.bufferByteLength!==n.buffer.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");if(a.bytesFilled+n.byteLength>a.byteLength)throw new RangeError("The region specified by view is larger than byobRequest");let f=n.byteLength;a.buffer=n.buffer,ts(e,f)}function ns(e,n,a,l,f,g,y){n._controlledReadableByteStream=e,n._pullAgain=!1,n._pulling=!1,n._byobRequest=null,n._queue=n._queueTotalSize=void 0,Ae(n),n._closeRequested=!1,n._started=!1,n._strategyHWM=g,n._pullAlgorithm=l,n._cancelAlgorithm=f,n._autoAllocateChunkSize=y,n._pendingPullIntos=new V,e._readableStreamController=n;let R=a();T(w(R),()=>{n._started=!0,Ue(n)},k=>{me(n,k)})}function zu(e,n,a){let l=Object.create(Ze.prototype),f=()=>{},g=()=>w(void 0),y=()=>w(void 0);n.start!==void 0&&(f=()=>n.start(l)),n.pull!==void 0&&(g=()=>n.pull(l)),n.cancel!==void 0&&(y=k=>n.cancel(k));let R=n.autoAllocateChunkSize;if(R===0)throw new TypeError("autoAllocateChunkSize must be greater than 0");ns(e,l,f,g,y,a,R)}function Du(e,n,a){e._associatedReadableByteStreamController=n,e._view=a}function An(e){return new TypeError(`ReadableStreamBYOBRequest.prototype.${e} can only be used on a ReadableStreamBYOBRequest`)}function qt(e){return new TypeError(`ReadableByteStreamController.prototype.${e} can only be used on a ReadableByteStreamController`)}function os(e){return new It(e)}function ss(e,n){e._reader._readIntoRequests.push(n)}function Fu(e,n,a){let f=e._reader._readIntoRequests.shift();a?f._closeSteps(n):f._chunkSteps(n)}function as(e){return e._reader._readIntoRequests.length}function qn(e){let n=e._reader;return!(n===void 0||!Le(n))}class It{constructor(n){if(pe(n,1,"ReadableStreamBYOBReader"),Rn(n,"First parameter"),$e(n))throw new TypeError("This stream has already been locked for exclusive reading by another reader");if(!Fe(n._readableStreamController))throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");ar(this,n),this._readIntoRequests=new V}get closed(){return Le(this)?this._closedPromise:_(wr("closed"))}cancel(n=void 0){return Le(this)?this._ownerReadableStream===void 0?_(Ce("cancel")):wt(this,n):_(wr("cancel"))}read(n){if(!Le(this))return _(wr("read"));if(!ArrayBuffer.isView(n))return _(new TypeError("view must be an array buffer view"));if(n.byteLength===0)return _(new TypeError("view must have non-zero byteLength"));if(n.buffer.byteLength===0)return _(new TypeError("view's buffer must have non-zero byteLength"));if(br(n.buffer),this._ownerReadableStream===void 0)return _(Ce("read from"));let a,l,f=E((y,R)=>{a=y,l=R});return is(this,n,{_chunkSteps:y=>a({value:y,done:!1}),_closeSteps:y=>a({value:y,done:!0}),_errorSteps:y=>l(y)}),f}releaseLock(){if(!Le(this))throw wr("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readIntoRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");de(this)}}}Object.defineProperties(It.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(It.prototype,t.toStringTag,{value:"ReadableStreamBYOBReader",configurable:!0});function Le(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_readIntoRequests")?!1:e instanceof It}function is(e,n,a){let l=e._ownerReadableStream;l._disturbed=!0,l._state==="errored"?a._errorSteps(l._storedError):qu(l._readableStreamController,n,a)}function wr(e){return new TypeError(`ReadableStreamBYOBReader.prototype.${e} can only be used on a ReadableStreamBYOBReader`)}function Bt(e,n){let{highWaterMark:a}=e;if(a===void 0)return n;if(No(a)||a<0)throw new RangeError("Invalid highWaterMark");return a}function Er(e){let{size:n}=e;return n||(()=>1)}function Rr(e,n){fe(e,n);let a=e?.highWaterMark,l=e?.size;return{highWaterMark:a===void 0?void 0:En(a),size:l===void 0?void 0:Uu(l,`${n} has member 'size' that`)}}function Uu(e,n){return oe(e,n),a=>En(e(a))}function Lu(e,n){fe(e,n);let a=e?.abort,l=e?.close,f=e?.start,g=e?.type,y=e?.write;return{abort:a===void 0?void 0:Mu(a,e,`${n} has member 'abort' that`),close:l===void 0?void 0:Wu(l,e,`${n} has member 'close' that`),start:f===void 0?void 0:Qu(f,e,`${n} has member 'start' that`),write:y===void 0?void 0:Nu(y,e,`${n} has member 'write' that`),type:g}}function Mu(e,n,a){return oe(e,a),l=>I(e,n,[l])}function Wu(e,n,a){return oe(e,a),()=>I(e,n,[])}function Qu(e,n,a){return oe(e,a),l=>D(e,n,[l])}function Nu(e,n,a){return oe(e,a),(l,f)=>I(e,n,[l,f])}function us(e,n){if(!et(e))throw new TypeError(`${n} is not a WritableStream.`)}function Hu(e){if(typeof e!="object"||e===null)return!1;try{return typeof e.aborted=="boolean"}catch{return!1}}let Gu=typeof AbortController=="function";function Ju(){if(Gu)return new AbortController}class $t{constructor(n={},a={}){n===void 0?n=null:fr(n,"First parameter");let l=Rr(a,"Second parameter"),f=Lu(n,"First parameter");if(cs(this),f.type!==void 0)throw new RangeError("Invalid type is specified");let y=Er(l),R=Bt(l,1);ul(this,f,R,y)}get locked(){if(!et(this))throw kr("locked");return tt(this)}abort(n=void 0){return et(this)?tt(this)?_(new TypeError("Cannot abort a stream that already has a writer")):jr(this,n):_(kr("abort"))}close(){return et(this)?tt(this)?_(new TypeError("Cannot close a stream that already has a writer")):ye(this)?_(new TypeError("Cannot close an already-closing stream")):ds(this):_(kr("close"))}getWriter(){if(!et(this))throw kr("getWriter");return ls(this)}}Object.defineProperties($t.prototype,{abort:{enumerable:!0},close:{enumerable:!0},getWriter:{enumerable:!0},locked:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty($t.prototype,t.toStringTag,{value:"WritableStream",configurable:!0});function ls(e){return new zt(e)}function Vu(e,n,a,l,f=1,g=()=>1){let y=Object.create($t.prototype);cs(y);let R=Object.create(rt.prototype);return gs(y,R,e,n,a,l,f,g),y}function cs(e){e._state="writable",e._storedError=void 0,e._writer=void 0,e._writableStreamController=void 0,e._writeRequests=new V,e._inFlightWriteRequest=void 0,e._closeRequest=void 0,e._inFlightCloseRequest=void 0,e._pendingAbortRequest=void 0,e._backpressure=!1}function et(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_writableStreamController")?!1:e instanceof $t}function tt(e){return e._writer!==void 0}function jr(e,n){var a;if(e._state==="closed"||e._state==="errored")return w(void 0);e._writableStreamController._abortReason=n,(a=e._writableStreamController._abortController)===null||a===void 0||a.abort();let l=e._state;if(l==="closed"||l==="errored")return w(void 0);if(e._pendingAbortRequest!==void 0)return e._pendingAbortRequest._promise;let f=!1;l==="erroring"&&(f=!0,n=void 0);let g=E((y,R)=>{e._pendingAbortRequest={_promise:void 0,_resolve:y,_reject:R,_reason:n,_wasAlreadyErroring:f}});return e._pendingAbortRequest._promise=g,f||Bn(e,n),g}function ds(e){let n=e._state;if(n==="closed"||n==="errored")return _(new TypeError(`The stream (in ${n} state) is not in the writable state and cannot be closed`));let a=E((f,g)=>{let y={_resolve:f,_reject:g};e._closeRequest=y}),l=e._writer;return l!==void 0&&e._backpressure&&n==="writable"&&Qn(l),ll(e._writableStreamController),a}function Yu(e){return E((a,l)=>{let f={_resolve:a,_reject:l};e._writeRequests.push(f)})}function In(e,n){if(e._state==="writable"){Bn(e,n);return}$n(e)}function Bn(e,n){let a=e._writableStreamController;e._state="erroring",e._storedError=n;let l=e._writer;l!==void 0&&ps(l,n),!tl(e)&&a._started&&$n(e)}function $n(e){e._state="errored",e._writableStreamController[cr]();let n=e._storedError;if(e._writeRequests.forEach(f=>{f._reject(n)}),e._writeRequests=new V,e._pendingAbortRequest===void 0){Tr(e);return}let a=e._pendingAbortRequest;if(e._pendingAbortRequest=void 0,a._wasAlreadyErroring){a._reject(n),Tr(e);return}let l=e._writableStreamController[lr](a._reason);T(l,()=>{a._resolve(),Tr(e)},f=>{a._reject(f),Tr(e)})}function Ku(e){e._inFlightWriteRequest._resolve(void 0),e._inFlightWriteRequest=void 0}function Xu(e,n){e._inFlightWriteRequest._reject(n),e._inFlightWriteRequest=void 0,In(e,n)}function Zu(e){e._inFlightCloseRequest._resolve(void 0),e._inFlightCloseRequest=void 0,e._state==="erroring"&&(e._storedError=void 0,e._pendingAbortRequest!==void 0&&(e._pendingAbortRequest._resolve(),e._pendingAbortRequest=void 0)),e._state="closed";let a=e._writer;a!==void 0&&Os(a)}function el(e,n){e._inFlightCloseRequest._reject(n),e._inFlightCloseRequest=void 0,e._pendingAbortRequest!==void 0&&(e._pendingAbortRequest._reject(n),e._pendingAbortRequest=void 0),In(e,n)}function ye(e){return!(e._closeRequest===void 0&&e._inFlightCloseRequest===void 0)}function tl(e){return!(e._inFlightWriteRequest===void 0&&e._inFlightCloseRequest===void 0)}function rl(e){e._inFlightCloseRequest=e._closeRequest,e._closeRequest=void 0}function nl(e){e._inFlightWriteRequest=e._writeRequests.shift()}function Tr(e){e._closeRequest!==void 0&&(e._closeRequest._reject(e._storedError),e._closeRequest=void 0);let n=e._writer;n!==void 0&&Mn(n,e._storedError)}function zn(e,n){let a=e._writer;a!==void 0&&n!==e._backpressure&&(n?hl(a):Qn(a)),e._backpressure=n}class zt{constructor(n){if(pe(n,1,"WritableStreamDefaultWriter"),us(n,"First parameter"),tt(n))throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=n,n._writer=this;let a=n._state;if(a==="writable")!ye(n)&&n._backpressure?vr(this):ws(this),Cr(this);else if(a==="erroring")Wn(this,n._storedError),Cr(this);else if(a==="closed")ws(this),ml(this);else{let l=n._storedError;Wn(this,l),_s(this,l)}}get closed(){return Me(this)?this._closedPromise:_(We("closed"))}get desiredSize(){if(!Me(this))throw We("desiredSize");if(this._ownerWritableStream===void 0)throw Dt("desiredSize");return il(this)}get ready(){return Me(this)?this._readyPromise:_(We("ready"))}abort(n=void 0){return Me(this)?this._ownerWritableStream===void 0?_(Dt("abort")):ol(this,n):_(We("abort"))}close(){if(!Me(this))return _(We("close"));let n=this._ownerWritableStream;return n===void 0?_(Dt("close")):ye(n)?_(new TypeError("Cannot close an already-closing stream")):fs(this)}releaseLock(){if(!Me(this))throw We("releaseLock");this._ownerWritableStream!==void 0&&ms(this)}write(n=void 0){return Me(this)?this._ownerWritableStream===void 0?_(Dt("write to")):bs(this,n):_(We("write"))}}Object.defineProperties(zt.prototype,{abort:{enumerable:!0},close:{enumerable:!0},releaseLock:{enumerable:!0},write:{enumerable:!0},closed:{enumerable:!0},desiredSize:{enumerable:!0},ready:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(zt.prototype,t.toStringTag,{value:"WritableStreamDefaultWriter",configurable:!0});function Me(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_ownerWritableStream")?!1:e instanceof zt}function ol(e,n){let a=e._ownerWritableStream;return jr(a,n)}function fs(e){let n=e._ownerWritableStream;return ds(n)}function sl(e){let n=e._ownerWritableStream,a=n._state;return ye(n)||a==="closed"?w(void 0):a==="errored"?_(n._storedError):fs(e)}function al(e,n){e._closedPromiseState==="pending"?Mn(e,n):bl(e,n)}function ps(e,n){e._readyPromiseState==="pending"?Es(e,n):gl(e,n)}function il(e){let n=e._ownerWritableStream,a=n._state;return a==="errored"||a==="erroring"?null:a==="closed"?0:ys(n._writableStreamController)}function ms(e){let n=e._ownerWritableStream,a=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");ps(e,a),al(e,a),n._writer=void 0,e._ownerWritableStream=void 0}function bs(e,n){let a=e._ownerWritableStream,l=a._writableStreamController,f=cl(l,n);if(a!==e._ownerWritableStream)return _(Dt("write to"));let g=a._state;if(g==="errored")return _(a._storedError);if(ye(a)||g==="closed")return _(new TypeError("The stream is closing or closed and cannot be written to"));if(g==="erroring")return _(a._storedError);let y=Yu(a);return dl(l,n,f),y}let hs={};class rt{constructor(){throw new TypeError("Illegal constructor")}get abortReason(){if(!Dn(this))throw Ln("abortReason");return this._abortReason}get signal(){if(!Dn(this))throw Ln("signal");if(this._abortController===void 0)throw new TypeError("WritableStreamDefaultController.prototype.signal is not supported");return this._abortController.signal}error(n=void 0){if(!Dn(this))throw Ln("error");this._controlledWritableStream._state==="writable"&&Ss(this,n)}[lr](n){let a=this._abortAlgorithm(n);return Pr(this),a}[cr](){Ae(this)}}Object.defineProperties(rt.prototype,{abortReason:{enumerable:!0},signal:{enumerable:!0},error:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(rt.prototype,t.toStringTag,{value:"WritableStreamDefaultController",configurable:!0});function Dn(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledWritableStream")?!1:e instanceof rt}function gs(e,n,a,l,f,g,y,R){n._controlledWritableStream=e,e._writableStreamController=n,n._queue=void 0,n._queueTotalSize=void 0,Ae(n),n._abortReason=void 0,n._abortController=Ju(),n._started=!1,n._strategySizeAlgorithm=R,n._strategyHWM=y,n._writeAlgorithm=l,n._closeAlgorithm=f,n._abortAlgorithm=g;let k=Un(n);zn(e,k);let q=a(),B=w(q);T(B,()=>{n._started=!0,xr(n)},$=>{n._started=!0,In(e,$)})}function ul(e,n,a,l){let f=Object.create(rt.prototype),g=()=>{},y=()=>w(void 0),R=()=>w(void 0),k=()=>w(void 0);n.start!==void 0&&(g=()=>n.start(f)),n.write!==void 0&&(y=q=>n.write(q,f)),n.close!==void 0&&(R=()=>n.close()),n.abort!==void 0&&(k=q=>n.abort(q)),gs(e,f,g,y,R,k,a,l)}function Pr(e){e._writeAlgorithm=void 0,e._closeAlgorithm=void 0,e._abortAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function ll(e){Pn(e,hs,0),xr(e)}function cl(e,n){try{return e._strategySizeAlgorithm(n)}catch(a){return Fn(e,a),1}}function ys(e){return e._strategyHWM-e._queueTotalSize}function dl(e,n,a){try{Pn(e,n,a)}catch(f){Fn(e,f);return}let l=e._controlledWritableStream;if(!ye(l)&&l._state==="writable"){let f=Un(e);zn(l,f)}xr(e)}function xr(e){let n=e._controlledWritableStream;if(!e._started||n._inFlightWriteRequest!==void 0)return;if(n._state==="erroring"){$n(n);return}if(e._queue.length===0)return;let l=Au(e);l===hs?fl(e):pl(e,l)}function Fn(e,n){e._controlledWritableStream._state==="writable"&&Ss(e,n)}function fl(e){let n=e._controlledWritableStream;rl(n),Tn(e);let a=e._closeAlgorithm();Pr(e),T(a,()=>{Zu(n)},l=>{el(n,l)})}function pl(e,n){let a=e._controlledWritableStream;nl(a);let l=e._writeAlgorithm(n);T(l,()=>{Ku(a);let f=a._state;if(Tn(e),!ye(a)&&f==="writable"){let g=Un(e);zn(a,g)}xr(e)},f=>{a._state==="writable"&&Pr(e),Xu(a,f)})}function Un(e){return ys(e)<=0}function Ss(e,n){let a=e._controlledWritableStream;Pr(e),Bn(a,n)}function kr(e){return new TypeError(`WritableStream.prototype.${e} can only be used on a WritableStream`)}function Ln(e){return new TypeError(`WritableStreamDefaultController.prototype.${e} can only be used on a WritableStreamDefaultController`)}function We(e){return new TypeError(`WritableStreamDefaultWriter.prototype.${e} can only be used on a WritableStreamDefaultWriter`)}function Dt(e){return new TypeError("Cannot "+e+" a stream using a released writer")}function Cr(e){e._closedPromise=E((n,a)=>{e._closedPromise_resolve=n,e._closedPromise_reject=a,e._closedPromiseState="pending"})}function _s(e,n){Cr(e),Mn(e,n)}function ml(e){Cr(e),Os(e)}function Mn(e,n){e._closedPromise_reject!==void 0&&(W(e._closedPromise),e._closedPromise_reject(n),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="rejected")}function bl(e,n){_s(e,n)}function Os(e){e._closedPromise_resolve!==void 0&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="resolved")}function vr(e){e._readyPromise=E((n,a)=>{e._readyPromise_resolve=n,e._readyPromise_reject=a}),e._readyPromiseState="pending"}function Wn(e,n){vr(e),Es(e,n)}function ws(e){vr(e),Qn(e)}function Es(e,n){e._readyPromise_reject!==void 0&&(W(e._readyPromise),e._readyPromise_reject(n),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="rejected")}function hl(e){vr(e)}function gl(e,n){Wn(e,n)}function Qn(e){e._readyPromise_resolve!==void 0&&(e._readyPromise_resolve(void 0),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="fulfilled")}let Rs=typeof DOMException<"u"?DOMException:void 0;function yl(e){if(!(typeof e=="function"||typeof e=="object"))return!1;try{return new e,!0}catch{return!1}}function Sl(){let e=function(a,l){this.message=a||"",this.name=l||"Error",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)};return e.prototype=Object.create(Error.prototype),Object.defineProperty(e.prototype,"constructor",{value:e,writable:!0,configurable:!0}),e}let _l=yl(Rs)?Rs:Sl();function js(e,n,a,l,f,g){let y=Xe(e),R=ls(n);e._disturbed=!0;let k=!1,q=w(void 0);return E((B,$)=>{let M;if(g!==void 0){if(M=()=>{let j=new _l("Aborted","AbortError"),A=[];l||A.push(()=>n._state==="writable"?jr(n,j):w(void 0)),f||A.push(()=>e._state==="readable"?be(e,j):w(void 0)),Z(()=>Promise.all(A.map(F=>F())),!0,j)},g.aborted){M();return}g.addEventListener("abort",M)}function he(){return E((j,A)=>{function F(se){se?j():S(st(),F,A)}F(!1)})}function st(){return k?w(!0):S(R._readyPromise,()=>E((j,A)=>{kt(y,{_chunkSteps:F=>{q=S(bs(R,F),void 0,o),j(!1)},_closeSteps:()=>j(!0),_errorSteps:A})}))}if(Ee(e,y._closedPromise,j=>{l?le(!0,j):Z(()=>jr(n,j),!0,j)}),Ee(n,R._closedPromise,j=>{f?le(!0,j):Z(()=>be(e,j),!0,j)}),Y(e,y._closedPromise,()=>{a?le():Z(()=>sl(R))}),ye(n)||n._state==="closed"){let j=new TypeError("the destination writable stream closed before all data could be piped to it");f?le(!0,j):Z(()=>be(e,j),!0,j)}W(he());function ze(){let j=q;return S(q,()=>j!==q?ze():void 0)}function Ee(j,A,F){j._state==="errored"?F(j._storedError):C(A,F)}function Y(j,A,F){j._state==="closed"?F():x(A,F)}function Z(j,A,F){if(k)return;k=!0,n._state==="writable"&&!ye(n)?x(ze(),se):se();function se(){T(j(),()=>Re(A,F),at=>Re(!0,at))}}function le(j,A){k||(k=!0,n._state==="writable"&&!ye(n)?x(ze(),()=>Re(j,A)):Re(j,A))}function Re(j,A){ms(R),de(y),g!==void 0&&g.removeEventListener("abort",M),j?$(A):B(void 0)}})}class nt{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!Ar(this))throw Br("desiredSize");return Nn(this)}close(){if(!Ar(this))throw Br("close");if(!ot(this))throw new TypeError("The stream is not in a state that permits close");Ut(this)}enqueue(n=void 0){if(!Ar(this))throw Br("enqueue");if(!ot(this))throw new TypeError("The stream is not in a state that permits enqueue");return Ir(this,n)}error(n=void 0){if(!Ar(this))throw Br("error");qe(this,n)}[jt](n){Ae(this);let a=this._cancelAlgorithm(n);return qr(this),a}[Tt](n){let a=this._controlledReadableStream;if(this._queue.length>0){let l=Tn(this);this._closeRequested&&this._queue.length===0?(qr(this),Lt(a)):Ft(this),n._chunkSteps(l)}else Do(a,n),Ft(this)}}Object.defineProperties(nt.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(nt.prototype,t.toStringTag,{value:"ReadableStreamDefaultController",configurable:!0});function Ar(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledReadableStream")?!1:e instanceof nt}function Ft(e){if(!Ts(e))return;if(e._pulling){e._pullAgain=!0;return}e._pulling=!0;let a=e._pullAlgorithm();T(a,()=>{e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,Ft(e))},l=>{qe(e,l)})}function Ts(e){let n=e._controlledReadableStream;return!ot(e)||!e._started?!1:!!($e(n)&&pr(n)>0||Nn(e)>0)}function qr(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function Ut(e){if(!ot(e))return;let n=e._controlledReadableStream;e._closeRequested=!0,e._queue.length===0&&(qr(e),Lt(n))}function Ir(e,n){if(!ot(e))return;let a=e._controlledReadableStream;if($e(a)&&pr(a)>0)jn(a,n,!1);else{let l;try{l=e._strategySizeAlgorithm(n)}catch(f){throw qe(e,f),f}try{Pn(e,n,l)}catch(f){throw qe(e,f),f}}Ft(e)}function qe(e,n){let a=e._controlledReadableStream;a._state==="readable"&&(Ae(e),qr(e),Cs(a,n))}function Nn(e){let n=e._controlledReadableStream._state;return n==="errored"?null:n==="closed"?0:e._strategyHWM-e._queueTotalSize}function Ol(e){return!Ts(e)}function ot(e){let n=e._controlledReadableStream._state;return!e._closeRequested&&n==="readable"}function Ps(e,n,a,l,f,g,y){n._controlledReadableStream=e,n._queue=void 0,n._queueTotalSize=void 0,Ae(n),n._started=!1,n._closeRequested=!1,n._pullAgain=!1,n._pulling=!1,n._strategySizeAlgorithm=y,n._strategyHWM=g,n._pullAlgorithm=l,n._cancelAlgorithm=f,e._readableStreamController=n;let R=a();T(w(R),()=>{n._started=!0,Ft(n)},k=>{qe(n,k)})}function wl(e,n,a,l){let f=Object.create(nt.prototype),g=()=>{},y=()=>w(void 0),R=()=>w(void 0);n.start!==void 0&&(g=()=>n.start(f)),n.pull!==void 0&&(y=()=>n.pull(f)),n.cancel!==void 0&&(R=k=>n.cancel(k)),Ps(e,f,g,y,R,a,l)}function Br(e){return new TypeError(`ReadableStreamDefaultController.prototype.${e} can only be used on a ReadableStreamDefaultController`)}function El(e,n){return Fe(e._readableStreamController)?jl(e):Rl(e)}function Rl(e,n){let a=Xe(e),l=!1,f=!1,g=!1,y=!1,R,k,q,B,$,M=E(Y=>{$=Y});function he(){return l?(f=!0,w(void 0)):(l=!0,kt(a,{_chunkSteps:Z=>{v(()=>{f=!1;let le=Z,Re=Z;g||Ir(q._readableStreamController,le),y||Ir(B._readableStreamController,Re),l=!1,f&&he()})},_closeSteps:()=>{l=!1,g||Ut(q._readableStreamController),y||Ut(B._readableStreamController),(!g||!y)&&$(void 0)},_errorSteps:()=>{l=!1}}),w(void 0))}function st(Y){if(g=!0,R=Y,y){let Z=Ct([R,k]),le=be(e,Z);$(le)}return M}function ze(Y){if(y=!0,k=Y,g){let Z=Ct([R,k]),le=be(e,Z);$(le)}return M}function Ee(){}return q=Hn(Ee,he,st),B=Hn(Ee,he,ze),C(a._closedPromise,Y=>{qe(q._readableStreamController,Y),qe(B._readableStreamController,Y),(!g||!y)&&$(void 0)}),[q,B]}function jl(e){let n=Xe(e),a=!1,l=!1,f=!1,g=!1,y=!1,R,k,q,B,$,M=E(j=>{$=j});function he(j){C(j._closedPromise,A=>{j===n&&(me(q._readableStreamController,A),me(B._readableStreamController,A),(!g||!y)&&$(void 0))})}function st(){Le(n)&&(de(n),n=Xe(e),he(n)),kt(n,{_chunkSteps:A=>{v(()=>{l=!1,f=!1;let F=A,se=A;if(!g&&!y)try{se=Jo(A)}catch(at){me(q._readableStreamController,at),me(B._readableStreamController,at),$(be(e,at));return}g||Sr(q._readableStreamController,F),y||Sr(B._readableStreamController,se),a=!1,l?Ee():f&&Y()})},_closeSteps:()=>{a=!1,g||At(q._readableStreamController),y||At(B._readableStreamController),q._readableStreamController._pendingPullIntos.length>0&&_r(q._readableStreamController,0),B._readableStreamController._pendingPullIntos.length>0&&_r(B._readableStreamController,0),(!g||!y)&&$(void 0)},_errorSteps:()=>{a=!1}})}function ze(j,A){ve(n)&&(de(n),n=os(e),he(n));let F=A?B:q,se=A?q:B;is(n,j,{_chunkSteps:it=>{v(()=>{l=!1,f=!1;let ut=A?y:g;if(A?g:y)ut||Or(F._readableStreamController,it);else{let Ws;try{Ws=Jo(it)}catch(Jn){me(F._readableStreamController,Jn),me(se._readableStreamController,Jn),$(be(e,Jn));return}ut||Or(F._readableStreamController,it),Sr(se._readableStreamController,Ws)}a=!1,l?Ee():f&&Y()})},_closeSteps:it=>{a=!1;let ut=A?y:g,Qr=A?g:y;ut||At(F._readableStreamController),Qr||At(se._readableStreamController),it!==void 0&&(ut||Or(F._readableStreamController,it),!Qr&&se._readableStreamController._pendingPullIntos.length>0&&_r(se._readableStreamController,0)),(!ut||!Qr)&&$(void 0)},_errorSteps:()=>{a=!1}})}function Ee(){if(a)return l=!0,w(void 0);a=!0;let j=vn(q._readableStreamController);return j===null?st():ze(j._view,!1),w(void 0)}function Y(){if(a)return f=!0,w(void 0);a=!0;let j=vn(B._readableStreamController);return j===null?st():ze(j._view,!0),w(void 0)}function Z(j){if(g=!0,R=j,y){let A=Ct([R,k]),F=be(e,A);$(F)}return M}function le(j){if(y=!0,k=j,g){let A=Ct([R,k]),F=be(e,A);$(F)}return M}function Re(){}return q=ks(Re,Ee,Z),B=ks(Re,Y,le),he(n),[q,B]}function Tl(e,n){fe(e,n);let a=e,l=a?.autoAllocateChunkSize,f=a?.cancel,g=a?.pull,y=a?.start,R=a?.type;return{autoAllocateChunkSize:l===void 0?void 0:zo(l,`${n} has member 'autoAllocateChunkSize' that`),cancel:f===void 0?void 0:Pl(f,a,`${n} has member 'cancel' that`),pull:g===void 0?void 0:xl(g,a,`${n} has member 'pull' that`),start:y===void 0?void 0:kl(y,a,`${n} has member 'start' that`),type:R===void 0?void 0:Cl(R,`${n} has member 'type' that`)}}function Pl(e,n,a){return oe(e,a),l=>I(e,n,[l])}function xl(e,n,a){return oe(e,a),l=>I(e,n,[l])}function kl(e,n,a){return oe(e,a),l=>D(e,n,[l])}function Cl(e,n){if(e=`${e}`,e!=="bytes")throw new TypeError(`${n} '${e}' is not a valid enumeration value for ReadableStreamType`);return e}function vl(e,n){fe(e,n);let a=e?.mode;return{mode:a===void 0?void 0:Al(a,`${n} has member 'mode' that`)}}function Al(e,n){if(e=`${e}`,e!=="byob")throw new TypeError(`${n} '${e}' is not a valid enumeration value for ReadableStreamReaderMode`);return e}function ql(e,n){fe(e,n);let a=e?.preventCancel;return{preventCancel:Boolean(a)}}function xs(e,n){fe(e,n);let a=e?.preventAbort,l=e?.preventCancel,f=e?.preventClose,g=e?.signal;return g!==void 0&&Il(g,`${n} has member 'signal' that`),{preventAbort:Boolean(a),preventCancel:Boolean(l),preventClose:Boolean(f),signal:g}}function Il(e,n){if(!Hu(e))throw new TypeError(`${n} is not an AbortSignal.`)}function Bl(e,n){fe(e,n);let a=e?.readable;Pt(a,"readable","ReadableWritablePair"),Rn(a,`${n} has member 'readable' that`);let l=e?.writable;return Pt(l,"writable","ReadableWritablePair"),us(l,`${n} has member 'writable' that`),{readable:a,writable:l}}class Ie{constructor(n={},a={}){n===void 0?n=null:fr(n,"First parameter");let l=Rr(a,"Second parameter"),f=Tl(n,"First parameter");if(Gn(this),f.type==="bytes"){if(l.size!==void 0)throw new RangeError("The strategy for a byte stream cannot have a size function");let g=Bt(l,0);zu(this,f,g)}else{let g=Er(l),y=Bt(l,1);wl(this,f,y,g)}}get locked(){if(!Be(this))throw Qe("locked");return $e(this)}cancel(n=void 0){return Be(this)?$e(this)?_(new TypeError("Cannot cancel a stream that already has a reader")):be(this,n):_(Qe("cancel"))}getReader(n=void 0){if(!Be(this))throw Qe("getReader");return vl(n,"First parameter").mode===void 0?Xe(this):os(this)}pipeThrough(n,a={}){if(!Be(this))throw Qe("pipeThrough");pe(n,1,"pipeThrough");let l=Bl(n,"First parameter"),f=xs(a,"Second parameter");if($e(this))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(tt(l.writable))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");let g=js(this,l.writable,f.preventClose,f.preventAbort,f.preventCancel,f.signal);return W(g),l.readable}pipeTo(n,a={}){if(!Be(this))return _(Qe("pipeTo"));if(n===void 0)return _("Parameter 1 is required in 'pipeTo'.");if(!et(n))return _(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));let l;try{l=xs(a,"Second parameter")}catch(f){return _(f)}return $e(this)?_(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):tt(n)?_(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):js(this,n,l.preventClose,l.preventAbort,l.preventCancel,l.signal)}tee(){if(!Be(this))throw Qe("tee");let n=El(this);return Ct(n)}values(n=void 0){if(!Be(this))throw Qe("values");let a=ql(n,"First parameter");return Cu(this,a.preventCancel)}}Object.defineProperties(Ie.prototype,{cancel:{enumerable:!0},getReader:{enumerable:!0},pipeThrough:{enumerable:!0},pipeTo:{enumerable:!0},tee:{enumerable:!0},values:{enumerable:!0},locked:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Ie.prototype,t.toStringTag,{value:"ReadableStream",configurable:!0}),typeof t.asyncIterator=="symbol"&&Object.defineProperty(Ie.prototype,t.asyncIterator,{value:Ie.prototype.values,writable:!0,configurable:!0});function Hn(e,n,a,l=1,f=()=>1){let g=Object.create(Ie.prototype);Gn(g);let y=Object.create(nt.prototype);return Ps(g,y,e,n,a,l,f),g}function ks(e,n,a){let l=Object.create(Ie.prototype);Gn(l);let f=Object.create(Ze.prototype);return ns(l,f,e,n,a,0,void 0),l}function Gn(e){e._state="readable",e._reader=void 0,e._storedError=void 0,e._disturbed=!1}function Be(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_readableStreamController")?!1:e instanceof Ie}function $e(e){return e._reader!==void 0}function be(e,n){if(e._disturbed=!0,e._state==="closed")return w(void 0);if(e._state==="errored")return _(e._storedError);Lt(e);let a=e._reader;a!==void 0&&Le(a)&&(a._readIntoRequests.forEach(f=>{f._closeSteps(void 0)}),a._readIntoRequests=new V);let l=e._readableStreamController[jt](n);return z(l,o)}function Lt(e){e._state="closed";let n=e._reader;n!==void 0&&(ur(n),ve(n)&&(n._readRequests.forEach(a=>{a._closeSteps()}),n._readRequests=new V))}function Cs(e,n){e._state="errored",e._storedError=n;let a=e._reader;a!==void 0&&(Rt(a,n),ve(a)?(a._readRequests.forEach(l=>{l._errorSteps(n)}),a._readRequests=new V):(a._readIntoRequests.forEach(l=>{l._errorSteps(n)}),a._readIntoRequests=new V))}function Qe(e){return new TypeError(`ReadableStream.prototype.${e} can only be used on a ReadableStream`)}function vs(e,n){fe(e,n);let a=e?.highWaterMark;return Pt(a,"highWaterMark","QueuingStrategyInit"),{highWaterMark:En(a)}}let As=e=>e.byteLength;try{Object.defineProperty(As,"name",{value:"size",configurable:!0})}catch{}class $r{constructor(n){pe(n,1,"ByteLengthQueuingStrategy"),n=vs(n,"First parameter"),this._byteLengthQueuingStrategyHighWaterMark=n.highWaterMark}get highWaterMark(){if(!Is(this))throw qs("highWaterMark");return this._byteLengthQueuingStrategyHighWaterMark}get size(){if(!Is(this))throw qs("size");return As}}Object.defineProperties($r.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty($r.prototype,t.toStringTag,{value:"ByteLengthQueuingStrategy",configurable:!0});function qs(e){return new TypeError(`ByteLengthQueuingStrategy.prototype.${e} can only be used on a ByteLengthQueuingStrategy`)}function Is(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_byteLengthQueuingStrategyHighWaterMark")?!1:e instanceof $r}let Bs=()=>1;try{Object.defineProperty(Bs,"name",{value:"size",configurable:!0})}catch{}class zr{constructor(n){pe(n,1,"CountQueuingStrategy"),n=vs(n,"First parameter"),this._countQueuingStrategyHighWaterMark=n.highWaterMark}get highWaterMark(){if(!zs(this))throw $s("highWaterMark");return this._countQueuingStrategyHighWaterMark}get size(){if(!zs(this))throw $s("size");return Bs}}Object.defineProperties(zr.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(zr.prototype,t.toStringTag,{value:"CountQueuingStrategy",configurable:!0});function $s(e){return new TypeError(`CountQueuingStrategy.prototype.${e} can only be used on a CountQueuingStrategy`)}function zs(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_countQueuingStrategyHighWaterMark")?!1:e instanceof zr}function $l(e,n){fe(e,n);let a=e?.flush,l=e?.readableType,f=e?.start,g=e?.transform,y=e?.writableType;return{flush:a===void 0?void 0:zl(a,e,`${n} has member 'flush' that`),readableType:l,start:f===void 0?void 0:Dl(f,e,`${n} has member 'start' that`),transform:g===void 0?void 0:Fl(g,e,`${n} has member 'transform' that`),writableType:y}}function zl(e,n,a){return oe(e,a),l=>I(e,n,[l])}function Dl(e,n,a){return oe(e,a),l=>D(e,n,[l])}function Fl(e,n,a){return oe(e,a),(l,f)=>I(e,n,[l,f])}class Dr{constructor(n={},a={},l={}){n===void 0&&(n=null);let f=Rr(a,"Second parameter"),g=Rr(l,"Third parameter"),y=$l(n,"First parameter");if(y.readableType!==void 0)throw new RangeError("Invalid readableType specified");if(y.writableType!==void 0)throw new RangeError("Invalid writableType specified");let R=Bt(g,0),k=Er(g),q=Bt(f,1),B=Er(f),$,M=E(he=>{$=he});Ul(this,M,q,B,R,k),Ml(this,y),y.start!==void 0?$(y.start(this._transformStreamController)):$(void 0)}get readable(){if(!Ds(this))throw Ms("readable");return this._readable}get writable(){if(!Ds(this))throw Ms("writable");return this._writable}}Object.defineProperties(Dr.prototype,{readable:{enumerable:!0},writable:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Dr.prototype,t.toStringTag,{value:"TransformStream",configurable:!0});function Ul(e,n,a,l,f,g){function y(){return n}function R(M){return Nl(e,M)}function k(M){return Hl(e,M)}function q(){return Gl(e)}e._writable=Vu(y,R,q,k,a,l);function B(){return Jl(e)}function $(M){return Ur(e,M),w(void 0)}e._readable=Hn(y,B,$,f,g),e._backpressure=void 0,e._backpressureChangePromise=void 0,e._backpressureChangePromise_resolve=void 0,Lr(e,!0),e._transformStreamController=void 0}function Ds(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_transformStreamController")?!1:e instanceof Dr}function Fr(e,n){qe(e._readable._readableStreamController,n),Ur(e,n)}function Ur(e,n){Fs(e._transformStreamController),Fn(e._writable._writableStreamController,n),e._backpressure&&Lr(e,!1)}function Lr(e,n){e._backpressureChangePromise!==void 0&&e._backpressureChangePromise_resolve(),e._backpressureChangePromise=E(a=>{e._backpressureChangePromise_resolve=a}),e._backpressure=n}class Mt{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!Mr(this))throw Wr("desiredSize");let n=this._controlledTransformStream._readable._readableStreamController;return Nn(n)}enqueue(n=void 0){if(!Mr(this))throw Wr("enqueue");Us(this,n)}error(n=void 0){if(!Mr(this))throw Wr("error");Wl(this,n)}terminate(){if(!Mr(this))throw Wr("terminate");Ql(this)}}Object.defineProperties(Mt.prototype,{enqueue:{enumerable:!0},error:{enumerable:!0},terminate:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Mt.prototype,t.toStringTag,{value:"TransformStreamDefaultController",configurable:!0});function Mr(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledTransformStream")?!1:e instanceof Mt}function Ll(e,n,a,l){n._controlledTransformStream=e,e._transformStreamController=n,n._transformAlgorithm=a,n._flushAlgorithm=l}function Ml(e,n){let a=Object.create(Mt.prototype),l=g=>{try{return Us(a,g),w(void 0)}catch(y){return _(y)}},f=()=>w(void 0);n.transform!==void 0&&(l=g=>n.transform(g,a)),n.flush!==void 0&&(f=()=>n.flush(a)),Ll(e,a,l,f)}function Fs(e){e._transformAlgorithm=void 0,e._flushAlgorithm=void 0}function Us(e,n){let a=e._controlledTransformStream,l=a._readable._readableStreamController;if(!ot(l))throw new TypeError("Readable side is not in a state that permits enqueue");try{Ir(l,n)}catch(g){throw Ur(a,g),a._readable._storedError}Ol(l)!==a._backpressure&&Lr(a,!0)}function Wl(e,n){Fr(e._controlledTransformStream,n)}function Ls(e,n){let a=e._transformAlgorithm(n);return z(a,void 0,l=>{throw Fr(e._controlledTransformStream,l),l})}function Ql(e){let n=e._controlledTransformStream,a=n._readable._readableStreamController;Ut(a);let l=new TypeError("TransformStream terminated");Ur(n,l)}function Nl(e,n){let a=e._transformStreamController;if(e._backpressure){let l=e._backpressureChangePromise;return z(l,()=>{let f=e._writable;if(f._state==="erroring")throw f._storedError;return Ls(a,n)})}return Ls(a,n)}function Hl(e,n){return Fr(e,n),w(void 0)}function Gl(e){let n=e._readable,a=e._transformStreamController,l=a._flushAlgorithm();return Fs(a),z(l,()=>{if(n._state==="errored")throw n._storedError;Ut(n._readableStreamController)},f=>{throw Fr(e,f),n._storedError})}function Jl(e){return Lr(e,!1),e._backpressureChangePromise}function Wr(e){return new TypeError(`TransformStreamDefaultController.prototype.${e} can only be used on a TransformStreamDefaultController`)}function Ms(e){return new TypeError(`TransformStream.prototype.${e} can only be used on a TransformStream`)}r.ByteLengthQueuingStrategy=$r,r.CountQueuingStrategy=zr,r.ReadableByteStreamController=Ze,r.ReadableStream=Ie,r.ReadableStreamBYOBReader=It,r.ReadableStreamBYOBRequest=vt,r.ReadableStreamDefaultController=nt,r.ReadableStreamDefaultReader=xt,r.TransformStream=Dr,r.TransformStreamDefaultController=Mt,r.WritableStream=$t,r.WritableStreamDefaultController=rt,r.WritableStreamDefaultWriter=zt,Object.defineProperty(r,"__esModule",{value:!0})})});var Js=P(()=>{if(!globalThis.ReadableStream)try{let r=require("node:process"),{emitWarning:t}=r;try{r.emitWarning=()=>{},Object.assign(globalThis,require("node:stream/web")),r.emitWarning=t}catch(o){throw r.emitWarning=t,o}}catch{Object.assign(globalThis,Gs())}try{let{Blob:r}=require("buffer");r&&!r.prototype.stream&&(r.prototype.stream=function(o){let s=0,i=this;return new ReadableStream({type:"bytes",async pull(u){let m=await i.slice(s,Math.min(i.size,s+65536)).arrayBuffer();s+=m.byteLength,u.enqueue(new Uint8Array(m)),s===i.size&&u.close()}})})}catch{}});async function*Yn(r,t=!0){for(let o of r)if("stream"in o)yield*o.stream();else if(ArrayBuffer.isView(o))if(t){let s=o.byteOffset,i=o.byteOffset+o.byteLength;for(;s!==i;){let u=Math.min(i-s,Vs),c=o.buffer.slice(s,s+u);s+=c.byteLength,yield new Uint8Array(c)}}else yield o;else{let s=0,i=o;for(;s!==i.size;){let c=await i.slice(s,Math.min(i.size,s+Vs)).arrayBuffer();s+=c.byteLength,yield new Uint8Array(c)}}}var wm,Vs,Ys,rc,je,Qt=Wt(()=>{wm=ae(Js(),1);Vs=65536;Ys=class Kn{#e=[];#t="";#r=0;#n="transparent";constructor(t=[],o={}){if(typeof t!="object"||t===null)throw new TypeError("Failed to construct 'Blob': The provided value cannot be converted to a sequence.");if(typeof t[Symbol.iterator]!="function")throw new TypeError("Failed to construct 'Blob': The object must have a callable @@iterator property.");if(typeof o!="object"&&typeof o!="function")throw new TypeError("Failed to construct 'Blob': parameter 2 cannot convert to dictionary.");o===null&&(o={});let s=new TextEncoder;for(let u of t){let c;ArrayBuffer.isView(u)?c=new Uint8Array(u.buffer.slice(u.byteOffset,u.byteOffset+u.byteLength)):u instanceof ArrayBuffer?c=new Uint8Array(u.slice(0)):u instanceof Kn?c=u:c=s.encode(`${u}`),this.#r+=ArrayBuffer.isView(c)?c.byteLength:c.size,this.#e.push(c)}this.#n=`${o.endings===void 0?"transparent":o.endings}`;let i=o.type===void 0?"":String(o.type);this.#t=/^[\x20-\x7E]*$/.test(i)?i:""}get size(){return this.#r}get type(){return this.#t}async text(){let t=new TextDecoder,o="";for await(let s of Yn(this.#e,!1))o+=t.decode(s,{stream:!0});return o+=t.decode(),o}async arrayBuffer(){let t=new Uint8Array(this.size),o=0;for await(let s of Yn(this.#e,!1))t.set(s,o),o+=s.length;return t.buffer}stream(){let t=Yn(this.#e,!0);return new globalThis.ReadableStream({type:"bytes",async pull(o){let s=await t.next();s.done?o.close():o.enqueue(s.value)},async cancel(){await t.return()}})}slice(t=0,o=this.size,s=""){let{size:i}=this,u=t<0?Math.max(i+t,0):Math.min(t,i),c=o<0?Math.max(i+o,0):Math.min(o,i),m=Math.max(c-u,0),b=this.#e,h=[],O=0;for(let w of b){if(O>=m)break;let _=ArrayBuffer.isView(w)?w.byteLength:w.size;if(u&&_<=u)u-=_,c-=_;else{let S;ArrayBuffer.isView(w)?(S=w.subarray(u,Math.min(_,c)),O+=S.byteLength):(S=w.slice(u,Math.min(_,c)),O+=S.size),c-=_,h.push(S),u=0}}let E=new Kn([],{type:String(s).toLowerCase()});return E.#r=m,E.#e=h,E}get[Symbol.toStringTag](){return"Blob"}static[Symbol.hasInstance](t){return t&&typeof t=="object"&&typeof t.constructor=="function"&&(typeof t.stream=="function"||typeof t.arrayBuffer=="function")&&/^(Blob|File)$/.test(t[Symbol.toStringTag])}};Object.defineProperties(Ys.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}});rc=Ys,je=rc});var nc,oc,lt,Xn=Wt(()=>{Qt();nc=class extends je{#e=0;#t="";constructor(t,o,s={}){if(arguments.length<2)throw new TypeError(`Failed to construct 'File': 2 arguments required, but only ${arguments.length} present.`);super(t,s),s===null&&(s={});let i=s.lastModified===void 0?Date.now():Number(s.lastModified);Number.isNaN(i)||(this.#e=i),this.#t=String(o)}get name(){return this.#t}get lastModified(){return this.#e}get[Symbol.toStringTag](){return"File"}static[Symbol.hasInstance](t){return!!t&&t instanceof je&&/^(File)$/.test(t[Symbol.toStringTag])}},oc=nc,lt=oc});function Zs(r,t=je){var o=`${Ks()}${Ks()}`.replace(/\./g,"").slice(-28).padStart(32,"-"),s=[],i=`--${o}\r
Content-Disposition: form-data; name="`;return r.forEach((u,c)=>typeof u=="string"?s.push(i+Zn(c)+`"\r
\r
${u.replace(/\r(?!\n)|(?<!\r)\n/g,`\r
`)}\r
`):s.push(i+Zn(c)+`"; filename="${Zn(u.name,1)}"\r
Content-Type: ${u.type||"application/octet-stream"}\r
\r
`,u,`\r
`)),s.push(`--${o}--`),new t(s,{type:"multipart/form-data; boundary="+o})}var Nt,sc,ac,Ks,ic,Xs,Zn,Ne,He,Gr=Wt(()=>{Qt();Xn();({toStringTag:Nt,iterator:sc,hasInstance:ac}=Symbol),Ks=Math.random,ic="append,set,get,getAll,delete,keys,values,entries,forEach,constructor".split(","),Xs=(r,t,o)=>(r+="",/^(Blob|File)$/.test(t&&t[Nt])?[(o=o!==void 0?o+"":t[Nt]=="File"?t.name:"blob",r),t.name!==o||t[Nt]=="blob"?new lt([t],o,t):t]:[r,t+""]),Zn=(r,t)=>(t?r:r.replace(/\r?\n|\r/g,`\r
`)).replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22"),Ne=(r,t,o)=>{if(t.length<o)throw new TypeError(`Failed to execute '${r}' on 'FormData': ${o} arguments required, but only ${t.length} present.`)},He=class{#e=[];constructor(...t){if(t.length)throw new TypeError("Failed to construct 'FormData': parameter 1 is not of type 'HTMLFormElement'.")}get[Nt](){return"FormData"}[sc](){return this.entries()}static[ac](t){return t&&typeof t=="object"&&t[Nt]==="FormData"&&!ic.some(o=>typeof t[o]!="function")}append(...t){Ne("append",arguments,2),this.#e.push(Xs(...t))}delete(t){Ne("delete",arguments,1),t+="",this.#e=this.#e.filter(([o])=>o!==t)}get(t){Ne("get",arguments,1),t+="";for(var o=this.#e,s=o.length,i=0;i<s;i++)if(o[i][0]===t)return o[i][1];return null}getAll(t,o){return Ne("getAll",arguments,1),o=[],t+="",this.#e.forEach(s=>s[0]===t&&o.push(s[1])),o}has(t){return Ne("has",arguments,1),t+="",this.#e.some(o=>o[0]===t)}forEach(t,o){Ne("forEach",arguments,1);for(var[s,i]of this)t.call(o,i,s,this)}set(...t){Ne("set",arguments,2);var o=[],s=!0;t=Xs(...t),this.#e.forEach(i=>{i[0]===t[0]?s&&(s=!o.push(t)):o.push(i)}),s&&o.push(t),this.#e=o}*entries(){yield*this.#e}*keys(){for(var[t]of this)yield t}*values(){for(var[,t]of this)yield t}}});var oa=P((Bm,na)=>{if(!globalThis.DOMException)try{let{MessageChannel:r}=require("worker_threads"),t=new r().port1,o=new ArrayBuffer;t.postMessage(o,[o,o])}catch(r){r.constructor.name==="DOMException"&&(globalThis.DOMException=r.constructor)}na.exports=globalThis.DOMException});var Gt,sa,uc,Vr,to=Wt(()=>{Gt=require("node:fs"),sa=ae(oa(),1);Xn();Qt();({stat:uc}=Gt.promises),Vr=class{#e;#t;constructor(t){this.#e=t.path,this.#t=t.start,this.size=t.size,this.lastModified=t.lastModified}slice(t,o){return new Vr({path:this.#e,lastModified:this.lastModified,size:o-t,start:this.#t+t})}async*stream(){let{mtimeMs:t}=await uc(this.#e);if(t>this.lastModified)throw new sa.default("The requested file could not be read, typically due to permission problems that have occurred after a reference to a file was acquired.","NotReadableError");yield*(0,Gt.createReadStream)(this.#e,{start:this.#t,end:this.#t+this.size-1})}get[Symbol.toStringTag](){return"Blob"}}});var ia={};Vn(ia,{toFormData:()=>bc});function mc(r){let t=r.match(/\bfilename=("(.*?)"|([^()<>@,;:\\"/[\]?={}\s\t]+))($|;\s)/i);if(!t)return;let o=t[2]||t[3]||"",s=o.slice(o.lastIndexOf("\\")+1);return s=s.replace(/%22/g,'"'),s=s.replace(/&#(\d{4});/g,(i,u)=>String.fromCharCode(u)),s}async function bc(r,t){if(!/multipart/i.test(t))throw new TypeError("Failed to fetch");let o=t.match(/boundary=(?:"([^"]+)"|([^;]+))/i);if(!o)throw new TypeError("no or bad content-type header, no multipart boundary");let s=new ro(o[1]||o[2]),i,u,c,m,b,h,O=[],E=new He,w=C=>{c+=x.decode(C,{stream:!0})},_=C=>{O.push(C)},S=()=>{let C=new lt(O,h,{type:b});E.append(m,C)},T=()=>{E.append(m,c)},x=new TextDecoder("utf-8");x.decode(),s.onPartBegin=function(){s.onPartData=w,s.onPartEnd=T,i="",u="",c="",m="",b="",h=null,O.length=0},s.onHeaderField=function(C){i+=x.decode(C,{stream:!0})},s.onHeaderValue=function(C){u+=x.decode(C,{stream:!0})},s.onHeaderEnd=function(){if(u+=x.decode(),i=i.toLowerCase(),i==="content-disposition"){let C=u.match(/\bname=("([^"]*)"|([^()<>@,;:\\"/[\]?={}\s\t]+))/i);C&&(m=C[2]||C[3]||""),h=mc(u),h&&(s.onPartData=_,s.onPartEnd=S)}else i==="content-type"&&(b=u);u="",i=""};for await(let C of r)s.write(C);return s.end(),E}var Se,U,aa,De,Yr,Kr,lc,Jt,cc,dc,fc,pc,Ge,ro,ua=Wt(()=>{to();Gr();Se=0,U={START_BOUNDARY:Se++,HEADER_FIELD_START:Se++,HEADER_FIELD:Se++,HEADER_VALUE_START:Se++,HEADER_VALUE:Se++,HEADER_VALUE_ALMOST_DONE:Se++,HEADERS_ALMOST_DONE:Se++,PART_DATA_START:Se++,PART_DATA:Se++,END:Se++},aa=1,De={PART_BOUNDARY:aa,LAST_BOUNDARY:aa*=2},Yr=10,Kr=13,lc=32,Jt=45,cc=58,dc=97,fc=122,pc=r=>r|32,Ge=()=>{},ro=class{constructor(t){this.index=0,this.flags=0,this.onHeaderEnd=Ge,this.onHeaderField=Ge,this.onHeadersEnd=Ge,this.onHeaderValue=Ge,this.onPartBegin=Ge,this.onPartData=Ge,this.onPartEnd=Ge,this.boundaryChars={},t=`\r
--`+t;let o=new Uint8Array(t.length);for(let s=0;s<t.length;s++)o[s]=t.charCodeAt(s),this.boundaryChars[o[s]]=!0;this.boundary=o,this.lookbehind=new Uint8Array(this.boundary.length+8),this.state=U.START_BOUNDARY}write(t){let o=0,s=t.length,i=this.index,{lookbehind:u,boundary:c,boundaryChars:m,index:b,state:h,flags:O}=this,E=this.boundary.length,w=E-1,_=t.length,S,T,x=v=>{this[v+"Mark"]=o},C=v=>{delete this[v+"Mark"]},z=(v,D,I,ne)=>{(D===void 0||D!==I)&&this[v](ne&&ne.subarray(D,I))},W=(v,D)=>{let I=v+"Mark";I in this&&(D?(z(v,this[I],o,t),delete this[I]):(z(v,this[I],t.length,t),this[I]=0))};for(o=0;o<s;o++)switch(S=t[o],h){case U.START_BOUNDARY:if(b===c.length-2){if(S===Jt)O|=De.LAST_BOUNDARY;else if(S!==Kr)return;b++;break}else if(b-1===c.length-2){if(O&De.LAST_BOUNDARY&&S===Jt)h=U.END,O=0;else if(!(O&De.LAST_BOUNDARY)&&S===Yr)b=0,z("onPartBegin"),h=U.HEADER_FIELD_START;else return;break}S!==c[b+2]&&(b=-2),S===c[b+2]&&b++;break;case U.HEADER_FIELD_START:h=U.HEADER_FIELD,x("onHeaderField"),b=0;case U.HEADER_FIELD:if(S===Kr){C("onHeaderField"),h=U.HEADERS_ALMOST_DONE;break}if(b++,S===Jt)break;if(S===cc){if(b===1)return;W("onHeaderField",!0),h=U.HEADER_VALUE_START;break}if(T=pc(S),T<dc||T>fc)return;break;case U.HEADER_VALUE_START:if(S===lc)break;x("onHeaderValue"),h=U.HEADER_VALUE;case U.HEADER_VALUE:S===Kr&&(W("onHeaderValue",!0),z("onHeaderEnd"),h=U.HEADER_VALUE_ALMOST_DONE);break;case U.HEADER_VALUE_ALMOST_DONE:if(S!==Yr)return;h=U.HEADER_FIELD_START;break;case U.HEADERS_ALMOST_DONE:if(S!==Yr)return;z("onHeadersEnd"),h=U.PART_DATA_START;break;case U.PART_DATA_START:h=U.PART_DATA,x("onPartData");case U.PART_DATA:if(i=b,b===0){for(o+=w;o<_&&!(t[o]in m);)o+=E;o-=w,S=t[o]}if(b<c.length)c[b]===S?(b===0&&W("onPartData",!0),b++):b=0;else if(b===c.length)b++,S===Kr?O|=De.PART_BOUNDARY:S===Jt?O|=De.LAST_BOUNDARY:b=0;else if(b-1===c.length)if(O&De.PART_BOUNDARY){if(b=0,S===Yr){O&=~De.PART_BOUNDARY,z("onPartEnd"),z("onPartBegin"),h=U.HEADER_FIELD_START;break}}else O&De.LAST_BOUNDARY&&S===Jt?(z("onPartEnd"),h=U.END,O=0):b=0;if(b>0)u[b-1]=S;else if(i>0){let v=new Uint8Array(u.buffer,u.byteOffset,u.byteLength);z("onPartData",0,i,v),i=0,x("onPartData"),o--}break;case U.END:break;default:throw new Error(`Unexpected state entered: ${h}`)}W("onHeaderField"),W("onHeaderValue"),W("onPartData"),this.index=b,this.state=h,this.flags=O}end(){if(this.state===U.HEADER_FIELD_START&&this.index===0||this.state===U.PART_DATA&&this.index===this.boundary.length)this.onPartEnd();else if(this.state!==U.END)throw new Error("MultipartParser.end(): stream ended unexpectedly")}}});var co=P(X=>{"use strict";Object.defineProperty(X,"__esModule",{value:!0});X.joinUrl=X.stripUndefined=X.delimited=X.encode=X.allowReserved=X.encodeReserved=void 0;X.encodeReserved=[encodeURIComponent,encodeURIComponent];X.allowReserved=[encodeURIComponent,encodeURI];function ja(r,t=","){let o=(s,i)=>{let u=r[i%r.length];return typeof s>"u"?"":typeof s=="object"?Array.isArray(s)?s.map(u).join(t):Object.entries(s).reduce((m,b)=>[...m,...b],[]).map(u).join(t):u(String(s))};return(s,...i)=>s.reduce((u,c,m)=>`${u}${c}${o(i[m],m)}`,"")}X.encode=ja;function Tc(r=","){return(t,o=X.encodeReserved)=>Object.entries(t).filter(([,s])=>s!==void 0).map(([s,i])=>ja(o,r)`${s}=${i}`).join("&")}X.delimited=Tc;function Pc(r){return r&&JSON.parse(JSON.stringify(r))}X.stripUndefined=Pc;function xc(...r){return r.filter(Boolean).map((t,o)=>o===0?t:t.replace(/^\/+/,"")).map((t,o,s)=>o===s.length-1?t:t.replace(/\/+$/,"")).join("/")}X.joinUrl=xc});var fo=P(J=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0});J.space=J.pipe=J.form=J.json=J.explode=J.deep=J.query=void 0;var Oe=co();function kc(...r){let t=r.filter(Boolean).join("&");return t&&`?${t}`}J.query=kc;function Cc(r,[t,o]=Oe.encodeReserved){let s=(0,Oe.encode)([c=>c,t]),i=(0,Oe.encode)([c=>c,o]),u=(c,m="")=>Object.entries(c).filter(([,b])=>b!==void 0).map(([b,h])=>{let O=Array.isArray(c)?"":b,E=m?s`${m}[${O}]`:b;return typeof h=="object"?u(h,E):i`${E}=${h}`}).join("&");return u(r)}J.deep=Cc;function Ta(r,t=Oe.encodeReserved){let o=(0,Oe.encode)(t);return Object.entries(r).filter(([,s])=>s!==void 0).map(([s,i])=>Array.isArray(i)?i.map(u=>o`${s}=${u}`).join("&"):typeof i=="object"?Ta(i,t):o`${s}=${i}`).join("&")}J.explode=Ta;function vc(r,t=Oe.encodeReserved){let o=(0,Oe.encode)(t);return Object.entries(r).filter(([,s])=>s!==void 0).map(([s,i])=>{let u=JSON.stringify(i);return o`${s}=${u}`}).join("&")}J.json=vc;J.form=(0,Oe.delimited)();J.pipe=(0,Oe.delimited)("|");J.space=(0,Oe.delimited)("%20")});var po=P(G=>{"use strict";var Pa=G&&G.__awaiter||function(r,t,o,s){function i(u){return u instanceof o?u:new o(function(c){c(u)})}return new(o||(o=Promise))(function(u,c){function m(O){try{h(s.next(O))}catch(E){c(E)}}function b(O){try{h(s.throw(O))}catch(E){c(E)}}function h(O){O.done?u(O.value):i(O.value).then(m,b)}h((s=s.apply(r,t||[])).next())})};Object.defineProperty(G,"__esModule",{value:!0});G.HttpError=G.optimistic=G.okify=G.ok=G.SUCCESS_CODES=G.handle=void 0;function Ac(r,t){return Pa(this,void 0,void 0,function*(){let{status:o,data:s,headers:i}=yield r,u=t[o];if(u)return u(s);if(t.default)return t.default(o,s);throw new Xt(o,s,i)})}G.handle=Ac;G.SUCCESS_CODES=[200,201,202,204];function xa(r){return Pa(this,void 0,void 0,function*(){let t=yield r;if(G.SUCCESS_CODES.some(o=>o==t.status))return t.data;throw new Xt(t.status,t.data,t.headers)})}G.ok=xa;function ka(r){return(...t)=>xa(r(...t))}G.okify=ka;function qc(r){let t={};return Object.entries(r).forEach(([o,s])=>{t[o]=typeof s=="function"?ka(s):s}),t}G.optimistic=qc;var Xt=class extends Error{constructor(t,o,s){super(`Error: ${t}`),this.status=t,this.data=o,this.headers=s}};G.HttpError=Xt});var va=P(re=>{"use strict";var Ic=re&&re.__createBinding||(Object.create?function(r,t,o,s){s===void 0&&(s=o);var i=Object.getOwnPropertyDescriptor(t,o);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[o]}}),Object.defineProperty(r,s,i)}:function(r,t,o,s){s===void 0&&(s=o),r[s]=t[o]}),Bc=re&&re.__setModuleDefault||(Object.create?function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}:function(r,t){r.default=t}),$c=re&&re.__importStar||function(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var o in r)o!=="default"&&Object.prototype.hasOwnProperty.call(r,o)&&Ic(t,r,o);return Bc(t,r),t},rn=re&&re.__awaiter||function(r,t,o,s){function i(u){return u instanceof o?u:new o(function(c){c(u)})}return new(o||(o=Promise))(function(u,c){function m(O){try{h(s.next(O))}catch(E){c(E)}}function b(O){try{h(s.throw(O))}catch(E){c(E)}}function h(O){O.done?u(O.value):i(O.value).then(m,b)}h((s=s.apply(r,t||[])).next())})},nn=re&&re.__rest||function(r,t){var o={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&t.indexOf(s)<0&&(o[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,s=Object.getOwnPropertySymbols(r);i<s.length;i++)t.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(r,s[i])&&(o[s[i]]=r[s[i]]);return o};Object.defineProperty(re,"__esModule",{value:!0});re.runtime=void 0;var zc=$c(fo()),Ca=co(),Dc=po();function Fc(r){function t(u,c){return rn(this,void 0,void 0,function*(){let m=yield i(u,c),b;try{b=yield m.text()}catch{}return{status:m.status,headers:m.headers,contentType:m.headers.get("content-type"),data:b}})}function o(u,c={}){return rn(this,void 0,void 0,function*(){let{status:m,headers:b,contentType:h,data:O}=yield t(u,Object.assign(Object.assign({},c),{headers:Object.assign({Accept:"application/json"},c.headers)}));return(h?h.includes("json"):!1)?{status:m,headers:b,data:O?JSON.parse(O):null}:{status:m,headers:b,data:O}})}function s(u,c={}){return rn(this,void 0,void 0,function*(){let m=yield i(u,c),b;try{b=yield m.blob()}catch{}return{status:m.status,headers:m.headers,data:b}})}function i(u,c={}){return rn(this,void 0,void 0,function*(){let m=Object.assign(Object.assign({},r),c),{baseUrl:b,headers:h,fetch:O}=m,E=nn(m,["baseUrl","headers","fetch"]),w=(0,Ca.joinUrl)(b,u);return yield(O||fetch)(w,Object.assign(Object.assign({},E),{headers:(0,Ca.stripUndefined)(Object.assign(Object.assign({},r.headers),h))}))})}return{ok:Dc.ok,fetchText:t,fetchJson:o,fetchBlob:s,json(u){var{body:c,headers:m}=u,b=nn(u,["body","headers"]);return Object.assign(Object.assign(Object.assign({},b),c!=null&&{body:JSON.stringify(c)}),{headers:Object.assign(Object.assign({},m),{"Content-Type":"application/json"})})},form(u){var{body:c,headers:m}=u,b=nn(u,["body","headers"]);return Object.assign(Object.assign(Object.assign({},b),c!=null&&{body:zc.form(c)}),{headers:Object.assign(Object.assign({},m),{"Content-Type":"application/x-www-form-urlencoded"})})},multipart(u){var{body:c}=u,m=nn(u,["body"]);if(c==null)return m;let b=new(r.formDataConstructor||m.formDataConstructor||FormData);return Object.entries(c).forEach(([h,O])=>{b.append(h,O)}),Object.assign(Object.assign({},m),{body:b})}}}re.runtime=Fc});var La=P((Ub,Ua)=>{Ua.exports=Fa;Fa.sync=Rf;var za=require("fs");function Ef(r,t){var o=t.pathExt!==void 0?t.pathExt:process.env.PATHEXT;if(!o||(o=o.split(";"),o.indexOf("")!==-1))return!0;for(var s=0;s<o.length;s++){var i=o[s].toLowerCase();if(i&&r.substr(-i.length).toLowerCase()===i)return!0}return!1}function Da(r,t,o){return!r.isSymbolicLink()&&!r.isFile()?!1:Ef(t,o)}function Fa(r,t,o){za.stat(r,function(s,i){o(s,s?!1:Da(i,r,t))})}function Rf(r,t){return Da(za.statSync(r),r,t)}});var Ha=P((Lb,Na)=>{Na.exports=Wa;Wa.sync=jf;var Ma=require("fs");function Wa(r,t,o){Ma.stat(r,function(s,i){o(s,s?!1:Qa(i,t))})}function jf(r,t){return Qa(Ma.statSync(r),t)}function Qa(r,t){return r.isFile()&&Tf(r,t)}function Tf(r,t){var o=r.mode,s=r.uid,i=r.gid,u=t.uid!==void 0?t.uid:process.getuid&&process.getuid(),c=t.gid!==void 0?t.gid:process.getgid&&process.getgid(),m=parseInt("100",8),b=parseInt("010",8),h=parseInt("001",8),O=m|b,E=o&h||o&b&&i===c||o&m&&s===u||o&O&&u===0;return E}});var Ja=P((Wb,Ga)=>{var Mb=require("fs"),on;process.platform==="win32"||global.TESTING_WINDOWS?on=La():on=Ha();Ga.exports=go;go.sync=Pf;function go(r,t,o){if(typeof t=="function"&&(o=t,t={}),!o){if(typeof Promise!="function")throw new TypeError("callback not provided");return new Promise(function(s,i){go(r,t||{},function(u,c){u?i(u):s(c)})})}on(r,t||{},function(s,i){s&&(s.code==="EACCES"||t&&t.ignoreErrors)&&(s=null,i=!1),o(s,i)})}function Pf(r,t){try{return on.sync(r,t||{})}catch(o){if(t&&t.ignoreErrors||o.code==="EACCES")return!1;throw o}}});var ti=P((Qb,ei)=>{var mt=process.platform==="win32"||process.env.OSTYPE==="cygwin"||process.env.OSTYPE==="msys",Va=require("path"),xf=mt?";":":",Ya=Ja(),Ka=r=>Object.assign(new Error(`not found: ${r}`),{code:"ENOENT"}),Xa=(r,t)=>{let o=t.colon||xf,s=r.match(/\//)||mt&&r.match(/\\/)?[""]:[...mt?[process.cwd()]:[],...(t.path||process.env.PATH||"").split(o)],i=mt?t.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM":"",u=mt?i.split(o):[""];return mt&&r.indexOf(".")!==-1&&u[0]!==""&&u.unshift(""),{pathEnv:s,pathExt:u,pathExtExe:i}},Za=(r,t,o)=>{typeof t=="function"&&(o=t,t={}),t||(t={});let{pathEnv:s,pathExt:i,pathExtExe:u}=Xa(r,t),c=[],m=h=>new Promise((O,E)=>{if(h===s.length)return t.all&&c.length?O(c):E(Ka(r));let w=s[h],_=/^".*"$/.test(w)?w.slice(1,-1):w,S=Va.join(_,r),T=!_&&/^\.[\\\/]/.test(r)?r.slice(0,2)+S:S;O(b(T,h,0))}),b=(h,O,E)=>new Promise((w,_)=>{if(E===i.length)return w(m(O+1));let S=i[E];Ya(h+S,{pathExt:u},(T,x)=>{if(!T&&x)if(t.all)c.push(h+S);else return w(h+S);return w(b(h,O,E+1))})});return o?m(0).then(h=>o(null,h),o):m(0)},kf=(r,t)=>{t=t||{};let{pathEnv:o,pathExt:s,pathExtExe:i}=Xa(r,t),u=[];for(let c=0;c<o.length;c++){let m=o[c],b=/^".*"$/.test(m)?m.slice(1,-1):m,h=Va.join(b,r),O=!b&&/^\.[\\\/]/.test(r)?r.slice(0,2)+h:h;for(let E=0;E<s.length;E++){let w=O+s[E];try{if(Ya.sync(w,{pathExt:i}))if(t.all)u.push(w);else return w}catch{}}}if(t.all&&u.length)return u;if(t.nothrow)return null;throw Ka(r)};ei.exports=Za;Za.sync=kf});var So=P((Nb,yo)=>{"use strict";var ri=(r={})=>{let t=r.env||process.env;return(r.platform||process.platform)!=="win32"?"PATH":Object.keys(t).reverse().find(s=>s.toUpperCase()==="PATH")||"Path"};yo.exports=ri;yo.exports.default=ri});var ai=P((Hb,si)=>{"use strict";var ni=require("path"),Cf=ti(),vf=So();function oi(r,t){let o=r.options.env||process.env,s=process.cwd(),i=r.options.cwd!=null,u=i&&process.chdir!==void 0&&!process.chdir.disabled;if(u)try{process.chdir(r.options.cwd)}catch{}let c;try{c=Cf.sync(r.command,{path:o[vf({env:o})],pathExt:t?ni.delimiter:void 0})}catch{}finally{u&&process.chdir(s)}return c&&(c=ni.resolve(i?r.options.cwd:"",c)),c}function Af(r){return oi(r)||oi(r,!0)}si.exports=Af});var ii=P((Gb,Oo)=>{"use strict";var _o=/([()\][%!^"`<>&|;, *?])/g;function qf(r){return r=r.replace(_o,"^$1"),r}function If(r,t){return r=`${r}`,r=r.replace(/(\\*)"/g,'$1$1\\"'),r=r.replace(/(\\*)$/,"$1$1"),r=`"${r}"`,r=r.replace(_o,"^$1"),t&&(r=r.replace(_o,"^$1")),r}Oo.exports.command=qf;Oo.exports.argument=If});var li=P((Jb,ui)=>{"use strict";ui.exports=/^#!(.*)/});var di=P((Vb,ci)=>{"use strict";var Bf=li();ci.exports=(r="")=>{let t=r.match(Bf);if(!t)return null;let[o,s]=t[0].replace(/#! ?/,"").split(" "),i=o.split("/").pop();return i==="env"?s:s?`${i} ${s}`:i}});var pi=P((Yb,fi)=>{"use strict";var wo=require("fs"),$f=di();function zf(r){let o=Buffer.alloc(150),s;try{s=wo.openSync(r,"r"),wo.readSync(s,o,0,150,0),wo.closeSync(s)}catch{}return $f(o.toString())}fi.exports=zf});var gi=P((Kb,hi)=>{"use strict";var Df=require("path"),mi=ai(),bi=ii(),Ff=pi(),Uf=process.platform==="win32",Lf=/\.(?:com|exe)$/i,Mf=/node_modules[\\/].bin[\\/][^\\/]+\.cmd$/i;function Wf(r){r.file=mi(r);let t=r.file&&Ff(r.file);return t?(r.args.unshift(r.file),r.command=t,mi(r)):r.file}function Qf(r){if(!Uf)return r;let t=Wf(r),o=!Lf.test(t);if(r.options.forceShell||o){let s=Mf.test(t);r.command=Df.normalize(r.command),r.command=bi.command(r.command),r.args=r.args.map(u=>bi.argument(u,s));let i=[r.command].concat(r.args).join(" ");r.args=["/d","/s","/c",`"${i}"`],r.command=process.env.comspec||"cmd.exe",r.options.windowsVerbatimArguments=!0}return r}function Nf(r,t,o){t&&!Array.isArray(t)&&(o=t,t=null),t=t?t.slice(0):[],o=Object.assign({},o);let s={command:r,args:t,options:o,file:void 0,original:{command:r,args:t}};return o.shell?s:Qf(s)}hi.exports=Nf});var _i=P((Xb,Si)=>{"use strict";var Eo=process.platform==="win32";function Ro(r,t){return Object.assign(new Error(`${t} ${r.command} ENOENT`),{code:"ENOENT",errno:"ENOENT",syscall:`${t} ${r.command}`,path:r.command,spawnargs:r.args})}function Hf(r,t){if(!Eo)return;let o=r.emit;r.emit=function(s,i){if(s==="exit"){let u=yi(i,t,"spawn");if(u)return o.call(r,"error",u)}return o.apply(r,arguments)}}function yi(r,t){return Eo&&r===1&&!t.file?Ro(t.original,"spawn"):null}function Gf(r,t){return Eo&&r===1&&!t.file?Ro(t.original,"spawnSync"):null}Si.exports={hookChildProcess:Hf,verifyENOENT:yi,verifyENOENTSync:Gf,notFoundError:Ro}});var Ei=P((Zb,bt)=>{"use strict";var Oi=require("child_process"),jo=gi(),To=_i();function wi(r,t,o){let s=jo(r,t,o),i=Oi.spawn(s.command,s.args,s.options);return To.hookChildProcess(i,s),i}function Jf(r,t,o){let s=jo(r,t,o),i=Oi.spawnSync(s.command,s.args,s.options);return i.error=i.error||To.verifyENOENTSync(i.status,s),i}bt.exports=wi;bt.exports.spawn=wi;bt.exports.sync=Jf;bt.exports._parse=jo;bt.exports._enoent=To});var ji=P((eh,Ri)=>{"use strict";Ri.exports=r=>{let t=typeof r=="string"?`
`:`
`.charCodeAt(),o=typeof r=="string"?"\r":"\r".charCodeAt();return r[r.length-1]===t&&(r=r.slice(0,r.length-1)),r[r.length-1]===o&&(r=r.slice(0,r.length-1)),r}});var xi=P((th,tr)=>{"use strict";var er=require("path"),Ti=So(),Pi=r=>{r={cwd:process.cwd(),path:process.env[Ti()],execPath:process.execPath,...r};let t,o=er.resolve(r.cwd),s=[];for(;t!==o;)s.push(er.join(o,"node_modules/.bin")),t=o,o=er.resolve(o,"..");let i=er.resolve(r.cwd,r.execPath,"..");return s.push(i),s.concat(r.path).join(er.delimiter)};tr.exports=Pi;tr.exports.default=Pi;tr.exports.env=r=>{r={env:process.env,...r};let t={...r.env},o=Ti({env:t});return r.path=t[o],t[o]=tr.exports(r),t}});var Ci=P((rh,Po)=>{"use strict";var ki=(r,t)=>{for(let o of Reflect.ownKeys(t))Object.defineProperty(r,o,Object.getOwnPropertyDescriptor(t,o));return r};Po.exports=ki;Po.exports.default=ki});var Ai=P((nh,an)=>{"use strict";var Vf=Ci(),sn=new WeakMap,vi=(r,t={})=>{if(typeof r!="function")throw new TypeError("Expected a function");let o,s=0,i=r.displayName||r.name||"<anonymous>",u=function(...c){if(sn.set(u,++s),s===1)o=r.apply(this,c),r=null;else if(t.throw===!0)throw new Error(`Function \`${i}\` can only be called once`);return o};return Vf(u,r),sn.set(u,s),u};an.exports=vi;an.exports.default=vi;an.exports.callCount=r=>{if(!sn.has(r))throw new Error(`The given function \`${r.name}\` is not wrapped by the \`onetime\` package`);return sn.get(r)}});var qi=P(un=>{"use strict";Object.defineProperty(un,"__esModule",{value:!0});un.SIGNALS=void 0;var Yf=[{name:"SIGHUP",number:1,action:"terminate",description:"Terminal closed",standard:"posix"},{name:"SIGINT",number:2,action:"terminate",description:"User interruption with CTRL-C",standard:"ansi"},{name:"SIGQUIT",number:3,action:"core",description:"User interruption with CTRL-\\",standard:"posix"},{name:"SIGILL",number:4,action:"core",description:"Invalid machine instruction",standard:"ansi"},{name:"SIGTRAP",number:5,action:"core",description:"Debugger breakpoint",standard:"posix"},{name:"SIGABRT",number:6,action:"core",description:"Aborted",standard:"ansi"},{name:"SIGIOT",number:6,action:"core",description:"Aborted",standard:"bsd"},{name:"SIGBUS",number:7,action:"core",description:"Bus error due to misaligned, non-existing address or paging error",standard:"bsd"},{name:"SIGEMT",number:7,action:"terminate",description:"Command should be emulated but is not implemented",standard:"other"},{name:"SIGFPE",number:8,action:"core",description:"Floating point arithmetic error",standard:"ansi"},{name:"SIGKILL",number:9,action:"terminate",description:"Forced termination",standard:"posix",forced:!0},{name:"SIGUSR1",number:10,action:"terminate",description:"Application-specific signal",standard:"posix"},{name:"SIGSEGV",number:11,action:"core",description:"Segmentation fault",standard:"ansi"},{name:"SIGUSR2",number:12,action:"terminate",description:"Application-specific signal",standard:"posix"},{name:"SIGPIPE",number:13,action:"terminate",description:"Broken pipe or socket",standard:"posix"},{name:"SIGALRM",number:14,action:"terminate",description:"Timeout or timer",standard:"posix"},{name:"SIGTERM",number:15,action:"terminate",description:"Termination",standard:"ansi"},{name:"SIGSTKFLT",number:16,action:"terminate",description:"Stack is empty or overflowed",standard:"other"},{name:"SIGCHLD",number:17,action:"ignore",description:"Child process terminated, paused or unpaused",standard:"posix"},{name:"SIGCLD",number:17,action:"ignore",description:"Child process terminated, paused or unpaused",standard:"other"},{name:"SIGCONT",number:18,action:"unpause",description:"Unpaused",standard:"posix",forced:!0},{name:"SIGSTOP",number:19,action:"pause",description:"Paused",standard:"posix",forced:!0},{name:"SIGTSTP",number:20,action:"pause",description:'Paused using CTRL-Z or "suspend"',standard:"posix"},{name:"SIGTTIN",number:21,action:"pause",description:"Background process cannot read terminal input",standard:"posix"},{name:"SIGBREAK",number:21,action:"terminate",description:"User interruption with CTRL-BREAK",standard:"other"},{name:"SIGTTOU",number:22,action:"pause",description:"Background process cannot write to terminal output",standard:"posix"},{name:"SIGURG",number:23,action:"ignore",description:"Socket received out-of-band data",standard:"bsd"},{name:"SIGXCPU",number:24,action:"core",description:"Process timed out",standard:"bsd"},{name:"SIGXFSZ",number:25,action:"core",description:"File too big",standard:"bsd"},{name:"SIGVTALRM",number:26,action:"terminate",description:"Timeout or timer",standard:"bsd"},{name:"SIGPROF",number:27,action:"terminate",description:"Timeout or timer",standard:"bsd"},{name:"SIGWINCH",number:28,action:"ignore",description:"Terminal window size changed",standard:"bsd"},{name:"SIGIO",number:29,action:"terminate",description:"I/O is available",standard:"other"},{name:"SIGPOLL",number:29,action:"terminate",description:"Watched event",standard:"other"},{name:"SIGINFO",number:29,action:"ignore",description:"Request for process information",standard:"other"},{name:"SIGPWR",number:30,action:"terminate",description:"Device running out of power",standard:"systemv"},{name:"SIGSYS",number:31,action:"core",description:"Invalid system call",standard:"other"},{name:"SIGUNUSED",number:31,action:"terminate",description:"Invalid system call",standard:"other"}];un.SIGNALS=Yf});var xo=P(ht=>{"use strict";Object.defineProperty(ht,"__esModule",{value:!0});ht.SIGRTMAX=ht.getRealtimeSignals=void 0;var Kf=function(){let r=Bi-Ii+1;return Array.from({length:r},Xf)};ht.getRealtimeSignals=Kf;var Xf=function(r,t){return{name:`SIGRT${t+1}`,number:Ii+t,action:"terminate",description:"Application-specific signal (realtime)",standard:"posix"}},Ii=34,Bi=64;ht.SIGRTMAX=Bi});var $i=P(ln=>{"use strict";Object.defineProperty(ln,"__esModule",{value:!0});ln.getSignals=void 0;var Zf=require("os"),ep=qi(),tp=xo(),rp=function(){let r=(0,tp.getRealtimeSignals)();return[...ep.SIGNALS,...r].map(np)};ln.getSignals=rp;var np=function({name:r,number:t,description:o,action:s,forced:i=!1,standard:u}){let{signals:{[r]:c}}=Zf.constants,m=c!==void 0;return{name:r,number:m?c:t,description:o,supported:m,action:s,forced:i,standard:u}}});var Di=P(gt=>{"use strict";Object.defineProperty(gt,"__esModule",{value:!0});gt.signalsByNumber=gt.signalsByName=void 0;var op=require("os"),zi=$i(),sp=xo(),ap=function(){return(0,zi.getSignals)().reduce(ip,{})},ip=function(r,{name:t,number:o,description:s,supported:i,action:u,forced:c,standard:m}){return{...r,[t]:{name:t,number:o,description:s,supported:i,action:u,forced:c,standard:m}}},up=ap();gt.signalsByName=up;var lp=function(){let r=(0,zi.getSignals)(),t=sp.SIGRTMAX+1,o=Array.from({length:t},(s,i)=>cp(i,r));return Object.assign({},...o)},cp=function(r,t){let o=dp(r,t);if(o===void 0)return{};let{name:s,description:i,supported:u,action:c,forced:m,standard:b}=o;return{[r]:{name:s,number:r,description:i,supported:u,action:c,forced:m,standard:b}}},dp=function(r,t){let o=t.find(({name:s})=>op.constants.signals[s]===r);return o!==void 0?o:t.find(s=>s.number===r)},fp=lp();gt.signalsByNumber=fp});var Ui=P((uh,Fi)=>{"use strict";var{signalsByName:pp}=Di(),mp=({timedOut:r,timeout:t,errorCode:o,signal:s,signalDescription:i,exitCode:u,isCanceled:c})=>r?`timed out after ${t} milliseconds`:c?"was canceled":o!==void 0?`failed with ${o}`:s!==void 0?`was killed with ${s} (${i})`:u!==void 0?`failed with exit code ${u}`:"failed",bp=({stdout:r,stderr:t,all:o,error:s,signal:i,exitCode:u,command:c,escapedCommand:m,timedOut:b,isCanceled:h,killed:O,parsed:{options:{timeout:E}}})=>{u=u===null?void 0:u,i=i===null?void 0:i;let w=i===void 0?void 0:pp[i].description,_=s&&s.code,T=`Command ${mp({timedOut:b,timeout:E,errorCode:_,signal:i,signalDescription:w,exitCode:u,isCanceled:h})}: ${c}`,x=Object.prototype.toString.call(s)==="[object Error]",C=x?`${T}
${s.message}`:T,z=[C,t,r].filter(Boolean).join(`
`);return x?(s.originalMessage=s.message,s.message=z):s=new Error(z),s.shortMessage=C,s.command=c,s.escapedCommand=m,s.exitCode=u,s.signal=i,s.signalDescription=w,s.stdout=r,s.stderr=t,o!==void 0&&(s.all=o),"bufferedData"in s&&delete s.bufferedData,s.failed=!0,s.timedOut=Boolean(b),s.isCanceled=h,s.killed=O&&!b,s};Fi.exports=bp});var Mi=P((lh,ko)=>{"use strict";var cn=["stdin","stdout","stderr"],hp=r=>cn.some(t=>r[t]!==void 0),Li=r=>{if(!r)return;let{stdio:t}=r;if(t===void 0)return cn.map(s=>r[s]);if(hp(r))throw new Error(`It's not possible to provide \`stdio\` in combination with one of ${cn.map(s=>`\`${s}\``).join(", ")}`);if(typeof t=="string")return t;if(!Array.isArray(t))throw new TypeError(`Expected \`stdio\` to be of type \`string\` or \`Array\`, got \`${typeof t}\``);let o=Math.max(t.length,cn.length);return Array.from({length:o},(s,i)=>t[i])};ko.exports=Li;ko.exports.node=r=>{let t=Li(r);return t==="ipc"?"ipc":t===void 0||typeof t=="string"?[t,t,t,"ipc"]:t.includes("ipc")?t:[...t,"ipc"]}});var Wi=P((ch,dn)=>{dn.exports=["SIGABRT","SIGALRM","SIGHUP","SIGINT","SIGTERM"];process.platform!=="win32"&&dn.exports.push("SIGVTALRM","SIGXCPU","SIGXFSZ","SIGUSR2","SIGTRAP","SIGSYS","SIGQUIT","SIGIOT");process.platform==="linux"&&dn.exports.push("SIGIO","SIGPOLL","SIGPWR","SIGSTKFLT","SIGUNUSED")});var Ji=P((dh,_t)=>{var L=global.process,Ye=function(r){return r&&typeof r=="object"&&typeof r.removeListener=="function"&&typeof r.emit=="function"&&typeof r.reallyExit=="function"&&typeof r.listeners=="function"&&typeof r.kill=="function"&&typeof r.pid=="number"&&typeof r.on=="function"};Ye(L)?(Qi=require("assert"),yt=Wi(),Ni=/^win/i.test(L.platform),rr=require("events"),typeof rr!="function"&&(rr=rr.EventEmitter),L.__signal_exit_emitter__?N=L.__signal_exit_emitter__:(N=L.__signal_exit_emitter__=new rr,N.count=0,N.emitted={}),N.infinite||(N.setMaxListeners(1/0),N.infinite=!0),_t.exports=function(r,t){if(!Ye(global.process))return function(){};Qi.equal(typeof r,"function","a callback must be provided for exit handler"),St===!1&&Co();var o="exit";t&&t.alwaysLast&&(o="afterexit");var s=function(){N.removeListener(o,r),N.listeners("exit").length===0&&N.listeners("afterexit").length===0&&fn()};return N.on(o,r),s},fn=function(){!St||!Ye(global.process)||(St=!1,yt.forEach(function(t){try{L.removeListener(t,pn[t])}catch{}}),L.emit=mn,L.reallyExit=vo,N.count-=1)},_t.exports.unload=fn,Ke=function(t,o,s){N.emitted[t]||(N.emitted[t]=!0,N.emit(t,o,s))},pn={},yt.forEach(function(r){pn[r]=function(){if(!!Ye(global.process)){var o=L.listeners(r);o.length===N.count&&(fn(),Ke("exit",null,r),Ke("afterexit",null,r),Ni&&r==="SIGHUP"&&(r="SIGINT"),L.kill(L.pid,r))}}}),_t.exports.signals=function(){return yt},St=!1,Co=function(){St||!Ye(global.process)||(St=!0,N.count+=1,yt=yt.filter(function(t){try{return L.on(t,pn[t]),!0}catch{return!1}}),L.emit=Gi,L.reallyExit=Hi)},_t.exports.load=Co,vo=L.reallyExit,Hi=function(t){!Ye(global.process)||(L.exitCode=t||0,Ke("exit",L.exitCode,null),Ke("afterexit",L.exitCode,null),vo.call(L,L.exitCode))},mn=L.emit,Gi=function(t,o){if(t==="exit"&&Ye(global.process)){o!==void 0&&(L.exitCode=o);var s=mn.apply(this,arguments);return Ke("exit",L.exitCode,null),Ke("afterexit",L.exitCode,null),s}else return mn.apply(this,arguments)}):_t.exports=function(){return function(){}};var Qi,yt,Ni,rr,N,fn,Ke,pn,St,Co,vo,Hi,mn,Gi});var Yi=P((fh,Vi)=>{"use strict";var gp=require("os"),yp=Ji(),Sp=1e3*5,_p=(r,t="SIGTERM",o={})=>{let s=r(t);return Op(r,t,o,s),s},Op=(r,t,o,s)=>{if(!wp(t,o,s))return;let i=Rp(o),u=setTimeout(()=>{r("SIGKILL")},i);u.unref&&u.unref()},wp=(r,{forceKillAfterTimeout:t},o)=>Ep(r)&&t!==!1&&o,Ep=r=>r===gp.constants.signals.SIGTERM||typeof r=="string"&&r.toUpperCase()==="SIGTERM",Rp=({forceKillAfterTimeout:r=!0})=>{if(r===!0)return Sp;if(!Number.isFinite(r)||r<0)throw new TypeError(`Expected the \`forceKillAfterTimeout\` option to be a non-negative integer, got \`${r}\` (${typeof r})`);return r},jp=(r,t)=>{r.kill()&&(t.isCanceled=!0)},Tp=(r,t,o)=>{r.kill(t),o(Object.assign(new Error("Timed out"),{timedOut:!0,signal:t}))},Pp=(r,{timeout:t,killSignal:o="SIGTERM"},s)=>{if(t===0||t===void 0)return s;let i,u=new Promise((m,b)=>{i=setTimeout(()=>{Tp(r,o,b)},t)}),c=s.finally(()=>{clearTimeout(i)});return Promise.race([u,c])},xp=({timeout:r})=>{if(r!==void 0&&(!Number.isFinite(r)||r<0))throw new TypeError(`Expected the \`timeout\` option to be a non-negative integer, got \`${r}\` (${typeof r})`)},kp=async(r,{cleanup:t,detached:o},s)=>{if(!t||o)return s;let i=yp(()=>{r.kill()});return s.finally(()=>{i()})};Vi.exports={spawnedKill:_p,spawnedCancel:jp,setupTimeout:Pp,validateTimeout:xp,setExitHandler:kp}});var Xi=P((ph,Ki)=>{"use strict";var we=r=>r!==null&&typeof r=="object"&&typeof r.pipe=="function";we.writable=r=>we(r)&&r.writable!==!1&&typeof r._write=="function"&&typeof r._writableState=="object";we.readable=r=>we(r)&&r.readable!==!1&&typeof r._read=="function"&&typeof r._readableState=="object";we.duplex=r=>we.writable(r)&&we.readable(r);we.transform=r=>we.duplex(r)&&typeof r._transform=="function";Ki.exports=we});var eu=P((mh,Zi)=>{"use strict";var{PassThrough:Cp}=require("stream");Zi.exports=r=>{r={...r};let{array:t}=r,{encoding:o}=r,s=o==="buffer",i=!1;t?i=!(o||s):o=o||"utf8",s&&(o=null);let u=new Cp({objectMode:i});o&&u.setEncoding(o);let c=0,m=[];return u.on("data",b=>{m.push(b),i?c=m.length:c+=b.length}),u.getBufferedValue=()=>t?m:s?Buffer.concat(m,c):m.join(""),u.getBufferedLength=()=>c,u}});var tu=P((bh,nr)=>{"use strict";var{constants:vp}=require("buffer"),Ap=require("stream"),{promisify:qp}=require("util"),Ip=eu(),Bp=qp(Ap.pipeline),bn=class extends Error{constructor(){super("maxBuffer exceeded"),this.name="MaxBufferError"}};async function Ao(r,t){if(!r)throw new Error("Expected a stream");t={maxBuffer:1/0,...t};let{maxBuffer:o}=t,s=Ip(t);return await new Promise((i,u)=>{let c=m=>{m&&s.getBufferedLength()<=vp.MAX_LENGTH&&(m.bufferedData=s.getBufferedValue()),u(m)};(async()=>{try{await Bp(r,s),i()}catch(m){c(m)}})(),s.on("data",()=>{s.getBufferedLength()>o&&c(new bn)})}),s.getBufferedValue()}nr.exports=Ao;nr.exports.buffer=(r,t)=>Ao(r,{...t,encoding:"buffer"});nr.exports.array=(r,t)=>Ao(r,{...t,array:!0});nr.exports.MaxBufferError=bn});var nu=P((hh,ru)=>{"use strict";var{PassThrough:$p}=require("stream");ru.exports=function(){var r=[],t=new $p({objectMode:!0});return t.setMaxListeners(0),t.add=o,t.isEmpty=s,t.on("unpipe",i),Array.prototype.slice.call(arguments).forEach(o),t;function o(u){return Array.isArray(u)?(u.forEach(o),this):(r.push(u),u.once("end",i.bind(null,u)),u.once("error",t.emit.bind(t,"error")),u.pipe(t,{end:!1}),this)}function s(){return r.length==0}function i(u){r=r.filter(function(c){return c!==u}),!r.length&&t.readable&&t.end()}}});var iu=P((gh,au)=>{"use strict";var su=Xi(),ou=tu(),zp=nu(),Dp=(r,t)=>{t===void 0||r.stdin===void 0||(su(t)?t.pipe(r.stdin):r.stdin.end(t))},Fp=(r,{all:t})=>{if(!t||!r.stdout&&!r.stderr)return;let o=zp();return r.stdout&&o.add(r.stdout),r.stderr&&o.add(r.stderr),o},qo=async(r,t)=>{if(!!r){r.destroy();try{return await t}catch(o){return o.bufferedData}}},Io=(r,{encoding:t,buffer:o,maxBuffer:s})=>{if(!(!r||!o))return t?ou(r,{encoding:t,maxBuffer:s}):ou.buffer(r,{maxBuffer:s})},Up=async({stdout:r,stderr:t,all:o},{encoding:s,buffer:i,maxBuffer:u},c)=>{let m=Io(r,{encoding:s,buffer:i,maxBuffer:u}),b=Io(t,{encoding:s,buffer:i,maxBuffer:u}),h=Io(o,{encoding:s,buffer:i,maxBuffer:u*2});try{return await Promise.all([c,m,b,h])}catch(O){return Promise.all([{error:O,signal:O.signal,timedOut:O.timedOut},qo(r,m),qo(t,b),qo(o,h)])}},Lp=({input:r})=>{if(su(r))throw new TypeError("The `input` option cannot be a stream in sync mode")};au.exports={handleInput:Dp,makeAllStream:Fp,getSpawnedResult:Up,validateInputSync:Lp}});var lu=P((yh,uu)=>{"use strict";var Mp=(async()=>{})().constructor.prototype,Wp=["then","catch","finally"].map(r=>[r,Reflect.getOwnPropertyDescriptor(Mp,r)]),Qp=(r,t)=>{for(let[o,s]of Wp){let i=typeof t=="function"?(...u)=>Reflect.apply(s.value,t(),u):s.value.bind(t);Reflect.defineProperty(r,o,{...s,value:i})}return r},Np=r=>new Promise((t,o)=>{r.on("exit",(s,i)=>{t({exitCode:s,signal:i})}),r.on("error",s=>{o(s)}),r.stdin&&r.stdin.on("error",s=>{o(s)})});uu.exports={mergePromise:Qp,getSpawnedPromise:Np}});var fu=P((Sh,du)=>{"use strict";var cu=(r,t=[])=>Array.isArray(t)?[r,...t]:[r],Hp=/^[\w.-]+$/,Gp=/"/g,Jp=r=>typeof r!="string"||Hp.test(r)?r:`"${r.replace(Gp,'\\"')}"`,Vp=(r,t)=>cu(r,t).join(" "),Yp=(r,t)=>cu(r,t).map(o=>Jp(o)).join(" "),Kp=/ +/g,Xp=r=>{let t=[];for(let o of r.trim().split(Kp)){let s=t[t.length-1];s&&s.endsWith("\\")?t[t.length-1]=`${s.slice(0,-1)} ${o}`:t.push(o)}return t};du.exports={joinCommand:Vp,getEscapedCommand:Yp,parseCommand:Xp}});var Su=P((_h,Ot)=>{"use strict";var Zp=require("path"),Bo=require("child_process"),em=Ei(),tm=ji(),rm=xi(),nm=Ai(),hn=Ui(),mu=Mi(),{spawnedKill:om,spawnedCancel:sm,setupTimeout:am,validateTimeout:im,setExitHandler:um}=Yi(),{handleInput:lm,getSpawnedResult:cm,makeAllStream:dm,validateInputSync:fm}=iu(),{mergePromise:pu,getSpawnedPromise:pm}=lu(),{joinCommand:bu,parseCommand:hu,getEscapedCommand:gu}=fu(),mm=1e3*1e3*100,bm=({env:r,extendEnv:t,preferLocal:o,localDir:s,execPath:i})=>{let u=t?{...process.env,...r}:r;return o?rm.env({env:u,cwd:s,execPath:i}):u},yu=(r,t,o={})=>{let s=em._parse(r,t,o);return r=s.command,t=s.args,o=s.options,o={maxBuffer:mm,buffer:!0,stripFinalNewline:!0,extendEnv:!0,preferLocal:!1,localDir:o.cwd||process.cwd(),execPath:process.execPath,encoding:"utf8",reject:!0,cleanup:!0,all:!1,windowsHide:!0,...o},o.env=bm(o),o.stdio=mu(o),process.platform==="win32"&&Zp.basename(r,".exe")==="cmd"&&t.unshift("/q"),{file:r,args:t,options:o,parsed:s}},or=(r,t,o)=>typeof t!="string"&&!Buffer.isBuffer(t)?o===void 0?void 0:"":r.stripFinalNewline?tm(t):t,gn=(r,t,o)=>{let s=yu(r,t,o),i=bu(r,t),u=gu(r,t);im(s.options);let c;try{c=Bo.spawn(s.file,s.args,s.options)}catch(_){let S=new Bo.ChildProcess,T=Promise.reject(hn({error:_,stdout:"",stderr:"",all:"",command:i,escapedCommand:u,parsed:s,timedOut:!1,isCanceled:!1,killed:!1}));return pu(S,T)}let m=pm(c),b=am(c,s.options,m),h=um(c,s.options,b),O={isCanceled:!1};c.kill=om.bind(null,c.kill.bind(c)),c.cancel=sm.bind(null,c,O);let w=nm(async()=>{let[{error:_,exitCode:S,signal:T,timedOut:x},C,z,W]=await cm(c,s.options,h),v=or(s.options,C),D=or(s.options,z),I=or(s.options,W);if(_||S!==0||T!==null){let ne=hn({error:_,exitCode:S,signal:T,stdout:v,stderr:D,all:I,command:i,escapedCommand:u,parsed:s,timedOut:x,isCanceled:O.isCanceled,killed:c.killed});if(!s.options.reject)return ne;throw ne}return{command:i,escapedCommand:u,exitCode:0,stdout:v,stderr:D,all:I,failed:!1,timedOut:!1,isCanceled:!1,killed:!1}});return lm(c,s.options.input),c.all=dm(c,s.options),pu(c,w)};Ot.exports=gn;Ot.exports.sync=(r,t,o)=>{let s=yu(r,t,o),i=bu(r,t),u=gu(r,t);fm(s.options);let c;try{c=Bo.spawnSync(s.file,s.args,s.options)}catch(h){throw hn({error:h,stdout:"",stderr:"",all:"",command:i,escapedCommand:u,parsed:s,timedOut:!1,isCanceled:!1,killed:!1})}let m=or(s.options,c.stdout,c.error),b=or(s.options,c.stderr,c.error);if(c.error||c.status!==0||c.signal!==null){let h=hn({stdout:m,stderr:b,error:c.error,signal:c.signal,exitCode:c.status,command:i,escapedCommand:u,parsed:s,timedOut:c.error&&c.error.code==="ETIMEDOUT",isCanceled:!1,killed:c.signal!==null});if(!s.options.reject)return h;throw h}return{command:i,escapedCommand:u,exitCode:0,stdout:m,stderr:b,failed:!1,timedOut:!1,isCanceled:!1,killed:!1}};Ot.exports.command=(r,t)=>{let[o,...s]=hu(r);return gn(o,s,t)};Ot.exports.commandSync=(r,t)=>{let[o,...s]=hu(r);return gn.sync(o,s,t)};Ot.exports.node=(r,t,o={})=>{t&&!Array.isArray(t)&&typeof t=="object"&&(o=t,t=[]);let s=mu.node(o),i=process.execArgv.filter(m=>!m.startsWith("--inspect")),{nodePath:u=process.execPath,nodeOptions:c=i}=o;return gn(u,[...c,r,...Array.isArray(t)?t:[]],{...o,stdin:void 0,stdout:void 0,stderr:void 0,stdio:s,shell:!1})}});var hm={};Vn(hm,{default:()=>xu});module.exports=ec(hm);var sr=require("@raycast/api");var qa=require("react"),ho=require("@raycast/api");var ao=require("@raycast/api");var Ea=ae(require("node:http"),1),Ra=ae(require("node:https"),1),Je=ae(require("node:zlib"),1),ue=ae(require("node:stream"),1),Kt=require("node:buffer");function tc(r){if(!/^data:/i.test(r))throw new TypeError('`uri` does not appear to be a Data URI (must begin with "data:")');r=r.replace(/\r?\n/g,"");let t=r.indexOf(",");if(t===-1||t<=4)throw new TypeError("malformed data: URI");let o=r.substring(5,t).split(";"),s="",i=!1,u=o[0]||"text/plain",c=u;for(let O=1;O<o.length;O++)o[O]==="base64"?i=!0:o[O]&&(c+=`;${o[O]}`,o[O].indexOf("charset=")===0&&(s=o[O].substring(8)));!o[0]&&!s.length&&(c+=";charset=US-ASCII",s="US-ASCII");let m=i?"base64":"ascii",b=unescape(r.substring(t+1)),h=Buffer.from(b,m);return h.type=u,h.typeFull=c,h.charset=s,h}var Ns=tc;var ce=ae(require("node:stream"),1),Pe=require("node:util"),ie=require("node:buffer");Qt();Gr();var Te=class extends Error{constructor(t,o){super(t),Error.captureStackTrace(this,this.constructor),this.type=o}get name(){return this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}};var ee=class extends Te{constructor(t,o,s){super(t,o),s&&(this.code=this.errno=s.code,this.erroredSysCall=s.syscall)}};var Jr=Symbol.toStringTag,eo=r=>typeof r=="object"&&typeof r.append=="function"&&typeof r.delete=="function"&&typeof r.get=="function"&&typeof r.getAll=="function"&&typeof r.has=="function"&&typeof r.set=="function"&&typeof r.sort=="function"&&r[Jr]==="URLSearchParams",Ht=r=>r&&typeof r=="object"&&typeof r.arrayBuffer=="function"&&typeof r.type=="string"&&typeof r.stream=="function"&&typeof r.constructor=="function"&&/^(Blob|File)$/.test(r[Jr]),ea=r=>typeof r=="object"&&(r[Jr]==="AbortSignal"||r[Jr]==="EventTarget"),ta=(r,t)=>{let o=new URL(t).hostname,s=new URL(r).hostname;return o===s||o.endsWith(`.${s}`)},ra=(r,t)=>{let o=new URL(t).protocol,s=new URL(r).protocol;return o===s};var hc=(0,Pe.promisify)(ce.default.pipeline),te=Symbol("Body internals"),_e=class{constructor(t,{size:o=0}={}){let s=null;t===null?t=null:eo(t)?t=ie.Buffer.from(t.toString()):Ht(t)||ie.Buffer.isBuffer(t)||(Pe.types.isAnyArrayBuffer(t)?t=ie.Buffer.from(t):ArrayBuffer.isView(t)?t=ie.Buffer.from(t.buffer,t.byteOffset,t.byteLength):t instanceof ce.default||(t instanceof He?(t=Zs(t),s=t.type.split("=")[1]):t=ie.Buffer.from(String(t))));let i=t;ie.Buffer.isBuffer(t)?i=ce.default.Readable.from(t):Ht(t)&&(i=ce.default.Readable.from(t.stream())),this[te]={body:t,stream:i,boundary:s,disturbed:!1,error:null},this.size=o,t instanceof ce.default&&t.on("error",u=>{let c=u instanceof Te?u:new ee(`Invalid response body while trying to fetch ${this.url}: ${u.message}`,"system",u);this[te].error=c})}get body(){return this[te].stream}get bodyUsed(){return this[te].disturbed}async arrayBuffer(){let{buffer:t,byteOffset:o,byteLength:s}=await no(this);return t.slice(o,o+s)}async formData(){let t=this.headers.get("content-type");if(t.startsWith("application/x-www-form-urlencoded")){let s=new He,i=new URLSearchParams(await this.text());for(let[u,c]of i)s.append(u,c);return s}let{toFormData:o}=await Promise.resolve().then(()=>(ua(),ia));return o(this.body,t)}async blob(){let t=this.headers&&this.headers.get("content-type")||this[te].body&&this[te].body.type||"",o=await this.arrayBuffer();return new je([o],{type:t})}async json(){let t=await this.text();return JSON.parse(t)}async text(){let t=await no(this);return new TextDecoder().decode(t)}buffer(){return no(this)}};_e.prototype.buffer=(0,Pe.deprecate)(_e.prototype.buffer,"Please use 'response.arrayBuffer()' instead of 'response.buffer()'","node-fetch#buffer");Object.defineProperties(_e.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0},data:{get:(0,Pe.deprecate)(()=>{},"data doesn't exist, use json(), text(), arrayBuffer(), or body instead","https://github.com/node-fetch/node-fetch/issues/1000 (response)")}});async function no(r){if(r[te].disturbed)throw new TypeError(`body used already for: ${r.url}`);if(r[te].disturbed=!0,r[te].error)throw r[te].error;let{body:t}=r;if(t===null)return ie.Buffer.alloc(0);if(!(t instanceof ce.default))return ie.Buffer.alloc(0);let o=[],s=0;try{for await(let i of t){if(r.size>0&&s+i.length>r.size){let u=new ee(`content size at ${r.url} over limit: ${r.size}`,"max-size");throw t.destroy(u),u}s+=i.length,o.push(i)}}catch(i){throw i instanceof Te?i:new ee(`Invalid response body while trying to fetch ${r.url}: ${i.message}`,"system",i)}if(t.readableEnded===!0||t._readableState.ended===!0)try{return o.every(i=>typeof i=="string")?ie.Buffer.from(o.join("")):ie.Buffer.concat(o,s)}catch(i){throw new ee(`Could not create Buffer from response body for ${r.url}: ${i.message}`,"system",i)}else throw new ee(`Premature close of server response while trying to fetch ${r.url}`)}var ct=(r,t)=>{let o,s,{body:i}=r[te];if(r.bodyUsed)throw new Error("cannot clone body after it is used");return i instanceof ce.default&&typeof i.getBoundary!="function"&&(o=new ce.PassThrough({highWaterMark:t}),s=new ce.PassThrough({highWaterMark:t}),i.pipe(o),i.pipe(s),r[te].stream=o,i=s),i},gc=(0,Pe.deprecate)(r=>r.getBoundary(),"form-data doesn't follow the spec and requires special treatment. Use alternative package","https://github.com/node-fetch/node-fetch/issues/1167"),Xr=(r,t)=>r===null?null:typeof r=="string"?"text/plain;charset=UTF-8":eo(r)?"application/x-www-form-urlencoded;charset=UTF-8":Ht(r)?r.type||null:ie.Buffer.isBuffer(r)||Pe.types.isAnyArrayBuffer(r)||ArrayBuffer.isView(r)?null:r instanceof He?`multipart/form-data; boundary=${t[te].boundary}`:r&&typeof r.getBoundary=="function"?`multipart/form-data;boundary=${gc(r)}`:r instanceof ce.default?null:"text/plain;charset=UTF-8",la=r=>{let{body:t}=r[te];return t===null?0:Ht(t)?t.size:ie.Buffer.isBuffer(t)?t.length:t&&typeof t.getLengthSync=="function"&&t.hasKnownLength&&t.hasKnownLength()?t.getLengthSync():null},ca=async(r,{body:t})=>{t===null?r.end():await hc(t,r)};var oo=require("node:util"),Vt=ae(require("node:http"),1),Zr=typeof Vt.default.validateHeaderName=="function"?Vt.default.validateHeaderName:r=>{if(!/^[\^`\-\w!#$%&'*+.|~]+$/.test(r)){let t=new TypeError(`Header name must be a valid HTTP token [${r}]`);throw Object.defineProperty(t,"code",{value:"ERR_INVALID_HTTP_TOKEN"}),t}},so=typeof Vt.default.validateHeaderValue=="function"?Vt.default.validateHeaderValue:(r,t)=>{if(/[^\t\u0020-\u007E\u0080-\u00FF]/.test(t)){let o=new TypeError(`Invalid character in header content ["${r}"]`);throw Object.defineProperty(o,"code",{value:"ERR_INVALID_CHAR"}),o}},K=class extends URLSearchParams{constructor(t){let o=[];if(t instanceof K){let s=t.raw();for(let[i,u]of Object.entries(s))o.push(...u.map(c=>[i,c]))}else if(t!=null)if(typeof t=="object"&&!oo.types.isBoxedPrimitive(t)){let s=t[Symbol.iterator];if(s==null)o.push(...Object.entries(t));else{if(typeof s!="function")throw new TypeError("Header pairs must be iterable");o=[...t].map(i=>{if(typeof i!="object"||oo.types.isBoxedPrimitive(i))throw new TypeError("Each header pair must be an iterable object");return[...i]}).map(i=>{if(i.length!==2)throw new TypeError("Each header pair must be a name/value tuple");return[...i]})}}else throw new TypeError("Failed to construct 'Headers': The provided value is not of type '(sequence<sequence<ByteString>> or record<ByteString, ByteString>)");return o=o.length>0?o.map(([s,i])=>(Zr(s),so(s,String(i)),[String(s).toLowerCase(),String(i)])):void 0,super(o),new Proxy(this,{get(s,i,u){switch(i){case"append":case"set":return(c,m)=>(Zr(c),so(c,String(m)),URLSearchParams.prototype[i].call(s,String(c).toLowerCase(),String(m)));case"delete":case"has":case"getAll":return c=>(Zr(c),URLSearchParams.prototype[i].call(s,String(c).toLowerCase()));case"keys":return()=>(s.sort(),new Set(URLSearchParams.prototype.keys.call(s)).keys());default:return Reflect.get(s,i,u)}}})}get[Symbol.toStringTag](){return this.constructor.name}toString(){return Object.prototype.toString.call(this)}get(t){let o=this.getAll(t);if(o.length===0)return null;let s=o.join(", ");return/^content-encoding$/i.test(t)&&(s=s.toLowerCase()),s}forEach(t,o=void 0){for(let s of this.keys())Reflect.apply(t,o,[this.get(s),s,this])}*values(){for(let t of this.keys())yield this.get(t)}*entries(){for(let t of this.keys())yield[t,this.get(t)]}[Symbol.iterator](){return this.entries()}raw(){return[...this.keys()].reduce((t,o)=>(t[o]=this.getAll(o),t),{})}[Symbol.for("nodejs.util.inspect.custom")](){return[...this.keys()].reduce((t,o)=>{let s=this.getAll(o);return o==="host"?t[o]=s[0]:t[o]=s.length>1?s:s[0],t},{})}};Object.defineProperties(K.prototype,["get","entries","forEach","values"].reduce((r,t)=>(r[t]={enumerable:!0},r),{}));function da(r=[]){return new K(r.reduce((t,o,s,i)=>(s%2===0&&t.push(i.slice(s,s+2)),t),[]).filter(([t,o])=>{try{return Zr(t),so(t,String(o)),!0}catch{return!1}}))}var yc=new Set([301,302,303,307,308]),en=r=>yc.has(r);var ge=Symbol("Response internals"),H=class extends _e{constructor(t=null,o={}){super(t,o);let s=o.status!=null?o.status:200,i=new K(o.headers);if(t!==null&&!i.has("Content-Type")){let u=Xr(t,this);u&&i.append("Content-Type",u)}this[ge]={type:"default",url:o.url,status:s,statusText:o.statusText||"",headers:i,counter:o.counter,highWaterMark:o.highWaterMark}}get type(){return this[ge].type}get url(){return this[ge].url||""}get status(){return this[ge].status}get ok(){return this[ge].status>=200&&this[ge].status<300}get redirected(){return this[ge].counter>0}get statusText(){return this[ge].statusText}get headers(){return this[ge].headers}get highWaterMark(){return this[ge].highWaterMark}clone(){return new H(ct(this,this.highWaterMark),{type:this.type,url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected,size:this.size,highWaterMark:this.highWaterMark})}static redirect(t,o=302){if(!en(o))throw new RangeError('Failed to execute "redirect" on "response": Invalid status code');return new H(null,{headers:{location:new URL(t).toString()},status:o})}static error(){let t=new H(null,{status:0,statusText:""});return t[ge].type="error",t}static json(t=void 0,o={}){let s=JSON.stringify(t);if(s===void 0)throw new TypeError("data is not JSON serializable");let i=new K(o&&o.headers);return i.has("content-type")||i.set("content-type","application/json"),new H(s,{...o,headers:i})}get[Symbol.toStringTag](){return"Response"}};Object.defineProperties(H.prototype,{type:{enumerable:!0},url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}});var _a=require("node:url"),Oa=require("node:util");var fa=r=>{if(r.search)return r.search;let t=r.href.length-1,o=r.hash||(r.href[t]==="#"?"#":"");return r.href[t-o.length]==="?"?"?":""};var ma=require("node:net");function pa(r,t=!1){return r==null||(r=new URL(r),/^(about|blob|data):$/.test(r.protocol))?"no-referrer":(r.username="",r.password="",r.hash="",t&&(r.pathname="",r.search=""),r)}var ba=new Set(["","no-referrer","no-referrer-when-downgrade","same-origin","origin","strict-origin","origin-when-cross-origin","strict-origin-when-cross-origin","unsafe-url"]),ha="strict-origin-when-cross-origin";function ga(r){if(!ba.has(r))throw new TypeError(`Invalid referrerPolicy: ${r}`);return r}function Sc(r){if(/^(http|ws)s:$/.test(r.protocol))return!0;let t=r.host.replace(/(^\[)|(]$)/g,""),o=(0,ma.isIP)(t);return o===4&&/^127\./.test(t)||o===6&&/^(((0+:){7})|(::(0+:){0,6}))0*1$/.test(t)?!0:r.host==="localhost"||r.host.endsWith(".localhost")?!1:r.protocol==="file:"}function dt(r){return/^about:(blank|srcdoc)$/.test(r)||r.protocol==="data:"||/^(blob|filesystem):$/.test(r.protocol)?!0:Sc(r)}function ya(r,{referrerURLCallback:t,referrerOriginCallback:o}={}){if(r.referrer==="no-referrer"||r.referrerPolicy==="")return null;let s=r.referrerPolicy;if(r.referrer==="about:client")return"no-referrer";let i=r.referrer,u=pa(i),c=pa(i,!0);u.toString().length>4096&&(u=c),t&&(u=t(u)),o&&(c=o(c));let m=new URL(r.url);switch(s){case"no-referrer":return"no-referrer";case"origin":return c;case"unsafe-url":return u;case"strict-origin":return dt(u)&&!dt(m)?"no-referrer":c.toString();case"strict-origin-when-cross-origin":return u.origin===m.origin?u:dt(u)&&!dt(m)?"no-referrer":c;case"same-origin":return u.origin===m.origin?u:"no-referrer";case"origin-when-cross-origin":return u.origin===m.origin?u:c;case"no-referrer-when-downgrade":return dt(u)&&!dt(m)?"no-referrer":u;default:throw new TypeError(`Invalid referrerPolicy: ${s}`)}}function Sa(r){let t=(r.get("referrer-policy")||"").split(/[,\s]+/),o="";for(let s of t)s&&ba.has(s)&&(o=s);return o}var Q=Symbol("Request internals"),Yt=r=>typeof r=="object"&&typeof r[Q]=="object",_c=(0,Oa.deprecate)(()=>{},".data is not a valid RequestInit property, use .body instead","https://github.com/node-fetch/node-fetch/issues/1000 (request)"),xe=class extends _e{constructor(t,o={}){let s;if(Yt(t)?s=new URL(t.url):(s=new URL(t),t={}),s.username!==""||s.password!=="")throw new TypeError(`${s} is an url with embedded credentials.`);let i=o.method||t.method||"GET";if(/^(delete|get|head|options|post|put)$/i.test(i)&&(i=i.toUpperCase()),!Yt(o)&&"data"in o&&_c(),(o.body!=null||Yt(t)&&t.body!==null)&&(i==="GET"||i==="HEAD"))throw new TypeError("Request with GET/HEAD method cannot have body");let u=o.body?o.body:Yt(t)&&t.body!==null?ct(t):null;super(u,{size:o.size||t.size||0});let c=new K(o.headers||t.headers||{});if(u!==null&&!c.has("Content-Type")){let h=Xr(u,this);h&&c.set("Content-Type",h)}let m=Yt(t)?t.signal:null;if("signal"in o&&(m=o.signal),m!=null&&!ea(m))throw new TypeError("Expected signal to be an instanceof AbortSignal or EventTarget");let b=o.referrer==null?t.referrer:o.referrer;if(b==="")b="no-referrer";else if(b){let h=new URL(b);b=/^about:(\/\/)?client$/.test(h)?"client":h}else b=void 0;this[Q]={method:i,redirect:o.redirect||t.redirect||"follow",headers:c,parsedURL:s,signal:m,referrer:b},this.follow=o.follow===void 0?t.follow===void 0?20:t.follow:o.follow,this.compress=o.compress===void 0?t.compress===void 0?!0:t.compress:o.compress,this.counter=o.counter||t.counter||0,this.agent=o.agent||t.agent,this.highWaterMark=o.highWaterMark||t.highWaterMark||16384,this.insecureHTTPParser=o.insecureHTTPParser||t.insecureHTTPParser||!1,this.referrerPolicy=o.referrerPolicy||t.referrerPolicy||""}get method(){return this[Q].method}get url(){return(0,_a.format)(this[Q].parsedURL)}get headers(){return this[Q].headers}get redirect(){return this[Q].redirect}get signal(){return this[Q].signal}get referrer(){if(this[Q].referrer==="no-referrer")return"";if(this[Q].referrer==="client")return"about:client";if(this[Q].referrer)return this[Q].referrer.toString()}get referrerPolicy(){return this[Q].referrerPolicy}set referrerPolicy(t){this[Q].referrerPolicy=ga(t)}clone(){return new xe(this)}get[Symbol.toStringTag](){return"Request"}};Object.defineProperties(xe.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0},referrer:{enumerable:!0},referrerPolicy:{enumerable:!0}});var wa=r=>{let{parsedURL:t}=r[Q],o=new K(r[Q].headers);o.has("Accept")||o.set("Accept","*/*");let s=null;if(r.body===null&&/^(post|put)$/i.test(r.method)&&(s="0"),r.body!==null){let m=la(r);typeof m=="number"&&!Number.isNaN(m)&&(s=String(m))}s&&o.set("Content-Length",s),r.referrerPolicy===""&&(r.referrerPolicy=ha),r.referrer&&r.referrer!=="no-referrer"?r[Q].referrer=ya(r):r[Q].referrer="no-referrer",r[Q].referrer instanceof URL&&o.set("Referer",r.referrer),o.has("User-Agent")||o.set("User-Agent","node-fetch"),r.compress&&!o.has("Accept-Encoding")&&o.set("Accept-Encoding","gzip, deflate, br");let{agent:i}=r;typeof i=="function"&&(i=i(t)),!o.has("Connection")&&!i&&o.set("Connection","close");let u=fa(t),c={path:t.pathname+u,method:r.method,headers:o[Symbol.for("nodejs.util.inspect.custom")](),insecureHTTPParser:r.insecureHTTPParser,agent:i};return{parsedURL:t,options:c}};var tn=class extends Te{constructor(t,o="aborted"){super(t,o)}};Gr();to();var Oc=new Set(["data:","http:","https:"]);async function Ve(r,t){return new Promise((o,s)=>{let i=new xe(r,t),{parsedURL:u,options:c}=wa(i);if(!Oc.has(u.protocol))throw new TypeError(`node-fetch cannot load ${r}. URL scheme "${u.protocol.replace(/:$/,"")}" is not supported.`);if(u.protocol==="data:"){let S=Ns(i.url),T=new H(S,{headers:{"Content-Type":S.typeFull}});o(T);return}let m=(u.protocol==="https:"?Ra.default:Ea.default).request,{signal:b}=i,h=null,O=()=>{let S=new tn("The operation was aborted.");s(S),i.body&&i.body instanceof ue.default.Readable&&i.body.destroy(S),!(!h||!h.body)&&h.body.emit("error",S)};if(b&&b.aborted){O();return}let E=()=>{O(),_()},w=m(u.toString(),c);b&&b.addEventListener("abort",E);let _=()=>{w.abort(),b&&b.removeEventListener("abort",E)};w.on("error",S=>{s(new ee(`request to ${i.url} failed, reason: ${S.message}`,"system",S)),_()}),wc(w,S=>{h&&h.body&&h.body.destroy(S)}),process.version<"v14"&&w.on("socket",S=>{let T;S.prependListener("end",()=>{T=S._eventsCount}),S.prependListener("close",x=>{if(h&&T<S._eventsCount&&!x){let C=new Error("Premature close");C.code="ERR_STREAM_PREMATURE_CLOSE",h.body.emit("error",C)}})}),w.on("response",S=>{w.setTimeout(0);let T=da(S.rawHeaders);if(en(S.statusCode)){let v=T.get("Location"),D=null;try{D=v===null?null:new URL(v,i.url)}catch{if(i.redirect!=="manual"){s(new ee(`uri requested responds with an invalid redirect URL: ${v}`,"invalid-redirect")),_();return}}switch(i.redirect){case"error":s(new ee(`uri requested responds with a redirect, redirect mode is set to error: ${i.url}`,"no-redirect")),_();return;case"manual":break;case"follow":{if(D===null)break;if(i.counter>=i.follow){s(new ee(`maximum redirect reached at: ${i.url}`,"max-redirect")),_();return}let I={headers:new K(i.headers),follow:i.follow,counter:i.counter+1,agent:i.agent,compress:i.compress,method:i.method,body:ct(i),signal:i.signal,size:i.size,referrer:i.referrer,referrerPolicy:i.referrerPolicy};if(!ta(i.url,D)||!ra(i.url,D))for(let V of["authorization","www-authenticate","cookie","cookie2"])I.headers.delete(V);if(S.statusCode!==303&&i.body&&t.body instanceof ue.default.Readable){s(new ee("Cannot follow redirect with body being a readable stream","unsupported-redirect")),_();return}(S.statusCode===303||(S.statusCode===301||S.statusCode===302)&&i.method==="POST")&&(I.method="GET",I.body=void 0,I.headers.delete("content-length"));let ne=Sa(T);ne&&(I.referrerPolicy=ne),o(Ve(new xe(D,I))),_();return}default:return s(new TypeError(`Redirect option '${i.redirect}' is not a valid value of RequestRedirect`))}}b&&S.once("end",()=>{b.removeEventListener("abort",E)});let x=(0,ue.pipeline)(S,new ue.PassThrough,v=>{v&&s(v)});process.version<"v12.10"&&S.on("aborted",E);let C={url:i.url,status:S.statusCode,statusText:S.statusMessage,headers:T,size:i.size,counter:i.counter,highWaterMark:i.highWaterMark},z=T.get("Content-Encoding");if(!i.compress||i.method==="HEAD"||z===null||S.statusCode===204||S.statusCode===304){h=new H(x,C),o(h);return}let W={flush:Je.default.Z_SYNC_FLUSH,finishFlush:Je.default.Z_SYNC_FLUSH};if(z==="gzip"||z==="x-gzip"){x=(0,ue.pipeline)(x,Je.default.createGunzip(W),v=>{v&&s(v)}),h=new H(x,C),o(h);return}if(z==="deflate"||z==="x-deflate"){let v=(0,ue.pipeline)(S,new ue.PassThrough,D=>{D&&s(D)});v.once("data",D=>{(D[0]&15)===8?x=(0,ue.pipeline)(x,Je.default.createInflate(),I=>{I&&s(I)}):x=(0,ue.pipeline)(x,Je.default.createInflateRaw(),I=>{I&&s(I)}),h=new H(x,C),o(h)}),v.once("end",()=>{h||(h=new H(x,C),o(h))});return}if(z==="br"){x=(0,ue.pipeline)(x,Je.default.createBrotliDecompress(),v=>{v&&s(v)}),h=new H(x,C),o(h);return}h=new H(x,C),o(h)}),ca(w,i).catch(s)})}function wc(r,t){let o=Kt.Buffer.from(`0\r
\r
`),s=!1,i=!1,u;r.on("response",c=>{let{headers:m}=c;s=m["transfer-encoding"]==="chunked"&&!m["content-length"]}),r.on("socket",c=>{let m=()=>{if(s&&!i){let h=new Error("Premature close");h.code="ERR_STREAM_PREMATURE_CLOSE",t(h)}},b=h=>{i=Kt.Buffer.compare(h.slice(-5),o)===0,!i&&u&&(i=Kt.Buffer.compare(u.slice(-3),o.slice(0,3))===0&&Kt.Buffer.compare(h.slice(-2),o.slice(3))===0),u=h};c.prependListener("close",m),c.on("data",b),r.on("close",()=>{c.removeListener("close",m),c.removeListener("data",b)})})}var io=require("url"),uo="7bbb789c01ff44ed842907b7a80c404f",Ec=["playlist-modify-private","playlist-modify-public","playlist-read-collaborative","playlist-read-private","user-follow-read","user-library-modify","user-library-read","user-modify-playback-state","user-read-currently-playing","user-read-playback-state","user-read-private","user-top-read"].join(" "),ft=new ao.OAuth.PKCEClient({redirectMethod:ao.OAuth.RedirectMethod.Web,providerName:"Spotify",providerIcon:"spotify-icon.svg",description:"Connect your Spotify account",providerId:"spotify"});async function lo(){let r=await ft.getTokens();if(r?.accessToken){if(r.refreshToken&&r.isExpired()){let i=await jc(r.refreshToken);return await ft.setTokens(i),i.access_token}return r.accessToken}let t=await ft.authorizationRequest({endpoint:"https://accounts.spotify.com/authorize/",clientId:uo,scope:Ec}),{authorizationCode:o}=await ft.authorize(t),s=await Rc(t,o);return await ft.setTokens(s),s.access_token}async function Rc(r,t){let o=new io.URLSearchParams;o.append("client_id",uo),o.append("code",t),o.append("code_verifier",r.codeVerifier),o.append("grant_type","authorization_code"),o.append("redirect_uri",r.redirectURI);let s=await Ve("https://accounts.spotify.com/api/token",{method:"POST",body:o});if(!s.ok)throw new Error(s.statusText);return await s.json()}async function jc(r){let t=new io.URLSearchParams;t.append("client_id",uo),t.append("refresh_token",r),t.append("grant_type","refresh_token");let o=await Ve("https://accounts.spotify.com/api/token",{method:"POST",body:t});if(!o.ok)throw(await o.json()).error==="invalid_grant"&&(ft.removeTokens(),lo()),new Error(o.statusText);let s=await o.json();return s.refresh_token=s.refresh_token??r,s}var mo={};Vn(mo,{defaults:()=>Zt,deleteMeAlbums:()=>wd,deleteMeAudiobooks:()=>sd,deleteMeEpisodes:()=>Cd,deleteMeFollowing:()=>Yd,deleteMeShows:()=>Id,deleteMeTracks:()=>Td,deletePlaylistsByPlaylistIdFollowers:()=>Ud,deletePlaylistsByPlaylistIdTracks:()=>yd,getAlbums:()=>Mc,getAlbumsById:()=>Lc,getAlbumsByIdTracks:()=>Wc,getArtists:()=>Nc,getArtistsById:()=>Qc,getArtistsByIdAlbums:()=>Hc,getArtistsByIdRelatedArtists:()=>Jc,getArtistsByIdTopTracks:()=>Gc,getAudioAnalysisById:()=>tf,getAudioFeatures:()=>Zd,getAudioFeaturesById:()=>ef,getAudiobooks:()=>td,getAudiobooksById:()=>ed,getAudiobooksByIdChapters:()=>rd,getBrowseCategories:()=>Md,getBrowseCategoriesByCategoryId:()=>Wd,getBrowseCategoriesByCategoryIdPlaylists:()=>Qd,getBrowseFeaturedPlaylists:()=>Ld,getBrowseNewReleases:()=>Gd,getChapters:()=>ud,getChaptersById:()=>id,getEpisodes:()=>Zc,getEpisodesById:()=>Xc,getMarkets:()=>_f,getMe:()=>fd,getMeAlbums:()=>_d,getMeAlbumsContains:()=>Ed,getMeAudiobooks:()=>nd,getMeAudiobooksContains:()=>ad,getMeEpisodes:()=>xd,getMeEpisodesContains:()=>vd,getMeFollowing:()=>Jd,getMeFollowingContains:()=>Kd,getMePlayer:()=>of,getMePlayerCurrentlyPlaying:()=>uf,getMePlayerDevices:()=>af,getMePlayerQueue:()=>yf,getMePlayerRecentlyPlayed:()=>gf,getMePlaylists:()=>Sd,getMeShows:()=>Ad,getMeShowsContains:()=>Bd,getMeTopArtists:()=>Of,getMeTopTracks:()=>wf,getMeTracks:()=>Rd,getMeTracksContains:()=>Pd,getPlaylistsByPlaylistId:()=>pd,getPlaylistsByPlaylistIdFollowersContains:()=>Xd,getPlaylistsByPlaylistIdImages:()=>Nd,getPlaylistsByPlaylistIdTracks:()=>bd,getRecommendations:()=>rf,getRecommendationsAvailableGenreSeeds:()=>nf,getShows:()=>Yc,getShowsById:()=>Vc,getShowsByIdEpisodes:()=>Kc,getTracks:()=>cd,getTracksById:()=>ld,getUsersByUserId:()=>$d,getUsersByUserIdPlaylists:()=>zd,postMePlayerNext:()=>df,postMePlayerPrevious:()=>ff,postMePlayerQueue:()=>Sf,postPlaylistsByPlaylistIdTracks:()=>hd,postUsersByUserIdPlaylists:()=>Dd,putMeAlbums:()=>Od,putMeAudiobooks:()=>od,putMeEpisodes:()=>kd,putMeFollowing:()=>Vd,putMePlayer:()=>sf,putMePlayerPause:()=>cf,putMePlayerPlay:()=>lf,putMePlayerRepeat:()=>mf,putMePlayerSeek:()=>pf,putMePlayerShuffle:()=>hf,putMePlayerVolume:()=>bf,putMeShows:()=>qd,putMeTracks:()=>jd,putPlaylistsByPlaylistId:()=>md,putPlaylistsByPlaylistIdFollowers:()=>Fd,putPlaylistsByPlaylistIdImages:()=>Hd,putPlaylistsByPlaylistIdTracks:()=>gd,search:()=>dd,servers:()=>Uc});var Aa=ae(va()),p=ae(fo()),Zt={baseUrl:"https://api.spotify.com/v1"},d=Aa.runtime(Zt),Uc={server1:"https://api.spotify.com/v1"};function Lc(r,{market:t}={},o){return d.ok(d.fetchJson(`/albums/${encodeURIComponent(r)}${p.query(p.explode({market:t}))}`,{...o}))}function Mc(r,{market:t}={},o){return d.ok(d.fetchJson(`/albums${p.query(p.explode({ids:r,market:t}))}`,{...o}))}function Wc(r,{market:t,limit:o,offset:s}={},i){return d.ok(d.fetchJson(`/albums/${encodeURIComponent(r)}/tracks${p.query(p.explode({market:t,limit:o,offset:s}))}`,{...i}))}function Qc(r,t){return d.ok(d.fetchJson(`/artists/${encodeURIComponent(r)}`,{...t}))}function Nc(r,t){return d.ok(d.fetchJson(`/artists${p.query(p.explode({ids:r}))}`,{...t}))}function Hc(r,{includeGroups:t,market:o,limit:s,offset:i}={},u){return d.ok(d.fetchJson(`/artists/${encodeURIComponent(r)}/albums${p.query(p.explode({include_groups:t,market:o,limit:s,offset:i}))}`,{...u}))}function Gc(r,{market:t}={},o){return d.ok(d.fetchJson(`/artists/${encodeURIComponent(r)}/top-tracks${p.query(p.explode({market:t}))}`,{...o}))}function Jc(r,t){return d.ok(d.fetchJson(`/artists/${encodeURIComponent(r)}/related-artists`,{...t}))}function Vc(r,{market:t}={},o){return d.ok(d.fetchJson(`/shows/${encodeURIComponent(r)}${p.query(p.explode({market:t}))}`,{...o}))}function Yc(r,{market:t}={},o){return d.ok(d.fetchJson(`/shows${p.query(p.explode({market:t,ids:r}))}`,{...o}))}function Kc(r,{market:t,limit:o,offset:s}={},i){return d.ok(d.fetchJson(`/shows/${encodeURIComponent(r)}/episodes${p.query(p.explode({market:t,limit:o,offset:s}))}`,{...i}))}function Xc(r,{market:t}={},o){return d.ok(d.fetchJson(`/episodes/${encodeURIComponent(r)}${p.query(p.explode({market:t}))}`,{...o}))}function Zc(r,{market:t}={},o){return d.ok(d.fetchJson(`/episodes${p.query(p.explode({ids:r,market:t}))}`,{...o}))}function ed(r,{market:t}={},o){return d.ok(d.fetchJson(`/audiobooks/${encodeURIComponent(r)}${p.query(p.explode({market:t}))}`,{...o}))}function td(r,{market:t}={},o){return d.ok(d.fetchJson(`/audiobooks${p.query(p.explode({ids:r,market:t}))}`,{...o}))}function rd(r,{market:t,limit:o,offset:s}={},i){return d.ok(d.fetchJson(`/audiobooks/${encodeURIComponent(r)}/chapters${p.query(p.explode({market:t,limit:o,offset:s}))}`,{...i}))}function nd({limit:r,offset:t}={},o){return d.ok(d.fetchJson(`/me/audiobooks${p.query(p.explode({limit:r,offset:t}))}`,{...o}))}function od(r,t){return d.ok(d.fetchJson(`/me/audiobooks${p.query(p.explode({ids:r}))}`,{...t,method:"PUT"}))}function sd(r,t){return d.ok(d.fetchJson(`/me/audiobooks${p.query(p.explode({ids:r}))}`,{...t,method:"DELETE"}))}function ad(r,t){return d.ok(d.fetchJson(`/me/audiobooks/contains${p.query(p.explode({ids:r}))}`,{...t}))}function id(r,{market:t}={},o){return d.ok(d.fetchJson(`/chapters/${encodeURIComponent(r)}${p.query(p.explode({market:t}))}`,{...o}))}function ud(r,{market:t}={},o){return d.ok(d.fetchJson(`/chapters${p.query(p.explode({ids:r,market:t}))}`,{...o}))}function ld(r,{market:t}={},o){return d.ok(d.fetchJson(`/tracks/${encodeURIComponent(r)}${p.query(p.explode({market:t}))}`,{...o}))}function cd(r,{market:t}={},o){return d.ok(d.fetchJson(`/tracks${p.query(p.explode({market:t,ids:r}))}`,{...o}))}function dd(r,t,{market:o,limit:s,offset:i,includeExternal:u}={},c){return d.ok(d.fetchJson(`/search${p.query(p.explode({q:r,market:o,limit:s,offset:i,include_external:u}),p.form({type:t}))}`,{...c}))}function fd(r){return d.ok(d.fetchJson("/me",{...r}))}function pd(r,{market:t,fields:o,additionalTypes:s}={},i){return d.ok(d.fetchJson(`/playlists/${encodeURIComponent(r)}${p.query(p.explode({market:t,fields:o,additional_types:s}))}`,{...i}))}function md(r,t,o){return d.ok(d.fetchJson(`/playlists/${encodeURIComponent(r)}`,d.json({...o,method:"PUT",body:t})))}function bd(r,{market:t,fields:o,limit:s,offset:i,additionalTypes:u}={},c){return d.ok(d.fetchJson(`/playlists/${encodeURIComponent(r)}/tracks${p.query(p.explode({market:t,fields:o,limit:s,offset:i,additional_types:u}))}`,{...c}))}function hd(r,t,{position:o,uris:s}={},i){return d.ok(d.fetchJson(`/playlists/${encodeURIComponent(r)}/tracks${p.query(p.explode({position:o,uris:s}))}`,d.json({...i,method:"POST",body:t})))}function gd(r,t,{uris:o}={},s){return d.ok(d.fetchJson(`/playlists/${encodeURIComponent(r)}/tracks${p.query(p.explode({uris:o}))}`,d.json({...s,method:"PUT",body:t})))}function yd(r,t,o){return d.ok(d.fetchJson(`/playlists/${encodeURIComponent(r)}/tracks`,d.json({...o,method:"DELETE",body:t})))}function Sd({limit:r,offset:t}={},o){return d.ok(d.fetchJson(`/me/playlists${p.query(p.explode({limit:r,offset:t}))}`,{...o}))}function _d({limit:r,offset:t,market:o}={},s){return d.ok(d.fetchJson(`/me/albums${p.query(p.explode({limit:r,offset:t,market:o}))}`,{...s}))}function Od(r,t,o){return d.ok(d.fetchJson(`/me/albums${p.query(p.explode({ids:r}))}`,d.json({...o,method:"PUT",body:t})))}function wd(r,t,o){return d.ok(d.fetchJson(`/me/albums${p.query(p.explode({ids:r}))}`,d.json({...o,method:"DELETE",body:t})))}function Ed(r,t){return d.ok(d.fetchJson(`/me/albums/contains${p.query(p.explode({ids:r}))}`,{...t}))}function Rd({market:r,limit:t,offset:o}={},s){return d.ok(d.fetchJson(`/me/tracks${p.query(p.explode({market:r,limit:t,offset:o}))}`,{...s}))}function jd(r,t,o){return d.ok(d.fetchJson(`/me/tracks${p.query(p.explode({ids:r}))}`,d.json({...o,method:"PUT",body:t})))}function Td(r,t,o){return d.ok(d.fetchJson(`/me/tracks${p.query(p.explode({ids:r}))}`,d.json({...o,method:"DELETE",body:t})))}function Pd(r,t){return d.ok(d.fetchJson(`/me/tracks/contains${p.query(p.explode({ids:r}))}`,{...t}))}function xd({market:r,limit:t,offset:o}={},s){return d.ok(d.fetchJson(`/me/episodes${p.query(p.explode({market:r,limit:t,offset:o}))}`,{...s}))}function kd(r,t,o){return d.ok(d.fetchJson(`/me/episodes${p.query(p.explode({ids:r}))}`,d.json({...o,method:"PUT",body:t})))}function Cd(r,t,o){return d.ok(d.fetchJson(`/me/episodes${p.query(p.explode({ids:r}))}`,d.json({...o,method:"DELETE",body:t})))}function vd(r,t){return d.ok(d.fetchJson(`/me/episodes/contains${p.query(p.explode({ids:r}))}`,{...t}))}function Ad({limit:r,offset:t}={},o){return d.ok(d.fetchJson(`/me/shows${p.query(p.explode({limit:r,offset:t}))}`,{...o}))}function qd(r,t,o){return d.ok(d.fetchJson(`/me/shows${p.query(p.explode({ids:r}))}`,d.json({...o,method:"PUT",body:t})))}function Id(r,t,{market:o}={},s){return d.ok(d.fetchJson(`/me/shows${p.query(p.explode({ids:r,market:o}))}`,d.json({...s,method:"DELETE",body:t})))}function Bd(r,t){return d.ok(d.fetchJson(`/me/shows/contains${p.query(p.explode({ids:r}))}`,{...t}))}function $d(r,t){return d.ok(d.fetchJson(`/users/${encodeURIComponent(r)}`,{...t}))}function zd(r,{limit:t,offset:o}={},s){return d.ok(d.fetchJson(`/users/${encodeURIComponent(r)}/playlists${p.query(p.explode({limit:t,offset:o}))}`,{...s}))}function Dd(r,t,o){return d.ok(d.fetchJson(`/users/${encodeURIComponent(r)}/playlists`,d.json({...o,method:"POST",body:t})))}function Fd(r,t,o){return d.ok(d.fetchJson(`/playlists/${encodeURIComponent(r)}/followers`,d.json({...o,method:"PUT",body:t})))}function Ud(r,t){return d.ok(d.fetchJson(`/playlists/${encodeURIComponent(r)}/followers`,{...t,method:"DELETE"}))}function Ld({country:r,locale:t,timestamp:o,limit:s,offset:i}={},u){return d.ok(d.fetchJson(`/browse/featured-playlists${p.query(p.explode({country:r,locale:t,timestamp:o,limit:s,offset:i}))}`,{...u}))}function Md({country:r,locale:t,limit:o,offset:s}={},i){return d.ok(d.fetchJson(`/browse/categories${p.query(p.explode({country:r,locale:t,limit:o,offset:s}))}`,{...i}))}function Wd(r,{country:t,locale:o}={},s){return d.ok(d.fetchJson(`/browse/categories/${encodeURIComponent(r)}${p.query(p.explode({country:t,locale:o}))}`,{...s}))}function Qd(r,{country:t,limit:o,offset:s}={},i){return d.ok(d.fetchJson(`/browse/categories/${encodeURIComponent(r)}/playlists${p.query(p.explode({country:t,limit:o,offset:s}))}`,{...i}))}function Nd(r,t){return d.ok(d.fetchJson(`/playlists/${encodeURIComponent(r)}/images`,{...t}))}function Hd(r,t,o){return d.ok(d.fetchJson(`/playlists/${encodeURIComponent(r)}/images`,{...o,method:"PUT",body:t}))}function Gd({country:r,limit:t,offset:o}={},s){return d.ok(d.fetchJson(`/browse/new-releases${p.query(p.explode({country:r,limit:t,offset:o}))}`,{...s}))}function Jd(r,{after:t,limit:o}={},s){return d.ok(d.fetchJson(`/me/following${p.query(p.explode({type:r,after:t,limit:o}))}`,{...s}))}function Vd(r,t,o,s){return d.ok(d.fetchJson(`/me/following${p.query(p.explode({type:r,ids:t}))}`,d.json({...s,method:"PUT",body:o})))}function Yd(r,t,o,s){return d.ok(d.fetchJson(`/me/following${p.query(p.explode({type:r,ids:t}))}`,d.json({...s,method:"DELETE",body:o})))}function Kd(r,t,o){return d.ok(d.fetchJson(`/me/following/contains${p.query(p.explode({type:r,ids:t}))}`,{...o}))}function Xd(r,t,o){return d.ok(d.fetchJson(`/playlists/${encodeURIComponent(r)}/followers/contains${p.query(p.explode({ids:t}))}`,{...o}))}function Zd(r,t){return d.ok(d.fetchJson(`/audio-features${p.query(p.explode({ids:r}))}`,{...t}))}function ef(r,t){return d.ok(d.fetchJson(`/audio-features/${encodeURIComponent(r)}`,{...t}))}function tf(r,t){return d.ok(d.fetchJson(`/audio-analysis/${encodeURIComponent(r)}`,{...t}))}function rf({limit:r,market:t,seedArtists:o,seedGenres:s,seedTracks:i,minAcousticness:u,maxAcousticness:c,targetAcousticness:m,minDanceability:b,maxDanceability:h,targetDanceability:O,minDurationMs:E,maxDurationMs:w,targetDurationMs:_,minEnergy:S,maxEnergy:T,targetEnergy:x,minInstrumentalness:C,maxInstrumentalness:z,targetInstrumentalness:W,minKey:v,maxKey:D,targetKey:I,minLiveness:ne,maxLiveness:V,targetLiveness:ar,minLoudness:wt,maxLoudness:de,targetLoudness:Ce,minMode:Et,maxMode:ir,targetMode:yn,minPopularity:Rt,maxPopularity:Sn,targetPopularity:ur,minSpeechiness:lr,maxSpeechiness:cr,targetSpeechiness:jt,minTempo:Tt,maxTempo:dr,targetTempo:_n,minTimeSignature:On,maxTimeSignature:fe,targetTimeSignature:oe,minValence:wn,maxValence:fr,targetValence:pe}={},Pt){return d.ok(d.fetchJson(`/recommendations${p.query(p.explode({limit:r,market:t,seed_artists:o,seed_genres:s,seed_tracks:i,min_acousticness:u,max_acousticness:c,target_acousticness:m,min_danceability:b,max_danceability:h,target_danceability:O,min_duration_ms:E,max_duration_ms:w,target_duration_ms:_,min_energy:S,max_energy:T,target_energy:x,min_instrumentalness:C,max_instrumentalness:z,target_instrumentalness:W,min_key:v,max_key:D,target_key:I,min_liveness:ne,max_liveness:V,target_liveness:ar,min_loudness:wt,max_loudness:de,target_loudness:Ce,min_mode:Et,max_mode:ir,target_mode:yn,min_popularity:Rt,max_popularity:Sn,target_popularity:ur,min_speechiness:lr,max_speechiness:cr,target_speechiness:jt,min_tempo:Tt,max_tempo:dr,target_tempo:_n,min_time_signature:On,max_time_signature:fe,target_time_signature:oe,min_valence:wn,max_valence:fr,target_valence:pe}))}`,{...Pt}))}function nf(r){return d.ok(d.fetchJson("/recommendations/available-genre-seeds",{...r}))}function of({market:r,additionalTypes:t}={},o){return d.ok(d.fetchJson(`/me/player${p.query(p.explode({market:r,additional_types:t}))}`,{...o}))}function sf(r,t){return d.ok(d.fetchJson("/me/player",d.json({...t,method:"PUT",body:r})))}function af(r){return d.ok(d.fetchJson("/me/player/devices",{...r}))}function uf({market:r,additionalTypes:t}={},o){return d.ok(d.fetchJson(`/me/player/currently-playing${p.query(p.explode({market:r,additional_types:t}))}`,{...o}))}function lf(r,{deviceId:t}={},o){return d.ok(d.fetchJson(`/me/player/play${p.query(p.explode({device_id:t}))}`,d.json({...o,method:"PUT",body:r})))}function cf({deviceId:r}={},t){return d.ok(d.fetchJson(`/me/player/pause${p.query(p.explode({device_id:r}))}`,{...t,method:"PUT"}))}function df({deviceId:r}={},t){return d.ok(d.fetchJson(`/me/player/next${p.query(p.explode({device_id:r}))}`,{...t,method:"POST"}))}function ff({deviceId:r}={},t){return d.ok(d.fetchJson(`/me/player/previous${p.query(p.explode({device_id:r}))}`,{...t,method:"POST"}))}function pf(r,{deviceId:t}={},o){return d.ok(d.fetchJson(`/me/player/seek${p.query(p.explode({position_ms:r,device_id:t}))}`,{...o,method:"PUT"}))}function mf(r,{deviceId:t}={},o){return d.ok(d.fetchJson(`/me/player/repeat${p.query(p.explode({state:r,device_id:t}))}`,{...o,method:"PUT"}))}function bf(r,{deviceId:t}={},o){return d.ok(d.fetchJson(`/me/player/volume${p.query(p.explode({volume_percent:r,device_id:t}))}`,{...o,method:"PUT"}))}function hf(r,{deviceId:t}={},o){return d.ok(d.fetchJson(`/me/player/shuffle${p.query(p.explode({state:r,device_id:t}))}`,{...o,method:"PUT"}))}function gf({limit:r,after:t,before:o}={},s){return d.ok(d.fetchJson(`/me/player/recently-played${p.query(p.explode({limit:r,after:t,before:o}))}`,{...s}))}function yf(r){return d.ok(d.fetchJson("/me/player/queue",{...r}))}function Sf(r,{deviceId:t}={},o){return d.ok(d.fetchJson(`/me/player/queue${p.query(p.explode({uri:r,device_id:t}))}`,{...o,method:"POST"}))}function _f(r){return d.ok(d.fetchJson("/markets",{...r}))}function Of({timeRange:r,limit:t,offset:o}={},s){return d.ok(d.fetchJson(`/me/top/artists${p.query(p.explode({time_range:r,limit:t,offset:o}))}`,{...s}))}function wf({timeRange:r,limit:t,offset:o}={},s){return d.ok(d.fetchJson(`/me/top/tracks${p.query(p.explode({time_range:r,limit:t,offset:o}))}`,{...s}))}var Bb=require("react/jsx-runtime"),bo;function pt(){if(!bo)throw new Error("getSpotifyClient must be used when authenticated");return{spotifyClient:bo}}async function Ia(){let r=await lo();Zt.headers={Authorization:`Bearer ${r}`},Zt.fetch=Ve,bo=mo}var Ba=ae(po());function ke(r){if(console.log("--- start getErrorMessage ---"),console.log("error",r),console.log("--- end getErrorMessage ---"),r instanceof Ba.HttpError)try{return JSON.parse(r.data).error.message}catch{return typeof r.data=="string"?r.data:r.data.error.message}return String(r)}async function $a(){let{spotifyClient:r}=pt();try{let t=await r.getMePlayerCurrentlyPlaying({additionalTypes:"episode"});return t?{...t,item:t.item}:void 0}catch(t){let o=ke(t);throw console.log("getCurrentlyPlaying.ts Error:",o),new Error(o)}}var Eu=require("@raycast/api");var _u=ae(require("node:process"),1),Ou=ae(Su(),1);async function wu(r,{humanReadableOutput:t=!0}={}){if(_u.default.platform!=="darwin")throw new Error("macOS only");let o=t?[]:["-ss"],{stdout:s}=await(0,Ou.default)("osascript",["-e",r,o]);return s}function Ru(r){return`
    tell application "Spotify"
      if not application "Spotify" is running then
        activate

        set _maxOpenWaitTimeInSeconds to 5
        set _openCounter to 1
        repeat until application "Spotify" is running
          delay 1
          set _openCounter to _openCounter + 1
          if _openCounter > _maxOpenWaitTimeInSeconds then exit repeat
        end repeat
      end if
      ${r}
    end tell`}async function ju(r){await(0,Eu.closeMainWindow)(),await wu(r)}async function Tu({trackIds:r,artistIds:t}){let{spotifyClient:o}=pt();try{return await o.getRecommendations({seedTracks:r.join(),seedArtists:t?.join()})}catch(s){let i=ke(s);throw console.log("getRecommendations.ts Error:",i),new Error(i)}}async function Pu({trackIds:r=[],artistIds:t=[]}={}){let{spotifyClient:o}=pt();try{let i=(await Tu({trackIds:r,artistIds:t}))?.tracks;if(i)try{await o.putMePlayerPlay({uris:i.flatMap(u=>u.uri)})}catch(u){if(ke(u)?.toLocaleLowerCase().includes("no active device")){let m=Ru(`tell application "Spotify"
          launch
          delay 3
          play track "${i[0].uri}"
  end tell`);await ju(m)}}}catch(s){let i=ke(s);throw console.log("startRadio.ts Error:",i),new Error(i)}}async function xu(){await Ia();let r=await $a(),t=!r||!r?.item,o=r?.currently_playing_type!=="episode",s=r?.item?.id;if(t)return await(0,sr.showHUD)("Nothing is currently playing");if(!o&&!s)return await(0,sr.showHUD)("Radio based on episodes isn't available yet");try{await Pu({trackIds:s?[s]:void 0}),await(0,sr.showHUD)("Playing Radio")}catch(i){let u=ke(i);await(0,sr.showHUD)(u)}}0&&(module.exports={});
/*! fetch-blob. MIT License. Jimmy Wärting <https://jimmy.warting.se/opensource> */
/*! formdata-polyfill. MIT License. Jimmy Wärting <https://jimmy.warting.se/opensource> */
/*! node-domexception. MIT License. Jimmy Wärting <https://jimmy.warting.se/opensource> */
