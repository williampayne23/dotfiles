"use strict";var Vl=Object.create;var Jr=Object.defineProperty;var Yl=Object.getOwnPropertyDescriptor;var Kl=Object.getOwnPropertyNames;var Xl=Object.getPrototypeOf,Zl=Object.prototype.hasOwnProperty;var Ht=(r,t)=>()=>(r&&(t=r(r=0)),t);var P=(r,t)=>()=>(t||r((t={exports:{}}).exports,t),t.exports),Xn=(r,t)=>{for(var o in t)Jr(r,o,{get:t[o],enumerable:!0})},Vs=(r,t,o,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of Kl(t))!Zl.call(r,i)&&i!==o&&Jr(r,i,{get:()=>t[i],enumerable:!(s=Yl(t,i))||s.enumerable});return r};var ae=(r,t,o)=>(o=r!=null?Vl(Xl(r)):{},Vs(t||!r||!r.__esModule?Jr(o,"default",{value:r,enumerable:!0}):o,r)),ec=r=>Vs(Jr({},"__esModule",{value:!0}),r);var Zn=P(H=>{"use strict";var Ys=H&&H.__awaiter||function(r,t,o,s){function i(u){return u instanceof o?u:new o(function(c){c(u)})}return new(o||(o=Promise))(function(u,c){function m(O){try{h(s.next(O))}catch(E){c(E)}}function b(O){try{h(s.throw(O))}catch(E){c(E)}}function h(O){O.done?u(O.value):i(O.value).then(m,b)}h((s=s.apply(r,t||[])).next())})};Object.defineProperty(H,"__esModule",{value:!0});H.HttpError=H.optimistic=H.okify=H.ok=H.SUCCESS_CODES=H.handle=void 0;function tc(r,t){return Ys(this,void 0,void 0,function*(){let{status:o,data:s,headers:i}=yield r,u=t[o];if(u)return u(s);if(t.default)return t.default(o,s);throw new Gt(o,s,i)})}H.handle=tc;H.SUCCESS_CODES=[200,201,202,204];function Ks(r){return Ys(this,void 0,void 0,function*(){let t=yield r;if(H.SUCCESS_CODES.some(o=>o==t.status))return t.data;throw new Gt(t.status,t.data,t.headers)})}H.ok=Ks;function Xs(r){return(...t)=>Ks(r(...t))}H.okify=Xs;function rc(r){let t={};return Object.entries(r).forEach(([o,s])=>{t[o]=typeof s=="function"?Xs(s):s}),t}H.optimistic=rc;var Gt=class extends Error{constructor(t,o,s){super(`Error: ${t}`),this.status=t,this.data=o,this.headers=s}};H.HttpError=Gt});var ta=P((Vr,ea)=>{(function(r,t){typeof Vr=="object"&&typeof ea<"u"?t(Vr):typeof define=="function"&&define.amd?define(["exports"],t):(r=typeof globalThis<"u"?globalThis:r||self,t(r.WebStreamsPolyfill={}))})(Vr,function(r){"use strict";let t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol:e=>`Symbol(${e})`;function o(){}function s(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global}let i=s();function u(e){return typeof e=="object"&&e!==null||typeof e=="function"}let c=o,m=Promise,b=Promise.prototype.then,h=Promise.resolve.bind(m),O=Promise.reject.bind(m);function E(e){return new m(e)}function w(e){return h(e)}function _(e){return O(e)}function S(e,n,a){return b.call(e,n,a)}function T(e,n,a){S(S(e,n,a),void 0,c)}function x(e,n){T(e,n)}function C(e,n){T(e,void 0,n)}function z(e,n,a){return S(e,n,a)}function W(e){S(e,void 0,c)}let v=(()=>{let e=i&&i.queueMicrotask;if(typeof e=="function")return e;let n=w(void 0);return a=>S(n,a)})();function D(e,n,a){if(typeof e!="function")throw new TypeError("Argument is not a function");return Function.prototype.apply.call(e,n,a)}function I(e,n,a){try{return w(D(e,n,a))}catch(l){return _(l)}}let ne=16384;class V{constructor(){this._cursor=0,this._size=0,this._front={_elements:[],_next:void 0},this._back=this._front,this._cursor=0,this._size=0}get length(){return this._size}push(n){let a=this._back,l=a;a._elements.length===ne-1&&(l={_elements:[],_next:void 0}),a._elements.push(n),l!==a&&(this._back=l,a._next=l),++this._size}shift(){let n=this._front,a=n,l=this._cursor,f=l+1,y=n._elements,g=y[l];return f===ne&&(a=n._next,f=0),--this._size,this._cursor=f,n!==a&&(this._front=a),y[l]=void 0,g}forEach(n){let a=this._cursor,l=this._front,f=l._elements;for(;(a!==f.length||l._next!==void 0)&&!(a===f.length&&(l=l._next,f=l._elements,a=0,f.length===0));)n(f[a]),++a}peek(){let n=this._front,a=this._cursor;return n._elements[a]}}function lr(e,n){e._ownerReadableStream=n,n._reader=e,n._state==="readable"?Tt(e):n._state==="closed"?On(e):cr(e,n._storedError)}function jt(e,n){let a=e._ownerReadableStream;return be(a,n)}function de(e){e._ownerReadableStream._state==="readable"?Pt(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):wn(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")),e._ownerReadableStream._reader=void 0,e._ownerReadableStream=void 0}function ke(e){return new TypeError("Cannot "+e+" a stream using a released reader")}function Tt(e){e._closedPromise=E((n,a)=>{e._closedPromise_resolve=n,e._closedPromise_reject=a})}function cr(e,n){Tt(e),Pt(e,n)}function On(e){Tt(e),dr(e)}function Pt(e,n){e._closedPromise_reject!==void 0&&(W(e._closedPromise),e._closedPromise_reject(n),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}function wn(e,n){cr(e,n)}function dr(e){e._closedPromise_resolve!==void 0&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}let fr=t("[[AbortSteps]]"),pr=t("[[ErrorSteps]]"),xt=t("[[CancelSteps]]"),kt=t("[[PullSteps]]"),mr=Number.isFinite||function(e){return typeof e=="number"&&isFinite(e)},En=Math.trunc||function(e){return e<0?Math.ceil(e):Math.floor(e)};function Rn(e){return typeof e=="object"||typeof e=="function"}function fe(e,n){if(e!==void 0&&!Rn(e))throw new TypeError(`${n} is not an object.`)}function oe(e,n){if(typeof e!="function")throw new TypeError(`${n} is not a function.`)}function jn(e){return typeof e=="object"&&e!==null||typeof e=="function"}function br(e,n){if(!jn(e))throw new TypeError(`${n} is not an object.`)}function pe(e,n,a){if(e===void 0)throw new TypeError(`Parameter ${n} is required in '${a}'.`)}function Ct(e,n,a){if(e===void 0)throw new TypeError(`${n} is required in '${a}'.`)}function Tn(e){return Number(e)}function Uo(e){return e===0?0:e}function ku(e){return Uo(En(e))}function Mo(e,n){let l=Number.MAX_SAFE_INTEGER,f=Number(e);if(f=Uo(f),!mr(f))throw new TypeError(`${n} is not a finite number`);if(f=ku(f),f<0||f>l)throw new TypeError(`${n} is outside the accepted range of ${0} to ${l}, inclusive`);return!mr(f)||f===0?0:f}function Pn(e,n){if(!Ie(e))throw new TypeError(`${n} is not a ReadableStream.`)}function Xe(e){return new vt(e)}function Wo(e,n){e._reader._readRequests.push(n)}function xn(e,n,a){let f=e._reader._readRequests.shift();a?f._closeSteps():f._chunkSteps(n)}function hr(e){return e._reader._readRequests.length}function Qo(e){let n=e._reader;return!(n===void 0||!Ce(n))}class vt{constructor(n){if(pe(n,1,"ReadableStreamDefaultReader"),Pn(n,"First parameter"),Be(n))throw new TypeError("This stream has already been locked for exclusive reading by another reader");lr(this,n),this._readRequests=new V}get closed(){return Ce(this)?this._closedPromise:_(yr("closed"))}cancel(n=void 0){return Ce(this)?this._ownerReadableStream===void 0?_(ke("cancel")):jt(this,n):_(yr("cancel"))}read(){if(!Ce(this))return _(yr("read"));if(this._ownerReadableStream===void 0)return _(ke("read from"));let n,a,l=E((y,g)=>{n=y,a=g});return At(this,{_chunkSteps:y=>n({value:y,done:!1}),_closeSteps:()=>n({value:void 0,done:!0}),_errorSteps:y=>a(y)}),l}releaseLock(){if(!Ce(this))throw yr("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");de(this)}}}Object.defineProperties(vt.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(vt.prototype,t.toStringTag,{value:"ReadableStreamDefaultReader",configurable:!0});function Ce(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_readRequests")?!1:e instanceof vt}function At(e,n){let a=e._ownerReadableStream;a._disturbed=!0,a._state==="closed"?n._closeSteps():a._state==="errored"?n._errorSteps(a._storedError):a._readableStreamController[kt](n)}function yr(e){return new TypeError(`ReadableStreamDefaultReader.prototype.${e} can only be used on a ReadableStreamDefaultReader`)}let No=Object.getPrototypeOf(Object.getPrototypeOf(async function*(){}).prototype);class Ho{constructor(n,a){this._ongoingPromise=void 0,this._isFinished=!1,this._reader=n,this._preventCancel=a}next(){let n=()=>this._nextSteps();return this._ongoingPromise=this._ongoingPromise?z(this._ongoingPromise,n,n):n(),this._ongoingPromise}return(n){let a=()=>this._returnSteps(n);return this._ongoingPromise?z(this._ongoingPromise,a,a):a()}_nextSteps(){if(this._isFinished)return Promise.resolve({value:void 0,done:!0});let n=this._reader;if(n._ownerReadableStream===void 0)return _(ke("iterate"));let a,l,f=E((g,R)=>{a=g,l=R});return At(n,{_chunkSteps:g=>{this._ongoingPromise=void 0,v(()=>a({value:g,done:!1}))},_closeSteps:()=>{this._ongoingPromise=void 0,this._isFinished=!0,de(n),a({value:void 0,done:!0})},_errorSteps:g=>{this._ongoingPromise=void 0,this._isFinished=!0,de(n),l(g)}}),f}_returnSteps(n){if(this._isFinished)return Promise.resolve({value:n,done:!0});this._isFinished=!0;let a=this._reader;if(a._ownerReadableStream===void 0)return _(ke("finish iterating"));if(!this._preventCancel){let l=jt(a,n);return de(a),z(l,()=>({value:n,done:!0}))}return de(a),w({value:n,done:!0})}}let Go={next(){return Jo(this)?this._asyncIteratorImpl.next():_(Vo("next"))},return(e){return Jo(this)?this._asyncIteratorImpl.return(e):_(Vo("return"))}};No!==void 0&&Object.setPrototypeOf(Go,No);function Cu(e,n){let a=Xe(e),l=new Ho(a,n),f=Object.create(Go);return f._asyncIteratorImpl=l,f}function Jo(e){if(!u(e)||!Object.prototype.hasOwnProperty.call(e,"_asyncIteratorImpl"))return!1;try{return e._asyncIteratorImpl instanceof Ho}catch{return!1}}function Vo(e){return new TypeError(`ReadableStreamAsyncIterator.${e} can only be used on a ReadableSteamAsyncIterator`)}let Yo=Number.isNaN||function(e){return e!==e};function qt(e){return e.slice()}function Ko(e,n,a,l,f){new Uint8Array(e).set(new Uint8Array(a,l,f),n)}function gm(e){return e}function gr(e){return!1}function Xo(e,n,a){if(e.slice)return e.slice(n,a);let l=a-n,f=new ArrayBuffer(l);return Ko(f,0,e,n,l),f}function vu(e){return!(typeof e!="number"||Yo(e)||e<0)}function Zo(e){let n=Xo(e.buffer,e.byteOffset,e.byteOffset+e.byteLength);return new Uint8Array(n)}function kn(e){let n=e._queue.shift();return e._queueTotalSize-=n.size,e._queueTotalSize<0&&(e._queueTotalSize=0),n.value}function Cn(e,n,a){if(!vu(a)||a===1/0)throw new RangeError("Size must be a finite, non-NaN, non-negative number.");e._queue.push({value:n,size:a}),e._queueTotalSize+=a}function Au(e){return e._queue.peek().value}function ve(e){e._queue=new V,e._queueTotalSize=0}class It{constructor(){throw new TypeError("Illegal constructor")}get view(){if(!vn(this))throw Bn("view");return this._view}respond(n){if(!vn(this))throw Bn("respond");if(pe(n,1,"respond"),n=Mo(n,"First parameter"),this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");gr(this._view.buffer),Er(this._associatedReadableByteStreamController,n)}respondWithNewView(n){if(!vn(this))throw Bn("respondWithNewView");if(pe(n,1,"respondWithNewView"),!ArrayBuffer.isView(n))throw new TypeError("You can only respond with array buffer views");if(this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");gr(n.buffer),Rr(this._associatedReadableByteStreamController,n)}}Object.defineProperties(It.prototype,{respond:{enumerable:!0},respondWithNewView:{enumerable:!0},view:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(It.prototype,t.toStringTag,{value:"ReadableStreamBYOBRequest",configurable:!0});class Ze{constructor(){throw new TypeError("Illegal constructor")}get byobRequest(){if(!De(this))throw $t("byobRequest");return In(this)}get desiredSize(){if(!De(this))throw $t("desiredSize");return is(this)}close(){if(!De(this))throw $t("close");if(this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");let n=this._controlledReadableByteStream._state;if(n!=="readable")throw new TypeError(`The stream (in ${n} state) is not in the readable state and cannot be closed`);Bt(this)}enqueue(n){if(!De(this))throw $t("enqueue");if(pe(n,1,"enqueue"),!ArrayBuffer.isView(n))throw new TypeError("chunk must be an array buffer view");if(n.byteLength===0)throw new TypeError("chunk must have non-zero byteLength");if(n.buffer.byteLength===0)throw new TypeError("chunk's buffer must have non-zero byteLength");if(this._closeRequested)throw new TypeError("stream is closed or draining");let a=this._controlledReadableByteStream._state;if(a!=="readable")throw new TypeError(`The stream (in ${a} state) is not in the readable state and cannot be enqueued to`);wr(this,n)}error(n=void 0){if(!De(this))throw $t("error");me(this,n)}[xt](n){es(this),ve(this);let a=this._cancelAlgorithm(n);return Or(this),a}[kt](n){let a=this._controlledReadableByteStream;if(this._queueTotalSize>0){let f=this._queue.shift();this._queueTotalSize-=f.byteLength,os(this);let y=new Uint8Array(f.buffer,f.byteOffset,f.byteLength);n._chunkSteps(y);return}let l=this._autoAllocateChunkSize;if(l!==void 0){let f;try{f=new ArrayBuffer(l)}catch(g){n._errorSteps(g);return}let y={buffer:f,bufferByteLength:l,byteOffset:0,byteLength:l,bytesFilled:0,elementSize:1,viewConstructor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(y)}Wo(a,n),Fe(this)}}Object.defineProperties(Ze.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},byobRequest:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Ze.prototype,t.toStringTag,{value:"ReadableByteStreamController",configurable:!0});function De(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledReadableByteStream")?!1:e instanceof Ze}function vn(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_associatedReadableByteStreamController")?!1:e instanceof It}function Fe(e){if(!$u(e))return;if(e._pulling){e._pullAgain=!0;return}e._pulling=!0;let a=e._pullAlgorithm();T(a,()=>{e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,Fe(e))},l=>{me(e,l)})}function es(e){qn(e),e._pendingPullIntos=new V}function An(e,n){let a=!1;e._state==="closed"&&(a=!0);let l=ts(n);n.readerType==="default"?xn(e,l,a):Fu(e,l,a)}function ts(e){let n=e.bytesFilled,a=e.elementSize;return new e.viewConstructor(e.buffer,e.byteOffset,n/a)}function Sr(e,n,a,l){e._queue.push({buffer:n,byteOffset:a,byteLength:l}),e._queueTotalSize+=l}function rs(e,n){let a=n.elementSize,l=n.bytesFilled-n.bytesFilled%a,f=Math.min(e._queueTotalSize,n.byteLength-n.bytesFilled),y=n.bytesFilled+f,g=y-y%a,R=f,k=!1;g>l&&(R=g-n.bytesFilled,k=!0);let q=e._queue;for(;R>0;){let B=q.peek(),$=Math.min(R,B.byteLength),M=n.byteOffset+n.bytesFilled;Ko(n.buffer,M,B.buffer,B.byteOffset,$),B.byteLength===$?q.shift():(B.byteOffset+=$,B.byteLength-=$),e._queueTotalSize-=$,ns(e,$,n),R-=$}return k}function ns(e,n,a){a.bytesFilled+=n}function os(e){e._queueTotalSize===0&&e._closeRequested?(Or(e),Qt(e._controlledReadableByteStream)):Fe(e)}function qn(e){e._byobRequest!==null&&(e._byobRequest._associatedReadableByteStreamController=void 0,e._byobRequest._view=null,e._byobRequest=null)}function ss(e){for(;e._pendingPullIntos.length>0;){if(e._queueTotalSize===0)return;let n=e._pendingPullIntos.peek();rs(e,n)&&(_r(e),An(e._controlledReadableByteStream,n))}}function qu(e,n,a){let l=e._controlledReadableByteStream,f=1;n.constructor!==DataView&&(f=n.constructor.BYTES_PER_ELEMENT);let y=n.constructor,g=n.buffer,R={buffer:g,bufferByteLength:g.byteLength,byteOffset:n.byteOffset,byteLength:n.byteLength,bytesFilled:0,elementSize:f,viewConstructor:y,readerType:"byob"};if(e._pendingPullIntos.length>0){e._pendingPullIntos.push(R),cs(l,a);return}if(l._state==="closed"){let k=new y(R.buffer,R.byteOffset,0);a._closeSteps(k);return}if(e._queueTotalSize>0){if(rs(e,R)){let k=ts(R);os(e),a._chunkSteps(k);return}if(e._closeRequested){let k=new TypeError("Insufficient bytes to fill elements in the given buffer");me(e,k),a._errorSteps(k);return}}e._pendingPullIntos.push(R),cs(l,a),Fe(e)}function Iu(e,n){let a=e._controlledReadableByteStream;if($n(a))for(;ds(a)>0;){let l=_r(e);An(a,l)}}function Bu(e,n,a){if(ns(e,n,a),a.bytesFilled<a.elementSize)return;_r(e);let l=a.bytesFilled%a.elementSize;if(l>0){let f=a.byteOffset+a.bytesFilled,y=Xo(a.buffer,f-l,f);Sr(e,y,0,y.byteLength)}a.bytesFilled-=l,An(e._controlledReadableByteStream,a),ss(e)}function as(e,n){let a=e._pendingPullIntos.peek();qn(e),e._controlledReadableByteStream._state==="closed"?Iu(e):Bu(e,n,a),Fe(e)}function _r(e){return e._pendingPullIntos.shift()}function $u(e){let n=e._controlledReadableByteStream;return n._state!=="readable"||e._closeRequested||!e._started?!1:!!(Qo(n)&&hr(n)>0||$n(n)&&ds(n)>0||is(e)>0)}function Or(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0}function Bt(e){let n=e._controlledReadableByteStream;if(!(e._closeRequested||n._state!=="readable")){if(e._queueTotalSize>0){e._closeRequested=!0;return}if(e._pendingPullIntos.length>0&&e._pendingPullIntos.peek().bytesFilled>0){let l=new TypeError("Insufficient bytes to fill elements in the given buffer");throw me(e,l),l}Or(e),Qt(n)}}function wr(e,n){let a=e._controlledReadableByteStream;if(e._closeRequested||a._state!=="readable")return;let l=n.buffer,f=n.byteOffset,y=n.byteLength,g=l;if(e._pendingPullIntos.length>0){let R=e._pendingPullIntos.peek();gr(R.buffer),R.buffer=R.buffer}if(qn(e),Qo(a))if(hr(a)===0)Sr(e,g,f,y);else{e._pendingPullIntos.length>0&&_r(e);let R=new Uint8Array(g,f,y);xn(a,R,!1)}else $n(a)?(Sr(e,g,f,y),ss(e)):Sr(e,g,f,y);Fe(e)}function me(e,n){let a=e._controlledReadableByteStream;a._state==="readable"&&(es(e),ve(e),Or(e),Bs(a,n))}function In(e){if(e._byobRequest===null&&e._pendingPullIntos.length>0){let n=e._pendingPullIntos.peek(),a=new Uint8Array(n.buffer,n.byteOffset+n.bytesFilled,n.byteLength-n.bytesFilled),l=Object.create(It.prototype);Du(l,e,a),e._byobRequest=l}return e._byobRequest}function is(e){let n=e._controlledReadableByteStream._state;return n==="errored"?null:n==="closed"?0:e._strategyHWM-e._queueTotalSize}function Er(e,n){let a=e._pendingPullIntos.peek();if(e._controlledReadableByteStream._state==="closed"){if(n!==0)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream")}else{if(n===0)throw new TypeError("bytesWritten must be greater than 0 when calling respond() on a readable stream");if(a.bytesFilled+n>a.byteLength)throw new RangeError("bytesWritten out of range")}a.buffer=a.buffer,as(e,n)}function Rr(e,n){let a=e._pendingPullIntos.peek();if(e._controlledReadableByteStream._state==="closed"){if(n.byteLength!==0)throw new TypeError("The view's length must be 0 when calling respondWithNewView() on a closed stream")}else if(n.byteLength===0)throw new TypeError("The view's length must be greater than 0 when calling respondWithNewView() on a readable stream");if(a.byteOffset+a.bytesFilled!==n.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(a.bufferByteLength!==n.buffer.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");if(a.bytesFilled+n.byteLength>a.byteLength)throw new RangeError("The region specified by view is larger than byobRequest");let f=n.byteLength;a.buffer=n.buffer,as(e,f)}function us(e,n,a,l,f,y,g){n._controlledReadableByteStream=e,n._pullAgain=!1,n._pulling=!1,n._byobRequest=null,n._queue=n._queueTotalSize=void 0,ve(n),n._closeRequested=!1,n._started=!1,n._strategyHWM=y,n._pullAlgorithm=l,n._cancelAlgorithm=f,n._autoAllocateChunkSize=g,n._pendingPullIntos=new V,e._readableStreamController=n;let R=a();T(w(R),()=>{n._started=!0,Fe(n)},k=>{me(n,k)})}function zu(e,n,a){let l=Object.create(Ze.prototype),f=()=>{},y=()=>w(void 0),g=()=>w(void 0);n.start!==void 0&&(f=()=>n.start(l)),n.pull!==void 0&&(y=()=>n.pull(l)),n.cancel!==void 0&&(g=k=>n.cancel(k));let R=n.autoAllocateChunkSize;if(R===0)throw new TypeError("autoAllocateChunkSize must be greater than 0");us(e,l,f,y,g,a,R)}function Du(e,n,a){e._associatedReadableByteStreamController=n,e._view=a}function Bn(e){return new TypeError(`ReadableStreamBYOBRequest.prototype.${e} can only be used on a ReadableStreamBYOBRequest`)}function $t(e){return new TypeError(`ReadableByteStreamController.prototype.${e} can only be used on a ReadableByteStreamController`)}function ls(e){return new zt(e)}function cs(e,n){e._reader._readIntoRequests.push(n)}function Fu(e,n,a){let f=e._reader._readIntoRequests.shift();a?f._closeSteps(n):f._chunkSteps(n)}function ds(e){return e._reader._readIntoRequests.length}function $n(e){let n=e._reader;return!(n===void 0||!Le(n))}class zt{constructor(n){if(pe(n,1,"ReadableStreamBYOBReader"),Pn(n,"First parameter"),Be(n))throw new TypeError("This stream has already been locked for exclusive reading by another reader");if(!De(n._readableStreamController))throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");lr(this,n),this._readIntoRequests=new V}get closed(){return Le(this)?this._closedPromise:_(jr("closed"))}cancel(n=void 0){return Le(this)?this._ownerReadableStream===void 0?_(ke("cancel")):jt(this,n):_(jr("cancel"))}read(n){if(!Le(this))return _(jr("read"));if(!ArrayBuffer.isView(n))return _(new TypeError("view must be an array buffer view"));if(n.byteLength===0)return _(new TypeError("view must have non-zero byteLength"));if(n.buffer.byteLength===0)return _(new TypeError("view's buffer must have non-zero byteLength"));if(gr(n.buffer),this._ownerReadableStream===void 0)return _(ke("read from"));let a,l,f=E((g,R)=>{a=g,l=R});return fs(this,n,{_chunkSteps:g=>a({value:g,done:!1}),_closeSteps:g=>a({value:g,done:!0}),_errorSteps:g=>l(g)}),f}releaseLock(){if(!Le(this))throw jr("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readIntoRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");de(this)}}}Object.defineProperties(zt.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(zt.prototype,t.toStringTag,{value:"ReadableStreamBYOBReader",configurable:!0});function Le(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_readIntoRequests")?!1:e instanceof zt}function fs(e,n,a){let l=e._ownerReadableStream;l._disturbed=!0,l._state==="errored"?a._errorSteps(l._storedError):qu(l._readableStreamController,n,a)}function jr(e){return new TypeError(`ReadableStreamBYOBReader.prototype.${e} can only be used on a ReadableStreamBYOBReader`)}function Dt(e,n){let{highWaterMark:a}=e;if(a===void 0)return n;if(Yo(a)||a<0)throw new RangeError("Invalid highWaterMark");return a}function Tr(e){let{size:n}=e;return n||(()=>1)}function Pr(e,n){fe(e,n);let a=e?.highWaterMark,l=e?.size;return{highWaterMark:a===void 0?void 0:Tn(a),size:l===void 0?void 0:Lu(l,`${n} has member 'size' that`)}}function Lu(e,n){return oe(e,n),a=>Tn(e(a))}function Uu(e,n){fe(e,n);let a=e?.abort,l=e?.close,f=e?.start,y=e?.type,g=e?.write;return{abort:a===void 0?void 0:Mu(a,e,`${n} has member 'abort' that`),close:l===void 0?void 0:Wu(l,e,`${n} has member 'close' that`),start:f===void 0?void 0:Qu(f,e,`${n} has member 'start' that`),write:g===void 0?void 0:Nu(g,e,`${n} has member 'write' that`),type:y}}function Mu(e,n,a){return oe(e,a),l=>I(e,n,[l])}function Wu(e,n,a){return oe(e,a),()=>I(e,n,[])}function Qu(e,n,a){return oe(e,a),l=>D(e,n,[l])}function Nu(e,n,a){return oe(e,a),(l,f)=>I(e,n,[l,f])}function ps(e,n){if(!et(e))throw new TypeError(`${n} is not a WritableStream.`)}function Hu(e){if(typeof e!="object"||e===null)return!1;try{return typeof e.aborted=="boolean"}catch{return!1}}let Gu=typeof AbortController=="function";function Ju(){if(Gu)return new AbortController}class Ft{constructor(n={},a={}){n===void 0?n=null:br(n,"First parameter");let l=Pr(a,"Second parameter"),f=Uu(n,"First parameter");if(bs(this),f.type!==void 0)throw new RangeError("Invalid type is specified");let g=Tr(l),R=Dt(l,1);ul(this,f,R,g)}get locked(){if(!et(this))throw Ar("locked");return tt(this)}abort(n=void 0){return et(this)?tt(this)?_(new TypeError("Cannot abort a stream that already has a writer")):xr(this,n):_(Ar("abort"))}close(){return et(this)?tt(this)?_(new TypeError("Cannot close a stream that already has a writer")):ge(this)?_(new TypeError("Cannot close an already-closing stream")):hs(this):_(Ar("close"))}getWriter(){if(!et(this))throw Ar("getWriter");return ms(this)}}Object.defineProperties(Ft.prototype,{abort:{enumerable:!0},close:{enumerable:!0},getWriter:{enumerable:!0},locked:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Ft.prototype,t.toStringTag,{value:"WritableStream",configurable:!0});function ms(e){return new Lt(e)}function Vu(e,n,a,l,f=1,y=()=>1){let g=Object.create(Ft.prototype);bs(g);let R=Object.create(rt.prototype);return ws(g,R,e,n,a,l,f,y),g}function bs(e){e._state="writable",e._storedError=void 0,e._writer=void 0,e._writableStreamController=void 0,e._writeRequests=new V,e._inFlightWriteRequest=void 0,e._closeRequest=void 0,e._inFlightCloseRequest=void 0,e._pendingAbortRequest=void 0,e._backpressure=!1}function et(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_writableStreamController")?!1:e instanceof Ft}function tt(e){return e._writer!==void 0}function xr(e,n){var a;if(e._state==="closed"||e._state==="errored")return w(void 0);e._writableStreamController._abortReason=n,(a=e._writableStreamController._abortController)===null||a===void 0||a.abort();let l=e._state;if(l==="closed"||l==="errored")return w(void 0);if(e._pendingAbortRequest!==void 0)return e._pendingAbortRequest._promise;let f=!1;l==="erroring"&&(f=!0,n=void 0);let y=E((g,R)=>{e._pendingAbortRequest={_promise:void 0,_resolve:g,_reject:R,_reason:n,_wasAlreadyErroring:f}});return e._pendingAbortRequest._promise=y,f||Dn(e,n),y}function hs(e){let n=e._state;if(n==="closed"||n==="errored")return _(new TypeError(`The stream (in ${n} state) is not in the writable state and cannot be closed`));let a=E((f,y)=>{let g={_resolve:f,_reject:y};e._closeRequest=g}),l=e._writer;return l!==void 0&&e._backpressure&&n==="writable"&&Gn(l),ll(e._writableStreamController),a}function Yu(e){return E((a,l)=>{let f={_resolve:a,_reject:l};e._writeRequests.push(f)})}function zn(e,n){if(e._state==="writable"){Dn(e,n);return}Fn(e)}function Dn(e,n){let a=e._writableStreamController;e._state="erroring",e._storedError=n;let l=e._writer;l!==void 0&&gs(l,n),!tl(e)&&a._started&&Fn(e)}function Fn(e){e._state="errored",e._writableStreamController[pr]();let n=e._storedError;if(e._writeRequests.forEach(f=>{f._reject(n)}),e._writeRequests=new V,e._pendingAbortRequest===void 0){kr(e);return}let a=e._pendingAbortRequest;if(e._pendingAbortRequest=void 0,a._wasAlreadyErroring){a._reject(n),kr(e);return}let l=e._writableStreamController[fr](a._reason);T(l,()=>{a._resolve(),kr(e)},f=>{a._reject(f),kr(e)})}function Ku(e){e._inFlightWriteRequest._resolve(void 0),e._inFlightWriteRequest=void 0}function Xu(e,n){e._inFlightWriteRequest._reject(n),e._inFlightWriteRequest=void 0,zn(e,n)}function Zu(e){e._inFlightCloseRequest._resolve(void 0),e._inFlightCloseRequest=void 0,e._state==="erroring"&&(e._storedError=void 0,e._pendingAbortRequest!==void 0&&(e._pendingAbortRequest._resolve(),e._pendingAbortRequest=void 0)),e._state="closed";let a=e._writer;a!==void 0&&Ts(a)}function el(e,n){e._inFlightCloseRequest._reject(n),e._inFlightCloseRequest=void 0,e._pendingAbortRequest!==void 0&&(e._pendingAbortRequest._reject(n),e._pendingAbortRequest=void 0),zn(e,n)}function ge(e){return!(e._closeRequest===void 0&&e._inFlightCloseRequest===void 0)}function tl(e){return!(e._inFlightWriteRequest===void 0&&e._inFlightCloseRequest===void 0)}function rl(e){e._inFlightCloseRequest=e._closeRequest,e._closeRequest=void 0}function nl(e){e._inFlightWriteRequest=e._writeRequests.shift()}function kr(e){e._closeRequest!==void 0&&(e._closeRequest._reject(e._storedError),e._closeRequest=void 0);let n=e._writer;n!==void 0&&Nn(n,e._storedError)}function Ln(e,n){let a=e._writer;a!==void 0&&n!==e._backpressure&&(n?hl(a):Gn(a)),e._backpressure=n}class Lt{constructor(n){if(pe(n,1,"WritableStreamDefaultWriter"),ps(n,"First parameter"),tt(n))throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=n,n._writer=this;let a=n._state;if(a==="writable")!ge(n)&&n._backpressure?Ir(this):Ps(this),qr(this);else if(a==="erroring")Hn(this,n._storedError),qr(this);else if(a==="closed")Ps(this),ml(this);else{let l=n._storedError;Hn(this,l),js(this,l)}}get closed(){return Ue(this)?this._closedPromise:_(Me("closed"))}get desiredSize(){if(!Ue(this))throw Me("desiredSize");if(this._ownerWritableStream===void 0)throw Ut("desiredSize");return il(this)}get ready(){return Ue(this)?this._readyPromise:_(Me("ready"))}abort(n=void 0){return Ue(this)?this._ownerWritableStream===void 0?_(Ut("abort")):ol(this,n):_(Me("abort"))}close(){if(!Ue(this))return _(Me("close"));let n=this._ownerWritableStream;return n===void 0?_(Ut("close")):ge(n)?_(new TypeError("Cannot close an already-closing stream")):ys(this)}releaseLock(){if(!Ue(this))throw Me("releaseLock");this._ownerWritableStream!==void 0&&Ss(this)}write(n=void 0){return Ue(this)?this._ownerWritableStream===void 0?_(Ut("write to")):_s(this,n):_(Me("write"))}}Object.defineProperties(Lt.prototype,{abort:{enumerable:!0},close:{enumerable:!0},releaseLock:{enumerable:!0},write:{enumerable:!0},closed:{enumerable:!0},desiredSize:{enumerable:!0},ready:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Lt.prototype,t.toStringTag,{value:"WritableStreamDefaultWriter",configurable:!0});function Ue(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_ownerWritableStream")?!1:e instanceof Lt}function ol(e,n){let a=e._ownerWritableStream;return xr(a,n)}function ys(e){let n=e._ownerWritableStream;return hs(n)}function sl(e){let n=e._ownerWritableStream,a=n._state;return ge(n)||a==="closed"?w(void 0):a==="errored"?_(n._storedError):ys(e)}function al(e,n){e._closedPromiseState==="pending"?Nn(e,n):bl(e,n)}function gs(e,n){e._readyPromiseState==="pending"?xs(e,n):yl(e,n)}function il(e){let n=e._ownerWritableStream,a=n._state;return a==="errored"||a==="erroring"?null:a==="closed"?0:Es(n._writableStreamController)}function Ss(e){let n=e._ownerWritableStream,a=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");gs(e,a),al(e,a),n._writer=void 0,e._ownerWritableStream=void 0}function _s(e,n){let a=e._ownerWritableStream,l=a._writableStreamController,f=cl(l,n);if(a!==e._ownerWritableStream)return _(Ut("write to"));let y=a._state;if(y==="errored")return _(a._storedError);if(ge(a)||y==="closed")return _(new TypeError("The stream is closing or closed and cannot be written to"));if(y==="erroring")return _(a._storedError);let g=Yu(a);return dl(l,n,f),g}let Os={};class rt{constructor(){throw new TypeError("Illegal constructor")}get abortReason(){if(!Un(this))throw Qn("abortReason");return this._abortReason}get signal(){if(!Un(this))throw Qn("signal");if(this._abortController===void 0)throw new TypeError("WritableStreamDefaultController.prototype.signal is not supported");return this._abortController.signal}error(n=void 0){if(!Un(this))throw Qn("error");this._controlledWritableStream._state==="writable"&&Rs(this,n)}[fr](n){let a=this._abortAlgorithm(n);return Cr(this),a}[pr](){ve(this)}}Object.defineProperties(rt.prototype,{abortReason:{enumerable:!0},signal:{enumerable:!0},error:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(rt.prototype,t.toStringTag,{value:"WritableStreamDefaultController",configurable:!0});function Un(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledWritableStream")?!1:e instanceof rt}function ws(e,n,a,l,f,y,g,R){n._controlledWritableStream=e,e._writableStreamController=n,n._queue=void 0,n._queueTotalSize=void 0,ve(n),n._abortReason=void 0,n._abortController=Ju(),n._started=!1,n._strategySizeAlgorithm=R,n._strategyHWM=g,n._writeAlgorithm=l,n._closeAlgorithm=f,n._abortAlgorithm=y;let k=Wn(n);Ln(e,k);let q=a(),B=w(q);T(B,()=>{n._started=!0,vr(n)},$=>{n._started=!0,zn(e,$)})}function ul(e,n,a,l){let f=Object.create(rt.prototype),y=()=>{},g=()=>w(void 0),R=()=>w(void 0),k=()=>w(void 0);n.start!==void 0&&(y=()=>n.start(f)),n.write!==void 0&&(g=q=>n.write(q,f)),n.close!==void 0&&(R=()=>n.close()),n.abort!==void 0&&(k=q=>n.abort(q)),ws(e,f,y,g,R,k,a,l)}function Cr(e){e._writeAlgorithm=void 0,e._closeAlgorithm=void 0,e._abortAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function ll(e){Cn(e,Os,0),vr(e)}function cl(e,n){try{return e._strategySizeAlgorithm(n)}catch(a){return Mn(e,a),1}}function Es(e){return e._strategyHWM-e._queueTotalSize}function dl(e,n,a){try{Cn(e,n,a)}catch(f){Mn(e,f);return}let l=e._controlledWritableStream;if(!ge(l)&&l._state==="writable"){let f=Wn(e);Ln(l,f)}vr(e)}function vr(e){let n=e._controlledWritableStream;if(!e._started||n._inFlightWriteRequest!==void 0)return;if(n._state==="erroring"){Fn(n);return}if(e._queue.length===0)return;let l=Au(e);l===Os?fl(e):pl(e,l)}function Mn(e,n){e._controlledWritableStream._state==="writable"&&Rs(e,n)}function fl(e){let n=e._controlledWritableStream;rl(n),kn(e);let a=e._closeAlgorithm();Cr(e),T(a,()=>{Zu(n)},l=>{el(n,l)})}function pl(e,n){let a=e._controlledWritableStream;nl(a);let l=e._writeAlgorithm(n);T(l,()=>{Ku(a);let f=a._state;if(kn(e),!ge(a)&&f==="writable"){let y=Wn(e);Ln(a,y)}vr(e)},f=>{a._state==="writable"&&Cr(e),Xu(a,f)})}function Wn(e){return Es(e)<=0}function Rs(e,n){let a=e._controlledWritableStream;Cr(e),Dn(a,n)}function Ar(e){return new TypeError(`WritableStream.prototype.${e} can only be used on a WritableStream`)}function Qn(e){return new TypeError(`WritableStreamDefaultController.prototype.${e} can only be used on a WritableStreamDefaultController`)}function Me(e){return new TypeError(`WritableStreamDefaultWriter.prototype.${e} can only be used on a WritableStreamDefaultWriter`)}function Ut(e){return new TypeError("Cannot "+e+" a stream using a released writer")}function qr(e){e._closedPromise=E((n,a)=>{e._closedPromise_resolve=n,e._closedPromise_reject=a,e._closedPromiseState="pending"})}function js(e,n){qr(e),Nn(e,n)}function ml(e){qr(e),Ts(e)}function Nn(e,n){e._closedPromise_reject!==void 0&&(W(e._closedPromise),e._closedPromise_reject(n),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="rejected")}function bl(e,n){js(e,n)}function Ts(e){e._closedPromise_resolve!==void 0&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="resolved")}function Ir(e){e._readyPromise=E((n,a)=>{e._readyPromise_resolve=n,e._readyPromise_reject=a}),e._readyPromiseState="pending"}function Hn(e,n){Ir(e),xs(e,n)}function Ps(e){Ir(e),Gn(e)}function xs(e,n){e._readyPromise_reject!==void 0&&(W(e._readyPromise),e._readyPromise_reject(n),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="rejected")}function hl(e){Ir(e)}function yl(e,n){Hn(e,n)}function Gn(e){e._readyPromise_resolve!==void 0&&(e._readyPromise_resolve(void 0),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="fulfilled")}let ks=typeof DOMException<"u"?DOMException:void 0;function gl(e){if(!(typeof e=="function"||typeof e=="object"))return!1;try{return new e,!0}catch{return!1}}function Sl(){let e=function(a,l){this.message=a||"",this.name=l||"Error",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)};return e.prototype=Object.create(Error.prototype),Object.defineProperty(e.prototype,"constructor",{value:e,writable:!0,configurable:!0}),e}let _l=gl(ks)?ks:Sl();function Cs(e,n,a,l,f,y){let g=Xe(e),R=ms(n);e._disturbed=!0;let k=!1,q=w(void 0);return E((B,$)=>{let M;if(y!==void 0){if(M=()=>{let j=new _l("Aborted","AbortError"),A=[];l||A.push(()=>n._state==="writable"?xr(n,j):w(void 0)),f||A.push(()=>e._state==="readable"?be(e,j):w(void 0)),Z(()=>Promise.all(A.map(F=>F())),!0,j)},y.aborted){M();return}y.addEventListener("abort",M)}function he(){return E((j,A)=>{function F(se){se?j():S(st(),F,A)}F(!1)})}function st(){return k?w(!0):S(R._readyPromise,()=>E((j,A)=>{At(g,{_chunkSteps:F=>{q=S(_s(R,F),void 0,o),j(!1)},_closeSteps:()=>j(!0),_errorSteps:A})}))}if(Ee(e,g._closedPromise,j=>{l?le(!0,j):Z(()=>xr(n,j),!0,j)}),Ee(n,R._closedPromise,j=>{f?le(!0,j):Z(()=>be(e,j),!0,j)}),Y(e,g._closedPromise,()=>{a?le():Z(()=>sl(R))}),ge(n)||n._state==="closed"){let j=new TypeError("the destination writable stream closed before all data could be piped to it");f?le(!0,j):Z(()=>be(e,j),!0,j)}W(he());function $e(){let j=q;return S(q,()=>j!==q?$e():void 0)}function Ee(j,A,F){j._state==="errored"?F(j._storedError):C(A,F)}function Y(j,A,F){j._state==="closed"?F():x(A,F)}function Z(j,A,F){if(k)return;k=!0,n._state==="writable"&&!ge(n)?x($e(),se):se();function se(){T(j(),()=>Re(A,F),at=>Re(!0,at))}}function le(j,A){k||(k=!0,n._state==="writable"&&!ge(n)?x($e(),()=>Re(j,A)):Re(j,A))}function Re(j,A){Ss(R),de(g),y!==void 0&&y.removeEventListener("abort",M),j?$(A):B(void 0)}})}class nt{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!Br(this))throw Dr("desiredSize");return Jn(this)}close(){if(!Br(this))throw Dr("close");if(!ot(this))throw new TypeError("The stream is not in a state that permits close");Wt(this)}enqueue(n=void 0){if(!Br(this))throw Dr("enqueue");if(!ot(this))throw new TypeError("The stream is not in a state that permits enqueue");return zr(this,n)}error(n=void 0){if(!Br(this))throw Dr("error");Ae(this,n)}[xt](n){ve(this);let a=this._cancelAlgorithm(n);return $r(this),a}[kt](n){let a=this._controlledReadableStream;if(this._queue.length>0){let l=kn(this);this._closeRequested&&this._queue.length===0?($r(this),Qt(a)):Mt(this),n._chunkSteps(l)}else Wo(a,n),Mt(this)}}Object.defineProperties(nt.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(nt.prototype,t.toStringTag,{value:"ReadableStreamDefaultController",configurable:!0});function Br(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledReadableStream")?!1:e instanceof nt}function Mt(e){if(!vs(e))return;if(e._pulling){e._pullAgain=!0;return}e._pulling=!0;let a=e._pullAlgorithm();T(a,()=>{e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,Mt(e))},l=>{Ae(e,l)})}function vs(e){let n=e._controlledReadableStream;return!ot(e)||!e._started?!1:!!(Be(n)&&hr(n)>0||Jn(e)>0)}function $r(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function Wt(e){if(!ot(e))return;let n=e._controlledReadableStream;e._closeRequested=!0,e._queue.length===0&&($r(e),Qt(n))}function zr(e,n){if(!ot(e))return;let a=e._controlledReadableStream;if(Be(a)&&hr(a)>0)xn(a,n,!1);else{let l;try{l=e._strategySizeAlgorithm(n)}catch(f){throw Ae(e,f),f}try{Cn(e,n,l)}catch(f){throw Ae(e,f),f}}Mt(e)}function Ae(e,n){let a=e._controlledReadableStream;a._state==="readable"&&(ve(e),$r(e),Bs(a,n))}function Jn(e){let n=e._controlledReadableStream._state;return n==="errored"?null:n==="closed"?0:e._strategyHWM-e._queueTotalSize}function Ol(e){return!vs(e)}function ot(e){let n=e._controlledReadableStream._state;return!e._closeRequested&&n==="readable"}function As(e,n,a,l,f,y,g){n._controlledReadableStream=e,n._queue=void 0,n._queueTotalSize=void 0,ve(n),n._started=!1,n._closeRequested=!1,n._pullAgain=!1,n._pulling=!1,n._strategySizeAlgorithm=g,n._strategyHWM=y,n._pullAlgorithm=l,n._cancelAlgorithm=f,e._readableStreamController=n;let R=a();T(w(R),()=>{n._started=!0,Mt(n)},k=>{Ae(n,k)})}function wl(e,n,a,l){let f=Object.create(nt.prototype),y=()=>{},g=()=>w(void 0),R=()=>w(void 0);n.start!==void 0&&(y=()=>n.start(f)),n.pull!==void 0&&(g=()=>n.pull(f)),n.cancel!==void 0&&(R=k=>n.cancel(k)),As(e,f,y,g,R,a,l)}function Dr(e){return new TypeError(`ReadableStreamDefaultController.prototype.${e} can only be used on a ReadableStreamDefaultController`)}function El(e,n){return De(e._readableStreamController)?jl(e):Rl(e)}function Rl(e,n){let a=Xe(e),l=!1,f=!1,y=!1,g=!1,R,k,q,B,$,M=E(Y=>{$=Y});function he(){return l?(f=!0,w(void 0)):(l=!0,At(a,{_chunkSteps:Z=>{v(()=>{f=!1;let le=Z,Re=Z;y||zr(q._readableStreamController,le),g||zr(B._readableStreamController,Re),l=!1,f&&he()})},_closeSteps:()=>{l=!1,y||Wt(q._readableStreamController),g||Wt(B._readableStreamController),(!y||!g)&&$(void 0)},_errorSteps:()=>{l=!1}}),w(void 0))}function st(Y){if(y=!0,R=Y,g){let Z=qt([R,k]),le=be(e,Z);$(le)}return M}function $e(Y){if(g=!0,k=Y,y){let Z=qt([R,k]),le=be(e,Z);$(le)}return M}function Ee(){}return q=Vn(Ee,he,st),B=Vn(Ee,he,$e),C(a._closedPromise,Y=>{Ae(q._readableStreamController,Y),Ae(B._readableStreamController,Y),(!y||!g)&&$(void 0)}),[q,B]}function jl(e){let n=Xe(e),a=!1,l=!1,f=!1,y=!1,g=!1,R,k,q,B,$,M=E(j=>{$=j});function he(j){C(j._closedPromise,A=>{j===n&&(me(q._readableStreamController,A),me(B._readableStreamController,A),(!y||!g)&&$(void 0))})}function st(){Le(n)&&(de(n),n=Xe(e),he(n)),At(n,{_chunkSteps:A=>{v(()=>{l=!1,f=!1;let F=A,se=A;if(!y&&!g)try{se=Zo(A)}catch(at){me(q._readableStreamController,at),me(B._readableStreamController,at),$(be(e,at));return}y||wr(q._readableStreamController,F),g||wr(B._readableStreamController,se),a=!1,l?Ee():f&&Y()})},_closeSteps:()=>{a=!1,y||Bt(q._readableStreamController),g||Bt(B._readableStreamController),q._readableStreamController._pendingPullIntos.length>0&&Er(q._readableStreamController,0),B._readableStreamController._pendingPullIntos.length>0&&Er(B._readableStreamController,0),(!y||!g)&&$(void 0)},_errorSteps:()=>{a=!1}})}function $e(j,A){Ce(n)&&(de(n),n=ls(e),he(n));let F=A?B:q,se=A?q:B;fs(n,j,{_chunkSteps:it=>{v(()=>{l=!1,f=!1;let ut=A?g:y;if(A?y:g)ut||Rr(F._readableStreamController,it);else{let Js;try{Js=Zo(it)}catch(Kn){me(F._readableStreamController,Kn),me(se._readableStreamController,Kn),$(be(e,Kn));return}ut||Rr(F._readableStreamController,it),wr(se._readableStreamController,Js)}a=!1,l?Ee():f&&Y()})},_closeSteps:it=>{a=!1;let ut=A?g:y,Gr=A?y:g;ut||Bt(F._readableStreamController),Gr||Bt(se._readableStreamController),it!==void 0&&(ut||Rr(F._readableStreamController,it),!Gr&&se._readableStreamController._pendingPullIntos.length>0&&Er(se._readableStreamController,0)),(!ut||!Gr)&&$(void 0)},_errorSteps:()=>{a=!1}})}function Ee(){if(a)return l=!0,w(void 0);a=!0;let j=In(q._readableStreamController);return j===null?st():$e(j._view,!1),w(void 0)}function Y(){if(a)return f=!0,w(void 0);a=!0;let j=In(B._readableStreamController);return j===null?st():$e(j._view,!0),w(void 0)}function Z(j){if(y=!0,R=j,g){let A=qt([R,k]),F=be(e,A);$(F)}return M}function le(j){if(g=!0,k=j,y){let A=qt([R,k]),F=be(e,A);$(F)}return M}function Re(){}return q=Is(Re,Ee,Z),B=Is(Re,Y,le),he(n),[q,B]}function Tl(e,n){fe(e,n);let a=e,l=a?.autoAllocateChunkSize,f=a?.cancel,y=a?.pull,g=a?.start,R=a?.type;return{autoAllocateChunkSize:l===void 0?void 0:Mo(l,`${n} has member 'autoAllocateChunkSize' that`),cancel:f===void 0?void 0:Pl(f,a,`${n} has member 'cancel' that`),pull:y===void 0?void 0:xl(y,a,`${n} has member 'pull' that`),start:g===void 0?void 0:kl(g,a,`${n} has member 'start' that`),type:R===void 0?void 0:Cl(R,`${n} has member 'type' that`)}}function Pl(e,n,a){return oe(e,a),l=>I(e,n,[l])}function xl(e,n,a){return oe(e,a),l=>I(e,n,[l])}function kl(e,n,a){return oe(e,a),l=>D(e,n,[l])}function Cl(e,n){if(e=`${e}`,e!=="bytes")throw new TypeError(`${n} '${e}' is not a valid enumeration value for ReadableStreamType`);return e}function vl(e,n){fe(e,n);let a=e?.mode;return{mode:a===void 0?void 0:Al(a,`${n} has member 'mode' that`)}}function Al(e,n){if(e=`${e}`,e!=="byob")throw new TypeError(`${n} '${e}' is not a valid enumeration value for ReadableStreamReaderMode`);return e}function ql(e,n){fe(e,n);let a=e?.preventCancel;return{preventCancel:Boolean(a)}}function qs(e,n){fe(e,n);let a=e?.preventAbort,l=e?.preventCancel,f=e?.preventClose,y=e?.signal;return y!==void 0&&Il(y,`${n} has member 'signal' that`),{preventAbort:Boolean(a),preventCancel:Boolean(l),preventClose:Boolean(f),signal:y}}function Il(e,n){if(!Hu(e))throw new TypeError(`${n} is not an AbortSignal.`)}function Bl(e,n){fe(e,n);let a=e?.readable;Ct(a,"readable","ReadableWritablePair"),Pn(a,`${n} has member 'readable' that`);let l=e?.writable;return Ct(l,"writable","ReadableWritablePair"),ps(l,`${n} has member 'writable' that`),{readable:a,writable:l}}class qe{constructor(n={},a={}){n===void 0?n=null:br(n,"First parameter");let l=Pr(a,"Second parameter"),f=Tl(n,"First parameter");if(Yn(this),f.type==="bytes"){if(l.size!==void 0)throw new RangeError("The strategy for a byte stream cannot have a size function");let y=Dt(l,0);zu(this,f,y)}else{let y=Tr(l),g=Dt(l,1);wl(this,f,g,y)}}get locked(){if(!Ie(this))throw We("locked");return Be(this)}cancel(n=void 0){return Ie(this)?Be(this)?_(new TypeError("Cannot cancel a stream that already has a reader")):be(this,n):_(We("cancel"))}getReader(n=void 0){if(!Ie(this))throw We("getReader");return vl(n,"First parameter").mode===void 0?Xe(this):ls(this)}pipeThrough(n,a={}){if(!Ie(this))throw We("pipeThrough");pe(n,1,"pipeThrough");let l=Bl(n,"First parameter"),f=qs(a,"Second parameter");if(Be(this))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(tt(l.writable))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");let y=Cs(this,l.writable,f.preventClose,f.preventAbort,f.preventCancel,f.signal);return W(y),l.readable}pipeTo(n,a={}){if(!Ie(this))return _(We("pipeTo"));if(n===void 0)return _("Parameter 1 is required in 'pipeTo'.");if(!et(n))return _(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));let l;try{l=qs(a,"Second parameter")}catch(f){return _(f)}return Be(this)?_(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):tt(n)?_(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):Cs(this,n,l.preventClose,l.preventAbort,l.preventCancel,l.signal)}tee(){if(!Ie(this))throw We("tee");let n=El(this);return qt(n)}values(n=void 0){if(!Ie(this))throw We("values");let a=ql(n,"First parameter");return Cu(this,a.preventCancel)}}Object.defineProperties(qe.prototype,{cancel:{enumerable:!0},getReader:{enumerable:!0},pipeThrough:{enumerable:!0},pipeTo:{enumerable:!0},tee:{enumerable:!0},values:{enumerable:!0},locked:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(qe.prototype,t.toStringTag,{value:"ReadableStream",configurable:!0}),typeof t.asyncIterator=="symbol"&&Object.defineProperty(qe.prototype,t.asyncIterator,{value:qe.prototype.values,writable:!0,configurable:!0});function Vn(e,n,a,l=1,f=()=>1){let y=Object.create(qe.prototype);Yn(y);let g=Object.create(nt.prototype);return As(y,g,e,n,a,l,f),y}function Is(e,n,a){let l=Object.create(qe.prototype);Yn(l);let f=Object.create(Ze.prototype);return us(l,f,e,n,a,0,void 0),l}function Yn(e){e._state="readable",e._reader=void 0,e._storedError=void 0,e._disturbed=!1}function Ie(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_readableStreamController")?!1:e instanceof qe}function Be(e){return e._reader!==void 0}function be(e,n){if(e._disturbed=!0,e._state==="closed")return w(void 0);if(e._state==="errored")return _(e._storedError);Qt(e);let a=e._reader;a!==void 0&&Le(a)&&(a._readIntoRequests.forEach(f=>{f._closeSteps(void 0)}),a._readIntoRequests=new V);let l=e._readableStreamController[xt](n);return z(l,o)}function Qt(e){e._state="closed";let n=e._reader;n!==void 0&&(dr(n),Ce(n)&&(n._readRequests.forEach(a=>{a._closeSteps()}),n._readRequests=new V))}function Bs(e,n){e._state="errored",e._storedError=n;let a=e._reader;a!==void 0&&(Pt(a,n),Ce(a)?(a._readRequests.forEach(l=>{l._errorSteps(n)}),a._readRequests=new V):(a._readIntoRequests.forEach(l=>{l._errorSteps(n)}),a._readIntoRequests=new V))}function We(e){return new TypeError(`ReadableStream.prototype.${e} can only be used on a ReadableStream`)}function $s(e,n){fe(e,n);let a=e?.highWaterMark;return Ct(a,"highWaterMark","QueuingStrategyInit"),{highWaterMark:Tn(a)}}let zs=e=>e.byteLength;try{Object.defineProperty(zs,"name",{value:"size",configurable:!0})}catch{}class Fr{constructor(n){pe(n,1,"ByteLengthQueuingStrategy"),n=$s(n,"First parameter"),this._byteLengthQueuingStrategyHighWaterMark=n.highWaterMark}get highWaterMark(){if(!Fs(this))throw Ds("highWaterMark");return this._byteLengthQueuingStrategyHighWaterMark}get size(){if(!Fs(this))throw Ds("size");return zs}}Object.defineProperties(Fr.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Fr.prototype,t.toStringTag,{value:"ByteLengthQueuingStrategy",configurable:!0});function Ds(e){return new TypeError(`ByteLengthQueuingStrategy.prototype.${e} can only be used on a ByteLengthQueuingStrategy`)}function Fs(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_byteLengthQueuingStrategyHighWaterMark")?!1:e instanceof Fr}let Ls=()=>1;try{Object.defineProperty(Ls,"name",{value:"size",configurable:!0})}catch{}class Lr{constructor(n){pe(n,1,"CountQueuingStrategy"),n=$s(n,"First parameter"),this._countQueuingStrategyHighWaterMark=n.highWaterMark}get highWaterMark(){if(!Ms(this))throw Us("highWaterMark");return this._countQueuingStrategyHighWaterMark}get size(){if(!Ms(this))throw Us("size");return Ls}}Object.defineProperties(Lr.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Lr.prototype,t.toStringTag,{value:"CountQueuingStrategy",configurable:!0});function Us(e){return new TypeError(`CountQueuingStrategy.prototype.${e} can only be used on a CountQueuingStrategy`)}function Ms(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_countQueuingStrategyHighWaterMark")?!1:e instanceof Lr}function $l(e,n){fe(e,n);let a=e?.flush,l=e?.readableType,f=e?.start,y=e?.transform,g=e?.writableType;return{flush:a===void 0?void 0:zl(a,e,`${n} has member 'flush' that`),readableType:l,start:f===void 0?void 0:Dl(f,e,`${n} has member 'start' that`),transform:y===void 0?void 0:Fl(y,e,`${n} has member 'transform' that`),writableType:g}}function zl(e,n,a){return oe(e,a),l=>I(e,n,[l])}function Dl(e,n,a){return oe(e,a),l=>D(e,n,[l])}function Fl(e,n,a){return oe(e,a),(l,f)=>I(e,n,[l,f])}class Ur{constructor(n={},a={},l={}){n===void 0&&(n=null);let f=Pr(a,"Second parameter"),y=Pr(l,"Third parameter"),g=$l(n,"First parameter");if(g.readableType!==void 0)throw new RangeError("Invalid readableType specified");if(g.writableType!==void 0)throw new RangeError("Invalid writableType specified");let R=Dt(y,0),k=Tr(y),q=Dt(f,1),B=Tr(f),$,M=E(he=>{$=he});Ll(this,M,q,B,R,k),Ml(this,g),g.start!==void 0?$(g.start(this._transformStreamController)):$(void 0)}get readable(){if(!Ws(this))throw Gs("readable");return this._readable}get writable(){if(!Ws(this))throw Gs("writable");return this._writable}}Object.defineProperties(Ur.prototype,{readable:{enumerable:!0},writable:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Ur.prototype,t.toStringTag,{value:"TransformStream",configurable:!0});function Ll(e,n,a,l,f,y){function g(){return n}function R(M){return Nl(e,M)}function k(M){return Hl(e,M)}function q(){return Gl(e)}e._writable=Vu(g,R,q,k,a,l);function B(){return Jl(e)}function $(M){return Wr(e,M),w(void 0)}e._readable=Vn(g,B,$,f,y),e._backpressure=void 0,e._backpressureChangePromise=void 0,e._backpressureChangePromise_resolve=void 0,Qr(e,!0),e._transformStreamController=void 0}function Ws(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_transformStreamController")?!1:e instanceof Ur}function Mr(e,n){Ae(e._readable._readableStreamController,n),Wr(e,n)}function Wr(e,n){Qs(e._transformStreamController),Mn(e._writable._writableStreamController,n),e._backpressure&&Qr(e,!1)}function Qr(e,n){e._backpressureChangePromise!==void 0&&e._backpressureChangePromise_resolve(),e._backpressureChangePromise=E(a=>{e._backpressureChangePromise_resolve=a}),e._backpressure=n}class Nt{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!Nr(this))throw Hr("desiredSize");let n=this._controlledTransformStream._readable._readableStreamController;return Jn(n)}enqueue(n=void 0){if(!Nr(this))throw Hr("enqueue");Ns(this,n)}error(n=void 0){if(!Nr(this))throw Hr("error");Wl(this,n)}terminate(){if(!Nr(this))throw Hr("terminate");Ql(this)}}Object.defineProperties(Nt.prototype,{enqueue:{enumerable:!0},error:{enumerable:!0},terminate:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Nt.prototype,t.toStringTag,{value:"TransformStreamDefaultController",configurable:!0});function Nr(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledTransformStream")?!1:e instanceof Nt}function Ul(e,n,a,l){n._controlledTransformStream=e,e._transformStreamController=n,n._transformAlgorithm=a,n._flushAlgorithm=l}function Ml(e,n){let a=Object.create(Nt.prototype),l=y=>{try{return Ns(a,y),w(void 0)}catch(g){return _(g)}},f=()=>w(void 0);n.transform!==void 0&&(l=y=>n.transform(y,a)),n.flush!==void 0&&(f=()=>n.flush(a)),Ul(e,a,l,f)}function Qs(e){e._transformAlgorithm=void 0,e._flushAlgorithm=void 0}function Ns(e,n){let a=e._controlledTransformStream,l=a._readable._readableStreamController;if(!ot(l))throw new TypeError("Readable side is not in a state that permits enqueue");try{zr(l,n)}catch(y){throw Wr(a,y),a._readable._storedError}Ol(l)!==a._backpressure&&Qr(a,!0)}function Wl(e,n){Mr(e._controlledTransformStream,n)}function Hs(e,n){let a=e._transformAlgorithm(n);return z(a,void 0,l=>{throw Mr(e._controlledTransformStream,l),l})}function Ql(e){let n=e._controlledTransformStream,a=n._readable._readableStreamController;Wt(a);let l=new TypeError("TransformStream terminated");Wr(n,l)}function Nl(e,n){let a=e._transformStreamController;if(e._backpressure){let l=e._backpressureChangePromise;return z(l,()=>{let f=e._writable;if(f._state==="erroring")throw f._storedError;return Hs(a,n)})}return Hs(a,n)}function Hl(e,n){return Mr(e,n),w(void 0)}function Gl(e){let n=e._readable,a=e._transformStreamController,l=a._flushAlgorithm();return Qs(a),z(l,()=>{if(n._state==="errored")throw n._storedError;Wt(n._readableStreamController)},f=>{throw Mr(e,f),n._storedError})}function Jl(e){return Qr(e,!1),e._backpressureChangePromise}function Hr(e){return new TypeError(`TransformStreamDefaultController.prototype.${e} can only be used on a TransformStreamDefaultController`)}function Gs(e){return new TypeError(`TransformStream.prototype.${e} can only be used on a TransformStream`)}r.ByteLengthQueuingStrategy=Fr,r.CountQueuingStrategy=Lr,r.ReadableByteStreamController=Ze,r.ReadableStream=qe,r.ReadableStreamBYOBReader=zt,r.ReadableStreamBYOBRequest=It,r.ReadableStreamDefaultController=nt,r.ReadableStreamDefaultReader=vt,r.TransformStream=Ur,r.TransformStreamDefaultController=Nt,r.WritableStream=Ft,r.WritableStreamDefaultController=rt,r.WritableStreamDefaultWriter=Lt,Object.defineProperty(r,"__esModule",{value:!0})})});var ra=P(()=>{if(!globalThis.ReadableStream)try{let r=require("node:process"),{emitWarning:t}=r;try{r.emitWarning=()=>{},Object.assign(globalThis,require("node:stream/web")),r.emitWarning=t}catch(o){throw r.emitWarning=t,o}}catch{Object.assign(globalThis,ta())}try{let{Blob:r}=require("buffer");r&&!r.prototype.stream&&(r.prototype.stream=function(o){let s=0,i=this;return new ReadableStream({type:"bytes",async pull(u){let m=await i.slice(s,Math.min(i.size,s+65536)).arrayBuffer();s+=m.byteLength,u.enqueue(new Uint8Array(m)),s===i.size&&u.close()}})})}catch{}});async function*ro(r,t=!0){for(let o of r)if("stream"in o)yield*o.stream();else if(ArrayBuffer.isView(o))if(t){let s=o.byteOffset,i=o.byteOffset+o.byteLength;for(;s!==i;){let u=Math.min(i-s,na),c=o.buffer.slice(s,s+u);s+=c.byteLength,yield new Uint8Array(c)}}else yield o;else{let s=0,i=o;for(;s!==i.size;){let c=await i.slice(s,Math.min(i.size,s+na)).arrayBuffer();s+=c.byteLength,yield new Uint8Array(c)}}}var jm,na,oa,oc,je,Jt=Ht(()=>{jm=ae(ra(),1);na=65536;oa=class no{#e=[];#t="";#r=0;#n="transparent";constructor(t=[],o={}){if(typeof t!="object"||t===null)throw new TypeError("Failed to construct 'Blob': The provided value cannot be converted to a sequence.");if(typeof t[Symbol.iterator]!="function")throw new TypeError("Failed to construct 'Blob': The object must have a callable @@iterator property.");if(typeof o!="object"&&typeof o!="function")throw new TypeError("Failed to construct 'Blob': parameter 2 cannot convert to dictionary.");o===null&&(o={});let s=new TextEncoder;for(let u of t){let c;ArrayBuffer.isView(u)?c=new Uint8Array(u.buffer.slice(u.byteOffset,u.byteOffset+u.byteLength)):u instanceof ArrayBuffer?c=new Uint8Array(u.slice(0)):u instanceof no?c=u:c=s.encode(`${u}`),this.#r+=ArrayBuffer.isView(c)?c.byteLength:c.size,this.#e.push(c)}this.#n=`${o.endings===void 0?"transparent":o.endings}`;let i=o.type===void 0?"":String(o.type);this.#t=/^[\x20-\x7E]*$/.test(i)?i:""}get size(){return this.#r}get type(){return this.#t}async text(){let t=new TextDecoder,o="";for await(let s of ro(this.#e,!1))o+=t.decode(s,{stream:!0});return o+=t.decode(),o}async arrayBuffer(){let t=new Uint8Array(this.size),o=0;for await(let s of ro(this.#e,!1))t.set(s,o),o+=s.length;return t.buffer}stream(){let t=ro(this.#e,!0);return new globalThis.ReadableStream({type:"bytes",async pull(o){let s=await t.next();s.done?o.close():o.enqueue(s.value)},async cancel(){await t.return()}})}slice(t=0,o=this.size,s=""){let{size:i}=this,u=t<0?Math.max(i+t,0):Math.min(t,i),c=o<0?Math.max(i+o,0):Math.min(o,i),m=Math.max(c-u,0),b=this.#e,h=[],O=0;for(let w of b){if(O>=m)break;let _=ArrayBuffer.isView(w)?w.byteLength:w.size;if(u&&_<=u)u-=_,c-=_;else{let S;ArrayBuffer.isView(w)?(S=w.subarray(u,Math.min(_,c)),O+=S.byteLength):(S=w.slice(u,Math.min(_,c)),O+=S.size),c-=_,h.push(S),u=0}}let E=new no([],{type:String(s).toLowerCase()});return E.#r=m,E.#e=h,E}get[Symbol.toStringTag](){return"Blob"}static[Symbol.hasInstance](t){return t&&typeof t=="object"&&typeof t.constructor=="function"&&(typeof t.stream=="function"||typeof t.arrayBuffer=="function")&&/^(Blob|File)$/.test(t[Symbol.toStringTag])}};Object.defineProperties(oa.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}});oc=oa,je=oc});var sc,ac,ct,oo=Ht(()=>{Jt();sc=class extends je{#e=0;#t="";constructor(t,o,s={}){if(arguments.length<2)throw new TypeError(`Failed to construct 'File': 2 arguments required, but only ${arguments.length} present.`);super(t,s),s===null&&(s={});let i=s.lastModified===void 0?Date.now():Number(s.lastModified);Number.isNaN(i)||(this.#e=i),this.#t=String(o)}get name(){return this.#t}get lastModified(){return this.#e}get[Symbol.toStringTag](){return"File"}static[Symbol.hasInstance](t){return!!t&&t instanceof je&&/^(File)$/.test(t[Symbol.toStringTag])}},ac=sc,ct=ac});function ia(r,t=je){var o=`${sa()}${sa()}`.replace(/\./g,"").slice(-28).padStart(32,"-"),s=[],i=`--${o}\r
Content-Disposition: form-data; name="`;return r.forEach((u,c)=>typeof u=="string"?s.push(i+so(c)+`"\r
\r
${u.replace(/\r(?!\n)|(?<!\r)\n/g,`\r
`)}\r
`):s.push(i+so(c)+`"; filename="${so(u.name,1)}"\r
Content-Type: ${u.type||"application/octet-stream"}\r
\r
`,u,`\r
`)),s.push(`--${o}--`),new t(s,{type:"multipart/form-data; boundary="+o})}var Vt,ic,uc,sa,lc,aa,so,Qe,Ne,Yr=Ht(()=>{Jt();oo();({toStringTag:Vt,iterator:ic,hasInstance:uc}=Symbol),sa=Math.random,lc="append,set,get,getAll,delete,keys,values,entries,forEach,constructor".split(","),aa=(r,t,o)=>(r+="",/^(Blob|File)$/.test(t&&t[Vt])?[(o=o!==void 0?o+"":t[Vt]=="File"?t.name:"blob",r),t.name!==o||t[Vt]=="blob"?new ct([t],o,t):t]:[r,t+""]),so=(r,t)=>(t?r:r.replace(/\r?\n|\r/g,`\r
`)).replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22"),Qe=(r,t,o)=>{if(t.length<o)throw new TypeError(`Failed to execute '${r}' on 'FormData': ${o} arguments required, but only ${t.length} present.`)},Ne=class{#e=[];constructor(...t){if(t.length)throw new TypeError("Failed to construct 'FormData': parameter 1 is not of type 'HTMLFormElement'.")}get[Vt](){return"FormData"}[ic](){return this.entries()}static[uc](t){return t&&typeof t=="object"&&t[Vt]==="FormData"&&!lc.some(o=>typeof t[o]!="function")}append(...t){Qe("append",arguments,2),this.#e.push(aa(...t))}delete(t){Qe("delete",arguments,1),t+="",this.#e=this.#e.filter(([o])=>o!==t)}get(t){Qe("get",arguments,1),t+="";for(var o=this.#e,s=o.length,i=0;i<s;i++)if(o[i][0]===t)return o[i][1];return null}getAll(t,o){return Qe("getAll",arguments,1),o=[],t+="",this.#e.forEach(s=>s[0]===t&&o.push(s[1])),o}has(t){return Qe("has",arguments,1),t+="",this.#e.some(o=>o[0]===t)}forEach(t,o){Qe("forEach",arguments,1);for(var[s,i]of this)t.call(o,i,s,this)}set(...t){Qe("set",arguments,2);var o=[],s=!0;t=aa(...t),this.#e.forEach(i=>{i[0]===t[0]?s&&(s=!o.push(t)):o.push(i)}),s&&o.push(t),this.#e=o}*entries(){yield*this.#e}*keys(){for(var[t]of this)yield t}*values(){for(var[,t]of this)yield t}}});var fa=P((Dm,da)=>{if(!globalThis.DOMException)try{let{MessageChannel:r}=require("worker_threads"),t=new r().port1,o=new ArrayBuffer;t.postMessage(o,[o,o])}catch(r){r.constructor.name==="DOMException"&&(globalThis.DOMException=r.constructor)}da.exports=globalThis.DOMException});var Kt,pa,cc,Xr,io=Ht(()=>{Kt=require("node:fs"),pa=ae(fa(),1);oo();Jt();({stat:cc}=Kt.promises),Xr=class{#e;#t;constructor(t){this.#e=t.path,this.#t=t.start,this.size=t.size,this.lastModified=t.lastModified}slice(t,o){return new Xr({path:this.#e,lastModified:this.lastModified,size:o-t,start:this.#t+t})}async*stream(){let{mtimeMs:t}=await cc(this.#e);if(t>this.lastModified)throw new pa.default("The requested file could not be read, typically due to permission problems that have occurred after a reference to a file was acquired.","NotReadableError");yield*(0,Kt.createReadStream)(this.#e,{start:this.#t,end:this.#t+this.size-1})}get[Symbol.toStringTag](){return"Blob"}}});var ba={};Xn(ba,{toFormData:()=>yc});function hc(r){let t=r.match(/\bfilename=("(.*?)"|([^()<>@,;:\\"/[\]?={}\s\t]+))($|;\s)/i);if(!t)return;let o=t[2]||t[3]||"",s=o.slice(o.lastIndexOf("\\")+1);return s=s.replace(/%22/g,'"'),s=s.replace(/&#(\d{4});/g,(i,u)=>String.fromCharCode(u)),s}async function yc(r,t){if(!/multipart/i.test(t))throw new TypeError("Failed to fetch");let o=t.match(/boundary=(?:"([^"]+)"|([^;]+))/i);if(!o)throw new TypeError("no or bad content-type header, no multipart boundary");let s=new uo(o[1]||o[2]),i,u,c,m,b,h,O=[],E=new Ne,w=C=>{c+=x.decode(C,{stream:!0})},_=C=>{O.push(C)},S=()=>{let C=new ct(O,h,{type:b});E.append(m,C)},T=()=>{E.append(m,c)},x=new TextDecoder("utf-8");x.decode(),s.onPartBegin=function(){s.onPartData=w,s.onPartEnd=T,i="",u="",c="",m="",b="",h=null,O.length=0},s.onHeaderField=function(C){i+=x.decode(C,{stream:!0})},s.onHeaderValue=function(C){u+=x.decode(C,{stream:!0})},s.onHeaderEnd=function(){if(u+=x.decode(),i=i.toLowerCase(),i==="content-disposition"){let C=u.match(/\bname=("([^"]*)"|([^()<>@,;:\\"/[\]?={}\s\t]+))/i);C&&(m=C[2]||C[3]||""),h=hc(u),h&&(s.onPartData=_,s.onPartEnd=S)}else i==="content-type"&&(b=u);u="",i=""};for await(let C of r)s.write(C);return s.end(),E}var Se,L,ma,ze,Zr,en,dc,Xt,fc,pc,mc,bc,He,uo,ha=Ht(()=>{io();Yr();Se=0,L={START_BOUNDARY:Se++,HEADER_FIELD_START:Se++,HEADER_FIELD:Se++,HEADER_VALUE_START:Se++,HEADER_VALUE:Se++,HEADER_VALUE_ALMOST_DONE:Se++,HEADERS_ALMOST_DONE:Se++,PART_DATA_START:Se++,PART_DATA:Se++,END:Se++},ma=1,ze={PART_BOUNDARY:ma,LAST_BOUNDARY:ma*=2},Zr=10,en=13,dc=32,Xt=45,fc=58,pc=97,mc=122,bc=r=>r|32,He=()=>{},uo=class{constructor(t){this.index=0,this.flags=0,this.onHeaderEnd=He,this.onHeaderField=He,this.onHeadersEnd=He,this.onHeaderValue=He,this.onPartBegin=He,this.onPartData=He,this.onPartEnd=He,this.boundaryChars={},t=`\r
--`+t;let o=new Uint8Array(t.length);for(let s=0;s<t.length;s++)o[s]=t.charCodeAt(s),this.boundaryChars[o[s]]=!0;this.boundary=o,this.lookbehind=new Uint8Array(this.boundary.length+8),this.state=L.START_BOUNDARY}write(t){let o=0,s=t.length,i=this.index,{lookbehind:u,boundary:c,boundaryChars:m,index:b,state:h,flags:O}=this,E=this.boundary.length,w=E-1,_=t.length,S,T,x=v=>{this[v+"Mark"]=o},C=v=>{delete this[v+"Mark"]},z=(v,D,I,ne)=>{(D===void 0||D!==I)&&this[v](ne&&ne.subarray(D,I))},W=(v,D)=>{let I=v+"Mark";I in this&&(D?(z(v,this[I],o,t),delete this[I]):(z(v,this[I],t.length,t),this[I]=0))};for(o=0;o<s;o++)switch(S=t[o],h){case L.START_BOUNDARY:if(b===c.length-2){if(S===Xt)O|=ze.LAST_BOUNDARY;else if(S!==en)return;b++;break}else if(b-1===c.length-2){if(O&ze.LAST_BOUNDARY&&S===Xt)h=L.END,O=0;else if(!(O&ze.LAST_BOUNDARY)&&S===Zr)b=0,z("onPartBegin"),h=L.HEADER_FIELD_START;else return;break}S!==c[b+2]&&(b=-2),S===c[b+2]&&b++;break;case L.HEADER_FIELD_START:h=L.HEADER_FIELD,x("onHeaderField"),b=0;case L.HEADER_FIELD:if(S===en){C("onHeaderField"),h=L.HEADERS_ALMOST_DONE;break}if(b++,S===Xt)break;if(S===fc){if(b===1)return;W("onHeaderField",!0),h=L.HEADER_VALUE_START;break}if(T=bc(S),T<pc||T>mc)return;break;case L.HEADER_VALUE_START:if(S===dc)break;x("onHeaderValue"),h=L.HEADER_VALUE;case L.HEADER_VALUE:S===en&&(W("onHeaderValue",!0),z("onHeaderEnd"),h=L.HEADER_VALUE_ALMOST_DONE);break;case L.HEADER_VALUE_ALMOST_DONE:if(S!==Zr)return;h=L.HEADER_FIELD_START;break;case L.HEADERS_ALMOST_DONE:if(S!==Zr)return;z("onHeadersEnd"),h=L.PART_DATA_START;break;case L.PART_DATA_START:h=L.PART_DATA,x("onPartData");case L.PART_DATA:if(i=b,b===0){for(o+=w;o<_&&!(t[o]in m);)o+=E;o-=w,S=t[o]}if(b<c.length)c[b]===S?(b===0&&W("onPartData",!0),b++):b=0;else if(b===c.length)b++,S===en?O|=ze.PART_BOUNDARY:S===Xt?O|=ze.LAST_BOUNDARY:b=0;else if(b-1===c.length)if(O&ze.PART_BOUNDARY){if(b=0,S===Zr){O&=~ze.PART_BOUNDARY,z("onPartEnd"),z("onPartBegin"),h=L.HEADER_FIELD_START;break}}else O&ze.LAST_BOUNDARY&&S===Xt?(z("onPartEnd"),h=L.END,O=0):b=0;if(b>0)u[b-1]=S;else if(i>0){let v=new Uint8Array(u.buffer,u.byteOffset,u.byteLength);z("onPartData",0,i,v),i=0,x("onPartData"),o--}break;case L.END:break;default:throw new Error(`Unexpected state entered: ${h}`)}W("onHeaderField"),W("onHeaderValue"),W("onPartData"),this.index=b,this.state=h,this.flags=O}end(){if(this.state===L.HEADER_FIELD_START&&this.index===0||this.state===L.PART_DATA&&this.index===this.boundary.length)this.onPartEnd();else if(this.state!==L.END)throw new Error("MultipartParser.end(): stream ended unexpectedly")}}});var yo=P(X=>{"use strict";Object.defineProperty(X,"__esModule",{value:!0});X.joinUrl=X.stripUndefined=X.delimited=X.encode=X.allowReserved=X.encodeReserved=void 0;X.encodeReserved=[encodeURIComponent,encodeURIComponent];X.allowReserved=[encodeURIComponent,encodeURI];function qa(r,t=","){let o=(s,i)=>{let u=r[i%r.length];return typeof s>"u"?"":typeof s=="object"?Array.isArray(s)?s.map(u).join(t):Object.entries(s).reduce((m,b)=>[...m,...b],[]).map(u).join(t):u(String(s))};return(s,...i)=>s.reduce((u,c,m)=>`${u}${c}${o(i[m],m)}`,"")}X.encode=qa;function xc(r=","){return(t,o=X.encodeReserved)=>Object.entries(t).filter(([,s])=>s!==void 0).map(([s,i])=>qa(o,r)`${s}=${i}`).join("&")}X.delimited=xc;function kc(r){return r&&JSON.parse(JSON.stringify(r))}X.stripUndefined=kc;function Cc(...r){return r.filter(Boolean).map((t,o)=>o===0?t:t.replace(/^\/+/,"")).map((t,o,s)=>o===s.length-1?t:t.replace(/\/+$/,"")).join("/")}X.joinUrl=Cc});var go=P(J=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0});J.space=J.pipe=J.form=J.json=J.explode=J.deep=J.query=void 0;var Oe=yo();function vc(...r){let t=r.filter(Boolean).join("&");return t&&`?${t}`}J.query=vc;function Ac(r,[t,o]=Oe.encodeReserved){let s=(0,Oe.encode)([c=>c,t]),i=(0,Oe.encode)([c=>c,o]),u=(c,m="")=>Object.entries(c).filter(([,b])=>b!==void 0).map(([b,h])=>{let O=Array.isArray(c)?"":b,E=m?s`${m}[${O}]`:b;return typeof h=="object"?u(h,E):i`${E}=${h}`}).join("&");return u(r)}J.deep=Ac;function Ia(r,t=Oe.encodeReserved){let o=(0,Oe.encode)(t);return Object.entries(r).filter(([,s])=>s!==void 0).map(([s,i])=>Array.isArray(i)?i.map(u=>o`${s}=${u}`).join("&"):typeof i=="object"?Ia(i,t):o`${s}=${i}`).join("&")}J.explode=Ia;function qc(r,t=Oe.encodeReserved){let o=(0,Oe.encode)(t);return Object.entries(r).filter(([,s])=>s!==void 0).map(([s,i])=>{let u=JSON.stringify(i);return o`${s}=${u}`}).join("&")}J.json=qc;J.form=(0,Oe.delimited)();J.pipe=(0,Oe.delimited)("|");J.space=(0,Oe.delimited)("%20")});var $a=P(re=>{"use strict";var Ic=re&&re.__createBinding||(Object.create?function(r,t,o,s){s===void 0&&(s=o);var i=Object.getOwnPropertyDescriptor(t,o);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[o]}}),Object.defineProperty(r,s,i)}:function(r,t,o,s){s===void 0&&(s=o),r[s]=t[o]}),Bc=re&&re.__setModuleDefault||(Object.create?function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}:function(r,t){r.default=t}),$c=re&&re.__importStar||function(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var o in r)o!=="default"&&Object.prototype.hasOwnProperty.call(r,o)&&Ic(t,r,o);return Bc(t,r),t},sn=re&&re.__awaiter||function(r,t,o,s){function i(u){return u instanceof o?u:new o(function(c){c(u)})}return new(o||(o=Promise))(function(u,c){function m(O){try{h(s.next(O))}catch(E){c(E)}}function b(O){try{h(s.throw(O))}catch(E){c(E)}}function h(O){O.done?u(O.value):i(O.value).then(m,b)}h((s=s.apply(r,t||[])).next())})},an=re&&re.__rest||function(r,t){var o={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&t.indexOf(s)<0&&(o[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,s=Object.getOwnPropertySymbols(r);i<s.length;i++)t.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(r,s[i])&&(o[s[i]]=r[s[i]]);return o};Object.defineProperty(re,"__esModule",{value:!0});re.runtime=void 0;var zc=$c(go()),Ba=yo(),Dc=Zn();function Fc(r){function t(u,c){return sn(this,void 0,void 0,function*(){let m=yield i(u,c),b;try{b=yield m.text()}catch{}return{status:m.status,headers:m.headers,contentType:m.headers.get("content-type"),data:b}})}function o(u,c={}){return sn(this,void 0,void 0,function*(){let{status:m,headers:b,contentType:h,data:O}=yield t(u,Object.assign(Object.assign({},c),{headers:Object.assign({Accept:"application/json"},c.headers)}));return(h?h.includes("json"):!1)?{status:m,headers:b,data:O?JSON.parse(O):null}:{status:m,headers:b,data:O}})}function s(u,c={}){return sn(this,void 0,void 0,function*(){let m=yield i(u,c),b;try{b=yield m.blob()}catch{}return{status:m.status,headers:m.headers,data:b}})}function i(u,c={}){return sn(this,void 0,void 0,function*(){let m=Object.assign(Object.assign({},r),c),{baseUrl:b,headers:h,fetch:O}=m,E=an(m,["baseUrl","headers","fetch"]),w=(0,Ba.joinUrl)(b,u);return yield(O||fetch)(w,Object.assign(Object.assign({},E),{headers:(0,Ba.stripUndefined)(Object.assign(Object.assign({},r.headers),h))}))})}return{ok:Dc.ok,fetchText:t,fetchJson:o,fetchBlob:s,json(u){var{body:c,headers:m}=u,b=an(u,["body","headers"]);return Object.assign(Object.assign(Object.assign({},b),c!=null&&{body:JSON.stringify(c)}),{headers:Object.assign(Object.assign({},m),{"Content-Type":"application/json"})})},form(u){var{body:c,headers:m}=u,b=an(u,["body","headers"]);return Object.assign(Object.assign(Object.assign({},b),c!=null&&{body:zc.form(c)}),{headers:Object.assign(Object.assign({},m),{"Content-Type":"application/x-www-form-urlencoded"})})},multipart(u){var{body:c}=u,m=an(u,["body"]);if(c==null)return m;let b=new(r.formDataConstructor||m.formDataConstructor||FormData);return Object.entries(c).forEach(([h,O])=>{b.append(h,O)}),Object.assign(Object.assign({},m),{body:b})}}}re.runtime=Fc});var Na=P((Ub,Qa)=>{Qa.exports=Wa;Wa.sync=Rf;var Ua=require("fs");function Ef(r,t){var o=t.pathExt!==void 0?t.pathExt:process.env.PATHEXT;if(!o||(o=o.split(";"),o.indexOf("")!==-1))return!0;for(var s=0;s<o.length;s++){var i=o[s].toLowerCase();if(i&&r.substr(-i.length).toLowerCase()===i)return!0}return!1}function Ma(r,t,o){return!r.isSymbolicLink()&&!r.isFile()?!1:Ef(t,o)}function Wa(r,t,o){Ua.stat(r,function(s,i){o(s,s?!1:Ma(i,r,t))})}function Rf(r,t){return Ma(Ua.statSync(r),r,t)}});var Ya=P((Mb,Va)=>{Va.exports=Ga;Ga.sync=jf;var Ha=require("fs");function Ga(r,t,o){Ha.stat(r,function(s,i){o(s,s?!1:Ja(i,t))})}function jf(r,t){return Ja(Ha.statSync(r),t)}function Ja(r,t){return r.isFile()&&Tf(r,t)}function Tf(r,t){var o=r.mode,s=r.uid,i=r.gid,u=t.uid!==void 0?t.uid:process.getuid&&process.getuid(),c=t.gid!==void 0?t.gid:process.getgid&&process.getgid(),m=parseInt("100",8),b=parseInt("010",8),h=parseInt("001",8),O=m|b,E=o&h||o&b&&i===c||o&m&&s===u||o&O&&u===0;return E}});var Xa=P((Qb,Ka)=>{var Wb=require("fs"),un;process.platform==="win32"||global.TESTING_WINDOWS?un=Na():un=Ya();Ka.exports=wo;wo.sync=Pf;function wo(r,t,o){if(typeof t=="function"&&(o=t,t={}),!o){if(typeof Promise!="function")throw new TypeError("callback not provided");return new Promise(function(s,i){wo(r,t||{},function(u,c){u?i(u):s(c)})})}un(r,t||{},function(s,i){s&&(s.code==="EACCES"||t&&t.ignoreErrors)&&(s=null,i=!1),o(s,i)})}function Pf(r,t){try{return un.sync(r,t||{})}catch(o){if(t&&t.ignoreErrors||o.code==="EACCES")return!1;throw o}}});var si=P((Nb,oi)=>{var bt=process.platform==="win32"||process.env.OSTYPE==="cygwin"||process.env.OSTYPE==="msys",Za=require("path"),xf=bt?";":":",ei=Xa(),ti=r=>Object.assign(new Error(`not found: ${r}`),{code:"ENOENT"}),ri=(r,t)=>{let o=t.colon||xf,s=r.match(/\//)||bt&&r.match(/\\/)?[""]:[...bt?[process.cwd()]:[],...(t.path||process.env.PATH||"").split(o)],i=bt?t.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM":"",u=bt?i.split(o):[""];return bt&&r.indexOf(".")!==-1&&u[0]!==""&&u.unshift(""),{pathEnv:s,pathExt:u,pathExtExe:i}},ni=(r,t,o)=>{typeof t=="function"&&(o=t,t={}),t||(t={});let{pathEnv:s,pathExt:i,pathExtExe:u}=ri(r,t),c=[],m=h=>new Promise((O,E)=>{if(h===s.length)return t.all&&c.length?O(c):E(ti(r));let w=s[h],_=/^".*"$/.test(w)?w.slice(1,-1):w,S=Za.join(_,r),T=!_&&/^\.[\\\/]/.test(r)?r.slice(0,2)+S:S;O(b(T,h,0))}),b=(h,O,E)=>new Promise((w,_)=>{if(E===i.length)return w(m(O+1));let S=i[E];ei(h+S,{pathExt:u},(T,x)=>{if(!T&&x)if(t.all)c.push(h+S);else return w(h+S);return w(b(h,O,E+1))})});return o?m(0).then(h=>o(null,h),o):m(0)},kf=(r,t)=>{t=t||{};let{pathEnv:o,pathExt:s,pathExtExe:i}=ri(r,t),u=[];for(let c=0;c<o.length;c++){let m=o[c],b=/^".*"$/.test(m)?m.slice(1,-1):m,h=Za.join(b,r),O=!b&&/^\.[\\\/]/.test(r)?r.slice(0,2)+h:h;for(let E=0;E<s.length;E++){let w=O+s[E];try{if(ei.sync(w,{pathExt:i}))if(t.all)u.push(w);else return w}catch{}}}if(t.all&&u.length)return u;if(t.nothrow)return null;throw ti(r)};oi.exports=ni;ni.sync=kf});var Ro=P((Hb,Eo)=>{"use strict";var ai=(r={})=>{let t=r.env||process.env;return(r.platform||process.platform)!=="win32"?"PATH":Object.keys(t).reverse().find(s=>s.toUpperCase()==="PATH")||"Path"};Eo.exports=ai;Eo.exports.default=ai});var ci=P((Gb,li)=>{"use strict";var ii=require("path"),Cf=si(),vf=Ro();function ui(r,t){let o=r.options.env||process.env,s=process.cwd(),i=r.options.cwd!=null,u=i&&process.chdir!==void 0&&!process.chdir.disabled;if(u)try{process.chdir(r.options.cwd)}catch{}let c;try{c=Cf.sync(r.command,{path:o[vf({env:o})],pathExt:t?ii.delimiter:void 0})}catch{}finally{u&&process.chdir(s)}return c&&(c=ii.resolve(i?r.options.cwd:"",c)),c}function Af(r){return ui(r)||ui(r,!0)}li.exports=Af});var di=P((Jb,To)=>{"use strict";var jo=/([()\][%!^"`<>&|;, *?])/g;function qf(r){return r=r.replace(jo,"^$1"),r}function If(r,t){return r=`${r}`,r=r.replace(/(\\*)"/g,'$1$1\\"'),r=r.replace(/(\\*)$/,"$1$1"),r=`"${r}"`,r=r.replace(jo,"^$1"),t&&(r=r.replace(jo,"^$1")),r}To.exports.command=qf;To.exports.argument=If});var pi=P((Vb,fi)=>{"use strict";fi.exports=/^#!(.*)/});var bi=P((Yb,mi)=>{"use strict";var Bf=pi();mi.exports=(r="")=>{let t=r.match(Bf);if(!t)return null;let[o,s]=t[0].replace(/#! ?/,"").split(" "),i=o.split("/").pop();return i==="env"?s:s?`${i} ${s}`:i}});var yi=P((Kb,hi)=>{"use strict";var Po=require("fs"),$f=bi();function zf(r){let o=Buffer.alloc(150),s;try{s=Po.openSync(r,"r"),Po.readSync(s,o,0,150,0),Po.closeSync(s)}catch{}return $f(o.toString())}hi.exports=zf});var Oi=P((Xb,_i)=>{"use strict";var Df=require("path"),gi=ci(),Si=di(),Ff=yi(),Lf=process.platform==="win32",Uf=/\.(?:com|exe)$/i,Mf=/node_modules[\\/].bin[\\/][^\\/]+\.cmd$/i;function Wf(r){r.file=gi(r);let t=r.file&&Ff(r.file);return t?(r.args.unshift(r.file),r.command=t,gi(r)):r.file}function Qf(r){if(!Lf)return r;let t=Wf(r),o=!Uf.test(t);if(r.options.forceShell||o){let s=Mf.test(t);r.command=Df.normalize(r.command),r.command=Si.command(r.command),r.args=r.args.map(u=>Si.argument(u,s));let i=[r.command].concat(r.args).join(" ");r.args=["/d","/s","/c",`"${i}"`],r.command=process.env.comspec||"cmd.exe",r.options.windowsVerbatimArguments=!0}return r}function Nf(r,t,o){t&&!Array.isArray(t)&&(o=t,t=null),t=t?t.slice(0):[],o=Object.assign({},o);let s={command:r,args:t,options:o,file:void 0,original:{command:r,args:t}};return o.shell?s:Qf(s)}_i.exports=Nf});var Ri=P((Zb,Ei)=>{"use strict";var xo=process.platform==="win32";function ko(r,t){return Object.assign(new Error(`${t} ${r.command} ENOENT`),{code:"ENOENT",errno:"ENOENT",syscall:`${t} ${r.command}`,path:r.command,spawnargs:r.args})}function Hf(r,t){if(!xo)return;let o=r.emit;r.emit=function(s,i){if(s==="exit"){let u=wi(i,t,"spawn");if(u)return o.call(r,"error",u)}return o.apply(r,arguments)}}function wi(r,t){return xo&&r===1&&!t.file?ko(t.original,"spawn"):null}function Gf(r,t){return xo&&r===1&&!t.file?ko(t.original,"spawnSync"):null}Ei.exports={hookChildProcess:Hf,verifyENOENT:wi,verifyENOENTSync:Gf,notFoundError:ko}});var Pi=P((eh,ht)=>{"use strict";var ji=require("child_process"),Co=Oi(),vo=Ri();function Ti(r,t,o){let s=Co(r,t,o),i=ji.spawn(s.command,s.args,s.options);return vo.hookChildProcess(i,s),i}function Jf(r,t,o){let s=Co(r,t,o),i=ji.spawnSync(s.command,s.args,s.options);return i.error=i.error||vo.verifyENOENTSync(i.status,s),i}ht.exports=Ti;ht.exports.spawn=Ti;ht.exports.sync=Jf;ht.exports._parse=Co;ht.exports._enoent=vo});var ki=P((th,xi)=>{"use strict";xi.exports=r=>{let t=typeof r=="string"?`
`:`
`.charCodeAt(),o=typeof r=="string"?"\r":"\r".charCodeAt();return r[r.length-1]===t&&(r=r.slice(0,r.length-1)),r[r.length-1]===o&&(r=r.slice(0,r.length-1)),r}});var Ai=P((rh,or)=>{"use strict";var nr=require("path"),Ci=Ro(),vi=r=>{r={cwd:process.cwd(),path:process.env[Ci()],execPath:process.execPath,...r};let t,o=nr.resolve(r.cwd),s=[];for(;t!==o;)s.push(nr.join(o,"node_modules/.bin")),t=o,o=nr.resolve(o,"..");let i=nr.resolve(r.cwd,r.execPath,"..");return s.push(i),s.concat(r.path).join(nr.delimiter)};or.exports=vi;or.exports.default=vi;or.exports.env=r=>{r={env:process.env,...r};let t={...r.env},o=Ci({env:t});return r.path=t[o],t[o]=or.exports(r),t}});var Ii=P((nh,Ao)=>{"use strict";var qi=(r,t)=>{for(let o of Reflect.ownKeys(t))Object.defineProperty(r,o,Object.getOwnPropertyDescriptor(t,o));return r};Ao.exports=qi;Ao.exports.default=qi});var $i=P((oh,cn)=>{"use strict";var Vf=Ii(),ln=new WeakMap,Bi=(r,t={})=>{if(typeof r!="function")throw new TypeError("Expected a function");let o,s=0,i=r.displayName||r.name||"<anonymous>",u=function(...c){if(ln.set(u,++s),s===1)o=r.apply(this,c),r=null;else if(t.throw===!0)throw new Error(`Function \`${i}\` can only be called once`);return o};return Vf(u,r),ln.set(u,s),u};cn.exports=Bi;cn.exports.default=Bi;cn.exports.callCount=r=>{if(!ln.has(r))throw new Error(`The given function \`${r.name}\` is not wrapped by the \`onetime\` package`);return ln.get(r)}});var zi=P(dn=>{"use strict";Object.defineProperty(dn,"__esModule",{value:!0});dn.SIGNALS=void 0;var Yf=[{name:"SIGHUP",number:1,action:"terminate",description:"Terminal closed",standard:"posix"},{name:"SIGINT",number:2,action:"terminate",description:"User interruption with CTRL-C",standard:"ansi"},{name:"SIGQUIT",number:3,action:"core",description:"User interruption with CTRL-\\",standard:"posix"},{name:"SIGILL",number:4,action:"core",description:"Invalid machine instruction",standard:"ansi"},{name:"SIGTRAP",number:5,action:"core",description:"Debugger breakpoint",standard:"posix"},{name:"SIGABRT",number:6,action:"core",description:"Aborted",standard:"ansi"},{name:"SIGIOT",number:6,action:"core",description:"Aborted",standard:"bsd"},{name:"SIGBUS",number:7,action:"core",description:"Bus error due to misaligned, non-existing address or paging error",standard:"bsd"},{name:"SIGEMT",number:7,action:"terminate",description:"Command should be emulated but is not implemented",standard:"other"},{name:"SIGFPE",number:8,action:"core",description:"Floating point arithmetic error",standard:"ansi"},{name:"SIGKILL",number:9,action:"terminate",description:"Forced termination",standard:"posix",forced:!0},{name:"SIGUSR1",number:10,action:"terminate",description:"Application-specific signal",standard:"posix"},{name:"SIGSEGV",number:11,action:"core",description:"Segmentation fault",standard:"ansi"},{name:"SIGUSR2",number:12,action:"terminate",description:"Application-specific signal",standard:"posix"},{name:"SIGPIPE",number:13,action:"terminate",description:"Broken pipe or socket",standard:"posix"},{name:"SIGALRM",number:14,action:"terminate",description:"Timeout or timer",standard:"posix"},{name:"SIGTERM",number:15,action:"terminate",description:"Termination",standard:"ansi"},{name:"SIGSTKFLT",number:16,action:"terminate",description:"Stack is empty or overflowed",standard:"other"},{name:"SIGCHLD",number:17,action:"ignore",description:"Child process terminated, paused or unpaused",standard:"posix"},{name:"SIGCLD",number:17,action:"ignore",description:"Child process terminated, paused or unpaused",standard:"other"},{name:"SIGCONT",number:18,action:"unpause",description:"Unpaused",standard:"posix",forced:!0},{name:"SIGSTOP",number:19,action:"pause",description:"Paused",standard:"posix",forced:!0},{name:"SIGTSTP",number:20,action:"pause",description:'Paused using CTRL-Z or "suspend"',standard:"posix"},{name:"SIGTTIN",number:21,action:"pause",description:"Background process cannot read terminal input",standard:"posix"},{name:"SIGBREAK",number:21,action:"terminate",description:"User interruption with CTRL-BREAK",standard:"other"},{name:"SIGTTOU",number:22,action:"pause",description:"Background process cannot write to terminal output",standard:"posix"},{name:"SIGURG",number:23,action:"ignore",description:"Socket received out-of-band data",standard:"bsd"},{name:"SIGXCPU",number:24,action:"core",description:"Process timed out",standard:"bsd"},{name:"SIGXFSZ",number:25,action:"core",description:"File too big",standard:"bsd"},{name:"SIGVTALRM",number:26,action:"terminate",description:"Timeout or timer",standard:"bsd"},{name:"SIGPROF",number:27,action:"terminate",description:"Timeout or timer",standard:"bsd"},{name:"SIGWINCH",number:28,action:"ignore",description:"Terminal window size changed",standard:"bsd"},{name:"SIGIO",number:29,action:"terminate",description:"I/O is available",standard:"other"},{name:"SIGPOLL",number:29,action:"terminate",description:"Watched event",standard:"other"},{name:"SIGINFO",number:29,action:"ignore",description:"Request for process information",standard:"other"},{name:"SIGPWR",number:30,action:"terminate",description:"Device running out of power",standard:"systemv"},{name:"SIGSYS",number:31,action:"core",description:"Invalid system call",standard:"other"},{name:"SIGUNUSED",number:31,action:"terminate",description:"Invalid system call",standard:"other"}];dn.SIGNALS=Yf});var qo=P(yt=>{"use strict";Object.defineProperty(yt,"__esModule",{value:!0});yt.SIGRTMAX=yt.getRealtimeSignals=void 0;var Kf=function(){let r=Fi-Di+1;return Array.from({length:r},Xf)};yt.getRealtimeSignals=Kf;var Xf=function(r,t){return{name:`SIGRT${t+1}`,number:Di+t,action:"terminate",description:"Application-specific signal (realtime)",standard:"posix"}},Di=34,Fi=64;yt.SIGRTMAX=Fi});var Li=P(fn=>{"use strict";Object.defineProperty(fn,"__esModule",{value:!0});fn.getSignals=void 0;var Zf=require("os"),ep=zi(),tp=qo(),rp=function(){let r=(0,tp.getRealtimeSignals)();return[...ep.SIGNALS,...r].map(np)};fn.getSignals=rp;var np=function({name:r,number:t,description:o,action:s,forced:i=!1,standard:u}){let{signals:{[r]:c}}=Zf.constants,m=c!==void 0;return{name:r,number:m?c:t,description:o,supported:m,action:s,forced:i,standard:u}}});var Mi=P(gt=>{"use strict";Object.defineProperty(gt,"__esModule",{value:!0});gt.signalsByNumber=gt.signalsByName=void 0;var op=require("os"),Ui=Li(),sp=qo(),ap=function(){return(0,Ui.getSignals)().reduce(ip,{})},ip=function(r,{name:t,number:o,description:s,supported:i,action:u,forced:c,standard:m}){return{...r,[t]:{name:t,number:o,description:s,supported:i,action:u,forced:c,standard:m}}},up=ap();gt.signalsByName=up;var lp=function(){let r=(0,Ui.getSignals)(),t=sp.SIGRTMAX+1,o=Array.from({length:t},(s,i)=>cp(i,r));return Object.assign({},...o)},cp=function(r,t){let o=dp(r,t);if(o===void 0)return{};let{name:s,description:i,supported:u,action:c,forced:m,standard:b}=o;return{[r]:{name:s,number:r,description:i,supported:u,action:c,forced:m,standard:b}}},dp=function(r,t){let o=t.find(({name:s})=>op.constants.signals[s]===r);return o!==void 0?o:t.find(s=>s.number===r)},fp=lp();gt.signalsByNumber=fp});var Qi=P((lh,Wi)=>{"use strict";var{signalsByName:pp}=Mi(),mp=({timedOut:r,timeout:t,errorCode:o,signal:s,signalDescription:i,exitCode:u,isCanceled:c})=>r?`timed out after ${t} milliseconds`:c?"was canceled":o!==void 0?`failed with ${o}`:s!==void 0?`was killed with ${s} (${i})`:u!==void 0?`failed with exit code ${u}`:"failed",bp=({stdout:r,stderr:t,all:o,error:s,signal:i,exitCode:u,command:c,escapedCommand:m,timedOut:b,isCanceled:h,killed:O,parsed:{options:{timeout:E}}})=>{u=u===null?void 0:u,i=i===null?void 0:i;let w=i===void 0?void 0:pp[i].description,_=s&&s.code,T=`Command ${mp({timedOut:b,timeout:E,errorCode:_,signal:i,signalDescription:w,exitCode:u,isCanceled:h})}: ${c}`,x=Object.prototype.toString.call(s)==="[object Error]",C=x?`${T}
${s.message}`:T,z=[C,t,r].filter(Boolean).join(`
`);return x?(s.originalMessage=s.message,s.message=z):s=new Error(z),s.shortMessage=C,s.command=c,s.escapedCommand=m,s.exitCode=u,s.signal=i,s.signalDescription=w,s.stdout=r,s.stderr=t,o!==void 0&&(s.all=o),"bufferedData"in s&&delete s.bufferedData,s.failed=!0,s.timedOut=Boolean(b),s.isCanceled=h,s.killed=O&&!b,s};Wi.exports=bp});var Hi=P((ch,Io)=>{"use strict";var pn=["stdin","stdout","stderr"],hp=r=>pn.some(t=>r[t]!==void 0),Ni=r=>{if(!r)return;let{stdio:t}=r;if(t===void 0)return pn.map(s=>r[s]);if(hp(r))throw new Error(`It's not possible to provide \`stdio\` in combination with one of ${pn.map(s=>`\`${s}\``).join(", ")}`);if(typeof t=="string")return t;if(!Array.isArray(t))throw new TypeError(`Expected \`stdio\` to be of type \`string\` or \`Array\`, got \`${typeof t}\``);let o=Math.max(t.length,pn.length);return Array.from({length:o},(s,i)=>t[i])};Io.exports=Ni;Io.exports.node=r=>{let t=Ni(r);return t==="ipc"?"ipc":t===void 0||typeof t=="string"?[t,t,t,"ipc"]:t.includes("ipc")?t:[...t,"ipc"]}});var Gi=P((dh,mn)=>{mn.exports=["SIGABRT","SIGALRM","SIGHUP","SIGINT","SIGTERM"];process.platform!=="win32"&&mn.exports.push("SIGVTALRM","SIGXCPU","SIGXFSZ","SIGUSR2","SIGTRAP","SIGSYS","SIGQUIT","SIGIOT");process.platform==="linux"&&mn.exports.push("SIGIO","SIGPOLL","SIGPWR","SIGSTKFLT","SIGUNUSED")});var Xi=P((fh,Ot)=>{var U=global.process,Ve=function(r){return r&&typeof r=="object"&&typeof r.removeListener=="function"&&typeof r.emit=="function"&&typeof r.reallyExit=="function"&&typeof r.listeners=="function"&&typeof r.kill=="function"&&typeof r.pid=="number"&&typeof r.on=="function"};Ve(U)?(Ji=require("assert"),St=Gi(),Vi=/^win/i.test(U.platform),sr=require("events"),typeof sr!="function"&&(sr=sr.EventEmitter),U.__signal_exit_emitter__?N=U.__signal_exit_emitter__:(N=U.__signal_exit_emitter__=new sr,N.count=0,N.emitted={}),N.infinite||(N.setMaxListeners(1/0),N.infinite=!0),Ot.exports=function(r,t){if(!Ve(global.process))return function(){};Ji.equal(typeof r,"function","a callback must be provided for exit handler"),_t===!1&&Bo();var o="exit";t&&t.alwaysLast&&(o="afterexit");var s=function(){N.removeListener(o,r),N.listeners("exit").length===0&&N.listeners("afterexit").length===0&&bn()};return N.on(o,r),s},bn=function(){!_t||!Ve(global.process)||(_t=!1,St.forEach(function(t){try{U.removeListener(t,hn[t])}catch{}}),U.emit=yn,U.reallyExit=$o,N.count-=1)},Ot.exports.unload=bn,Ye=function(t,o,s){N.emitted[t]||(N.emitted[t]=!0,N.emit(t,o,s))},hn={},St.forEach(function(r){hn[r]=function(){if(!!Ve(global.process)){var o=U.listeners(r);o.length===N.count&&(bn(),Ye("exit",null,r),Ye("afterexit",null,r),Vi&&r==="SIGHUP"&&(r="SIGINT"),U.kill(U.pid,r))}}}),Ot.exports.signals=function(){return St},_t=!1,Bo=function(){_t||!Ve(global.process)||(_t=!0,N.count+=1,St=St.filter(function(t){try{return U.on(t,hn[t]),!0}catch{return!1}}),U.emit=Ki,U.reallyExit=Yi)},Ot.exports.load=Bo,$o=U.reallyExit,Yi=function(t){!Ve(global.process)||(U.exitCode=t||0,Ye("exit",U.exitCode,null),Ye("afterexit",U.exitCode,null),$o.call(U,U.exitCode))},yn=U.emit,Ki=function(t,o){if(t==="exit"&&Ve(global.process)){o!==void 0&&(U.exitCode=o);var s=yn.apply(this,arguments);return Ye("exit",U.exitCode,null),Ye("afterexit",U.exitCode,null),s}else return yn.apply(this,arguments)}):Ot.exports=function(){return function(){}};var Ji,St,Vi,sr,N,bn,Ye,hn,_t,Bo,$o,Yi,yn,Ki});var eu=P((ph,Zi)=>{"use strict";var yp=require("os"),gp=Xi(),Sp=1e3*5,_p=(r,t="SIGTERM",o={})=>{let s=r(t);return Op(r,t,o,s),s},Op=(r,t,o,s)=>{if(!wp(t,o,s))return;let i=Rp(o),u=setTimeout(()=>{r("SIGKILL")},i);u.unref&&u.unref()},wp=(r,{forceKillAfterTimeout:t},o)=>Ep(r)&&t!==!1&&o,Ep=r=>r===yp.constants.signals.SIGTERM||typeof r=="string"&&r.toUpperCase()==="SIGTERM",Rp=({forceKillAfterTimeout:r=!0})=>{if(r===!0)return Sp;if(!Number.isFinite(r)||r<0)throw new TypeError(`Expected the \`forceKillAfterTimeout\` option to be a non-negative integer, got \`${r}\` (${typeof r})`);return r},jp=(r,t)=>{r.kill()&&(t.isCanceled=!0)},Tp=(r,t,o)=>{r.kill(t),o(Object.assign(new Error("Timed out"),{timedOut:!0,signal:t}))},Pp=(r,{timeout:t,killSignal:o="SIGTERM"},s)=>{if(t===0||t===void 0)return s;let i,u=new Promise((m,b)=>{i=setTimeout(()=>{Tp(r,o,b)},t)}),c=s.finally(()=>{clearTimeout(i)});return Promise.race([u,c])},xp=({timeout:r})=>{if(r!==void 0&&(!Number.isFinite(r)||r<0))throw new TypeError(`Expected the \`timeout\` option to be a non-negative integer, got \`${r}\` (${typeof r})`)},kp=async(r,{cleanup:t,detached:o},s)=>{if(!t||o)return s;let i=gp(()=>{r.kill()});return s.finally(()=>{i()})};Zi.exports={spawnedKill:_p,spawnedCancel:jp,setupTimeout:Pp,validateTimeout:xp,setExitHandler:kp}});var ru=P((mh,tu)=>{"use strict";var we=r=>r!==null&&typeof r=="object"&&typeof r.pipe=="function";we.writable=r=>we(r)&&r.writable!==!1&&typeof r._write=="function"&&typeof r._writableState=="object";we.readable=r=>we(r)&&r.readable!==!1&&typeof r._read=="function"&&typeof r._readableState=="object";we.duplex=r=>we.writable(r)&&we.readable(r);we.transform=r=>we.duplex(r)&&typeof r._transform=="function";tu.exports=we});var ou=P((bh,nu)=>{"use strict";var{PassThrough:Cp}=require("stream");nu.exports=r=>{r={...r};let{array:t}=r,{encoding:o}=r,s=o==="buffer",i=!1;t?i=!(o||s):o=o||"utf8",s&&(o=null);let u=new Cp({objectMode:i});o&&u.setEncoding(o);let c=0,m=[];return u.on("data",b=>{m.push(b),i?c=m.length:c+=b.length}),u.getBufferedValue=()=>t?m:s?Buffer.concat(m,c):m.join(""),u.getBufferedLength=()=>c,u}});var su=P((hh,ar)=>{"use strict";var{constants:vp}=require("buffer"),Ap=require("stream"),{promisify:qp}=require("util"),Ip=ou(),Bp=qp(Ap.pipeline),gn=class extends Error{constructor(){super("maxBuffer exceeded"),this.name="MaxBufferError"}};async function zo(r,t){if(!r)throw new Error("Expected a stream");t={maxBuffer:1/0,...t};let{maxBuffer:o}=t,s=Ip(t);return await new Promise((i,u)=>{let c=m=>{m&&s.getBufferedLength()<=vp.MAX_LENGTH&&(m.bufferedData=s.getBufferedValue()),u(m)};(async()=>{try{await Bp(r,s),i()}catch(m){c(m)}})(),s.on("data",()=>{s.getBufferedLength()>o&&c(new gn)})}),s.getBufferedValue()}ar.exports=zo;ar.exports.buffer=(r,t)=>zo(r,{...t,encoding:"buffer"});ar.exports.array=(r,t)=>zo(r,{...t,array:!0});ar.exports.MaxBufferError=gn});var iu=P((yh,au)=>{"use strict";var{PassThrough:$p}=require("stream");au.exports=function(){var r=[],t=new $p({objectMode:!0});return t.setMaxListeners(0),t.add=o,t.isEmpty=s,t.on("unpipe",i),Array.prototype.slice.call(arguments).forEach(o),t;function o(u){return Array.isArray(u)?(u.forEach(o),this):(r.push(u),u.once("end",i.bind(null,u)),u.once("error",t.emit.bind(t,"error")),u.pipe(t,{end:!1}),this)}function s(){return r.length==0}function i(u){r=r.filter(function(c){return c!==u}),!r.length&&t.readable&&t.end()}}});var du=P((gh,cu)=>{"use strict";var lu=ru(),uu=su(),zp=iu(),Dp=(r,t)=>{t===void 0||r.stdin===void 0||(lu(t)?t.pipe(r.stdin):r.stdin.end(t))},Fp=(r,{all:t})=>{if(!t||!r.stdout&&!r.stderr)return;let o=zp();return r.stdout&&o.add(r.stdout),r.stderr&&o.add(r.stderr),o},Do=async(r,t)=>{if(!!r){r.destroy();try{return await t}catch(o){return o.bufferedData}}},Fo=(r,{encoding:t,buffer:o,maxBuffer:s})=>{if(!(!r||!o))return t?uu(r,{encoding:t,maxBuffer:s}):uu.buffer(r,{maxBuffer:s})},Lp=async({stdout:r,stderr:t,all:o},{encoding:s,buffer:i,maxBuffer:u},c)=>{let m=Fo(r,{encoding:s,buffer:i,maxBuffer:u}),b=Fo(t,{encoding:s,buffer:i,maxBuffer:u}),h=Fo(o,{encoding:s,buffer:i,maxBuffer:u*2});try{return await Promise.all([c,m,b,h])}catch(O){return Promise.all([{error:O,signal:O.signal,timedOut:O.timedOut},Do(r,m),Do(t,b),Do(o,h)])}},Up=({input:r})=>{if(lu(r))throw new TypeError("The `input` option cannot be a stream in sync mode")};cu.exports={handleInput:Dp,makeAllStream:Fp,getSpawnedResult:Lp,validateInputSync:Up}});var pu=P((Sh,fu)=>{"use strict";var Mp=(async()=>{})().constructor.prototype,Wp=["then","catch","finally"].map(r=>[r,Reflect.getOwnPropertyDescriptor(Mp,r)]),Qp=(r,t)=>{for(let[o,s]of Wp){let i=typeof t=="function"?(...u)=>Reflect.apply(s.value,t(),u):s.value.bind(t);Reflect.defineProperty(r,o,{...s,value:i})}return r},Np=r=>new Promise((t,o)=>{r.on("exit",(s,i)=>{t({exitCode:s,signal:i})}),r.on("error",s=>{o(s)}),r.stdin&&r.stdin.on("error",s=>{o(s)})});fu.exports={mergePromise:Qp,getSpawnedPromise:Np}});var hu=P((_h,bu)=>{"use strict";var mu=(r,t=[])=>Array.isArray(t)?[r,...t]:[r],Hp=/^[\w.-]+$/,Gp=/"/g,Jp=r=>typeof r!="string"||Hp.test(r)?r:`"${r.replace(Gp,'\\"')}"`,Vp=(r,t)=>mu(r,t).join(" "),Yp=(r,t)=>mu(r,t).map(o=>Jp(o)).join(" "),Kp=/ +/g,Xp=r=>{let t=[];for(let o of r.trim().split(Kp)){let s=t[t.length-1];s&&s.endsWith("\\")?t[t.length-1]=`${s.slice(0,-1)} ${o}`:t.push(o)}return t};bu.exports={joinCommand:Vp,getEscapedCommand:Yp,parseCommand:Xp}});var Eu=P((Oh,wt)=>{"use strict";var Zp=require("path"),Lo=require("child_process"),em=Pi(),tm=ki(),rm=Ai(),nm=$i(),Sn=Qi(),gu=Hi(),{spawnedKill:om,spawnedCancel:sm,setupTimeout:am,validateTimeout:im,setExitHandler:um}=eu(),{handleInput:lm,getSpawnedResult:cm,makeAllStream:dm,validateInputSync:fm}=du(),{mergePromise:yu,getSpawnedPromise:pm}=pu(),{joinCommand:Su,parseCommand:_u,getEscapedCommand:Ou}=hu(),mm=1e3*1e3*100,bm=({env:r,extendEnv:t,preferLocal:o,localDir:s,execPath:i})=>{let u=t?{...process.env,...r}:r;return o?rm.env({env:u,cwd:s,execPath:i}):u},wu=(r,t,o={})=>{let s=em._parse(r,t,o);return r=s.command,t=s.args,o=s.options,o={maxBuffer:mm,buffer:!0,stripFinalNewline:!0,extendEnv:!0,preferLocal:!1,localDir:o.cwd||process.cwd(),execPath:process.execPath,encoding:"utf8",reject:!0,cleanup:!0,all:!1,windowsHide:!0,...o},o.env=bm(o),o.stdio=gu(o),process.platform==="win32"&&Zp.basename(r,".exe")==="cmd"&&t.unshift("/q"),{file:r,args:t,options:o,parsed:s}},ir=(r,t,o)=>typeof t!="string"&&!Buffer.isBuffer(t)?o===void 0?void 0:"":r.stripFinalNewline?tm(t):t,_n=(r,t,o)=>{let s=wu(r,t,o),i=Su(r,t),u=Ou(r,t);im(s.options);let c;try{c=Lo.spawn(s.file,s.args,s.options)}catch(_){let S=new Lo.ChildProcess,T=Promise.reject(Sn({error:_,stdout:"",stderr:"",all:"",command:i,escapedCommand:u,parsed:s,timedOut:!1,isCanceled:!1,killed:!1}));return yu(S,T)}let m=pm(c),b=am(c,s.options,m),h=um(c,s.options,b),O={isCanceled:!1};c.kill=om.bind(null,c.kill.bind(c)),c.cancel=sm.bind(null,c,O);let w=nm(async()=>{let[{error:_,exitCode:S,signal:T,timedOut:x},C,z,W]=await cm(c,s.options,h),v=ir(s.options,C),D=ir(s.options,z),I=ir(s.options,W);if(_||S!==0||T!==null){let ne=Sn({error:_,exitCode:S,signal:T,stdout:v,stderr:D,all:I,command:i,escapedCommand:u,parsed:s,timedOut:x,isCanceled:O.isCanceled,killed:c.killed});if(!s.options.reject)return ne;throw ne}return{command:i,escapedCommand:u,exitCode:0,stdout:v,stderr:D,all:I,failed:!1,timedOut:!1,isCanceled:!1,killed:!1}});return lm(c,s.options.input),c.all=dm(c,s.options),yu(c,w)};wt.exports=_n;wt.exports.sync=(r,t,o)=>{let s=wu(r,t,o),i=Su(r,t),u=Ou(r,t);fm(s.options);let c;try{c=Lo.spawnSync(s.file,s.args,s.options)}catch(h){throw Sn({error:h,stdout:"",stderr:"",all:"",command:i,escapedCommand:u,parsed:s,timedOut:!1,isCanceled:!1,killed:!1})}let m=ir(s.options,c.stdout,c.error),b=ir(s.options,c.stderr,c.error);if(c.error||c.status!==0||c.signal!==null){let h=Sn({stdout:m,stderr:b,error:c.error,signal:c.signal,exitCode:c.status,command:i,escapedCommand:u,parsed:s,timedOut:c.error&&c.error.code==="ETIMEDOUT",isCanceled:!1,killed:c.signal!==null});if(!s.options.reject)return h;throw h}return{command:i,escapedCommand:u,exitCode:0,stdout:m,stderr:b,failed:!1,timedOut:!1,isCanceled:!1,killed:!1}};wt.exports.command=(r,t)=>{let[o,...s]=_u(r);return _n(o,s,t)};wt.exports.commandSync=(r,t)=>{let[o,...s]=_u(r);return _n.sync(o,s,t)};wt.exports.node=(r,t,o={})=>{t&&!Array.isArray(t)&&typeof t=="object"&&(o=t,t=[]);let s=gu.node(o),i=process.execArgv.filter(m=>!m.startsWith("--inspect")),{nodePath:u=process.execPath,nodeOptions:c=i}=o;return _n(u,[...c,r,...Array.isArray(t)?t:[]],{...o,stdin:void 0,stdout:void 0,stderr:void 0,stdio:s,shell:!1})}});var ym={};Xn(ym,{default:()=>xu});module.exports=ec(ym);var ur=require("@raycast/api");var eo=ae(Zn());function to(r){if(console.log("getError",r),r instanceof eo.HttpError)if(typeof r.data=="string")try{return JSON.parse(r.data).error}catch{return{status:r.status,message:r.data,reason:"UNKNOWN_ERROR"}}else return r.data.error;return{status:500,message:"Unknown error",reason:"UNKNOWN_ERROR"}}function lt(r){if(console.log("--- start getErrorMessage ---"),console.log("error",r),console.log("--- end getErrorMessage ---"),r instanceof eo.HttpError)try{return JSON.parse(r.data).error.message}catch{return typeof r.data=="string"?r.data:r.data.error.message}return String(r)}var Da=require("react"),Oo=require("@raycast/api");var po=require("@raycast/api");var va=ae(require("node:http"),1),Aa=ae(require("node:https"),1),Ge=ae(require("node:zlib"),1),ue=ae(require("node:stream"),1),tr=require("node:buffer");function nc(r){if(!/^data:/i.test(r))throw new TypeError('`uri` does not appear to be a Data URI (must begin with "data:")');r=r.replace(/\r?\n/g,"");let t=r.indexOf(",");if(t===-1||t<=4)throw new TypeError("malformed data: URI");let o=r.substring(5,t).split(";"),s="",i=!1,u=o[0]||"text/plain",c=u;for(let O=1;O<o.length;O++)o[O]==="base64"?i=!0:o[O]&&(c+=`;${o[O]}`,o[O].indexOf("charset=")===0&&(s=o[O].substring(8)));!o[0]&&!s.length&&(c+=";charset=US-ASCII",s="US-ASCII");let m=i?"base64":"ascii",b=unescape(r.substring(t+1)),h=Buffer.from(b,m);return h.type=u,h.typeFull=c,h.charset=s,h}var Zs=nc;var ce=ae(require("node:stream"),1),Pe=require("node:util"),ie=require("node:buffer");Jt();Yr();var Te=class extends Error{constructor(t,o){super(t),Error.captureStackTrace(this,this.constructor),this.type=o}get name(){return this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}};var ee=class extends Te{constructor(t,o,s){super(t,o),s&&(this.code=this.errno=s.code,this.erroredSysCall=s.syscall)}};var Kr=Symbol.toStringTag,ao=r=>typeof r=="object"&&typeof r.append=="function"&&typeof r.delete=="function"&&typeof r.get=="function"&&typeof r.getAll=="function"&&typeof r.has=="function"&&typeof r.set=="function"&&typeof r.sort=="function"&&r[Kr]==="URLSearchParams",Yt=r=>r&&typeof r=="object"&&typeof r.arrayBuffer=="function"&&typeof r.type=="string"&&typeof r.stream=="function"&&typeof r.constructor=="function"&&/^(Blob|File)$/.test(r[Kr]),ua=r=>typeof r=="object"&&(r[Kr]==="AbortSignal"||r[Kr]==="EventTarget"),la=(r,t)=>{let o=new URL(t).hostname,s=new URL(r).hostname;return o===s||o.endsWith(`.${s}`)},ca=(r,t)=>{let o=new URL(t).protocol,s=new URL(r).protocol;return o===s};var gc=(0,Pe.promisify)(ce.default.pipeline),te=Symbol("Body internals"),_e=class{constructor(t,{size:o=0}={}){let s=null;t===null?t=null:ao(t)?t=ie.Buffer.from(t.toString()):Yt(t)||ie.Buffer.isBuffer(t)||(Pe.types.isAnyArrayBuffer(t)?t=ie.Buffer.from(t):ArrayBuffer.isView(t)?t=ie.Buffer.from(t.buffer,t.byteOffset,t.byteLength):t instanceof ce.default||(t instanceof Ne?(t=ia(t),s=t.type.split("=")[1]):t=ie.Buffer.from(String(t))));let i=t;ie.Buffer.isBuffer(t)?i=ce.default.Readable.from(t):Yt(t)&&(i=ce.default.Readable.from(t.stream())),this[te]={body:t,stream:i,boundary:s,disturbed:!1,error:null},this.size=o,t instanceof ce.default&&t.on("error",u=>{let c=u instanceof Te?u:new ee(`Invalid response body while trying to fetch ${this.url}: ${u.message}`,"system",u);this[te].error=c})}get body(){return this[te].stream}get bodyUsed(){return this[te].disturbed}async arrayBuffer(){let{buffer:t,byteOffset:o,byteLength:s}=await lo(this);return t.slice(o,o+s)}async formData(){let t=this.headers.get("content-type");if(t.startsWith("application/x-www-form-urlencoded")){let s=new Ne,i=new URLSearchParams(await this.text());for(let[u,c]of i)s.append(u,c);return s}let{toFormData:o}=await Promise.resolve().then(()=>(ha(),ba));return o(this.body,t)}async blob(){let t=this.headers&&this.headers.get("content-type")||this[te].body&&this[te].body.type||"",o=await this.arrayBuffer();return new je([o],{type:t})}async json(){let t=await this.text();return JSON.parse(t)}async text(){let t=await lo(this);return new TextDecoder().decode(t)}buffer(){return lo(this)}};_e.prototype.buffer=(0,Pe.deprecate)(_e.prototype.buffer,"Please use 'response.arrayBuffer()' instead of 'response.buffer()'","node-fetch#buffer");Object.defineProperties(_e.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0},data:{get:(0,Pe.deprecate)(()=>{},"data doesn't exist, use json(), text(), arrayBuffer(), or body instead","https://github.com/node-fetch/node-fetch/issues/1000 (response)")}});async function lo(r){if(r[te].disturbed)throw new TypeError(`body used already for: ${r.url}`);if(r[te].disturbed=!0,r[te].error)throw r[te].error;let{body:t}=r;if(t===null)return ie.Buffer.alloc(0);if(!(t instanceof ce.default))return ie.Buffer.alloc(0);let o=[],s=0;try{for await(let i of t){if(r.size>0&&s+i.length>r.size){let u=new ee(`content size at ${r.url} over limit: ${r.size}`,"max-size");throw t.destroy(u),u}s+=i.length,o.push(i)}}catch(i){throw i instanceof Te?i:new ee(`Invalid response body while trying to fetch ${r.url}: ${i.message}`,"system",i)}if(t.readableEnded===!0||t._readableState.ended===!0)try{return o.every(i=>typeof i=="string")?ie.Buffer.from(o.join("")):ie.Buffer.concat(o,s)}catch(i){throw new ee(`Could not create Buffer from response body for ${r.url}: ${i.message}`,"system",i)}else throw new ee(`Premature close of server response while trying to fetch ${r.url}`)}var dt=(r,t)=>{let o,s,{body:i}=r[te];if(r.bodyUsed)throw new Error("cannot clone body after it is used");return i instanceof ce.default&&typeof i.getBoundary!="function"&&(o=new ce.PassThrough({highWaterMark:t}),s=new ce.PassThrough({highWaterMark:t}),i.pipe(o),i.pipe(s),r[te].stream=o,i=s),i},Sc=(0,Pe.deprecate)(r=>r.getBoundary(),"form-data doesn't follow the spec and requires special treatment. Use alternative package","https://github.com/node-fetch/node-fetch/issues/1167"),tn=(r,t)=>r===null?null:typeof r=="string"?"text/plain;charset=UTF-8":ao(r)?"application/x-www-form-urlencoded;charset=UTF-8":Yt(r)?r.type||null:ie.Buffer.isBuffer(r)||Pe.types.isAnyArrayBuffer(r)||ArrayBuffer.isView(r)?null:r instanceof Ne?`multipart/form-data; boundary=${t[te].boundary}`:r&&typeof r.getBoundary=="function"?`multipart/form-data;boundary=${Sc(r)}`:r instanceof ce.default?null:"text/plain;charset=UTF-8",ya=r=>{let{body:t}=r[te];return t===null?0:Yt(t)?t.size:ie.Buffer.isBuffer(t)?t.length:t&&typeof t.getLengthSync=="function"&&t.hasKnownLength&&t.hasKnownLength()?t.getLengthSync():null},ga=async(r,{body:t})=>{t===null?r.end():await gc(t,r)};var co=require("node:util"),Zt=ae(require("node:http"),1),rn=typeof Zt.default.validateHeaderName=="function"?Zt.default.validateHeaderName:r=>{if(!/^[\^`\-\w!#$%&'*+.|~]+$/.test(r)){let t=new TypeError(`Header name must be a valid HTTP token [${r}]`);throw Object.defineProperty(t,"code",{value:"ERR_INVALID_HTTP_TOKEN"}),t}},fo=typeof Zt.default.validateHeaderValue=="function"?Zt.default.validateHeaderValue:(r,t)=>{if(/[^\t\u0020-\u007E\u0080-\u00FF]/.test(t)){let o=new TypeError(`Invalid character in header content ["${r}"]`);throw Object.defineProperty(o,"code",{value:"ERR_INVALID_CHAR"}),o}},K=class extends URLSearchParams{constructor(t){let o=[];if(t instanceof K){let s=t.raw();for(let[i,u]of Object.entries(s))o.push(...u.map(c=>[i,c]))}else if(t!=null)if(typeof t=="object"&&!co.types.isBoxedPrimitive(t)){let s=t[Symbol.iterator];if(s==null)o.push(...Object.entries(t));else{if(typeof s!="function")throw new TypeError("Header pairs must be iterable");o=[...t].map(i=>{if(typeof i!="object"||co.types.isBoxedPrimitive(i))throw new TypeError("Each header pair must be an iterable object");return[...i]}).map(i=>{if(i.length!==2)throw new TypeError("Each header pair must be a name/value tuple");return[...i]})}}else throw new TypeError("Failed to construct 'Headers': The provided value is not of type '(sequence<sequence<ByteString>> or record<ByteString, ByteString>)");return o=o.length>0?o.map(([s,i])=>(rn(s),fo(s,String(i)),[String(s).toLowerCase(),String(i)])):void 0,super(o),new Proxy(this,{get(s,i,u){switch(i){case"append":case"set":return(c,m)=>(rn(c),fo(c,String(m)),URLSearchParams.prototype[i].call(s,String(c).toLowerCase(),String(m)));case"delete":case"has":case"getAll":return c=>(rn(c),URLSearchParams.prototype[i].call(s,String(c).toLowerCase()));case"keys":return()=>(s.sort(),new Set(URLSearchParams.prototype.keys.call(s)).keys());default:return Reflect.get(s,i,u)}}})}get[Symbol.toStringTag](){return this.constructor.name}toString(){return Object.prototype.toString.call(this)}get(t){let o=this.getAll(t);if(o.length===0)return null;let s=o.join(", ");return/^content-encoding$/i.test(t)&&(s=s.toLowerCase()),s}forEach(t,o=void 0){for(let s of this.keys())Reflect.apply(t,o,[this.get(s),s,this])}*values(){for(let t of this.keys())yield this.get(t)}*entries(){for(let t of this.keys())yield[t,this.get(t)]}[Symbol.iterator](){return this.entries()}raw(){return[...this.keys()].reduce((t,o)=>(t[o]=this.getAll(o),t),{})}[Symbol.for("nodejs.util.inspect.custom")](){return[...this.keys()].reduce((t,o)=>{let s=this.getAll(o);return o==="host"?t[o]=s[0]:t[o]=s.length>1?s:s[0],t},{})}};Object.defineProperties(K.prototype,["get","entries","forEach","values"].reduce((r,t)=>(r[t]={enumerable:!0},r),{}));function Sa(r=[]){return new K(r.reduce((t,o,s,i)=>(s%2===0&&t.push(i.slice(s,s+2)),t),[]).filter(([t,o])=>{try{return rn(t),fo(t,String(o)),!0}catch{return!1}}))}var _c=new Set([301,302,303,307,308]),nn=r=>_c.has(r);var ye=Symbol("Response internals"),G=class extends _e{constructor(t=null,o={}){super(t,o);let s=o.status!=null?o.status:200,i=new K(o.headers);if(t!==null&&!i.has("Content-Type")){let u=tn(t,this);u&&i.append("Content-Type",u)}this[ye]={type:"default",url:o.url,status:s,statusText:o.statusText||"",headers:i,counter:o.counter,highWaterMark:o.highWaterMark}}get type(){return this[ye].type}get url(){return this[ye].url||""}get status(){return this[ye].status}get ok(){return this[ye].status>=200&&this[ye].status<300}get redirected(){return this[ye].counter>0}get statusText(){return this[ye].statusText}get headers(){return this[ye].headers}get highWaterMark(){return this[ye].highWaterMark}clone(){return new G(dt(this,this.highWaterMark),{type:this.type,url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected,size:this.size,highWaterMark:this.highWaterMark})}static redirect(t,o=302){if(!nn(o))throw new RangeError('Failed to execute "redirect" on "response": Invalid status code');return new G(null,{headers:{location:new URL(t).toString()},status:o})}static error(){let t=new G(null,{status:0,statusText:""});return t[ye].type="error",t}static json(t=void 0,o={}){let s=JSON.stringify(t);if(s===void 0)throw new TypeError("data is not JSON serializable");let i=new K(o&&o.headers);return i.has("content-type")||i.set("content-type","application/json"),new G(s,{...o,headers:i})}get[Symbol.toStringTag](){return"Response"}};Object.defineProperties(G.prototype,{type:{enumerable:!0},url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}});var xa=require("node:url"),ka=require("node:util");var _a=r=>{if(r.search)return r.search;let t=r.href.length-1,o=r.hash||(r.href[t]==="#"?"#":"");return r.href[t-o.length]==="?"?"?":""};var wa=require("node:net");function Oa(r,t=!1){return r==null||(r=new URL(r),/^(about|blob|data):$/.test(r.protocol))?"no-referrer":(r.username="",r.password="",r.hash="",t&&(r.pathname="",r.search=""),r)}var Ea=new Set(["","no-referrer","no-referrer-when-downgrade","same-origin","origin","strict-origin","origin-when-cross-origin","strict-origin-when-cross-origin","unsafe-url"]),Ra="strict-origin-when-cross-origin";function ja(r){if(!Ea.has(r))throw new TypeError(`Invalid referrerPolicy: ${r}`);return r}function Oc(r){if(/^(http|ws)s:$/.test(r.protocol))return!0;let t=r.host.replace(/(^\[)|(]$)/g,""),o=(0,wa.isIP)(t);return o===4&&/^127\./.test(t)||o===6&&/^(((0+:){7})|(::(0+:){0,6}))0*1$/.test(t)?!0:r.host==="localhost"||r.host.endsWith(".localhost")?!1:r.protocol==="file:"}function ft(r){return/^about:(blank|srcdoc)$/.test(r)||r.protocol==="data:"||/^(blob|filesystem):$/.test(r.protocol)?!0:Oc(r)}function Ta(r,{referrerURLCallback:t,referrerOriginCallback:o}={}){if(r.referrer==="no-referrer"||r.referrerPolicy==="")return null;let s=r.referrerPolicy;if(r.referrer==="about:client")return"no-referrer";let i=r.referrer,u=Oa(i),c=Oa(i,!0);u.toString().length>4096&&(u=c),t&&(u=t(u)),o&&(c=o(c));let m=new URL(r.url);switch(s){case"no-referrer":return"no-referrer";case"origin":return c;case"unsafe-url":return u;case"strict-origin":return ft(u)&&!ft(m)?"no-referrer":c.toString();case"strict-origin-when-cross-origin":return u.origin===m.origin?u:ft(u)&&!ft(m)?"no-referrer":c;case"same-origin":return u.origin===m.origin?u:"no-referrer";case"origin-when-cross-origin":return u.origin===m.origin?u:c;case"no-referrer-when-downgrade":return ft(u)&&!ft(m)?"no-referrer":u;default:throw new TypeError(`Invalid referrerPolicy: ${s}`)}}function Pa(r){let t=(r.get("referrer-policy")||"").split(/[,\s]+/),o="";for(let s of t)s&&Ea.has(s)&&(o=s);return o}var Q=Symbol("Request internals"),er=r=>typeof r=="object"&&typeof r[Q]=="object",wc=(0,ka.deprecate)(()=>{},".data is not a valid RequestInit property, use .body instead","https://github.com/node-fetch/node-fetch/issues/1000 (request)"),xe=class extends _e{constructor(t,o={}){let s;if(er(t)?s=new URL(t.url):(s=new URL(t),t={}),s.username!==""||s.password!=="")throw new TypeError(`${s} is an url with embedded credentials.`);let i=o.method||t.method||"GET";if(/^(delete|get|head|options|post|put)$/i.test(i)&&(i=i.toUpperCase()),!er(o)&&"data"in o&&wc(),(o.body!=null||er(t)&&t.body!==null)&&(i==="GET"||i==="HEAD"))throw new TypeError("Request with GET/HEAD method cannot have body");let u=o.body?o.body:er(t)&&t.body!==null?dt(t):null;super(u,{size:o.size||t.size||0});let c=new K(o.headers||t.headers||{});if(u!==null&&!c.has("Content-Type")){let h=tn(u,this);h&&c.set("Content-Type",h)}let m=er(t)?t.signal:null;if("signal"in o&&(m=o.signal),m!=null&&!ua(m))throw new TypeError("Expected signal to be an instanceof AbortSignal or EventTarget");let b=o.referrer==null?t.referrer:o.referrer;if(b==="")b="no-referrer";else if(b){let h=new URL(b);b=/^about:(\/\/)?client$/.test(h)?"client":h}else b=void 0;this[Q]={method:i,redirect:o.redirect||t.redirect||"follow",headers:c,parsedURL:s,signal:m,referrer:b},this.follow=o.follow===void 0?t.follow===void 0?20:t.follow:o.follow,this.compress=o.compress===void 0?t.compress===void 0?!0:t.compress:o.compress,this.counter=o.counter||t.counter||0,this.agent=o.agent||t.agent,this.highWaterMark=o.highWaterMark||t.highWaterMark||16384,this.insecureHTTPParser=o.insecureHTTPParser||t.insecureHTTPParser||!1,this.referrerPolicy=o.referrerPolicy||t.referrerPolicy||""}get method(){return this[Q].method}get url(){return(0,xa.format)(this[Q].parsedURL)}get headers(){return this[Q].headers}get redirect(){return this[Q].redirect}get signal(){return this[Q].signal}get referrer(){if(this[Q].referrer==="no-referrer")return"";if(this[Q].referrer==="client")return"about:client";if(this[Q].referrer)return this[Q].referrer.toString()}get referrerPolicy(){return this[Q].referrerPolicy}set referrerPolicy(t){this[Q].referrerPolicy=ja(t)}clone(){return new xe(this)}get[Symbol.toStringTag](){return"Request"}};Object.defineProperties(xe.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0},referrer:{enumerable:!0},referrerPolicy:{enumerable:!0}});var Ca=r=>{let{parsedURL:t}=r[Q],o=new K(r[Q].headers);o.has("Accept")||o.set("Accept","*/*");let s=null;if(r.body===null&&/^(post|put)$/i.test(r.method)&&(s="0"),r.body!==null){let m=ya(r);typeof m=="number"&&!Number.isNaN(m)&&(s=String(m))}s&&o.set("Content-Length",s),r.referrerPolicy===""&&(r.referrerPolicy=Ra),r.referrer&&r.referrer!=="no-referrer"?r[Q].referrer=Ta(r):r[Q].referrer="no-referrer",r[Q].referrer instanceof URL&&o.set("Referer",r.referrer),o.has("User-Agent")||o.set("User-Agent","node-fetch"),r.compress&&!o.has("Accept-Encoding")&&o.set("Accept-Encoding","gzip, deflate, br");let{agent:i}=r;typeof i=="function"&&(i=i(t)),!o.has("Connection")&&!i&&o.set("Connection","close");let u=_a(t),c={path:t.pathname+u,method:r.method,headers:o[Symbol.for("nodejs.util.inspect.custom")](),insecureHTTPParser:r.insecureHTTPParser,agent:i};return{parsedURL:t,options:c}};var on=class extends Te{constructor(t,o="aborted"){super(t,o)}};Yr();io();var Ec=new Set(["data:","http:","https:"]);async function Je(r,t){return new Promise((o,s)=>{let i=new xe(r,t),{parsedURL:u,options:c}=Ca(i);if(!Ec.has(u.protocol))throw new TypeError(`node-fetch cannot load ${r}. URL scheme "${u.protocol.replace(/:$/,"")}" is not supported.`);if(u.protocol==="data:"){let S=Zs(i.url),T=new G(S,{headers:{"Content-Type":S.typeFull}});o(T);return}let m=(u.protocol==="https:"?Aa.default:va.default).request,{signal:b}=i,h=null,O=()=>{let S=new on("The operation was aborted.");s(S),i.body&&i.body instanceof ue.default.Readable&&i.body.destroy(S),!(!h||!h.body)&&h.body.emit("error",S)};if(b&&b.aborted){O();return}let E=()=>{O(),_()},w=m(u.toString(),c);b&&b.addEventListener("abort",E);let _=()=>{w.abort(),b&&b.removeEventListener("abort",E)};w.on("error",S=>{s(new ee(`request to ${i.url} failed, reason: ${S.message}`,"system",S)),_()}),Rc(w,S=>{h&&h.body&&h.body.destroy(S)}),process.version<"v14"&&w.on("socket",S=>{let T;S.prependListener("end",()=>{T=S._eventsCount}),S.prependListener("close",x=>{if(h&&T<S._eventsCount&&!x){let C=new Error("Premature close");C.code="ERR_STREAM_PREMATURE_CLOSE",h.body.emit("error",C)}})}),w.on("response",S=>{w.setTimeout(0);let T=Sa(S.rawHeaders);if(nn(S.statusCode)){let v=T.get("Location"),D=null;try{D=v===null?null:new URL(v,i.url)}catch{if(i.redirect!=="manual"){s(new ee(`uri requested responds with an invalid redirect URL: ${v}`,"invalid-redirect")),_();return}}switch(i.redirect){case"error":s(new ee(`uri requested responds with a redirect, redirect mode is set to error: ${i.url}`,"no-redirect")),_();return;case"manual":break;case"follow":{if(D===null)break;if(i.counter>=i.follow){s(new ee(`maximum redirect reached at: ${i.url}`,"max-redirect")),_();return}let I={headers:new K(i.headers),follow:i.follow,counter:i.counter+1,agent:i.agent,compress:i.compress,method:i.method,body:dt(i),signal:i.signal,size:i.size,referrer:i.referrer,referrerPolicy:i.referrerPolicy};if(!la(i.url,D)||!ca(i.url,D))for(let V of["authorization","www-authenticate","cookie","cookie2"])I.headers.delete(V);if(S.statusCode!==303&&i.body&&t.body instanceof ue.default.Readable){s(new ee("Cannot follow redirect with body being a readable stream","unsupported-redirect")),_();return}(S.statusCode===303||(S.statusCode===301||S.statusCode===302)&&i.method==="POST")&&(I.method="GET",I.body=void 0,I.headers.delete("content-length"));let ne=Pa(T);ne&&(I.referrerPolicy=ne),o(Je(new xe(D,I))),_();return}default:return s(new TypeError(`Redirect option '${i.redirect}' is not a valid value of RequestRedirect`))}}b&&S.once("end",()=>{b.removeEventListener("abort",E)});let x=(0,ue.pipeline)(S,new ue.PassThrough,v=>{v&&s(v)});process.version<"v12.10"&&S.on("aborted",E);let C={url:i.url,status:S.statusCode,statusText:S.statusMessage,headers:T,size:i.size,counter:i.counter,highWaterMark:i.highWaterMark},z=T.get("Content-Encoding");if(!i.compress||i.method==="HEAD"||z===null||S.statusCode===204||S.statusCode===304){h=new G(x,C),o(h);return}let W={flush:Ge.default.Z_SYNC_FLUSH,finishFlush:Ge.default.Z_SYNC_FLUSH};if(z==="gzip"||z==="x-gzip"){x=(0,ue.pipeline)(x,Ge.default.createGunzip(W),v=>{v&&s(v)}),h=new G(x,C),o(h);return}if(z==="deflate"||z==="x-deflate"){let v=(0,ue.pipeline)(S,new ue.PassThrough,D=>{D&&s(D)});v.once("data",D=>{(D[0]&15)===8?x=(0,ue.pipeline)(x,Ge.default.createInflate(),I=>{I&&s(I)}):x=(0,ue.pipeline)(x,Ge.default.createInflateRaw(),I=>{I&&s(I)}),h=new G(x,C),o(h)}),v.once("end",()=>{h||(h=new G(x,C),o(h))});return}if(z==="br"){x=(0,ue.pipeline)(x,Ge.default.createBrotliDecompress(),v=>{v&&s(v)}),h=new G(x,C),o(h);return}h=new G(x,C),o(h)}),ga(w,i).catch(s)})}function Rc(r,t){let o=tr.Buffer.from(`0\r
\r
`),s=!1,i=!1,u;r.on("response",c=>{let{headers:m}=c;s=m["transfer-encoding"]==="chunked"&&!m["content-length"]}),r.on("socket",c=>{let m=()=>{if(s&&!i){let h=new Error("Premature close");h.code="ERR_STREAM_PREMATURE_CLOSE",t(h)}},b=h=>{i=tr.Buffer.compare(h.slice(-5),o)===0,!i&&u&&(i=tr.Buffer.compare(u.slice(-3),o.slice(0,3))===0&&tr.Buffer.compare(h.slice(-2),o.slice(3))===0),u=h};c.prependListener("close",m),c.on("data",b),r.on("close",()=>{c.removeListener("close",m),c.removeListener("data",b)})})}var mo=require("url"),bo="7bbb789c01ff44ed842907b7a80c404f",jc=["playlist-modify-private","playlist-modify-public","playlist-read-collaborative","playlist-read-private","user-follow-read","user-library-modify","user-library-read","user-modify-playback-state","user-read-currently-playing","user-read-playback-state","user-read-private","user-top-read"].join(" "),pt=new po.OAuth.PKCEClient({redirectMethod:po.OAuth.RedirectMethod.Web,providerName:"Spotify",providerIcon:"spotify-icon.svg",description:"Connect your Spotify account",providerId:"spotify"});async function ho(){let r=await pt.getTokens();if(r?.accessToken){if(r.refreshToken&&r.isExpired()){let i=await Pc(r.refreshToken);return await pt.setTokens(i),i.access_token}return r.accessToken}let t=await pt.authorizationRequest({endpoint:"https://accounts.spotify.com/authorize/",clientId:bo,scope:jc}),{authorizationCode:o}=await pt.authorize(t),s=await Tc(t,o);return await pt.setTokens(s),s.access_token}async function Tc(r,t){let o=new mo.URLSearchParams;o.append("client_id",bo),o.append("code",t),o.append("code_verifier",r.codeVerifier),o.append("grant_type","authorization_code"),o.append("redirect_uri",r.redirectURI);let s=await Je("https://accounts.spotify.com/api/token",{method:"POST",body:o});if(!s.ok)throw new Error(s.statusText);return await s.json()}async function Pc(r){let t=new mo.URLSearchParams;t.append("client_id",bo),t.append("refresh_token",r),t.append("grant_type","refresh_token");let o=await Je("https://accounts.spotify.com/api/token",{method:"POST",body:t});if(!o.ok)throw(await o.json()).error==="invalid_grant"&&(pt.removeTokens(),ho()),new Error(o.statusText);let s=await o.json();return s.refresh_token=s.refresh_token??r,s}var So={};Xn(So,{defaults:()=>rr,deleteMeAlbums:()=>wd,deleteMeAudiobooks:()=>sd,deleteMeEpisodes:()=>Cd,deleteMeFollowing:()=>Yd,deleteMeShows:()=>Id,deleteMeTracks:()=>Td,deletePlaylistsByPlaylistIdFollowers:()=>Ld,deletePlaylistsByPlaylistIdTracks:()=>gd,getAlbums:()=>Mc,getAlbumsById:()=>Uc,getAlbumsByIdTracks:()=>Wc,getArtists:()=>Nc,getArtistsById:()=>Qc,getArtistsByIdAlbums:()=>Hc,getArtistsByIdRelatedArtists:()=>Jc,getArtistsByIdTopTracks:()=>Gc,getAudioAnalysisById:()=>tf,getAudioFeatures:()=>Zd,getAudioFeaturesById:()=>ef,getAudiobooks:()=>td,getAudiobooksById:()=>ed,getAudiobooksByIdChapters:()=>rd,getBrowseCategories:()=>Md,getBrowseCategoriesByCategoryId:()=>Wd,getBrowseCategoriesByCategoryIdPlaylists:()=>Qd,getBrowseFeaturedPlaylists:()=>Ud,getBrowseNewReleases:()=>Gd,getChapters:()=>ud,getChaptersById:()=>id,getEpisodes:()=>Zc,getEpisodesById:()=>Xc,getMarkets:()=>_f,getMe:()=>fd,getMeAlbums:()=>_d,getMeAlbumsContains:()=>Ed,getMeAudiobooks:()=>nd,getMeAudiobooksContains:()=>ad,getMeEpisodes:()=>xd,getMeEpisodesContains:()=>vd,getMeFollowing:()=>Jd,getMeFollowingContains:()=>Kd,getMePlayer:()=>of,getMePlayerCurrentlyPlaying:()=>uf,getMePlayerDevices:()=>af,getMePlayerQueue:()=>gf,getMePlayerRecentlyPlayed:()=>yf,getMePlaylists:()=>Sd,getMeShows:()=>Ad,getMeShowsContains:()=>Bd,getMeTopArtists:()=>Of,getMeTopTracks:()=>wf,getMeTracks:()=>Rd,getMeTracksContains:()=>Pd,getPlaylistsByPlaylistId:()=>pd,getPlaylistsByPlaylistIdFollowersContains:()=>Xd,getPlaylistsByPlaylistIdImages:()=>Nd,getPlaylistsByPlaylistIdTracks:()=>bd,getRecommendations:()=>rf,getRecommendationsAvailableGenreSeeds:()=>nf,getShows:()=>Yc,getShowsById:()=>Vc,getShowsByIdEpisodes:()=>Kc,getTracks:()=>cd,getTracksById:()=>ld,getUsersByUserId:()=>$d,getUsersByUserIdPlaylists:()=>zd,postMePlayerNext:()=>df,postMePlayerPrevious:()=>ff,postMePlayerQueue:()=>Sf,postPlaylistsByPlaylistIdTracks:()=>hd,postUsersByUserIdPlaylists:()=>Dd,putMeAlbums:()=>Od,putMeAudiobooks:()=>od,putMeEpisodes:()=>kd,putMeFollowing:()=>Vd,putMePlayer:()=>sf,putMePlayerPause:()=>cf,putMePlayerPlay:()=>lf,putMePlayerRepeat:()=>mf,putMePlayerSeek:()=>pf,putMePlayerShuffle:()=>hf,putMePlayerVolume:()=>bf,putMeShows:()=>qd,putMeTracks:()=>jd,putPlaylistsByPlaylistId:()=>md,putPlaylistsByPlaylistIdFollowers:()=>Fd,putPlaylistsByPlaylistIdImages:()=>Hd,putPlaylistsByPlaylistIdTracks:()=>yd,search:()=>dd,servers:()=>Lc});var za=ae($a()),p=ae(go()),rr={baseUrl:"https://api.spotify.com/v1"},d=za.runtime(rr),Lc={server1:"https://api.spotify.com/v1"};function Uc(r,{market:t}={},o){return d.ok(d.fetchJson(`/albums/${encodeURIComponent(r)}${p.query(p.explode({market:t}))}`,{...o}))}function Mc(r,{market:t}={},o){return d.ok(d.fetchJson(`/albums${p.query(p.explode({ids:r,market:t}))}`,{...o}))}function Wc(r,{market:t,limit:o,offset:s}={},i){return d.ok(d.fetchJson(`/albums/${encodeURIComponent(r)}/tracks${p.query(p.explode({market:t,limit:o,offset:s}))}`,{...i}))}function Qc(r,t){return d.ok(d.fetchJson(`/artists/${encodeURIComponent(r)}`,{...t}))}function Nc(r,t){return d.ok(d.fetchJson(`/artists${p.query(p.explode({ids:r}))}`,{...t}))}function Hc(r,{includeGroups:t,market:o,limit:s,offset:i}={},u){return d.ok(d.fetchJson(`/artists/${encodeURIComponent(r)}/albums${p.query(p.explode({include_groups:t,market:o,limit:s,offset:i}))}`,{...u}))}function Gc(r,{market:t}={},o){return d.ok(d.fetchJson(`/artists/${encodeURIComponent(r)}/top-tracks${p.query(p.explode({market:t}))}`,{...o}))}function Jc(r,t){return d.ok(d.fetchJson(`/artists/${encodeURIComponent(r)}/related-artists`,{...t}))}function Vc(r,{market:t}={},o){return d.ok(d.fetchJson(`/shows/${encodeURIComponent(r)}${p.query(p.explode({market:t}))}`,{...o}))}function Yc(r,{market:t}={},o){return d.ok(d.fetchJson(`/shows${p.query(p.explode({market:t,ids:r}))}`,{...o}))}function Kc(r,{market:t,limit:o,offset:s}={},i){return d.ok(d.fetchJson(`/shows/${encodeURIComponent(r)}/episodes${p.query(p.explode({market:t,limit:o,offset:s}))}`,{...i}))}function Xc(r,{market:t}={},o){return d.ok(d.fetchJson(`/episodes/${encodeURIComponent(r)}${p.query(p.explode({market:t}))}`,{...o}))}function Zc(r,{market:t}={},o){return d.ok(d.fetchJson(`/episodes${p.query(p.explode({ids:r,market:t}))}`,{...o}))}function ed(r,{market:t}={},o){return d.ok(d.fetchJson(`/audiobooks/${encodeURIComponent(r)}${p.query(p.explode({market:t}))}`,{...o}))}function td(r,{market:t}={},o){return d.ok(d.fetchJson(`/audiobooks${p.query(p.explode({ids:r,market:t}))}`,{...o}))}function rd(r,{market:t,limit:o,offset:s}={},i){return d.ok(d.fetchJson(`/audiobooks/${encodeURIComponent(r)}/chapters${p.query(p.explode({market:t,limit:o,offset:s}))}`,{...i}))}function nd({limit:r,offset:t}={},o){return d.ok(d.fetchJson(`/me/audiobooks${p.query(p.explode({limit:r,offset:t}))}`,{...o}))}function od(r,t){return d.ok(d.fetchJson(`/me/audiobooks${p.query(p.explode({ids:r}))}`,{...t,method:"PUT"}))}function sd(r,t){return d.ok(d.fetchJson(`/me/audiobooks${p.query(p.explode({ids:r}))}`,{...t,method:"DELETE"}))}function ad(r,t){return d.ok(d.fetchJson(`/me/audiobooks/contains${p.query(p.explode({ids:r}))}`,{...t}))}function id(r,{market:t}={},o){return d.ok(d.fetchJson(`/chapters/${encodeURIComponent(r)}${p.query(p.explode({market:t}))}`,{...o}))}function ud(r,{market:t}={},o){return d.ok(d.fetchJson(`/chapters${p.query(p.explode({ids:r,market:t}))}`,{...o}))}function ld(r,{market:t}={},o){return d.ok(d.fetchJson(`/tracks/${encodeURIComponent(r)}${p.query(p.explode({market:t}))}`,{...o}))}function cd(r,{market:t}={},o){return d.ok(d.fetchJson(`/tracks${p.query(p.explode({market:t,ids:r}))}`,{...o}))}function dd(r,t,{market:o,limit:s,offset:i,includeExternal:u}={},c){return d.ok(d.fetchJson(`/search${p.query(p.explode({q:r,market:o,limit:s,offset:i,include_external:u}),p.form({type:t}))}`,{...c}))}function fd(r){return d.ok(d.fetchJson("/me",{...r}))}function pd(r,{market:t,fields:o,additionalTypes:s}={},i){return d.ok(d.fetchJson(`/playlists/${encodeURIComponent(r)}${p.query(p.explode({market:t,fields:o,additional_types:s}))}`,{...i}))}function md(r,t,o){return d.ok(d.fetchJson(`/playlists/${encodeURIComponent(r)}`,d.json({...o,method:"PUT",body:t})))}function bd(r,{market:t,fields:o,limit:s,offset:i,additionalTypes:u}={},c){return d.ok(d.fetchJson(`/playlists/${encodeURIComponent(r)}/tracks${p.query(p.explode({market:t,fields:o,limit:s,offset:i,additional_types:u}))}`,{...c}))}function hd(r,t,{position:o,uris:s}={},i){return d.ok(d.fetchJson(`/playlists/${encodeURIComponent(r)}/tracks${p.query(p.explode({position:o,uris:s}))}`,d.json({...i,method:"POST",body:t})))}function yd(r,t,{uris:o}={},s){return d.ok(d.fetchJson(`/playlists/${encodeURIComponent(r)}/tracks${p.query(p.explode({uris:o}))}`,d.json({...s,method:"PUT",body:t})))}function gd(r,t,o){return d.ok(d.fetchJson(`/playlists/${encodeURIComponent(r)}/tracks`,d.json({...o,method:"DELETE",body:t})))}function Sd({limit:r,offset:t}={},o){return d.ok(d.fetchJson(`/me/playlists${p.query(p.explode({limit:r,offset:t}))}`,{...o}))}function _d({limit:r,offset:t,market:o}={},s){return d.ok(d.fetchJson(`/me/albums${p.query(p.explode({limit:r,offset:t,market:o}))}`,{...s}))}function Od(r,t,o){return d.ok(d.fetchJson(`/me/albums${p.query(p.explode({ids:r}))}`,d.json({...o,method:"PUT",body:t})))}function wd(r,t,o){return d.ok(d.fetchJson(`/me/albums${p.query(p.explode({ids:r}))}`,d.json({...o,method:"DELETE",body:t})))}function Ed(r,t){return d.ok(d.fetchJson(`/me/albums/contains${p.query(p.explode({ids:r}))}`,{...t}))}function Rd({market:r,limit:t,offset:o}={},s){return d.ok(d.fetchJson(`/me/tracks${p.query(p.explode({market:r,limit:t,offset:o}))}`,{...s}))}function jd(r,t,o){return d.ok(d.fetchJson(`/me/tracks${p.query(p.explode({ids:r}))}`,d.json({...o,method:"PUT",body:t})))}function Td(r,t,o){return d.ok(d.fetchJson(`/me/tracks${p.query(p.explode({ids:r}))}`,d.json({...o,method:"DELETE",body:t})))}function Pd(r,t){return d.ok(d.fetchJson(`/me/tracks/contains${p.query(p.explode({ids:r}))}`,{...t}))}function xd({market:r,limit:t,offset:o}={},s){return d.ok(d.fetchJson(`/me/episodes${p.query(p.explode({market:r,limit:t,offset:o}))}`,{...s}))}function kd(r,t,o){return d.ok(d.fetchJson(`/me/episodes${p.query(p.explode({ids:r}))}`,d.json({...o,method:"PUT",body:t})))}function Cd(r,t,o){return d.ok(d.fetchJson(`/me/episodes${p.query(p.explode({ids:r}))}`,d.json({...o,method:"DELETE",body:t})))}function vd(r,t){return d.ok(d.fetchJson(`/me/episodes/contains${p.query(p.explode({ids:r}))}`,{...t}))}function Ad({limit:r,offset:t}={},o){return d.ok(d.fetchJson(`/me/shows${p.query(p.explode({limit:r,offset:t}))}`,{...o}))}function qd(r,t,o){return d.ok(d.fetchJson(`/me/shows${p.query(p.explode({ids:r}))}`,d.json({...o,method:"PUT",body:t})))}function Id(r,t,{market:o}={},s){return d.ok(d.fetchJson(`/me/shows${p.query(p.explode({ids:r,market:o}))}`,d.json({...s,method:"DELETE",body:t})))}function Bd(r,t){return d.ok(d.fetchJson(`/me/shows/contains${p.query(p.explode({ids:r}))}`,{...t}))}function $d(r,t){return d.ok(d.fetchJson(`/users/${encodeURIComponent(r)}`,{...t}))}function zd(r,{limit:t,offset:o}={},s){return d.ok(d.fetchJson(`/users/${encodeURIComponent(r)}/playlists${p.query(p.explode({limit:t,offset:o}))}`,{...s}))}function Dd(r,t,o){return d.ok(d.fetchJson(`/users/${encodeURIComponent(r)}/playlists`,d.json({...o,method:"POST",body:t})))}function Fd(r,t,o){return d.ok(d.fetchJson(`/playlists/${encodeURIComponent(r)}/followers`,d.json({...o,method:"PUT",body:t})))}function Ld(r,t){return d.ok(d.fetchJson(`/playlists/${encodeURIComponent(r)}/followers`,{...t,method:"DELETE"}))}function Ud({country:r,locale:t,timestamp:o,limit:s,offset:i}={},u){return d.ok(d.fetchJson(`/browse/featured-playlists${p.query(p.explode({country:r,locale:t,timestamp:o,limit:s,offset:i}))}`,{...u}))}function Md({country:r,locale:t,limit:o,offset:s}={},i){return d.ok(d.fetchJson(`/browse/categories${p.query(p.explode({country:r,locale:t,limit:o,offset:s}))}`,{...i}))}function Wd(r,{country:t,locale:o}={},s){return d.ok(d.fetchJson(`/browse/categories/${encodeURIComponent(r)}${p.query(p.explode({country:t,locale:o}))}`,{...s}))}function Qd(r,{country:t,limit:o,offset:s}={},i){return d.ok(d.fetchJson(`/browse/categories/${encodeURIComponent(r)}/playlists${p.query(p.explode({country:t,limit:o,offset:s}))}`,{...i}))}function Nd(r,t){return d.ok(d.fetchJson(`/playlists/${encodeURIComponent(r)}/images`,{...t}))}function Hd(r,t,o){return d.ok(d.fetchJson(`/playlists/${encodeURIComponent(r)}/images`,{...o,method:"PUT",body:t}))}function Gd({country:r,limit:t,offset:o}={},s){return d.ok(d.fetchJson(`/browse/new-releases${p.query(p.explode({country:r,limit:t,offset:o}))}`,{...s}))}function Jd(r,{after:t,limit:o}={},s){return d.ok(d.fetchJson(`/me/following${p.query(p.explode({type:r,after:t,limit:o}))}`,{...s}))}function Vd(r,t,o,s){return d.ok(d.fetchJson(`/me/following${p.query(p.explode({type:r,ids:t}))}`,d.json({...s,method:"PUT",body:o})))}function Yd(r,t,o,s){return d.ok(d.fetchJson(`/me/following${p.query(p.explode({type:r,ids:t}))}`,d.json({...s,method:"DELETE",body:o})))}function Kd(r,t,o){return d.ok(d.fetchJson(`/me/following/contains${p.query(p.explode({type:r,ids:t}))}`,{...o}))}function Xd(r,t,o){return d.ok(d.fetchJson(`/playlists/${encodeURIComponent(r)}/followers/contains${p.query(p.explode({ids:t}))}`,{...o}))}function Zd(r,t){return d.ok(d.fetchJson(`/audio-features${p.query(p.explode({ids:r}))}`,{...t}))}function ef(r,t){return d.ok(d.fetchJson(`/audio-features/${encodeURIComponent(r)}`,{...t}))}function tf(r,t){return d.ok(d.fetchJson(`/audio-analysis/${encodeURIComponent(r)}`,{...t}))}function rf({limit:r,market:t,seedArtists:o,seedGenres:s,seedTracks:i,minAcousticness:u,maxAcousticness:c,targetAcousticness:m,minDanceability:b,maxDanceability:h,targetDanceability:O,minDurationMs:E,maxDurationMs:w,targetDurationMs:_,minEnergy:S,maxEnergy:T,targetEnergy:x,minInstrumentalness:C,maxInstrumentalness:z,targetInstrumentalness:W,minKey:v,maxKey:D,targetKey:I,minLiveness:ne,maxLiveness:V,targetLiveness:lr,minLoudness:jt,maxLoudness:de,targetLoudness:ke,minMode:Tt,maxMode:cr,targetMode:On,minPopularity:Pt,maxPopularity:wn,targetPopularity:dr,minSpeechiness:fr,maxSpeechiness:pr,targetSpeechiness:xt,minTempo:kt,maxTempo:mr,targetTempo:En,minTimeSignature:Rn,maxTimeSignature:fe,targetTimeSignature:oe,minValence:jn,maxValence:br,targetValence:pe}={},Ct){return d.ok(d.fetchJson(`/recommendations${p.query(p.explode({limit:r,market:t,seed_artists:o,seed_genres:s,seed_tracks:i,min_acousticness:u,max_acousticness:c,target_acousticness:m,min_danceability:b,max_danceability:h,target_danceability:O,min_duration_ms:E,max_duration_ms:w,target_duration_ms:_,min_energy:S,max_energy:T,target_energy:x,min_instrumentalness:C,max_instrumentalness:z,target_instrumentalness:W,min_key:v,max_key:D,target_key:I,min_liveness:ne,max_liveness:V,target_liveness:lr,min_loudness:jt,max_loudness:de,target_loudness:ke,min_mode:Tt,max_mode:cr,target_mode:On,min_popularity:Pt,max_popularity:wn,target_popularity:dr,min_speechiness:fr,max_speechiness:pr,target_speechiness:xt,min_tempo:kt,max_tempo:mr,target_tempo:En,min_time_signature:Rn,max_time_signature:fe,target_time_signature:oe,min_valence:jn,max_valence:br,target_valence:pe}))}`,{...Ct}))}function nf(r){return d.ok(d.fetchJson("/recommendations/available-genre-seeds",{...r}))}function of({market:r,additionalTypes:t}={},o){return d.ok(d.fetchJson(`/me/player${p.query(p.explode({market:r,additional_types:t}))}`,{...o}))}function sf(r,t){return d.ok(d.fetchJson("/me/player",d.json({...t,method:"PUT",body:r})))}function af(r){return d.ok(d.fetchJson("/me/player/devices",{...r}))}function uf({market:r,additionalTypes:t}={},o){return d.ok(d.fetchJson(`/me/player/currently-playing${p.query(p.explode({market:r,additional_types:t}))}`,{...o}))}function lf(r,{deviceId:t}={},o){return d.ok(d.fetchJson(`/me/player/play${p.query(p.explode({device_id:t}))}`,d.json({...o,method:"PUT",body:r})))}function cf({deviceId:r}={},t){return d.ok(d.fetchJson(`/me/player/pause${p.query(p.explode({device_id:r}))}`,{...t,method:"PUT"}))}function df({deviceId:r}={},t){return d.ok(d.fetchJson(`/me/player/next${p.query(p.explode({device_id:r}))}`,{...t,method:"POST"}))}function ff({deviceId:r}={},t){return d.ok(d.fetchJson(`/me/player/previous${p.query(p.explode({device_id:r}))}`,{...t,method:"POST"}))}function pf(r,{deviceId:t}={},o){return d.ok(d.fetchJson(`/me/player/seek${p.query(p.explode({position_ms:r,device_id:t}))}`,{...o,method:"PUT"}))}function mf(r,{deviceId:t}={},o){return d.ok(d.fetchJson(`/me/player/repeat${p.query(p.explode({state:r,device_id:t}))}`,{...o,method:"PUT"}))}function bf(r,{deviceId:t}={},o){return d.ok(d.fetchJson(`/me/player/volume${p.query(p.explode({volume_percent:r,device_id:t}))}`,{...o,method:"PUT"}))}function hf(r,{deviceId:t}={},o){return d.ok(d.fetchJson(`/me/player/shuffle${p.query(p.explode({state:r,device_id:t}))}`,{...o,method:"PUT"}))}function yf({limit:r,after:t,before:o}={},s){return d.ok(d.fetchJson(`/me/player/recently-played${p.query(p.explode({limit:r,after:t,before:o}))}`,{...s}))}function gf(r){return d.ok(d.fetchJson("/me/player/queue",{...r}))}function Sf(r,{deviceId:t}={},o){return d.ok(d.fetchJson(`/me/player/queue${p.query(p.explode({uri:r,device_id:t}))}`,{...o,method:"POST"}))}function _f(r){return d.ok(d.fetchJson("/markets",{...r}))}function Of({timeRange:r,limit:t,offset:o}={},s){return d.ok(d.fetchJson(`/me/top/artists${p.query(p.explode({time_range:r,limit:t,offset:o}))}`,{...s}))}function wf({timeRange:r,limit:t,offset:o}={},s){return d.ok(d.fetchJson(`/me/top/tracks${p.query(p.explode({time_range:r,limit:t,offset:o}))}`,{...s}))}var zb=require("react/jsx-runtime"),_o;function mt(){if(!_o)throw new Error("getSpotifyClient must be used when authenticated");return{spotifyClient:_o}}async function Fa(){let r=await ho();rr.headers={Authorization:`Bearer ${r}`},rr.fetch=Je,_o=So}async function La(){let{spotifyClient:r}=mt();try{return await r.getMePlayer({additionalTypes:"episode"})}catch(t){let o=lt(t);throw console.log("getPlaybackState.ts Error:",o),new Error(o)}}var Ru=ae(require("node:process"),1),ju=ae(Eu(),1);async function Ke(r,{humanReadableOutput:t=!0}={}){if(Ru.default.platform!=="darwin")throw new Error("macOS only");let o=t?[]:["-ss"],{stdout:s}=await(0,ju.default)("osascript",["-e",r,o]);return s}var hm=require("@raycast/api");function Et(r){return`
    tell application "Spotify"
      if not application "Spotify" is running then
        activate

        set _maxOpenWaitTimeInSeconds to 5
        set _openCounter to 1
        repeat until application "Spotify" is running
          delay 1
          set _openCounter to _openCounter + 1
          if _openCounter > _maxOpenWaitTimeInSeconds then exit repeat
        end repeat
      end if
      ${r}
    end tell`}async function Tu(){let{spotifyClient:r}=mt();try{await r.putMePlayerPause()}catch(t){let o=lt(t);if(o?.toLocaleLowerCase().includes("restricted device")){let s=Et("pause");await Ke(s);return}throw console.log("pause.ts Error: ",o),new Error(o)}}var Rt={album:"spotify:album:",artist:"spotify:artist:",playlist:"spotify:playlist:",track:"spotify:track:",show:"spotify:show:",episode:"spotify:episode:"};async function Pu({id:r,type:t,contextUri:o}={}){let{spotifyClient:s}=mt();try{!t||!r?await s.putMePlayerPlay():t==="track"?o?await s.putMePlayerPlay({context_uri:o,offset:{uri:`${Rt.track}${r}`}}):await s.putMePlayerPlay({uris:[`${Rt.track}${r}`]}):t==="episode"?await s.putMePlayerPlay({uris:[`${Rt.episode}${r}`]}):await s.putMePlayerPlay({context_uri:`${Rt[t]}${r}`})}catch(i){let u=lt(i);if(u?.toLocaleLowerCase().includes("no active device")||u?.toLocaleLowerCase().includes("restricted device")){if(!t||!r){let c=Et("play");await Ke(c)}else if(t==="track"){let c=Et(`play track "${Rt[t]}${r}"`);await Ke(c)}else{let c=Et(`
          delay 1
          play track "${Rt[t]}${r}"`);await Ke(c)}return}throw console.log("play.ts Error: ",u),new Error(u)}}async function xu(){if(await Fa(),(await La())?.is_playing)try{await Tu(),await(0,ur.showHUD)("Paused")}catch(o){let s=to(o);await(0,ur.showHUD)(s.message)}else try{await Pu(),await(0,ur.showHUD)("Playing")}catch(o){let s=to(o);await(0,ur.showHUD)(s.message)}}0&&(module.exports={});
/*! fetch-blob. MIT License. Jimmy Wärting <https://jimmy.warting.se/opensource> */
/*! formdata-polyfill. MIT License. Jimmy Wärting <https://jimmy.warting.se/opensource> */
/*! node-domexception. MIT License. Jimmy Wärting <https://jimmy.warting.se/opensource> */
