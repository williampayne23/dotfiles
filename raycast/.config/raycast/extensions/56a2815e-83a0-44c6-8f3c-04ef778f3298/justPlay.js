"use strict";var Gl=Object.create;var Nr=Object.defineProperty;var Jl=Object.getOwnPropertyDescriptor;var Vl=Object.getOwnPropertyNames;var Yl=Object.getPrototypeOf,Kl=Object.prototype.hasOwnProperty;var Wt=(r,t)=>()=>(r&&(t=r(r=0)),t);var P=(r,t)=>()=>(t||r((t={exports:{}}).exports,t),t.exports),Xn=(r,t)=>{for(var o in t)Nr(r,o,{get:t[o],enumerable:!0})},Gs=(r,t,o,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of Vl(t))!Kl.call(r,i)&&i!==o&&Nr(r,i,{get:()=>t[i],enumerable:!(s=Jl(t,i))||s.enumerable});return r};var ae=(r,t,o)=>(o=r!=null?Gl(Yl(r)):{},Gs(t||!r||!r.__esModule?Nr(o,"default",{value:r,enumerable:!0}):o,r)),Xl=r=>Gs(Nr({},"__esModule",{value:!0}),r);var Ys=P((Hr,Vs)=>{(function(r,t){typeof Hr=="object"&&typeof Vs<"u"?t(Hr):typeof define=="function"&&define.amd?define(["exports"],t):(r=typeof globalThis<"u"?globalThis:r||self,t(r.WebStreamsPolyfill={}))})(Hr,function(r){"use strict";let t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol:e=>`Symbol(${e})`;function o(){}function s(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global}let i=s();function u(e){return typeof e=="object"&&e!==null||typeof e=="function"}let c=o,m=Promise,b=Promise.prototype.then,h=Promise.resolve.bind(m),O=Promise.reject.bind(m);function E(e){return new m(e)}function w(e){return h(e)}function _(e){return O(e)}function S(e,n,a){return b.call(e,n,a)}function T(e,n,a){S(S(e,n,a),void 0,c)}function x(e,n){T(e,n)}function C(e,n){T(e,void 0,n)}function z(e,n,a){return S(e,n,a)}function W(e){S(e,void 0,c)}let v=(()=>{let e=i&&i.queueMicrotask;if(typeof e=="function")return e;let n=w(void 0);return a=>S(n,a)})();function D(e,n,a){if(typeof e!="function")throw new TypeError("Argument is not a function");return Function.prototype.apply.call(e,n,a)}function I(e,n,a){try{return w(D(e,n,a))}catch(l){return _(l)}}let ne=16384;class V{constructor(){this._cursor=0,this._size=0,this._front={_elements:[],_next:void 0},this._back=this._front,this._cursor=0,this._size=0}get length(){return this._size}push(n){let a=this._back,l=a;a._elements.length===ne-1&&(l={_elements:[],_next:void 0}),a._elements.push(n),l!==a&&(this._back=l,a._next=l),++this._size}shift(){let n=this._front,a=n,l=this._cursor,f=l+1,y=n._elements,g=y[l];return f===ne&&(a=n._next,f=0),--this._size,this._cursor=f,n!==a&&(this._front=a),y[l]=void 0,g}forEach(n){let a=this._cursor,l=this._front,f=l._elements;for(;(a!==f.length||l._next!==void 0)&&!(a===f.length&&(l=l._next,f=l._elements,a=0,f.length===0));)n(f[a]),++a}peek(){let n=this._front,a=this._cursor;return n._elements[a]}}function ar(e,n){e._ownerReadableStream=n,n._reader=e,n._state==="readable"?Et(e):n._state==="closed"?On(e):ir(e,n._storedError)}function wt(e,n){let a=e._ownerReadableStream;return be(a,n)}function de(e){e._ownerReadableStream._state==="readable"?Rt(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):wn(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")),e._ownerReadableStream._reader=void 0,e._ownerReadableStream=void 0}function ke(e){return new TypeError("Cannot "+e+" a stream using a released reader")}function Et(e){e._closedPromise=E((n,a)=>{e._closedPromise_resolve=n,e._closedPromise_reject=a})}function ir(e,n){Et(e),Rt(e,n)}function On(e){Et(e),ur(e)}function Rt(e,n){e._closedPromise_reject!==void 0&&(W(e._closedPromise),e._closedPromise_reject(n),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}function wn(e,n){ir(e,n)}function ur(e){e._closedPromise_resolve!==void 0&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}let lr=t("[[AbortSteps]]"),cr=t("[[ErrorSteps]]"),jt=t("[[CancelSteps]]"),Tt=t("[[PullSteps]]"),dr=Number.isFinite||function(e){return typeof e=="number"&&isFinite(e)},En=Math.trunc||function(e){return e<0?Math.ceil(e):Math.floor(e)};function Rn(e){return typeof e=="object"||typeof e=="function"}function fe(e,n){if(e!==void 0&&!Rn(e))throw new TypeError(`${n} is not an object.`)}function oe(e,n){if(typeof e!="function")throw new TypeError(`${n} is not a function.`)}function jn(e){return typeof e=="object"&&e!==null||typeof e=="function"}function fr(e,n){if(!jn(e))throw new TypeError(`${n} is not an object.`)}function pe(e,n,a){if(e===void 0)throw new TypeError(`Parameter ${n} is required in '${a}'.`)}function Pt(e,n,a){if(e===void 0)throw new TypeError(`${n} is required in '${a}'.`)}function Tn(e){return Number(e)}function Fo(e){return e===0?0:e}function Pu(e){return Fo(En(e))}function Lo(e,n){let l=Number.MAX_SAFE_INTEGER,f=Number(e);if(f=Fo(f),!dr(f))throw new TypeError(`${n} is not a finite number`);if(f=Pu(f),f<0||f>l)throw new TypeError(`${n} is outside the accepted range of ${0} to ${l}, inclusive`);return!dr(f)||f===0?0:f}function Pn(e,n){if(!Ie(e))throw new TypeError(`${n} is not a ReadableStream.`)}function Ke(e){return new xt(e)}function Uo(e,n){e._reader._readRequests.push(n)}function xn(e,n,a){let f=e._reader._readRequests.shift();a?f._closeSteps():f._chunkSteps(n)}function pr(e){return e._reader._readRequests.length}function Mo(e){let n=e._reader;return!(n===void 0||!Ce(n))}class xt{constructor(n){if(pe(n,1,"ReadableStreamDefaultReader"),Pn(n,"First parameter"),Be(n))throw new TypeError("This stream has already been locked for exclusive reading by another reader");ar(this,n),this._readRequests=new V}get closed(){return Ce(this)?this._closedPromise:_(mr("closed"))}cancel(n=void 0){return Ce(this)?this._ownerReadableStream===void 0?_(ke("cancel")):wt(this,n):_(mr("cancel"))}read(){if(!Ce(this))return _(mr("read"));if(this._ownerReadableStream===void 0)return _(ke("read from"));let n,a,l=E((y,g)=>{n=y,a=g});return kt(this,{_chunkSteps:y=>n({value:y,done:!1}),_closeSteps:()=>n({value:void 0,done:!0}),_errorSteps:y=>a(y)}),l}releaseLock(){if(!Ce(this))throw mr("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");de(this)}}}Object.defineProperties(xt.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(xt.prototype,t.toStringTag,{value:"ReadableStreamDefaultReader",configurable:!0});function Ce(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_readRequests")?!1:e instanceof xt}function kt(e,n){let a=e._ownerReadableStream;a._disturbed=!0,a._state==="closed"?n._closeSteps():a._state==="errored"?n._errorSteps(a._storedError):a._readableStreamController[Tt](n)}function mr(e){return new TypeError(`ReadableStreamDefaultReader.prototype.${e} can only be used on a ReadableStreamDefaultReader`)}let Wo=Object.getPrototypeOf(Object.getPrototypeOf(async function*(){}).prototype);class Qo{constructor(n,a){this._ongoingPromise=void 0,this._isFinished=!1,this._reader=n,this._preventCancel=a}next(){let n=()=>this._nextSteps();return this._ongoingPromise=this._ongoingPromise?z(this._ongoingPromise,n,n):n(),this._ongoingPromise}return(n){let a=()=>this._returnSteps(n);return this._ongoingPromise?z(this._ongoingPromise,a,a):a()}_nextSteps(){if(this._isFinished)return Promise.resolve({value:void 0,done:!0});let n=this._reader;if(n._ownerReadableStream===void 0)return _(ke("iterate"));let a,l,f=E((g,R)=>{a=g,l=R});return kt(n,{_chunkSteps:g=>{this._ongoingPromise=void 0,v(()=>a({value:g,done:!1}))},_closeSteps:()=>{this._ongoingPromise=void 0,this._isFinished=!0,de(n),a({value:void 0,done:!0})},_errorSteps:g=>{this._ongoingPromise=void 0,this._isFinished=!0,de(n),l(g)}}),f}_returnSteps(n){if(this._isFinished)return Promise.resolve({value:n,done:!0});this._isFinished=!0;let a=this._reader;if(a._ownerReadableStream===void 0)return _(ke("finish iterating"));if(!this._preventCancel){let l=wt(a,n);return de(a),z(l,()=>({value:n,done:!0}))}return de(a),w({value:n,done:!0})}}let No={next(){return Ho(this)?this._asyncIteratorImpl.next():_(Go("next"))},return(e){return Ho(this)?this._asyncIteratorImpl.return(e):_(Go("return"))}};Wo!==void 0&&Object.setPrototypeOf(No,Wo);function xu(e,n){let a=Ke(e),l=new Qo(a,n),f=Object.create(No);return f._asyncIteratorImpl=l,f}function Ho(e){if(!u(e)||!Object.prototype.hasOwnProperty.call(e,"_asyncIteratorImpl"))return!1;try{return e._asyncIteratorImpl instanceof Qo}catch{return!1}}function Go(e){return new TypeError(`ReadableStreamAsyncIterator.${e} can only be used on a ReadableSteamAsyncIterator`)}let Jo=Number.isNaN||function(e){return e!==e};function Ct(e){return e.slice()}function Vo(e,n,a,l,f){new Uint8Array(e).set(new Uint8Array(a,l,f),n)}function hm(e){return e}function br(e){return!1}function Yo(e,n,a){if(e.slice)return e.slice(n,a);let l=a-n,f=new ArrayBuffer(l);return Vo(f,0,e,n,l),f}function ku(e){return!(typeof e!="number"||Jo(e)||e<0)}function Ko(e){let n=Yo(e.buffer,e.byteOffset,e.byteOffset+e.byteLength);return new Uint8Array(n)}function kn(e){let n=e._queue.shift();return e._queueTotalSize-=n.size,e._queueTotalSize<0&&(e._queueTotalSize=0),n.value}function Cn(e,n,a){if(!ku(a)||a===1/0)throw new RangeError("Size must be a finite, non-NaN, non-negative number.");e._queue.push({value:n,size:a}),e._queueTotalSize+=a}function Cu(e){return e._queue.peek().value}function ve(e){e._queue=new V,e._queueTotalSize=0}class vt{constructor(){throw new TypeError("Illegal constructor")}get view(){if(!vn(this))throw Bn("view");return this._view}respond(n){if(!vn(this))throw Bn("respond");if(pe(n,1,"respond"),n=Lo(n,"First parameter"),this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");br(this._view.buffer),_r(this._associatedReadableByteStreamController,n)}respondWithNewView(n){if(!vn(this))throw Bn("respondWithNewView");if(pe(n,1,"respondWithNewView"),!ArrayBuffer.isView(n))throw new TypeError("You can only respond with array buffer views");if(this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");br(n.buffer),Or(this._associatedReadableByteStreamController,n)}}Object.defineProperties(vt.prototype,{respond:{enumerable:!0},respondWithNewView:{enumerable:!0},view:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(vt.prototype,t.toStringTag,{value:"ReadableStreamBYOBRequest",configurable:!0});class Xe{constructor(){throw new TypeError("Illegal constructor")}get byobRequest(){if(!De(this))throw qt("byobRequest");return In(this)}get desiredSize(){if(!De(this))throw qt("desiredSize");return ss(this)}close(){if(!De(this))throw qt("close");if(this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");let n=this._controlledReadableByteStream._state;if(n!=="readable")throw new TypeError(`The stream (in ${n} state) is not in the readable state and cannot be closed`);At(this)}enqueue(n){if(!De(this))throw qt("enqueue");if(pe(n,1,"enqueue"),!ArrayBuffer.isView(n))throw new TypeError("chunk must be an array buffer view");if(n.byteLength===0)throw new TypeError("chunk must have non-zero byteLength");if(n.buffer.byteLength===0)throw new TypeError("chunk's buffer must have non-zero byteLength");if(this._closeRequested)throw new TypeError("stream is closed or draining");let a=this._controlledReadableByteStream._state;if(a!=="readable")throw new TypeError(`The stream (in ${a} state) is not in the readable state and cannot be enqueued to`);Sr(this,n)}error(n=void 0){if(!De(this))throw qt("error");me(this,n)}[jt](n){Xo(this),ve(this);let a=this._cancelAlgorithm(n);return gr(this),a}[Tt](n){let a=this._controlledReadableByteStream;if(this._queueTotalSize>0){let f=this._queue.shift();this._queueTotalSize-=f.byteLength,rs(this);let y=new Uint8Array(f.buffer,f.byteOffset,f.byteLength);n._chunkSteps(y);return}let l=this._autoAllocateChunkSize;if(l!==void 0){let f;try{f=new ArrayBuffer(l)}catch(g){n._errorSteps(g);return}let y={buffer:f,bufferByteLength:l,byteOffset:0,byteLength:l,bytesFilled:0,elementSize:1,viewConstructor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(y)}Uo(a,n),Fe(this)}}Object.defineProperties(Xe.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},byobRequest:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Xe.prototype,t.toStringTag,{value:"ReadableByteStreamController",configurable:!0});function De(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledReadableByteStream")?!1:e instanceof Xe}function vn(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_associatedReadableByteStreamController")?!1:e instanceof vt}function Fe(e){if(!Iu(e))return;if(e._pulling){e._pullAgain=!0;return}e._pulling=!0;let a=e._pullAlgorithm();T(a,()=>{e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,Fe(e))},l=>{me(e,l)})}function Xo(e){qn(e),e._pendingPullIntos=new V}function An(e,n){let a=!1;e._state==="closed"&&(a=!0);let l=Zo(n);n.readerType==="default"?xn(e,l,a):zu(e,l,a)}function Zo(e){let n=e.bytesFilled,a=e.elementSize;return new e.viewConstructor(e.buffer,e.byteOffset,n/a)}function hr(e,n,a,l){e._queue.push({buffer:n,byteOffset:a,byteLength:l}),e._queueTotalSize+=l}function es(e,n){let a=n.elementSize,l=n.bytesFilled-n.bytesFilled%a,f=Math.min(e._queueTotalSize,n.byteLength-n.bytesFilled),y=n.bytesFilled+f,g=y-y%a,R=f,k=!1;g>l&&(R=g-n.bytesFilled,k=!0);let q=e._queue;for(;R>0;){let B=q.peek(),$=Math.min(R,B.byteLength),M=n.byteOffset+n.bytesFilled;Vo(n.buffer,M,B.buffer,B.byteOffset,$),B.byteLength===$?q.shift():(B.byteOffset+=$,B.byteLength-=$),e._queueTotalSize-=$,ts(e,$,n),R-=$}return k}function ts(e,n,a){a.bytesFilled+=n}function rs(e){e._queueTotalSize===0&&e._closeRequested?(gr(e),Ut(e._controlledReadableByteStream)):Fe(e)}function qn(e){e._byobRequest!==null&&(e._byobRequest._associatedReadableByteStreamController=void 0,e._byobRequest._view=null,e._byobRequest=null)}function ns(e){for(;e._pendingPullIntos.length>0;){if(e._queueTotalSize===0)return;let n=e._pendingPullIntos.peek();es(e,n)&&(yr(e),An(e._controlledReadableByteStream,n))}}function vu(e,n,a){let l=e._controlledReadableByteStream,f=1;n.constructor!==DataView&&(f=n.constructor.BYTES_PER_ELEMENT);let y=n.constructor,g=n.buffer,R={buffer:g,bufferByteLength:g.byteLength,byteOffset:n.byteOffset,byteLength:n.byteLength,bytesFilled:0,elementSize:f,viewConstructor:y,readerType:"byob"};if(e._pendingPullIntos.length>0){e._pendingPullIntos.push(R),us(l,a);return}if(l._state==="closed"){let k=new y(R.buffer,R.byteOffset,0);a._closeSteps(k);return}if(e._queueTotalSize>0){if(es(e,R)){let k=Zo(R);rs(e),a._chunkSteps(k);return}if(e._closeRequested){let k=new TypeError("Insufficient bytes to fill elements in the given buffer");me(e,k),a._errorSteps(k);return}}e._pendingPullIntos.push(R),us(l,a),Fe(e)}function Au(e,n){let a=e._controlledReadableByteStream;if($n(a))for(;ls(a)>0;){let l=yr(e);An(a,l)}}function qu(e,n,a){if(ts(e,n,a),a.bytesFilled<a.elementSize)return;yr(e);let l=a.bytesFilled%a.elementSize;if(l>0){let f=a.byteOffset+a.bytesFilled,y=Yo(a.buffer,f-l,f);hr(e,y,0,y.byteLength)}a.bytesFilled-=l,An(e._controlledReadableByteStream,a),ns(e)}function os(e,n){let a=e._pendingPullIntos.peek();qn(e),e._controlledReadableByteStream._state==="closed"?Au(e):qu(e,n,a),Fe(e)}function yr(e){return e._pendingPullIntos.shift()}function Iu(e){let n=e._controlledReadableByteStream;return n._state!=="readable"||e._closeRequested||!e._started?!1:!!(Mo(n)&&pr(n)>0||$n(n)&&ls(n)>0||ss(e)>0)}function gr(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0}function At(e){let n=e._controlledReadableByteStream;if(!(e._closeRequested||n._state!=="readable")){if(e._queueTotalSize>0){e._closeRequested=!0;return}if(e._pendingPullIntos.length>0&&e._pendingPullIntos.peek().bytesFilled>0){let l=new TypeError("Insufficient bytes to fill elements in the given buffer");throw me(e,l),l}gr(e),Ut(n)}}function Sr(e,n){let a=e._controlledReadableByteStream;if(e._closeRequested||a._state!=="readable")return;let l=n.buffer,f=n.byteOffset,y=n.byteLength,g=l;if(e._pendingPullIntos.length>0){let R=e._pendingPullIntos.peek();br(R.buffer),R.buffer=R.buffer}if(qn(e),Mo(a))if(pr(a)===0)hr(e,g,f,y);else{e._pendingPullIntos.length>0&&yr(e);let R=new Uint8Array(g,f,y);xn(a,R,!1)}else $n(a)?(hr(e,g,f,y),ns(e)):hr(e,g,f,y);Fe(e)}function me(e,n){let a=e._controlledReadableByteStream;a._state==="readable"&&(Xo(e),ve(e),gr(e),qs(a,n))}function In(e){if(e._byobRequest===null&&e._pendingPullIntos.length>0){let n=e._pendingPullIntos.peek(),a=new Uint8Array(n.buffer,n.byteOffset+n.bytesFilled,n.byteLength-n.bytesFilled),l=Object.create(vt.prototype);$u(l,e,a),e._byobRequest=l}return e._byobRequest}function ss(e){let n=e._controlledReadableByteStream._state;return n==="errored"?null:n==="closed"?0:e._strategyHWM-e._queueTotalSize}function _r(e,n){let a=e._pendingPullIntos.peek();if(e._controlledReadableByteStream._state==="closed"){if(n!==0)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream")}else{if(n===0)throw new TypeError("bytesWritten must be greater than 0 when calling respond() on a readable stream");if(a.bytesFilled+n>a.byteLength)throw new RangeError("bytesWritten out of range")}a.buffer=a.buffer,os(e,n)}function Or(e,n){let a=e._pendingPullIntos.peek();if(e._controlledReadableByteStream._state==="closed"){if(n.byteLength!==0)throw new TypeError("The view's length must be 0 when calling respondWithNewView() on a closed stream")}else if(n.byteLength===0)throw new TypeError("The view's length must be greater than 0 when calling respondWithNewView() on a readable stream");if(a.byteOffset+a.bytesFilled!==n.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(a.bufferByteLength!==n.buffer.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");if(a.bytesFilled+n.byteLength>a.byteLength)throw new RangeError("The region specified by view is larger than byobRequest");let f=n.byteLength;a.buffer=n.buffer,os(e,f)}function as(e,n,a,l,f,y,g){n._controlledReadableByteStream=e,n._pullAgain=!1,n._pulling=!1,n._byobRequest=null,n._queue=n._queueTotalSize=void 0,ve(n),n._closeRequested=!1,n._started=!1,n._strategyHWM=y,n._pullAlgorithm=l,n._cancelAlgorithm=f,n._autoAllocateChunkSize=g,n._pendingPullIntos=new V,e._readableStreamController=n;let R=a();T(w(R),()=>{n._started=!0,Fe(n)},k=>{me(n,k)})}function Bu(e,n,a){let l=Object.create(Xe.prototype),f=()=>{},y=()=>w(void 0),g=()=>w(void 0);n.start!==void 0&&(f=()=>n.start(l)),n.pull!==void 0&&(y=()=>n.pull(l)),n.cancel!==void 0&&(g=k=>n.cancel(k));let R=n.autoAllocateChunkSize;if(R===0)throw new TypeError("autoAllocateChunkSize must be greater than 0");as(e,l,f,y,g,a,R)}function $u(e,n,a){e._associatedReadableByteStreamController=n,e._view=a}function Bn(e){return new TypeError(`ReadableStreamBYOBRequest.prototype.${e} can only be used on a ReadableStreamBYOBRequest`)}function qt(e){return new TypeError(`ReadableByteStreamController.prototype.${e} can only be used on a ReadableByteStreamController`)}function is(e){return new It(e)}function us(e,n){e._reader._readIntoRequests.push(n)}function zu(e,n,a){let f=e._reader._readIntoRequests.shift();a?f._closeSteps(n):f._chunkSteps(n)}function ls(e){return e._reader._readIntoRequests.length}function $n(e){let n=e._reader;return!(n===void 0||!Le(n))}class It{constructor(n){if(pe(n,1,"ReadableStreamBYOBReader"),Pn(n,"First parameter"),Be(n))throw new TypeError("This stream has already been locked for exclusive reading by another reader");if(!De(n._readableStreamController))throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");ar(this,n),this._readIntoRequests=new V}get closed(){return Le(this)?this._closedPromise:_(wr("closed"))}cancel(n=void 0){return Le(this)?this._ownerReadableStream===void 0?_(ke("cancel")):wt(this,n):_(wr("cancel"))}read(n){if(!Le(this))return _(wr("read"));if(!ArrayBuffer.isView(n))return _(new TypeError("view must be an array buffer view"));if(n.byteLength===0)return _(new TypeError("view must have non-zero byteLength"));if(n.buffer.byteLength===0)return _(new TypeError("view's buffer must have non-zero byteLength"));if(br(n.buffer),this._ownerReadableStream===void 0)return _(ke("read from"));let a,l,f=E((g,R)=>{a=g,l=R});return cs(this,n,{_chunkSteps:g=>a({value:g,done:!1}),_closeSteps:g=>a({value:g,done:!0}),_errorSteps:g=>l(g)}),f}releaseLock(){if(!Le(this))throw wr("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readIntoRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");de(this)}}}Object.defineProperties(It.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(It.prototype,t.toStringTag,{value:"ReadableStreamBYOBReader",configurable:!0});function Le(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_readIntoRequests")?!1:e instanceof It}function cs(e,n,a){let l=e._ownerReadableStream;l._disturbed=!0,l._state==="errored"?a._errorSteps(l._storedError):vu(l._readableStreamController,n,a)}function wr(e){return new TypeError(`ReadableStreamBYOBReader.prototype.${e} can only be used on a ReadableStreamBYOBReader`)}function Bt(e,n){let{highWaterMark:a}=e;if(a===void 0)return n;if(Jo(a)||a<0)throw new RangeError("Invalid highWaterMark");return a}function Er(e){let{size:n}=e;return n||(()=>1)}function Rr(e,n){fe(e,n);let a=e?.highWaterMark,l=e?.size;return{highWaterMark:a===void 0?void 0:Tn(a),size:l===void 0?void 0:Du(l,`${n} has member 'size' that`)}}function Du(e,n){return oe(e,n),a=>Tn(e(a))}function Fu(e,n){fe(e,n);let a=e?.abort,l=e?.close,f=e?.start,y=e?.type,g=e?.write;return{abort:a===void 0?void 0:Lu(a,e,`${n} has member 'abort' that`),close:l===void 0?void 0:Uu(l,e,`${n} has member 'close' that`),start:f===void 0?void 0:Mu(f,e,`${n} has member 'start' that`),write:g===void 0?void 0:Wu(g,e,`${n} has member 'write' that`),type:y}}function Lu(e,n,a){return oe(e,a),l=>I(e,n,[l])}function Uu(e,n,a){return oe(e,a),()=>I(e,n,[])}function Mu(e,n,a){return oe(e,a),l=>D(e,n,[l])}function Wu(e,n,a){return oe(e,a),(l,f)=>I(e,n,[l,f])}function ds(e,n){if(!Ze(e))throw new TypeError(`${n} is not a WritableStream.`)}function Qu(e){if(typeof e!="object"||e===null)return!1;try{return typeof e.aborted=="boolean"}catch{return!1}}let Nu=typeof AbortController=="function";function Hu(){if(Nu)return new AbortController}class $t{constructor(n={},a={}){n===void 0?n=null:fr(n,"First parameter");let l=Rr(a,"Second parameter"),f=Fu(n,"First parameter");if(ps(this),f.type!==void 0)throw new RangeError("Invalid type is specified");let g=Er(l),R=Bt(l,1);al(this,f,R,g)}get locked(){if(!Ze(this))throw kr("locked");return et(this)}abort(n=void 0){return Ze(this)?et(this)?_(new TypeError("Cannot abort a stream that already has a writer")):jr(this,n):_(kr("abort"))}close(){return Ze(this)?et(this)?_(new TypeError("Cannot close a stream that already has a writer")):ge(this)?_(new TypeError("Cannot close an already-closing stream")):ms(this):_(kr("close"))}getWriter(){if(!Ze(this))throw kr("getWriter");return fs(this)}}Object.defineProperties($t.prototype,{abort:{enumerable:!0},close:{enumerable:!0},getWriter:{enumerable:!0},locked:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty($t.prototype,t.toStringTag,{value:"WritableStream",configurable:!0});function fs(e){return new zt(e)}function Gu(e,n,a,l,f=1,y=()=>1){let g=Object.create($t.prototype);ps(g);let R=Object.create(tt.prototype);return _s(g,R,e,n,a,l,f,y),g}function ps(e){e._state="writable",e._storedError=void 0,e._writer=void 0,e._writableStreamController=void 0,e._writeRequests=new V,e._inFlightWriteRequest=void 0,e._closeRequest=void 0,e._inFlightCloseRequest=void 0,e._pendingAbortRequest=void 0,e._backpressure=!1}function Ze(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_writableStreamController")?!1:e instanceof $t}function et(e){return e._writer!==void 0}function jr(e,n){var a;if(e._state==="closed"||e._state==="errored")return w(void 0);e._writableStreamController._abortReason=n,(a=e._writableStreamController._abortController)===null||a===void 0||a.abort();let l=e._state;if(l==="closed"||l==="errored")return w(void 0);if(e._pendingAbortRequest!==void 0)return e._pendingAbortRequest._promise;let f=!1;l==="erroring"&&(f=!0,n=void 0);let y=E((g,R)=>{e._pendingAbortRequest={_promise:void 0,_resolve:g,_reject:R,_reason:n,_wasAlreadyErroring:f}});return e._pendingAbortRequest._promise=y,f||Dn(e,n),y}function ms(e){let n=e._state;if(n==="closed"||n==="errored")return _(new TypeError(`The stream (in ${n} state) is not in the writable state and cannot be closed`));let a=E((f,y)=>{let g={_resolve:f,_reject:y};e._closeRequest=g}),l=e._writer;return l!==void 0&&e._backpressure&&n==="writable"&&Gn(l),il(e._writableStreamController),a}function Ju(e){return E((a,l)=>{let f={_resolve:a,_reject:l};e._writeRequests.push(f)})}function zn(e,n){if(e._state==="writable"){Dn(e,n);return}Fn(e)}function Dn(e,n){let a=e._writableStreamController;e._state="erroring",e._storedError=n;let l=e._writer;l!==void 0&&hs(l,n),!Zu(e)&&a._started&&Fn(e)}function Fn(e){e._state="errored",e._writableStreamController[cr]();let n=e._storedError;if(e._writeRequests.forEach(f=>{f._reject(n)}),e._writeRequests=new V,e._pendingAbortRequest===void 0){Tr(e);return}let a=e._pendingAbortRequest;if(e._pendingAbortRequest=void 0,a._wasAlreadyErroring){a._reject(n),Tr(e);return}let l=e._writableStreamController[lr](a._reason);T(l,()=>{a._resolve(),Tr(e)},f=>{a._reject(f),Tr(e)})}function Vu(e){e._inFlightWriteRequest._resolve(void 0),e._inFlightWriteRequest=void 0}function Yu(e,n){e._inFlightWriteRequest._reject(n),e._inFlightWriteRequest=void 0,zn(e,n)}function Ku(e){e._inFlightCloseRequest._resolve(void 0),e._inFlightCloseRequest=void 0,e._state==="erroring"&&(e._storedError=void 0,e._pendingAbortRequest!==void 0&&(e._pendingAbortRequest._resolve(),e._pendingAbortRequest=void 0)),e._state="closed";let a=e._writer;a!==void 0&&Rs(a)}function Xu(e,n){e._inFlightCloseRequest._reject(n),e._inFlightCloseRequest=void 0,e._pendingAbortRequest!==void 0&&(e._pendingAbortRequest._reject(n),e._pendingAbortRequest=void 0),zn(e,n)}function ge(e){return!(e._closeRequest===void 0&&e._inFlightCloseRequest===void 0)}function Zu(e){return!(e._inFlightWriteRequest===void 0&&e._inFlightCloseRequest===void 0)}function el(e){e._inFlightCloseRequest=e._closeRequest,e._closeRequest=void 0}function tl(e){e._inFlightWriteRequest=e._writeRequests.shift()}function Tr(e){e._closeRequest!==void 0&&(e._closeRequest._reject(e._storedError),e._closeRequest=void 0);let n=e._writer;n!==void 0&&Nn(n,e._storedError)}function Ln(e,n){let a=e._writer;a!==void 0&&n!==e._backpressure&&(n?ml(a):Gn(a)),e._backpressure=n}class zt{constructor(n){if(pe(n,1,"WritableStreamDefaultWriter"),ds(n,"First parameter"),et(n))throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=n,n._writer=this;let a=n._state;if(a==="writable")!ge(n)&&n._backpressure?vr(this):js(this),Cr(this);else if(a==="erroring")Hn(this,n._storedError),Cr(this);else if(a==="closed")js(this),fl(this);else{let l=n._storedError;Hn(this,l),Es(this,l)}}get closed(){return Ue(this)?this._closedPromise:_(Me("closed"))}get desiredSize(){if(!Ue(this))throw Me("desiredSize");if(this._ownerWritableStream===void 0)throw Dt("desiredSize");return sl(this)}get ready(){return Ue(this)?this._readyPromise:_(Me("ready"))}abort(n=void 0){return Ue(this)?this._ownerWritableStream===void 0?_(Dt("abort")):rl(this,n):_(Me("abort"))}close(){if(!Ue(this))return _(Me("close"));let n=this._ownerWritableStream;return n===void 0?_(Dt("close")):ge(n)?_(new TypeError("Cannot close an already-closing stream")):bs(this)}releaseLock(){if(!Ue(this))throw Me("releaseLock");this._ownerWritableStream!==void 0&&ys(this)}write(n=void 0){return Ue(this)?this._ownerWritableStream===void 0?_(Dt("write to")):gs(this,n):_(Me("write"))}}Object.defineProperties(zt.prototype,{abort:{enumerable:!0},close:{enumerable:!0},releaseLock:{enumerable:!0},write:{enumerable:!0},closed:{enumerable:!0},desiredSize:{enumerable:!0},ready:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(zt.prototype,t.toStringTag,{value:"WritableStreamDefaultWriter",configurable:!0});function Ue(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_ownerWritableStream")?!1:e instanceof zt}function rl(e,n){let a=e._ownerWritableStream;return jr(a,n)}function bs(e){let n=e._ownerWritableStream;return ms(n)}function nl(e){let n=e._ownerWritableStream,a=n._state;return ge(n)||a==="closed"?w(void 0):a==="errored"?_(n._storedError):bs(e)}function ol(e,n){e._closedPromiseState==="pending"?Nn(e,n):pl(e,n)}function hs(e,n){e._readyPromiseState==="pending"?Ts(e,n):bl(e,n)}function sl(e){let n=e._ownerWritableStream,a=n._state;return a==="errored"||a==="erroring"?null:a==="closed"?0:Os(n._writableStreamController)}function ys(e){let n=e._ownerWritableStream,a=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");hs(e,a),ol(e,a),n._writer=void 0,e._ownerWritableStream=void 0}function gs(e,n){let a=e._ownerWritableStream,l=a._writableStreamController,f=ul(l,n);if(a!==e._ownerWritableStream)return _(Dt("write to"));let y=a._state;if(y==="errored")return _(a._storedError);if(ge(a)||y==="closed")return _(new TypeError("The stream is closing or closed and cannot be written to"));if(y==="erroring")return _(a._storedError);let g=Ju(a);return ll(l,n,f),g}let Ss={};class tt{constructor(){throw new TypeError("Illegal constructor")}get abortReason(){if(!Un(this))throw Qn("abortReason");return this._abortReason}get signal(){if(!Un(this))throw Qn("signal");if(this._abortController===void 0)throw new TypeError("WritableStreamDefaultController.prototype.signal is not supported");return this._abortController.signal}error(n=void 0){if(!Un(this))throw Qn("error");this._controlledWritableStream._state==="writable"&&ws(this,n)}[lr](n){let a=this._abortAlgorithm(n);return Pr(this),a}[cr](){ve(this)}}Object.defineProperties(tt.prototype,{abortReason:{enumerable:!0},signal:{enumerable:!0},error:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(tt.prototype,t.toStringTag,{value:"WritableStreamDefaultController",configurable:!0});function Un(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledWritableStream")?!1:e instanceof tt}function _s(e,n,a,l,f,y,g,R){n._controlledWritableStream=e,e._writableStreamController=n,n._queue=void 0,n._queueTotalSize=void 0,ve(n),n._abortReason=void 0,n._abortController=Hu(),n._started=!1,n._strategySizeAlgorithm=R,n._strategyHWM=g,n._writeAlgorithm=l,n._closeAlgorithm=f,n._abortAlgorithm=y;let k=Wn(n);Ln(e,k);let q=a(),B=w(q);T(B,()=>{n._started=!0,xr(n)},$=>{n._started=!0,zn(e,$)})}function al(e,n,a,l){let f=Object.create(tt.prototype),y=()=>{},g=()=>w(void 0),R=()=>w(void 0),k=()=>w(void 0);n.start!==void 0&&(y=()=>n.start(f)),n.write!==void 0&&(g=q=>n.write(q,f)),n.close!==void 0&&(R=()=>n.close()),n.abort!==void 0&&(k=q=>n.abort(q)),_s(e,f,y,g,R,k,a,l)}function Pr(e){e._writeAlgorithm=void 0,e._closeAlgorithm=void 0,e._abortAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function il(e){Cn(e,Ss,0),xr(e)}function ul(e,n){try{return e._strategySizeAlgorithm(n)}catch(a){return Mn(e,a),1}}function Os(e){return e._strategyHWM-e._queueTotalSize}function ll(e,n,a){try{Cn(e,n,a)}catch(f){Mn(e,f);return}let l=e._controlledWritableStream;if(!ge(l)&&l._state==="writable"){let f=Wn(e);Ln(l,f)}xr(e)}function xr(e){let n=e._controlledWritableStream;if(!e._started||n._inFlightWriteRequest!==void 0)return;if(n._state==="erroring"){Fn(n);return}if(e._queue.length===0)return;let l=Cu(e);l===Ss?cl(e):dl(e,l)}function Mn(e,n){e._controlledWritableStream._state==="writable"&&ws(e,n)}function cl(e){let n=e._controlledWritableStream;el(n),kn(e);let a=e._closeAlgorithm();Pr(e),T(a,()=>{Ku(n)},l=>{Xu(n,l)})}function dl(e,n){let a=e._controlledWritableStream;tl(a);let l=e._writeAlgorithm(n);T(l,()=>{Vu(a);let f=a._state;if(kn(e),!ge(a)&&f==="writable"){let y=Wn(e);Ln(a,y)}xr(e)},f=>{a._state==="writable"&&Pr(e),Yu(a,f)})}function Wn(e){return Os(e)<=0}function ws(e,n){let a=e._controlledWritableStream;Pr(e),Dn(a,n)}function kr(e){return new TypeError(`WritableStream.prototype.${e} can only be used on a WritableStream`)}function Qn(e){return new TypeError(`WritableStreamDefaultController.prototype.${e} can only be used on a WritableStreamDefaultController`)}function Me(e){return new TypeError(`WritableStreamDefaultWriter.prototype.${e} can only be used on a WritableStreamDefaultWriter`)}function Dt(e){return new TypeError("Cannot "+e+" a stream using a released writer")}function Cr(e){e._closedPromise=E((n,a)=>{e._closedPromise_resolve=n,e._closedPromise_reject=a,e._closedPromiseState="pending"})}function Es(e,n){Cr(e),Nn(e,n)}function fl(e){Cr(e),Rs(e)}function Nn(e,n){e._closedPromise_reject!==void 0&&(W(e._closedPromise),e._closedPromise_reject(n),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="rejected")}function pl(e,n){Es(e,n)}function Rs(e){e._closedPromise_resolve!==void 0&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="resolved")}function vr(e){e._readyPromise=E((n,a)=>{e._readyPromise_resolve=n,e._readyPromise_reject=a}),e._readyPromiseState="pending"}function Hn(e,n){vr(e),Ts(e,n)}function js(e){vr(e),Gn(e)}function Ts(e,n){e._readyPromise_reject!==void 0&&(W(e._readyPromise),e._readyPromise_reject(n),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="rejected")}function ml(e){vr(e)}function bl(e,n){Hn(e,n)}function Gn(e){e._readyPromise_resolve!==void 0&&(e._readyPromise_resolve(void 0),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="fulfilled")}let Ps=typeof DOMException<"u"?DOMException:void 0;function hl(e){if(!(typeof e=="function"||typeof e=="object"))return!1;try{return new e,!0}catch{return!1}}function yl(){let e=function(a,l){this.message=a||"",this.name=l||"Error",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)};return e.prototype=Object.create(Error.prototype),Object.defineProperty(e.prototype,"constructor",{value:e,writable:!0,configurable:!0}),e}let gl=hl(Ps)?Ps:yl();function xs(e,n,a,l,f,y){let g=Ke(e),R=fs(n);e._disturbed=!0;let k=!1,q=w(void 0);return E((B,$)=>{let M;if(y!==void 0){if(M=()=>{let j=new gl("Aborted","AbortError"),A=[];l||A.push(()=>n._state==="writable"?jr(n,j):w(void 0)),f||A.push(()=>e._state==="readable"?be(e,j):w(void 0)),Z(()=>Promise.all(A.map(F=>F())),!0,j)},y.aborted){M();return}y.addEventListener("abort",M)}function he(){return E((j,A)=>{function F(se){se?j():S(ot(),F,A)}F(!1)})}function ot(){return k?w(!0):S(R._readyPromise,()=>E((j,A)=>{kt(g,{_chunkSteps:F=>{q=S(gs(R,F),void 0,o),j(!1)},_closeSteps:()=>j(!0),_errorSteps:A})}))}if(Ee(e,g._closedPromise,j=>{l?le(!0,j):Z(()=>jr(n,j),!0,j)}),Ee(n,R._closedPromise,j=>{f?le(!0,j):Z(()=>be(e,j),!0,j)}),Y(e,g._closedPromise,()=>{a?le():Z(()=>nl(R))}),ge(n)||n._state==="closed"){let j=new TypeError("the destination writable stream closed before all data could be piped to it");f?le(!0,j):Z(()=>be(e,j),!0,j)}W(he());function $e(){let j=q;return S(q,()=>j!==q?$e():void 0)}function Ee(j,A,F){j._state==="errored"?F(j._storedError):C(A,F)}function Y(j,A,F){j._state==="closed"?F():x(A,F)}function Z(j,A,F){if(k)return;k=!0,n._state==="writable"&&!ge(n)?x($e(),se):se();function se(){T(j(),()=>Re(A,F),st=>Re(!0,st))}}function le(j,A){k||(k=!0,n._state==="writable"&&!ge(n)?x($e(),()=>Re(j,A)):Re(j,A))}function Re(j,A){ys(R),de(g),y!==void 0&&y.removeEventListener("abort",M),j?$(A):B(void 0)}})}class rt{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!Ar(this))throw Br("desiredSize");return Jn(this)}close(){if(!Ar(this))throw Br("close");if(!nt(this))throw new TypeError("The stream is not in a state that permits close");Lt(this)}enqueue(n=void 0){if(!Ar(this))throw Br("enqueue");if(!nt(this))throw new TypeError("The stream is not in a state that permits enqueue");return Ir(this,n)}error(n=void 0){if(!Ar(this))throw Br("error");Ae(this,n)}[jt](n){ve(this);let a=this._cancelAlgorithm(n);return qr(this),a}[Tt](n){let a=this._controlledReadableStream;if(this._queue.length>0){let l=kn(this);this._closeRequested&&this._queue.length===0?(qr(this),Ut(a)):Ft(this),n._chunkSteps(l)}else Uo(a,n),Ft(this)}}Object.defineProperties(rt.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(rt.prototype,t.toStringTag,{value:"ReadableStreamDefaultController",configurable:!0});function Ar(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledReadableStream")?!1:e instanceof rt}function Ft(e){if(!ks(e))return;if(e._pulling){e._pullAgain=!0;return}e._pulling=!0;let a=e._pullAlgorithm();T(a,()=>{e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,Ft(e))},l=>{Ae(e,l)})}function ks(e){let n=e._controlledReadableStream;return!nt(e)||!e._started?!1:!!(Be(n)&&pr(n)>0||Jn(e)>0)}function qr(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function Lt(e){if(!nt(e))return;let n=e._controlledReadableStream;e._closeRequested=!0,e._queue.length===0&&(qr(e),Ut(n))}function Ir(e,n){if(!nt(e))return;let a=e._controlledReadableStream;if(Be(a)&&pr(a)>0)xn(a,n,!1);else{let l;try{l=e._strategySizeAlgorithm(n)}catch(f){throw Ae(e,f),f}try{Cn(e,n,l)}catch(f){throw Ae(e,f),f}}Ft(e)}function Ae(e,n){let a=e._controlledReadableStream;a._state==="readable"&&(ve(e),qr(e),qs(a,n))}function Jn(e){let n=e._controlledReadableStream._state;return n==="errored"?null:n==="closed"?0:e._strategyHWM-e._queueTotalSize}function Sl(e){return!ks(e)}function nt(e){let n=e._controlledReadableStream._state;return!e._closeRequested&&n==="readable"}function Cs(e,n,a,l,f,y,g){n._controlledReadableStream=e,n._queue=void 0,n._queueTotalSize=void 0,ve(n),n._started=!1,n._closeRequested=!1,n._pullAgain=!1,n._pulling=!1,n._strategySizeAlgorithm=g,n._strategyHWM=y,n._pullAlgorithm=l,n._cancelAlgorithm=f,e._readableStreamController=n;let R=a();T(w(R),()=>{n._started=!0,Ft(n)},k=>{Ae(n,k)})}function _l(e,n,a,l){let f=Object.create(rt.prototype),y=()=>{},g=()=>w(void 0),R=()=>w(void 0);n.start!==void 0&&(y=()=>n.start(f)),n.pull!==void 0&&(g=()=>n.pull(f)),n.cancel!==void 0&&(R=k=>n.cancel(k)),Cs(e,f,y,g,R,a,l)}function Br(e){return new TypeError(`ReadableStreamDefaultController.prototype.${e} can only be used on a ReadableStreamDefaultController`)}function Ol(e,n){return De(e._readableStreamController)?El(e):wl(e)}function wl(e,n){let a=Ke(e),l=!1,f=!1,y=!1,g=!1,R,k,q,B,$,M=E(Y=>{$=Y});function he(){return l?(f=!0,w(void 0)):(l=!0,kt(a,{_chunkSteps:Z=>{v(()=>{f=!1;let le=Z,Re=Z;y||Ir(q._readableStreamController,le),g||Ir(B._readableStreamController,Re),l=!1,f&&he()})},_closeSteps:()=>{l=!1,y||Lt(q._readableStreamController),g||Lt(B._readableStreamController),(!y||!g)&&$(void 0)},_errorSteps:()=>{l=!1}}),w(void 0))}function ot(Y){if(y=!0,R=Y,g){let Z=Ct([R,k]),le=be(e,Z);$(le)}return M}function $e(Y){if(g=!0,k=Y,y){let Z=Ct([R,k]),le=be(e,Z);$(le)}return M}function Ee(){}return q=Vn(Ee,he,ot),B=Vn(Ee,he,$e),C(a._closedPromise,Y=>{Ae(q._readableStreamController,Y),Ae(B._readableStreamController,Y),(!y||!g)&&$(void 0)}),[q,B]}function El(e){let n=Ke(e),a=!1,l=!1,f=!1,y=!1,g=!1,R,k,q,B,$,M=E(j=>{$=j});function he(j){C(j._closedPromise,A=>{j===n&&(me(q._readableStreamController,A),me(B._readableStreamController,A),(!y||!g)&&$(void 0))})}function ot(){Le(n)&&(de(n),n=Ke(e),he(n)),kt(n,{_chunkSteps:A=>{v(()=>{l=!1,f=!1;let F=A,se=A;if(!y&&!g)try{se=Ko(A)}catch(st){me(q._readableStreamController,st),me(B._readableStreamController,st),$(be(e,st));return}y||Sr(q._readableStreamController,F),g||Sr(B._readableStreamController,se),a=!1,l?Ee():f&&Y()})},_closeSteps:()=>{a=!1,y||At(q._readableStreamController),g||At(B._readableStreamController),q._readableStreamController._pendingPullIntos.length>0&&_r(q._readableStreamController,0),B._readableStreamController._pendingPullIntos.length>0&&_r(B._readableStreamController,0),(!y||!g)&&$(void 0)},_errorSteps:()=>{a=!1}})}function $e(j,A){Ce(n)&&(de(n),n=is(e),he(n));let F=A?B:q,se=A?q:B;cs(n,j,{_chunkSteps:at=>{v(()=>{l=!1,f=!1;let it=A?g:y;if(A?y:g)it||Or(F._readableStreamController,at);else{let Hs;try{Hs=Ko(at)}catch(Kn){me(F._readableStreamController,Kn),me(se._readableStreamController,Kn),$(be(e,Kn));return}it||Or(F._readableStreamController,at),Sr(se._readableStreamController,Hs)}a=!1,l?Ee():f&&Y()})},_closeSteps:at=>{a=!1;let it=A?g:y,Qr=A?y:g;it||At(F._readableStreamController),Qr||At(se._readableStreamController),at!==void 0&&(it||Or(F._readableStreamController,at),!Qr&&se._readableStreamController._pendingPullIntos.length>0&&_r(se._readableStreamController,0)),(!it||!Qr)&&$(void 0)},_errorSteps:()=>{a=!1}})}function Ee(){if(a)return l=!0,w(void 0);a=!0;let j=In(q._readableStreamController);return j===null?ot():$e(j._view,!1),w(void 0)}function Y(){if(a)return f=!0,w(void 0);a=!0;let j=In(B._readableStreamController);return j===null?ot():$e(j._view,!0),w(void 0)}function Z(j){if(y=!0,R=j,g){let A=Ct([R,k]),F=be(e,A);$(F)}return M}function le(j){if(g=!0,k=j,y){let A=Ct([R,k]),F=be(e,A);$(F)}return M}function Re(){}return q=As(Re,Ee,Z),B=As(Re,Y,le),he(n),[q,B]}function Rl(e,n){fe(e,n);let a=e,l=a?.autoAllocateChunkSize,f=a?.cancel,y=a?.pull,g=a?.start,R=a?.type;return{autoAllocateChunkSize:l===void 0?void 0:Lo(l,`${n} has member 'autoAllocateChunkSize' that`),cancel:f===void 0?void 0:jl(f,a,`${n} has member 'cancel' that`),pull:y===void 0?void 0:Tl(y,a,`${n} has member 'pull' that`),start:g===void 0?void 0:Pl(g,a,`${n} has member 'start' that`),type:R===void 0?void 0:xl(R,`${n} has member 'type' that`)}}function jl(e,n,a){return oe(e,a),l=>I(e,n,[l])}function Tl(e,n,a){return oe(e,a),l=>I(e,n,[l])}function Pl(e,n,a){return oe(e,a),l=>D(e,n,[l])}function xl(e,n){if(e=`${e}`,e!=="bytes")throw new TypeError(`${n} '${e}' is not a valid enumeration value for ReadableStreamType`);return e}function kl(e,n){fe(e,n);let a=e?.mode;return{mode:a===void 0?void 0:Cl(a,`${n} has member 'mode' that`)}}function Cl(e,n){if(e=`${e}`,e!=="byob")throw new TypeError(`${n} '${e}' is not a valid enumeration value for ReadableStreamReaderMode`);return e}function vl(e,n){fe(e,n);let a=e?.preventCancel;return{preventCancel:Boolean(a)}}function vs(e,n){fe(e,n);let a=e?.preventAbort,l=e?.preventCancel,f=e?.preventClose,y=e?.signal;return y!==void 0&&Al(y,`${n} has member 'signal' that`),{preventAbort:Boolean(a),preventCancel:Boolean(l),preventClose:Boolean(f),signal:y}}function Al(e,n){if(!Qu(e))throw new TypeError(`${n} is not an AbortSignal.`)}function ql(e,n){fe(e,n);let a=e?.readable;Pt(a,"readable","ReadableWritablePair"),Pn(a,`${n} has member 'readable' that`);let l=e?.writable;return Pt(l,"writable","ReadableWritablePair"),ds(l,`${n} has member 'writable' that`),{readable:a,writable:l}}class qe{constructor(n={},a={}){n===void 0?n=null:fr(n,"First parameter");let l=Rr(a,"Second parameter"),f=Rl(n,"First parameter");if(Yn(this),f.type==="bytes"){if(l.size!==void 0)throw new RangeError("The strategy for a byte stream cannot have a size function");let y=Bt(l,0);Bu(this,f,y)}else{let y=Er(l),g=Bt(l,1);_l(this,f,g,y)}}get locked(){if(!Ie(this))throw We("locked");return Be(this)}cancel(n=void 0){return Ie(this)?Be(this)?_(new TypeError("Cannot cancel a stream that already has a reader")):be(this,n):_(We("cancel"))}getReader(n=void 0){if(!Ie(this))throw We("getReader");return kl(n,"First parameter").mode===void 0?Ke(this):is(this)}pipeThrough(n,a={}){if(!Ie(this))throw We("pipeThrough");pe(n,1,"pipeThrough");let l=ql(n,"First parameter"),f=vs(a,"Second parameter");if(Be(this))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(et(l.writable))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");let y=xs(this,l.writable,f.preventClose,f.preventAbort,f.preventCancel,f.signal);return W(y),l.readable}pipeTo(n,a={}){if(!Ie(this))return _(We("pipeTo"));if(n===void 0)return _("Parameter 1 is required in 'pipeTo'.");if(!Ze(n))return _(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));let l;try{l=vs(a,"Second parameter")}catch(f){return _(f)}return Be(this)?_(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):et(n)?_(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):xs(this,n,l.preventClose,l.preventAbort,l.preventCancel,l.signal)}tee(){if(!Ie(this))throw We("tee");let n=Ol(this);return Ct(n)}values(n=void 0){if(!Ie(this))throw We("values");let a=vl(n,"First parameter");return xu(this,a.preventCancel)}}Object.defineProperties(qe.prototype,{cancel:{enumerable:!0},getReader:{enumerable:!0},pipeThrough:{enumerable:!0},pipeTo:{enumerable:!0},tee:{enumerable:!0},values:{enumerable:!0},locked:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(qe.prototype,t.toStringTag,{value:"ReadableStream",configurable:!0}),typeof t.asyncIterator=="symbol"&&Object.defineProperty(qe.prototype,t.asyncIterator,{value:qe.prototype.values,writable:!0,configurable:!0});function Vn(e,n,a,l=1,f=()=>1){let y=Object.create(qe.prototype);Yn(y);let g=Object.create(rt.prototype);return Cs(y,g,e,n,a,l,f),y}function As(e,n,a){let l=Object.create(qe.prototype);Yn(l);let f=Object.create(Xe.prototype);return as(l,f,e,n,a,0,void 0),l}function Yn(e){e._state="readable",e._reader=void 0,e._storedError=void 0,e._disturbed=!1}function Ie(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_readableStreamController")?!1:e instanceof qe}function Be(e){return e._reader!==void 0}function be(e,n){if(e._disturbed=!0,e._state==="closed")return w(void 0);if(e._state==="errored")return _(e._storedError);Ut(e);let a=e._reader;a!==void 0&&Le(a)&&(a._readIntoRequests.forEach(f=>{f._closeSteps(void 0)}),a._readIntoRequests=new V);let l=e._readableStreamController[jt](n);return z(l,o)}function Ut(e){e._state="closed";let n=e._reader;n!==void 0&&(ur(n),Ce(n)&&(n._readRequests.forEach(a=>{a._closeSteps()}),n._readRequests=new V))}function qs(e,n){e._state="errored",e._storedError=n;let a=e._reader;a!==void 0&&(Rt(a,n),Ce(a)?(a._readRequests.forEach(l=>{l._errorSteps(n)}),a._readRequests=new V):(a._readIntoRequests.forEach(l=>{l._errorSteps(n)}),a._readIntoRequests=new V))}function We(e){return new TypeError(`ReadableStream.prototype.${e} can only be used on a ReadableStream`)}function Is(e,n){fe(e,n);let a=e?.highWaterMark;return Pt(a,"highWaterMark","QueuingStrategyInit"),{highWaterMark:Tn(a)}}let Bs=e=>e.byteLength;try{Object.defineProperty(Bs,"name",{value:"size",configurable:!0})}catch{}class $r{constructor(n){pe(n,1,"ByteLengthQueuingStrategy"),n=Is(n,"First parameter"),this._byteLengthQueuingStrategyHighWaterMark=n.highWaterMark}get highWaterMark(){if(!zs(this))throw $s("highWaterMark");return this._byteLengthQueuingStrategyHighWaterMark}get size(){if(!zs(this))throw $s("size");return Bs}}Object.defineProperties($r.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty($r.prototype,t.toStringTag,{value:"ByteLengthQueuingStrategy",configurable:!0});function $s(e){return new TypeError(`ByteLengthQueuingStrategy.prototype.${e} can only be used on a ByteLengthQueuingStrategy`)}function zs(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_byteLengthQueuingStrategyHighWaterMark")?!1:e instanceof $r}let Ds=()=>1;try{Object.defineProperty(Ds,"name",{value:"size",configurable:!0})}catch{}class zr{constructor(n){pe(n,1,"CountQueuingStrategy"),n=Is(n,"First parameter"),this._countQueuingStrategyHighWaterMark=n.highWaterMark}get highWaterMark(){if(!Ls(this))throw Fs("highWaterMark");return this._countQueuingStrategyHighWaterMark}get size(){if(!Ls(this))throw Fs("size");return Ds}}Object.defineProperties(zr.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(zr.prototype,t.toStringTag,{value:"CountQueuingStrategy",configurable:!0});function Fs(e){return new TypeError(`CountQueuingStrategy.prototype.${e} can only be used on a CountQueuingStrategy`)}function Ls(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_countQueuingStrategyHighWaterMark")?!1:e instanceof zr}function Il(e,n){fe(e,n);let a=e?.flush,l=e?.readableType,f=e?.start,y=e?.transform,g=e?.writableType;return{flush:a===void 0?void 0:Bl(a,e,`${n} has member 'flush' that`),readableType:l,start:f===void 0?void 0:$l(f,e,`${n} has member 'start' that`),transform:y===void 0?void 0:zl(y,e,`${n} has member 'transform' that`),writableType:g}}function Bl(e,n,a){return oe(e,a),l=>I(e,n,[l])}function $l(e,n,a){return oe(e,a),l=>D(e,n,[l])}function zl(e,n,a){return oe(e,a),(l,f)=>I(e,n,[l,f])}class Dr{constructor(n={},a={},l={}){n===void 0&&(n=null);let f=Rr(a,"Second parameter"),y=Rr(l,"Third parameter"),g=Il(n,"First parameter");if(g.readableType!==void 0)throw new RangeError("Invalid readableType specified");if(g.writableType!==void 0)throw new RangeError("Invalid writableType specified");let R=Bt(y,0),k=Er(y),q=Bt(f,1),B=Er(f),$,M=E(he=>{$=he});Dl(this,M,q,B,R,k),Ll(this,g),g.start!==void 0?$(g.start(this._transformStreamController)):$(void 0)}get readable(){if(!Us(this))throw Ns("readable");return this._readable}get writable(){if(!Us(this))throw Ns("writable");return this._writable}}Object.defineProperties(Dr.prototype,{readable:{enumerable:!0},writable:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Dr.prototype,t.toStringTag,{value:"TransformStream",configurable:!0});function Dl(e,n,a,l,f,y){function g(){return n}function R(M){return Wl(e,M)}function k(M){return Ql(e,M)}function q(){return Nl(e)}e._writable=Gu(g,R,q,k,a,l);function B(){return Hl(e)}function $(M){return Lr(e,M),w(void 0)}e._readable=Vn(g,B,$,f,y),e._backpressure=void 0,e._backpressureChangePromise=void 0,e._backpressureChangePromise_resolve=void 0,Ur(e,!0),e._transformStreamController=void 0}function Us(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_transformStreamController")?!1:e instanceof Dr}function Fr(e,n){Ae(e._readable._readableStreamController,n),Lr(e,n)}function Lr(e,n){Ms(e._transformStreamController),Mn(e._writable._writableStreamController,n),e._backpressure&&Ur(e,!1)}function Ur(e,n){e._backpressureChangePromise!==void 0&&e._backpressureChangePromise_resolve(),e._backpressureChangePromise=E(a=>{e._backpressureChangePromise_resolve=a}),e._backpressure=n}class Mt{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!Mr(this))throw Wr("desiredSize");let n=this._controlledTransformStream._readable._readableStreamController;return Jn(n)}enqueue(n=void 0){if(!Mr(this))throw Wr("enqueue");Ws(this,n)}error(n=void 0){if(!Mr(this))throw Wr("error");Ul(this,n)}terminate(){if(!Mr(this))throw Wr("terminate");Ml(this)}}Object.defineProperties(Mt.prototype,{enqueue:{enumerable:!0},error:{enumerable:!0},terminate:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Mt.prototype,t.toStringTag,{value:"TransformStreamDefaultController",configurable:!0});function Mr(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledTransformStream")?!1:e instanceof Mt}function Fl(e,n,a,l){n._controlledTransformStream=e,e._transformStreamController=n,n._transformAlgorithm=a,n._flushAlgorithm=l}function Ll(e,n){let a=Object.create(Mt.prototype),l=y=>{try{return Ws(a,y),w(void 0)}catch(g){return _(g)}},f=()=>w(void 0);n.transform!==void 0&&(l=y=>n.transform(y,a)),n.flush!==void 0&&(f=()=>n.flush(a)),Fl(e,a,l,f)}function Ms(e){e._transformAlgorithm=void 0,e._flushAlgorithm=void 0}function Ws(e,n){let a=e._controlledTransformStream,l=a._readable._readableStreamController;if(!nt(l))throw new TypeError("Readable side is not in a state that permits enqueue");try{Ir(l,n)}catch(y){throw Lr(a,y),a._readable._storedError}Sl(l)!==a._backpressure&&Ur(a,!0)}function Ul(e,n){Fr(e._controlledTransformStream,n)}function Qs(e,n){let a=e._transformAlgorithm(n);return z(a,void 0,l=>{throw Fr(e._controlledTransformStream,l),l})}function Ml(e){let n=e._controlledTransformStream,a=n._readable._readableStreamController;Lt(a);let l=new TypeError("TransformStream terminated");Lr(n,l)}function Wl(e,n){let a=e._transformStreamController;if(e._backpressure){let l=e._backpressureChangePromise;return z(l,()=>{let f=e._writable;if(f._state==="erroring")throw f._storedError;return Qs(a,n)})}return Qs(a,n)}function Ql(e,n){return Fr(e,n),w(void 0)}function Nl(e){let n=e._readable,a=e._transformStreamController,l=a._flushAlgorithm();return Ms(a),z(l,()=>{if(n._state==="errored")throw n._storedError;Lt(n._readableStreamController)},f=>{throw Fr(e,f),n._storedError})}function Hl(e){return Ur(e,!1),e._backpressureChangePromise}function Wr(e){return new TypeError(`TransformStreamDefaultController.prototype.${e} can only be used on a TransformStreamDefaultController`)}function Ns(e){return new TypeError(`TransformStream.prototype.${e} can only be used on a TransformStream`)}r.ByteLengthQueuingStrategy=$r,r.CountQueuingStrategy=zr,r.ReadableByteStreamController=Xe,r.ReadableStream=qe,r.ReadableStreamBYOBReader=It,r.ReadableStreamBYOBRequest=vt,r.ReadableStreamDefaultController=rt,r.ReadableStreamDefaultReader=xt,r.TransformStream=Dr,r.TransformStreamDefaultController=Mt,r.WritableStream=$t,r.WritableStreamDefaultController=tt,r.WritableStreamDefaultWriter=zt,Object.defineProperty(r,"__esModule",{value:!0})})});var Ks=P(()=>{if(!globalThis.ReadableStream)try{let r=require("node:process"),{emitWarning:t}=r;try{r.emitWarning=()=>{},Object.assign(globalThis,require("node:stream/web")),r.emitWarning=t}catch(o){throw r.emitWarning=t,o}}catch{Object.assign(globalThis,Ys())}try{let{Blob:r}=require("buffer");r&&!r.prototype.stream&&(r.prototype.stream=function(o){let s=0,i=this;return new ReadableStream({type:"bytes",async pull(u){let m=await i.slice(s,Math.min(i.size,s+65536)).arrayBuffer();s+=m.byteLength,u.enqueue(new Uint8Array(m)),s===i.size&&u.close()}})})}catch{}});async function*Zn(r,t=!0){for(let o of r)if("stream"in o)yield*o.stream();else if(ArrayBuffer.isView(o))if(t){let s=o.byteOffset,i=o.byteOffset+o.byteLength;for(;s!==i;){let u=Math.min(i-s,Xs),c=o.buffer.slice(s,s+u);s+=c.byteLength,yield new Uint8Array(c)}}else yield o;else{let s=0,i=o;for(;s!==i.size;){let c=await i.slice(s,Math.min(i.size,s+Xs)).arrayBuffer();s+=c.byteLength,yield new Uint8Array(c)}}}var Om,Xs,Zs,ec,je,Qt=Wt(()=>{Om=ae(Ks(),1);Xs=65536;Zs=class eo{#e=[];#t="";#r=0;#n="transparent";constructor(t=[],o={}){if(typeof t!="object"||t===null)throw new TypeError("Failed to construct 'Blob': The provided value cannot be converted to a sequence.");if(typeof t[Symbol.iterator]!="function")throw new TypeError("Failed to construct 'Blob': The object must have a callable @@iterator property.");if(typeof o!="object"&&typeof o!="function")throw new TypeError("Failed to construct 'Blob': parameter 2 cannot convert to dictionary.");o===null&&(o={});let s=new TextEncoder;for(let u of t){let c;ArrayBuffer.isView(u)?c=new Uint8Array(u.buffer.slice(u.byteOffset,u.byteOffset+u.byteLength)):u instanceof ArrayBuffer?c=new Uint8Array(u.slice(0)):u instanceof eo?c=u:c=s.encode(`${u}`),this.#r+=ArrayBuffer.isView(c)?c.byteLength:c.size,this.#e.push(c)}this.#n=`${o.endings===void 0?"transparent":o.endings}`;let i=o.type===void 0?"":String(o.type);this.#t=/^[\x20-\x7E]*$/.test(i)?i:""}get size(){return this.#r}get type(){return this.#t}async text(){let t=new TextDecoder,o="";for await(let s of Zn(this.#e,!1))o+=t.decode(s,{stream:!0});return o+=t.decode(),o}async arrayBuffer(){let t=new Uint8Array(this.size),o=0;for await(let s of Zn(this.#e,!1))t.set(s,o),o+=s.length;return t.buffer}stream(){let t=Zn(this.#e,!0);return new globalThis.ReadableStream({type:"bytes",async pull(o){let s=await t.next();s.done?o.close():o.enqueue(s.value)},async cancel(){await t.return()}})}slice(t=0,o=this.size,s=""){let{size:i}=this,u=t<0?Math.max(i+t,0):Math.min(t,i),c=o<0?Math.max(i+o,0):Math.min(o,i),m=Math.max(c-u,0),b=this.#e,h=[],O=0;for(let w of b){if(O>=m)break;let _=ArrayBuffer.isView(w)?w.byteLength:w.size;if(u&&_<=u)u-=_,c-=_;else{let S;ArrayBuffer.isView(w)?(S=w.subarray(u,Math.min(_,c)),O+=S.byteLength):(S=w.slice(u,Math.min(_,c)),O+=S.size),c-=_,h.push(S),u=0}}let E=new eo([],{type:String(s).toLowerCase()});return E.#r=m,E.#e=h,E}get[Symbol.toStringTag](){return"Blob"}static[Symbol.hasInstance](t){return t&&typeof t=="object"&&typeof t.constructor=="function"&&(typeof t.stream=="function"||typeof t.arrayBuffer=="function")&&/^(Blob|File)$/.test(t[Symbol.toStringTag])}};Object.defineProperties(Zs.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}});ec=Zs,je=ec});var tc,rc,ut,to=Wt(()=>{Qt();tc=class extends je{#e=0;#t="";constructor(t,o,s={}){if(arguments.length<2)throw new TypeError(`Failed to construct 'File': 2 arguments required, but only ${arguments.length} present.`);super(t,s),s===null&&(s={});let i=s.lastModified===void 0?Date.now():Number(s.lastModified);Number.isNaN(i)||(this.#e=i),this.#t=String(o)}get name(){return this.#t}get lastModified(){return this.#e}get[Symbol.toStringTag](){return"File"}static[Symbol.hasInstance](t){return!!t&&t instanceof je&&/^(File)$/.test(t[Symbol.toStringTag])}},rc=tc,ut=rc});function ra(r,t=je){var o=`${ea()}${ea()}`.replace(/\./g,"").slice(-28).padStart(32,"-"),s=[],i=`--${o}\r
Content-Disposition: form-data; name="`;return r.forEach((u,c)=>typeof u=="string"?s.push(i+ro(c)+`"\r
\r
${u.replace(/\r(?!\n)|(?<!\r)\n/g,`\r
`)}\r
`):s.push(i+ro(c)+`"; filename="${ro(u.name,1)}"\r
Content-Type: ${u.type||"application/octet-stream"}\r
\r
`,u,`\r
`)),s.push(`--${o}--`),new t(s,{type:"multipart/form-data; boundary="+o})}var Nt,nc,oc,ea,sc,ta,ro,Qe,Ne,Gr=Wt(()=>{Qt();to();({toStringTag:Nt,iterator:nc,hasInstance:oc}=Symbol),ea=Math.random,sc="append,set,get,getAll,delete,keys,values,entries,forEach,constructor".split(","),ta=(r,t,o)=>(r+="",/^(Blob|File)$/.test(t&&t[Nt])?[(o=o!==void 0?o+"":t[Nt]=="File"?t.name:"blob",r),t.name!==o||t[Nt]=="blob"?new ut([t],o,t):t]:[r,t+""]),ro=(r,t)=>(t?r:r.replace(/\r?\n|\r/g,`\r
`)).replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22"),Qe=(r,t,o)=>{if(t.length<o)throw new TypeError(`Failed to execute '${r}' on 'FormData': ${o} arguments required, but only ${t.length} present.`)},Ne=class{#e=[];constructor(...t){if(t.length)throw new TypeError("Failed to construct 'FormData': parameter 1 is not of type 'HTMLFormElement'.")}get[Nt](){return"FormData"}[nc](){return this.entries()}static[oc](t){return t&&typeof t=="object"&&t[Nt]==="FormData"&&!sc.some(o=>typeof t[o]!="function")}append(...t){Qe("append",arguments,2),this.#e.push(ta(...t))}delete(t){Qe("delete",arguments,1),t+="",this.#e=this.#e.filter(([o])=>o!==t)}get(t){Qe("get",arguments,1),t+="";for(var o=this.#e,s=o.length,i=0;i<s;i++)if(o[i][0]===t)return o[i][1];return null}getAll(t,o){return Qe("getAll",arguments,1),o=[],t+="",this.#e.forEach(s=>s[0]===t&&o.push(s[1])),o}has(t){return Qe("has",arguments,1),t+="",this.#e.some(o=>o[0]===t)}forEach(t,o){Qe("forEach",arguments,1);for(var[s,i]of this)t.call(o,i,s,this)}set(...t){Qe("set",arguments,2);var o=[],s=!0;t=ta(...t),this.#e.forEach(i=>{i[0]===t[0]?s&&(s=!o.push(t)):o.push(i)}),s&&o.push(t),this.#e=o}*entries(){yield*this.#e}*keys(){for(var[t]of this)yield t}*values(){for(var[,t]of this)yield t}}});var ia=P((Im,aa)=>{if(!globalThis.DOMException)try{let{MessageChannel:r}=require("worker_threads"),t=new r().port1,o=new ArrayBuffer;t.postMessage(o,[o,o])}catch(r){r.constructor.name==="DOMException"&&(globalThis.DOMException=r.constructor)}aa.exports=globalThis.DOMException});var Gt,ua,ac,Vr,oo=Wt(()=>{Gt=require("node:fs"),ua=ae(ia(),1);to();Qt();({stat:ac}=Gt.promises),Vr=class{#e;#t;constructor(t){this.#e=t.path,this.#t=t.start,this.size=t.size,this.lastModified=t.lastModified}slice(t,o){return new Vr({path:this.#e,lastModified:this.lastModified,size:o-t,start:this.#t+t})}async*stream(){let{mtimeMs:t}=await ac(this.#e);if(t>this.lastModified)throw new ua.default("The requested file could not be read, typically due to permission problems that have occurred after a reference to a file was acquired.","NotReadableError");yield*(0,Gt.createReadStream)(this.#e,{start:this.#t,end:this.#t+this.size-1})}get[Symbol.toStringTag](){return"Blob"}}});var ca={};Xn(ca,{toFormData:()=>pc});function fc(r){let t=r.match(/\bfilename=("(.*?)"|([^()<>@,;:\\"/[\]?={}\s\t]+))($|;\s)/i);if(!t)return;let o=t[2]||t[3]||"",s=o.slice(o.lastIndexOf("\\")+1);return s=s.replace(/%22/g,'"'),s=s.replace(/&#(\d{4});/g,(i,u)=>String.fromCharCode(u)),s}async function pc(r,t){if(!/multipart/i.test(t))throw new TypeError("Failed to fetch");let o=t.match(/boundary=(?:"([^"]+)"|([^;]+))/i);if(!o)throw new TypeError("no or bad content-type header, no multipart boundary");let s=new so(o[1]||o[2]),i,u,c,m,b,h,O=[],E=new Ne,w=C=>{c+=x.decode(C,{stream:!0})},_=C=>{O.push(C)},S=()=>{let C=new ut(O,h,{type:b});E.append(m,C)},T=()=>{E.append(m,c)},x=new TextDecoder("utf-8");x.decode(),s.onPartBegin=function(){s.onPartData=w,s.onPartEnd=T,i="",u="",c="",m="",b="",h=null,O.length=0},s.onHeaderField=function(C){i+=x.decode(C,{stream:!0})},s.onHeaderValue=function(C){u+=x.decode(C,{stream:!0})},s.onHeaderEnd=function(){if(u+=x.decode(),i=i.toLowerCase(),i==="content-disposition"){let C=u.match(/\bname=("([^"]*)"|([^()<>@,;:\\"/[\]?={}\s\t]+))/i);C&&(m=C[2]||C[3]||""),h=fc(u),h&&(s.onPartData=_,s.onPartEnd=S)}else i==="content-type"&&(b=u);u="",i=""};for await(let C of r)s.write(C);return s.end(),E}var Se,L,la,ze,Yr,Kr,ic,Jt,uc,lc,cc,dc,He,so,da=Wt(()=>{oo();Gr();Se=0,L={START_BOUNDARY:Se++,HEADER_FIELD_START:Se++,HEADER_FIELD:Se++,HEADER_VALUE_START:Se++,HEADER_VALUE:Se++,HEADER_VALUE_ALMOST_DONE:Se++,HEADERS_ALMOST_DONE:Se++,PART_DATA_START:Se++,PART_DATA:Se++,END:Se++},la=1,ze={PART_BOUNDARY:la,LAST_BOUNDARY:la*=2},Yr=10,Kr=13,ic=32,Jt=45,uc=58,lc=97,cc=122,dc=r=>r|32,He=()=>{},so=class{constructor(t){this.index=0,this.flags=0,this.onHeaderEnd=He,this.onHeaderField=He,this.onHeadersEnd=He,this.onHeaderValue=He,this.onPartBegin=He,this.onPartData=He,this.onPartEnd=He,this.boundaryChars={},t=`\r
--`+t;let o=new Uint8Array(t.length);for(let s=0;s<t.length;s++)o[s]=t.charCodeAt(s),this.boundaryChars[o[s]]=!0;this.boundary=o,this.lookbehind=new Uint8Array(this.boundary.length+8),this.state=L.START_BOUNDARY}write(t){let o=0,s=t.length,i=this.index,{lookbehind:u,boundary:c,boundaryChars:m,index:b,state:h,flags:O}=this,E=this.boundary.length,w=E-1,_=t.length,S,T,x=v=>{this[v+"Mark"]=o},C=v=>{delete this[v+"Mark"]},z=(v,D,I,ne)=>{(D===void 0||D!==I)&&this[v](ne&&ne.subarray(D,I))},W=(v,D)=>{let I=v+"Mark";I in this&&(D?(z(v,this[I],o,t),delete this[I]):(z(v,this[I],t.length,t),this[I]=0))};for(o=0;o<s;o++)switch(S=t[o],h){case L.START_BOUNDARY:if(b===c.length-2){if(S===Jt)O|=ze.LAST_BOUNDARY;else if(S!==Kr)return;b++;break}else if(b-1===c.length-2){if(O&ze.LAST_BOUNDARY&&S===Jt)h=L.END,O=0;else if(!(O&ze.LAST_BOUNDARY)&&S===Yr)b=0,z("onPartBegin"),h=L.HEADER_FIELD_START;else return;break}S!==c[b+2]&&(b=-2),S===c[b+2]&&b++;break;case L.HEADER_FIELD_START:h=L.HEADER_FIELD,x("onHeaderField"),b=0;case L.HEADER_FIELD:if(S===Kr){C("onHeaderField"),h=L.HEADERS_ALMOST_DONE;break}if(b++,S===Jt)break;if(S===uc){if(b===1)return;W("onHeaderField",!0),h=L.HEADER_VALUE_START;break}if(T=dc(S),T<lc||T>cc)return;break;case L.HEADER_VALUE_START:if(S===ic)break;x("onHeaderValue"),h=L.HEADER_VALUE;case L.HEADER_VALUE:S===Kr&&(W("onHeaderValue",!0),z("onHeaderEnd"),h=L.HEADER_VALUE_ALMOST_DONE);break;case L.HEADER_VALUE_ALMOST_DONE:if(S!==Yr)return;h=L.HEADER_FIELD_START;break;case L.HEADERS_ALMOST_DONE:if(S!==Yr)return;z("onHeadersEnd"),h=L.PART_DATA_START;break;case L.PART_DATA_START:h=L.PART_DATA,x("onPartData");case L.PART_DATA:if(i=b,b===0){for(o+=w;o<_&&!(t[o]in m);)o+=E;o-=w,S=t[o]}if(b<c.length)c[b]===S?(b===0&&W("onPartData",!0),b++):b=0;else if(b===c.length)b++,S===Kr?O|=ze.PART_BOUNDARY:S===Jt?O|=ze.LAST_BOUNDARY:b=0;else if(b-1===c.length)if(O&ze.PART_BOUNDARY){if(b=0,S===Yr){O&=~ze.PART_BOUNDARY,z("onPartEnd"),z("onPartBegin"),h=L.HEADER_FIELD_START;break}}else O&ze.LAST_BOUNDARY&&S===Jt?(z("onPartEnd"),h=L.END,O=0):b=0;if(b>0)u[b-1]=S;else if(i>0){let v=new Uint8Array(u.buffer,u.byteOffset,u.byteLength);z("onPartData",0,i,v),i=0,x("onPartData"),o--}break;case L.END:break;default:throw new Error(`Unexpected state entered: ${h}`)}W("onHeaderField"),W("onHeaderValue"),W("onPartData"),this.index=b,this.state=h,this.flags=O}end(){if(this.state===L.HEADER_FIELD_START&&this.index===0||this.state===L.PART_DATA&&this.index===this.boundary.length)this.onPartEnd();else if(this.state!==L.END)throw new Error("MultipartParser.end(): stream ended unexpectedly")}}});var mo=P(X=>{"use strict";Object.defineProperty(X,"__esModule",{value:!0});X.joinUrl=X.stripUndefined=X.delimited=X.encode=X.allowReserved=X.encodeReserved=void 0;X.encodeReserved=[encodeURIComponent,encodeURIComponent];X.allowReserved=[encodeURIComponent,encodeURI];function xa(r,t=","){let o=(s,i)=>{let u=r[i%r.length];return typeof s>"u"?"":typeof s=="object"?Array.isArray(s)?s.map(u).join(t):Object.entries(s).reduce((m,b)=>[...m,...b],[]).map(u).join(t):u(String(s))};return(s,...i)=>s.reduce((u,c,m)=>`${u}${c}${o(i[m],m)}`,"")}X.encode=xa;function Rc(r=","){return(t,o=X.encodeReserved)=>Object.entries(t).filter(([,s])=>s!==void 0).map(([s,i])=>xa(o,r)`${s}=${i}`).join("&")}X.delimited=Rc;function jc(r){return r&&JSON.parse(JSON.stringify(r))}X.stripUndefined=jc;function Tc(...r){return r.filter(Boolean).map((t,o)=>o===0?t:t.replace(/^\/+/,"")).map((t,o,s)=>o===s.length-1?t:t.replace(/\/+$/,"")).join("/")}X.joinUrl=Tc});var bo=P(J=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0});J.space=J.pipe=J.form=J.json=J.explode=J.deep=J.query=void 0;var Oe=mo();function Pc(...r){let t=r.filter(Boolean).join("&");return t&&`?${t}`}J.query=Pc;function xc(r,[t,o]=Oe.encodeReserved){let s=(0,Oe.encode)([c=>c,t]),i=(0,Oe.encode)([c=>c,o]),u=(c,m="")=>Object.entries(c).filter(([,b])=>b!==void 0).map(([b,h])=>{let O=Array.isArray(c)?"":b,E=m?s`${m}[${O}]`:b;return typeof h=="object"?u(h,E):i`${E}=${h}`}).join("&");return u(r)}J.deep=xc;function ka(r,t=Oe.encodeReserved){let o=(0,Oe.encode)(t);return Object.entries(r).filter(([,s])=>s!==void 0).map(([s,i])=>Array.isArray(i)?i.map(u=>o`${s}=${u}`).join("&"):typeof i=="object"?ka(i,t):o`${s}=${i}`).join("&")}J.explode=ka;function kc(r,t=Oe.encodeReserved){let o=(0,Oe.encode)(t);return Object.entries(r).filter(([,s])=>s!==void 0).map(([s,i])=>{let u=JSON.stringify(i);return o`${s}=${u}`}).join("&")}J.json=kc;J.form=(0,Oe.delimited)();J.pipe=(0,Oe.delimited)("|");J.space=(0,Oe.delimited)("%20")});var ho=P(G=>{"use strict";var Ca=G&&G.__awaiter||function(r,t,o,s){function i(u){return u instanceof o?u:new o(function(c){c(u)})}return new(o||(o=Promise))(function(u,c){function m(O){try{h(s.next(O))}catch(E){c(E)}}function b(O){try{h(s.throw(O))}catch(E){c(E)}}function h(O){O.done?u(O.value):i(O.value).then(m,b)}h((s=s.apply(r,t||[])).next())})};Object.defineProperty(G,"__esModule",{value:!0});G.HttpError=G.optimistic=G.okify=G.ok=G.SUCCESS_CODES=G.handle=void 0;function Cc(r,t){return Ca(this,void 0,void 0,function*(){let{status:o,data:s,headers:i}=yield r,u=t[o];if(u)return u(s);if(t.default)return t.default(o,s);throw new Xt(o,s,i)})}G.handle=Cc;G.SUCCESS_CODES=[200,201,202,204];function va(r){return Ca(this,void 0,void 0,function*(){let t=yield r;if(G.SUCCESS_CODES.some(o=>o==t.status))return t.data;throw new Xt(t.status,t.data,t.headers)})}G.ok=va;function Aa(r){return(...t)=>va(r(...t))}G.okify=Aa;function vc(r){let t={};return Object.entries(r).forEach(([o,s])=>{t[o]=typeof s=="function"?Aa(s):s}),t}G.optimistic=vc;var Xt=class extends Error{constructor(t,o,s){super(`Error: ${t}`),this.status=t,this.data=o,this.headers=s}};G.HttpError=Xt});var Ia=P(re=>{"use strict";var Ac=re&&re.__createBinding||(Object.create?function(r,t,o,s){s===void 0&&(s=o);var i=Object.getOwnPropertyDescriptor(t,o);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[o]}}),Object.defineProperty(r,s,i)}:function(r,t,o,s){s===void 0&&(s=o),r[s]=t[o]}),qc=re&&re.__setModuleDefault||(Object.create?function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}:function(r,t){r.default=t}),Ic=re&&re.__importStar||function(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var o in r)o!=="default"&&Object.prototype.hasOwnProperty.call(r,o)&&Ac(t,r,o);return qc(t,r),t},rn=re&&re.__awaiter||function(r,t,o,s){function i(u){return u instanceof o?u:new o(function(c){c(u)})}return new(o||(o=Promise))(function(u,c){function m(O){try{h(s.next(O))}catch(E){c(E)}}function b(O){try{h(s.throw(O))}catch(E){c(E)}}function h(O){O.done?u(O.value):i(O.value).then(m,b)}h((s=s.apply(r,t||[])).next())})},nn=re&&re.__rest||function(r,t){var o={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&t.indexOf(s)<0&&(o[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,s=Object.getOwnPropertySymbols(r);i<s.length;i++)t.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(r,s[i])&&(o[s[i]]=r[s[i]]);return o};Object.defineProperty(re,"__esModule",{value:!0});re.runtime=void 0;var Bc=Ic(bo()),qa=mo(),$c=ho();function zc(r){function t(u,c){return rn(this,void 0,void 0,function*(){let m=yield i(u,c),b;try{b=yield m.text()}catch{}return{status:m.status,headers:m.headers,contentType:m.headers.get("content-type"),data:b}})}function o(u,c={}){return rn(this,void 0,void 0,function*(){let{status:m,headers:b,contentType:h,data:O}=yield t(u,Object.assign(Object.assign({},c),{headers:Object.assign({Accept:"application/json"},c.headers)}));return(h?h.includes("json"):!1)?{status:m,headers:b,data:O?JSON.parse(O):null}:{status:m,headers:b,data:O}})}function s(u,c={}){return rn(this,void 0,void 0,function*(){let m=yield i(u,c),b;try{b=yield m.blob()}catch{}return{status:m.status,headers:m.headers,data:b}})}function i(u,c={}){return rn(this,void 0,void 0,function*(){let m=Object.assign(Object.assign({},r),c),{baseUrl:b,headers:h,fetch:O}=m,E=nn(m,["baseUrl","headers","fetch"]),w=(0,qa.joinUrl)(b,u);return yield(O||fetch)(w,Object.assign(Object.assign({},E),{headers:(0,qa.stripUndefined)(Object.assign(Object.assign({},r.headers),h))}))})}return{ok:$c.ok,fetchText:t,fetchJson:o,fetchBlob:s,json(u){var{body:c,headers:m}=u,b=nn(u,["body","headers"]);return Object.assign(Object.assign(Object.assign({},b),c!=null&&{body:JSON.stringify(c)}),{headers:Object.assign(Object.assign({},m),{"Content-Type":"application/json"})})},form(u){var{body:c,headers:m}=u,b=nn(u,["body","headers"]);return Object.assign(Object.assign(Object.assign({},b),c!=null&&{body:Bc.form(c)}),{headers:Object.assign(Object.assign({},m),{"Content-Type":"application/x-www-form-urlencoded"})})},multipart(u){var{body:c}=u,m=nn(u,["body"]);if(c==null)return m;let b=new(r.formDataConstructor||m.formDataConstructor||FormData);return Object.entries(c).forEach(([h,O])=>{b.append(h,O)}),Object.assign(Object.assign({},m),{body:b})}}}re.runtime=zc});var Qa=P((Fb,Wa)=>{Wa.exports=Ma;Ma.sync=wf;var La=require("fs");function Of(r,t){var o=t.pathExt!==void 0?t.pathExt:process.env.PATHEXT;if(!o||(o=o.split(";"),o.indexOf("")!==-1))return!0;for(var s=0;s<o.length;s++){var i=o[s].toLowerCase();if(i&&r.substr(-i.length).toLowerCase()===i)return!0}return!1}function Ua(r,t,o){return!r.isSymbolicLink()&&!r.isFile()?!1:Of(t,o)}function Ma(r,t,o){La.stat(r,function(s,i){o(s,s?!1:Ua(i,r,t))})}function wf(r,t){return Ua(La.statSync(r),r,t)}});var Va=P((Lb,Ja)=>{Ja.exports=Ha;Ha.sync=Ef;var Na=require("fs");function Ha(r,t,o){Na.stat(r,function(s,i){o(s,s?!1:Ga(i,t))})}function Ef(r,t){return Ga(Na.statSync(r),t)}function Ga(r,t){return r.isFile()&&Rf(r,t)}function Rf(r,t){var o=r.mode,s=r.uid,i=r.gid,u=t.uid!==void 0?t.uid:process.getuid&&process.getuid(),c=t.gid!==void 0?t.gid:process.getgid&&process.getgid(),m=parseInt("100",8),b=parseInt("010",8),h=parseInt("001",8),O=m|b,E=o&h||o&b&&i===c||o&m&&s===u||o&O&&u===0;return E}});var Ka=P((Mb,Ya)=>{var Ub=require("fs"),sn;process.platform==="win32"||global.TESTING_WINDOWS?sn=Qa():sn=Va();Ya.exports=_o;_o.sync=jf;function _o(r,t,o){if(typeof t=="function"&&(o=t,t={}),!o){if(typeof Promise!="function")throw new TypeError("callback not provided");return new Promise(function(s,i){_o(r,t||{},function(u,c){u?i(u):s(c)})})}sn(r,t||{},function(s,i){s&&(s.code==="EACCES"||t&&t.ignoreErrors)&&(s=null,i=!1),o(s,i)})}function jf(r,t){try{return sn.sync(r,t||{})}catch(o){if(t&&t.ignoreErrors||o.code==="EACCES")return!1;throw o}}});var oi=P((Wb,ni)=>{var pt=process.platform==="win32"||process.env.OSTYPE==="cygwin"||process.env.OSTYPE==="msys",Xa=require("path"),Tf=pt?";":":",Za=Ka(),ei=r=>Object.assign(new Error(`not found: ${r}`),{code:"ENOENT"}),ti=(r,t)=>{let o=t.colon||Tf,s=r.match(/\//)||pt&&r.match(/\\/)?[""]:[...pt?[process.cwd()]:[],...(t.path||process.env.PATH||"").split(o)],i=pt?t.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM":"",u=pt?i.split(o):[""];return pt&&r.indexOf(".")!==-1&&u[0]!==""&&u.unshift(""),{pathEnv:s,pathExt:u,pathExtExe:i}},ri=(r,t,o)=>{typeof t=="function"&&(o=t,t={}),t||(t={});let{pathEnv:s,pathExt:i,pathExtExe:u}=ti(r,t),c=[],m=h=>new Promise((O,E)=>{if(h===s.length)return t.all&&c.length?O(c):E(ei(r));let w=s[h],_=/^".*"$/.test(w)?w.slice(1,-1):w,S=Xa.join(_,r),T=!_&&/^\.[\\\/]/.test(r)?r.slice(0,2)+S:S;O(b(T,h,0))}),b=(h,O,E)=>new Promise((w,_)=>{if(E===i.length)return w(m(O+1));let S=i[E];Za(h+S,{pathExt:u},(T,x)=>{if(!T&&x)if(t.all)c.push(h+S);else return w(h+S);return w(b(h,O,E+1))})});return o?m(0).then(h=>o(null,h),o):m(0)},Pf=(r,t)=>{t=t||{};let{pathEnv:o,pathExt:s,pathExtExe:i}=ti(r,t),u=[];for(let c=0;c<o.length;c++){let m=o[c],b=/^".*"$/.test(m)?m.slice(1,-1):m,h=Xa.join(b,r),O=!b&&/^\.[\\\/]/.test(r)?r.slice(0,2)+h:h;for(let E=0;E<s.length;E++){let w=O+s[E];try{if(Za.sync(w,{pathExt:i}))if(t.all)u.push(w);else return w}catch{}}}if(t.all&&u.length)return u;if(t.nothrow)return null;throw ei(r)};ni.exports=ri;ri.sync=Pf});var wo=P((Qb,Oo)=>{"use strict";var si=(r={})=>{let t=r.env||process.env;return(r.platform||process.platform)!=="win32"?"PATH":Object.keys(t).reverse().find(s=>s.toUpperCase()==="PATH")||"Path"};Oo.exports=si;Oo.exports.default=si});var li=P((Nb,ui)=>{"use strict";var ai=require("path"),xf=oi(),kf=wo();function ii(r,t){let o=r.options.env||process.env,s=process.cwd(),i=r.options.cwd!=null,u=i&&process.chdir!==void 0&&!process.chdir.disabled;if(u)try{process.chdir(r.options.cwd)}catch{}let c;try{c=xf.sync(r.command,{path:o[kf({env:o})],pathExt:t?ai.delimiter:void 0})}catch{}finally{u&&process.chdir(s)}return c&&(c=ai.resolve(i?r.options.cwd:"",c)),c}function Cf(r){return ii(r)||ii(r,!0)}ui.exports=Cf});var ci=P((Hb,Ro)=>{"use strict";var Eo=/([()\][%!^"`<>&|;, *?])/g;function vf(r){return r=r.replace(Eo,"^$1"),r}function Af(r,t){return r=`${r}`,r=r.replace(/(\\*)"/g,'$1$1\\"'),r=r.replace(/(\\*)$/,"$1$1"),r=`"${r}"`,r=r.replace(Eo,"^$1"),t&&(r=r.replace(Eo,"^$1")),r}Ro.exports.command=vf;Ro.exports.argument=Af});var fi=P((Gb,di)=>{"use strict";di.exports=/^#!(.*)/});var mi=P((Jb,pi)=>{"use strict";var qf=fi();pi.exports=(r="")=>{let t=r.match(qf);if(!t)return null;let[o,s]=t[0].replace(/#! ?/,"").split(" "),i=o.split("/").pop();return i==="env"?s:s?`${i} ${s}`:i}});var hi=P((Vb,bi)=>{"use strict";var jo=require("fs"),If=mi();function Bf(r){let o=Buffer.alloc(150),s;try{s=jo.openSync(r,"r"),jo.readSync(s,o,0,150,0),jo.closeSync(s)}catch{}return If(o.toString())}bi.exports=Bf});var _i=P((Yb,Si)=>{"use strict";var $f=require("path"),yi=li(),gi=ci(),zf=hi(),Df=process.platform==="win32",Ff=/\.(?:com|exe)$/i,Lf=/node_modules[\\/].bin[\\/][^\\/]+\.cmd$/i;function Uf(r){r.file=yi(r);let t=r.file&&zf(r.file);return t?(r.args.unshift(r.file),r.command=t,yi(r)):r.file}function Mf(r){if(!Df)return r;let t=Uf(r),o=!Ff.test(t);if(r.options.forceShell||o){let s=Lf.test(t);r.command=$f.normalize(r.command),r.command=gi.command(r.command),r.args=r.args.map(u=>gi.argument(u,s));let i=[r.command].concat(r.args).join(" ");r.args=["/d","/s","/c",`"${i}"`],r.command=process.env.comspec||"cmd.exe",r.options.windowsVerbatimArguments=!0}return r}function Wf(r,t,o){t&&!Array.isArray(t)&&(o=t,t=null),t=t?t.slice(0):[],o=Object.assign({},o);let s={command:r,args:t,options:o,file:void 0,original:{command:r,args:t}};return o.shell?s:Mf(s)}Si.exports=Wf});var Ei=P((Kb,wi)=>{"use strict";var To=process.platform==="win32";function Po(r,t){return Object.assign(new Error(`${t} ${r.command} ENOENT`),{code:"ENOENT",errno:"ENOENT",syscall:`${t} ${r.command}`,path:r.command,spawnargs:r.args})}function Qf(r,t){if(!To)return;let o=r.emit;r.emit=function(s,i){if(s==="exit"){let u=Oi(i,t,"spawn");if(u)return o.call(r,"error",u)}return o.apply(r,arguments)}}function Oi(r,t){return To&&r===1&&!t.file?Po(t.original,"spawn"):null}function Nf(r,t){return To&&r===1&&!t.file?Po(t.original,"spawnSync"):null}wi.exports={hookChildProcess:Qf,verifyENOENT:Oi,verifyENOENTSync:Nf,notFoundError:Po}});var Ti=P((Xb,mt)=>{"use strict";var Ri=require("child_process"),xo=_i(),ko=Ei();function ji(r,t,o){let s=xo(r,t,o),i=Ri.spawn(s.command,s.args,s.options);return ko.hookChildProcess(i,s),i}function Hf(r,t,o){let s=xo(r,t,o),i=Ri.spawnSync(s.command,s.args,s.options);return i.error=i.error||ko.verifyENOENTSync(i.status,s),i}mt.exports=ji;mt.exports.spawn=ji;mt.exports.sync=Hf;mt.exports._parse=xo;mt.exports._enoent=ko});var xi=P((Zb,Pi)=>{"use strict";Pi.exports=r=>{let t=typeof r=="string"?`
`:`
`.charCodeAt(),o=typeof r=="string"?"\r":"\r".charCodeAt();return r[r.length-1]===t&&(r=r.slice(0,r.length-1)),r[r.length-1]===o&&(r=r.slice(0,r.length-1)),r}});var vi=P((eh,tr)=>{"use strict";var er=require("path"),ki=wo(),Ci=r=>{r={cwd:process.cwd(),path:process.env[ki()],execPath:process.execPath,...r};let t,o=er.resolve(r.cwd),s=[];for(;t!==o;)s.push(er.join(o,"node_modules/.bin")),t=o,o=er.resolve(o,"..");let i=er.resolve(r.cwd,r.execPath,"..");return s.push(i),s.concat(r.path).join(er.delimiter)};tr.exports=Ci;tr.exports.default=Ci;tr.exports.env=r=>{r={env:process.env,...r};let t={...r.env},o=ki({env:t});return r.path=t[o],t[o]=tr.exports(r),t}});var qi=P((th,Co)=>{"use strict";var Ai=(r,t)=>{for(let o of Reflect.ownKeys(t))Object.defineProperty(r,o,Object.getOwnPropertyDescriptor(t,o));return r};Co.exports=Ai;Co.exports.default=Ai});var Bi=P((rh,un)=>{"use strict";var Gf=qi(),an=new WeakMap,Ii=(r,t={})=>{if(typeof r!="function")throw new TypeError("Expected a function");let o,s=0,i=r.displayName||r.name||"<anonymous>",u=function(...c){if(an.set(u,++s),s===1)o=r.apply(this,c),r=null;else if(t.throw===!0)throw new Error(`Function \`${i}\` can only be called once`);return o};return Gf(u,r),an.set(u,s),u};un.exports=Ii;un.exports.default=Ii;un.exports.callCount=r=>{if(!an.has(r))throw new Error(`The given function \`${r.name}\` is not wrapped by the \`onetime\` package`);return an.get(r)}});var $i=P(ln=>{"use strict";Object.defineProperty(ln,"__esModule",{value:!0});ln.SIGNALS=void 0;var Jf=[{name:"SIGHUP",number:1,action:"terminate",description:"Terminal closed",standard:"posix"},{name:"SIGINT",number:2,action:"terminate",description:"User interruption with CTRL-C",standard:"ansi"},{name:"SIGQUIT",number:3,action:"core",description:"User interruption with CTRL-\\",standard:"posix"},{name:"SIGILL",number:4,action:"core",description:"Invalid machine instruction",standard:"ansi"},{name:"SIGTRAP",number:5,action:"core",description:"Debugger breakpoint",standard:"posix"},{name:"SIGABRT",number:6,action:"core",description:"Aborted",standard:"ansi"},{name:"SIGIOT",number:6,action:"core",description:"Aborted",standard:"bsd"},{name:"SIGBUS",number:7,action:"core",description:"Bus error due to misaligned, non-existing address or paging error",standard:"bsd"},{name:"SIGEMT",number:7,action:"terminate",description:"Command should be emulated but is not implemented",standard:"other"},{name:"SIGFPE",number:8,action:"core",description:"Floating point arithmetic error",standard:"ansi"},{name:"SIGKILL",number:9,action:"terminate",description:"Forced termination",standard:"posix",forced:!0},{name:"SIGUSR1",number:10,action:"terminate",description:"Application-specific signal",standard:"posix"},{name:"SIGSEGV",number:11,action:"core",description:"Segmentation fault",standard:"ansi"},{name:"SIGUSR2",number:12,action:"terminate",description:"Application-specific signal",standard:"posix"},{name:"SIGPIPE",number:13,action:"terminate",description:"Broken pipe or socket",standard:"posix"},{name:"SIGALRM",number:14,action:"terminate",description:"Timeout or timer",standard:"posix"},{name:"SIGTERM",number:15,action:"terminate",description:"Termination",standard:"ansi"},{name:"SIGSTKFLT",number:16,action:"terminate",description:"Stack is empty or overflowed",standard:"other"},{name:"SIGCHLD",number:17,action:"ignore",description:"Child process terminated, paused or unpaused",standard:"posix"},{name:"SIGCLD",number:17,action:"ignore",description:"Child process terminated, paused or unpaused",standard:"other"},{name:"SIGCONT",number:18,action:"unpause",description:"Unpaused",standard:"posix",forced:!0},{name:"SIGSTOP",number:19,action:"pause",description:"Paused",standard:"posix",forced:!0},{name:"SIGTSTP",number:20,action:"pause",description:'Paused using CTRL-Z or "suspend"',standard:"posix"},{name:"SIGTTIN",number:21,action:"pause",description:"Background process cannot read terminal input",standard:"posix"},{name:"SIGBREAK",number:21,action:"terminate",description:"User interruption with CTRL-BREAK",standard:"other"},{name:"SIGTTOU",number:22,action:"pause",description:"Background process cannot write to terminal output",standard:"posix"},{name:"SIGURG",number:23,action:"ignore",description:"Socket received out-of-band data",standard:"bsd"},{name:"SIGXCPU",number:24,action:"core",description:"Process timed out",standard:"bsd"},{name:"SIGXFSZ",number:25,action:"core",description:"File too big",standard:"bsd"},{name:"SIGVTALRM",number:26,action:"terminate",description:"Timeout or timer",standard:"bsd"},{name:"SIGPROF",number:27,action:"terminate",description:"Timeout or timer",standard:"bsd"},{name:"SIGWINCH",number:28,action:"ignore",description:"Terminal window size changed",standard:"bsd"},{name:"SIGIO",number:29,action:"terminate",description:"I/O is available",standard:"other"},{name:"SIGPOLL",number:29,action:"terminate",description:"Watched event",standard:"other"},{name:"SIGINFO",number:29,action:"ignore",description:"Request for process information",standard:"other"},{name:"SIGPWR",number:30,action:"terminate",description:"Device running out of power",standard:"systemv"},{name:"SIGSYS",number:31,action:"core",description:"Invalid system call",standard:"other"},{name:"SIGUNUSED",number:31,action:"terminate",description:"Invalid system call",standard:"other"}];ln.SIGNALS=Jf});var vo=P(bt=>{"use strict";Object.defineProperty(bt,"__esModule",{value:!0});bt.SIGRTMAX=bt.getRealtimeSignals=void 0;var Vf=function(){let r=Di-zi+1;return Array.from({length:r},Yf)};bt.getRealtimeSignals=Vf;var Yf=function(r,t){return{name:`SIGRT${t+1}`,number:zi+t,action:"terminate",description:"Application-specific signal (realtime)",standard:"posix"}},zi=34,Di=64;bt.SIGRTMAX=Di});var Fi=P(cn=>{"use strict";Object.defineProperty(cn,"__esModule",{value:!0});cn.getSignals=void 0;var Kf=require("os"),Xf=$i(),Zf=vo(),ep=function(){let r=(0,Zf.getRealtimeSignals)();return[...Xf.SIGNALS,...r].map(tp)};cn.getSignals=ep;var tp=function({name:r,number:t,description:o,action:s,forced:i=!1,standard:u}){let{signals:{[r]:c}}=Kf.constants,m=c!==void 0;return{name:r,number:m?c:t,description:o,supported:m,action:s,forced:i,standard:u}}});var Ui=P(ht=>{"use strict";Object.defineProperty(ht,"__esModule",{value:!0});ht.signalsByNumber=ht.signalsByName=void 0;var rp=require("os"),Li=Fi(),np=vo(),op=function(){return(0,Li.getSignals)().reduce(sp,{})},sp=function(r,{name:t,number:o,description:s,supported:i,action:u,forced:c,standard:m}){return{...r,[t]:{name:t,number:o,description:s,supported:i,action:u,forced:c,standard:m}}},ap=op();ht.signalsByName=ap;var ip=function(){let r=(0,Li.getSignals)(),t=np.SIGRTMAX+1,o=Array.from({length:t},(s,i)=>up(i,r));return Object.assign({},...o)},up=function(r,t){let o=lp(r,t);if(o===void 0)return{};let{name:s,description:i,supported:u,action:c,forced:m,standard:b}=o;return{[r]:{name:s,number:r,description:i,supported:u,action:c,forced:m,standard:b}}},lp=function(r,t){let o=t.find(({name:s})=>rp.constants.signals[s]===r);return o!==void 0?o:t.find(s=>s.number===r)},cp=ip();ht.signalsByNumber=cp});var Wi=P((ih,Mi)=>{"use strict";var{signalsByName:dp}=Ui(),fp=({timedOut:r,timeout:t,errorCode:o,signal:s,signalDescription:i,exitCode:u,isCanceled:c})=>r?`timed out after ${t} milliseconds`:c?"was canceled":o!==void 0?`failed with ${o}`:s!==void 0?`was killed with ${s} (${i})`:u!==void 0?`failed with exit code ${u}`:"failed",pp=({stdout:r,stderr:t,all:o,error:s,signal:i,exitCode:u,command:c,escapedCommand:m,timedOut:b,isCanceled:h,killed:O,parsed:{options:{timeout:E}}})=>{u=u===null?void 0:u,i=i===null?void 0:i;let w=i===void 0?void 0:dp[i].description,_=s&&s.code,T=`Command ${fp({timedOut:b,timeout:E,errorCode:_,signal:i,signalDescription:w,exitCode:u,isCanceled:h})}: ${c}`,x=Object.prototype.toString.call(s)==="[object Error]",C=x?`${T}
${s.message}`:T,z=[C,t,r].filter(Boolean).join(`
`);return x?(s.originalMessage=s.message,s.message=z):s=new Error(z),s.shortMessage=C,s.command=c,s.escapedCommand=m,s.exitCode=u,s.signal=i,s.signalDescription=w,s.stdout=r,s.stderr=t,o!==void 0&&(s.all=o),"bufferedData"in s&&delete s.bufferedData,s.failed=!0,s.timedOut=Boolean(b),s.isCanceled=h,s.killed=O&&!b,s};Mi.exports=pp});var Ni=P((uh,Ao)=>{"use strict";var dn=["stdin","stdout","stderr"],mp=r=>dn.some(t=>r[t]!==void 0),Qi=r=>{if(!r)return;let{stdio:t}=r;if(t===void 0)return dn.map(s=>r[s]);if(mp(r))throw new Error(`It's not possible to provide \`stdio\` in combination with one of ${dn.map(s=>`\`${s}\``).join(", ")}`);if(typeof t=="string")return t;if(!Array.isArray(t))throw new TypeError(`Expected \`stdio\` to be of type \`string\` or \`Array\`, got \`${typeof t}\``);let o=Math.max(t.length,dn.length);return Array.from({length:o},(s,i)=>t[i])};Ao.exports=Qi;Ao.exports.node=r=>{let t=Qi(r);return t==="ipc"?"ipc":t===void 0||typeof t=="string"?[t,t,t,"ipc"]:t.includes("ipc")?t:[...t,"ipc"]}});var Hi=P((lh,fn)=>{fn.exports=["SIGABRT","SIGALRM","SIGHUP","SIGINT","SIGTERM"];process.platform!=="win32"&&fn.exports.push("SIGVTALRM","SIGXCPU","SIGXFSZ","SIGUSR2","SIGTRAP","SIGSYS","SIGQUIT","SIGIOT");process.platform==="linux"&&fn.exports.push("SIGIO","SIGPOLL","SIGPWR","SIGSTKFLT","SIGUNUSED")});var Ki=P((ch,St)=>{var U=global.process,Ve=function(r){return r&&typeof r=="object"&&typeof r.removeListener=="function"&&typeof r.emit=="function"&&typeof r.reallyExit=="function"&&typeof r.listeners=="function"&&typeof r.kill=="function"&&typeof r.pid=="number"&&typeof r.on=="function"};Ve(U)?(Gi=require("assert"),yt=Hi(),Ji=/^win/i.test(U.platform),rr=require("events"),typeof rr!="function"&&(rr=rr.EventEmitter),U.__signal_exit_emitter__?N=U.__signal_exit_emitter__:(N=U.__signal_exit_emitter__=new rr,N.count=0,N.emitted={}),N.infinite||(N.setMaxListeners(1/0),N.infinite=!0),St.exports=function(r,t){if(!Ve(global.process))return function(){};Gi.equal(typeof r,"function","a callback must be provided for exit handler"),gt===!1&&qo();var o="exit";t&&t.alwaysLast&&(o="afterexit");var s=function(){N.removeListener(o,r),N.listeners("exit").length===0&&N.listeners("afterexit").length===0&&pn()};return N.on(o,r),s},pn=function(){!gt||!Ve(global.process)||(gt=!1,yt.forEach(function(t){try{U.removeListener(t,mn[t])}catch{}}),U.emit=bn,U.reallyExit=Io,N.count-=1)},St.exports.unload=pn,Ye=function(t,o,s){N.emitted[t]||(N.emitted[t]=!0,N.emit(t,o,s))},mn={},yt.forEach(function(r){mn[r]=function(){if(!!Ve(global.process)){var o=U.listeners(r);o.length===N.count&&(pn(),Ye("exit",null,r),Ye("afterexit",null,r),Ji&&r==="SIGHUP"&&(r="SIGINT"),U.kill(U.pid,r))}}}),St.exports.signals=function(){return yt},gt=!1,qo=function(){gt||!Ve(global.process)||(gt=!0,N.count+=1,yt=yt.filter(function(t){try{return U.on(t,mn[t]),!0}catch{return!1}}),U.emit=Yi,U.reallyExit=Vi)},St.exports.load=qo,Io=U.reallyExit,Vi=function(t){!Ve(global.process)||(U.exitCode=t||0,Ye("exit",U.exitCode,null),Ye("afterexit",U.exitCode,null),Io.call(U,U.exitCode))},bn=U.emit,Yi=function(t,o){if(t==="exit"&&Ve(global.process)){o!==void 0&&(U.exitCode=o);var s=bn.apply(this,arguments);return Ye("exit",U.exitCode,null),Ye("afterexit",U.exitCode,null),s}else return bn.apply(this,arguments)}):St.exports=function(){return function(){}};var Gi,yt,Ji,rr,N,pn,Ye,mn,gt,qo,Io,Vi,bn,Yi});var Zi=P((dh,Xi)=>{"use strict";var bp=require("os"),hp=Ki(),yp=1e3*5,gp=(r,t="SIGTERM",o={})=>{let s=r(t);return Sp(r,t,o,s),s},Sp=(r,t,o,s)=>{if(!_p(t,o,s))return;let i=wp(o),u=setTimeout(()=>{r("SIGKILL")},i);u.unref&&u.unref()},_p=(r,{forceKillAfterTimeout:t},o)=>Op(r)&&t!==!1&&o,Op=r=>r===bp.constants.signals.SIGTERM||typeof r=="string"&&r.toUpperCase()==="SIGTERM",wp=({forceKillAfterTimeout:r=!0})=>{if(r===!0)return yp;if(!Number.isFinite(r)||r<0)throw new TypeError(`Expected the \`forceKillAfterTimeout\` option to be a non-negative integer, got \`${r}\` (${typeof r})`);return r},Ep=(r,t)=>{r.kill()&&(t.isCanceled=!0)},Rp=(r,t,o)=>{r.kill(t),o(Object.assign(new Error("Timed out"),{timedOut:!0,signal:t}))},jp=(r,{timeout:t,killSignal:o="SIGTERM"},s)=>{if(t===0||t===void 0)return s;let i,u=new Promise((m,b)=>{i=setTimeout(()=>{Rp(r,o,b)},t)}),c=s.finally(()=>{clearTimeout(i)});return Promise.race([u,c])},Tp=({timeout:r})=>{if(r!==void 0&&(!Number.isFinite(r)||r<0))throw new TypeError(`Expected the \`timeout\` option to be a non-negative integer, got \`${r}\` (${typeof r})`)},Pp=async(r,{cleanup:t,detached:o},s)=>{if(!t||o)return s;let i=hp(()=>{r.kill()});return s.finally(()=>{i()})};Xi.exports={spawnedKill:gp,spawnedCancel:Ep,setupTimeout:jp,validateTimeout:Tp,setExitHandler:Pp}});var tu=P((fh,eu)=>{"use strict";var we=r=>r!==null&&typeof r=="object"&&typeof r.pipe=="function";we.writable=r=>we(r)&&r.writable!==!1&&typeof r._write=="function"&&typeof r._writableState=="object";we.readable=r=>we(r)&&r.readable!==!1&&typeof r._read=="function"&&typeof r._readableState=="object";we.duplex=r=>we.writable(r)&&we.readable(r);we.transform=r=>we.duplex(r)&&typeof r._transform=="function";eu.exports=we});var nu=P((ph,ru)=>{"use strict";var{PassThrough:xp}=require("stream");ru.exports=r=>{r={...r};let{array:t}=r,{encoding:o}=r,s=o==="buffer",i=!1;t?i=!(o||s):o=o||"utf8",s&&(o=null);let u=new xp({objectMode:i});o&&u.setEncoding(o);let c=0,m=[];return u.on("data",b=>{m.push(b),i?c=m.length:c+=b.length}),u.getBufferedValue=()=>t?m:s?Buffer.concat(m,c):m.join(""),u.getBufferedLength=()=>c,u}});var ou=P((mh,nr)=>{"use strict";var{constants:kp}=require("buffer"),Cp=require("stream"),{promisify:vp}=require("util"),Ap=nu(),qp=vp(Cp.pipeline),hn=class extends Error{constructor(){super("maxBuffer exceeded"),this.name="MaxBufferError"}};async function Bo(r,t){if(!r)throw new Error("Expected a stream");t={maxBuffer:1/0,...t};let{maxBuffer:o}=t,s=Ap(t);return await new Promise((i,u)=>{let c=m=>{m&&s.getBufferedLength()<=kp.MAX_LENGTH&&(m.bufferedData=s.getBufferedValue()),u(m)};(async()=>{try{await qp(r,s),i()}catch(m){c(m)}})(),s.on("data",()=>{s.getBufferedLength()>o&&c(new hn)})}),s.getBufferedValue()}nr.exports=Bo;nr.exports.buffer=(r,t)=>Bo(r,{...t,encoding:"buffer"});nr.exports.array=(r,t)=>Bo(r,{...t,array:!0});nr.exports.MaxBufferError=hn});var au=P((bh,su)=>{"use strict";var{PassThrough:Ip}=require("stream");su.exports=function(){var r=[],t=new Ip({objectMode:!0});return t.setMaxListeners(0),t.add=o,t.isEmpty=s,t.on("unpipe",i),Array.prototype.slice.call(arguments).forEach(o),t;function o(u){return Array.isArray(u)?(u.forEach(o),this):(r.push(u),u.once("end",i.bind(null,u)),u.once("error",t.emit.bind(t,"error")),u.pipe(t,{end:!1}),this)}function s(){return r.length==0}function i(u){r=r.filter(function(c){return c!==u}),!r.length&&t.readable&&t.end()}}});var cu=P((hh,lu)=>{"use strict";var uu=tu(),iu=ou(),Bp=au(),$p=(r,t)=>{t===void 0||r.stdin===void 0||(uu(t)?t.pipe(r.stdin):r.stdin.end(t))},zp=(r,{all:t})=>{if(!t||!r.stdout&&!r.stderr)return;let o=Bp();return r.stdout&&o.add(r.stdout),r.stderr&&o.add(r.stderr),o},$o=async(r,t)=>{if(!!r){r.destroy();try{return await t}catch(o){return o.bufferedData}}},zo=(r,{encoding:t,buffer:o,maxBuffer:s})=>{if(!(!r||!o))return t?iu(r,{encoding:t,maxBuffer:s}):iu.buffer(r,{maxBuffer:s})},Dp=async({stdout:r,stderr:t,all:o},{encoding:s,buffer:i,maxBuffer:u},c)=>{let m=zo(r,{encoding:s,buffer:i,maxBuffer:u}),b=zo(t,{encoding:s,buffer:i,maxBuffer:u}),h=zo(o,{encoding:s,buffer:i,maxBuffer:u*2});try{return await Promise.all([c,m,b,h])}catch(O){return Promise.all([{error:O,signal:O.signal,timedOut:O.timedOut},$o(r,m),$o(t,b),$o(o,h)])}},Fp=({input:r})=>{if(uu(r))throw new TypeError("The `input` option cannot be a stream in sync mode")};lu.exports={handleInput:$p,makeAllStream:zp,getSpawnedResult:Dp,validateInputSync:Fp}});var fu=P((yh,du)=>{"use strict";var Lp=(async()=>{})().constructor.prototype,Up=["then","catch","finally"].map(r=>[r,Reflect.getOwnPropertyDescriptor(Lp,r)]),Mp=(r,t)=>{for(let[o,s]of Up){let i=typeof t=="function"?(...u)=>Reflect.apply(s.value,t(),u):s.value.bind(t);Reflect.defineProperty(r,o,{...s,value:i})}return r},Wp=r=>new Promise((t,o)=>{r.on("exit",(s,i)=>{t({exitCode:s,signal:i})}),r.on("error",s=>{o(s)}),r.stdin&&r.stdin.on("error",s=>{o(s)})});du.exports={mergePromise:Mp,getSpawnedPromise:Wp}});var bu=P((gh,mu)=>{"use strict";var pu=(r,t=[])=>Array.isArray(t)?[r,...t]:[r],Qp=/^[\w.-]+$/,Np=/"/g,Hp=r=>typeof r!="string"||Qp.test(r)?r:`"${r.replace(Np,'\\"')}"`,Gp=(r,t)=>pu(r,t).join(" "),Jp=(r,t)=>pu(r,t).map(o=>Hp(o)).join(" "),Vp=/ +/g,Yp=r=>{let t=[];for(let o of r.trim().split(Vp)){let s=t[t.length-1];s&&s.endsWith("\\")?t[t.length-1]=`${s.slice(0,-1)} ${o}`:t.push(o)}return t};mu.exports={joinCommand:Gp,getEscapedCommand:Jp,parseCommand:Yp}});var wu=P((Sh,_t)=>{"use strict";var Kp=require("path"),Do=require("child_process"),Xp=Ti(),Zp=xi(),em=vi(),tm=Bi(),yn=Wi(),yu=Ni(),{spawnedKill:rm,spawnedCancel:nm,setupTimeout:om,validateTimeout:sm,setExitHandler:am}=Zi(),{handleInput:im,getSpawnedResult:um,makeAllStream:lm,validateInputSync:cm}=cu(),{mergePromise:hu,getSpawnedPromise:dm}=fu(),{joinCommand:gu,parseCommand:Su,getEscapedCommand:_u}=bu(),fm=1e3*1e3*100,pm=({env:r,extendEnv:t,preferLocal:o,localDir:s,execPath:i})=>{let u=t?{...process.env,...r}:r;return o?em.env({env:u,cwd:s,execPath:i}):u},Ou=(r,t,o={})=>{let s=Xp._parse(r,t,o);return r=s.command,t=s.args,o=s.options,o={maxBuffer:fm,buffer:!0,stripFinalNewline:!0,extendEnv:!0,preferLocal:!1,localDir:o.cwd||process.cwd(),execPath:process.execPath,encoding:"utf8",reject:!0,cleanup:!0,all:!1,windowsHide:!0,...o},o.env=pm(o),o.stdio=yu(o),process.platform==="win32"&&Kp.basename(r,".exe")==="cmd"&&t.unshift("/q"),{file:r,args:t,options:o,parsed:s}},or=(r,t,o)=>typeof t!="string"&&!Buffer.isBuffer(t)?o===void 0?void 0:"":r.stripFinalNewline?Zp(t):t,gn=(r,t,o)=>{let s=Ou(r,t,o),i=gu(r,t),u=_u(r,t);sm(s.options);let c;try{c=Do.spawn(s.file,s.args,s.options)}catch(_){let S=new Do.ChildProcess,T=Promise.reject(yn({error:_,stdout:"",stderr:"",all:"",command:i,escapedCommand:u,parsed:s,timedOut:!1,isCanceled:!1,killed:!1}));return hu(S,T)}let m=dm(c),b=om(c,s.options,m),h=am(c,s.options,b),O={isCanceled:!1};c.kill=rm.bind(null,c.kill.bind(c)),c.cancel=nm.bind(null,c,O);let w=tm(async()=>{let[{error:_,exitCode:S,signal:T,timedOut:x},C,z,W]=await um(c,s.options,h),v=or(s.options,C),D=or(s.options,z),I=or(s.options,W);if(_||S!==0||T!==null){let ne=yn({error:_,exitCode:S,signal:T,stdout:v,stderr:D,all:I,command:i,escapedCommand:u,parsed:s,timedOut:x,isCanceled:O.isCanceled,killed:c.killed});if(!s.options.reject)return ne;throw ne}return{command:i,escapedCommand:u,exitCode:0,stdout:v,stderr:D,all:I,failed:!1,timedOut:!1,isCanceled:!1,killed:!1}});return im(c,s.options.input),c.all=lm(c,s.options),hu(c,w)};_t.exports=gn;_t.exports.sync=(r,t,o)=>{let s=Ou(r,t,o),i=gu(r,t),u=_u(r,t);cm(s.options);let c;try{c=Do.spawnSync(s.file,s.args,s.options)}catch(h){throw yn({error:h,stdout:"",stderr:"",all:"",command:i,escapedCommand:u,parsed:s,timedOut:!1,isCanceled:!1,killed:!1})}let m=or(s.options,c.stdout,c.error),b=or(s.options,c.stderr,c.error);if(c.error||c.status!==0||c.signal!==null){let h=yn({stdout:m,stderr:b,error:c.error,signal:c.signal,exitCode:c.status,command:i,escapedCommand:u,parsed:s,timedOut:c.error&&c.error.code==="ETIMEDOUT",isCanceled:!1,killed:c.signal!==null});if(!s.options.reject)return h;throw h}return{command:i,escapedCommand:u,exitCode:0,stdout:m,stderr:b,failed:!1,timedOut:!1,isCanceled:!1,killed:!1}};_t.exports.command=(r,t)=>{let[o,...s]=Su(r);return gn(o,s,t)};_t.exports.commandSync=(r,t)=>{let[o,...s]=Su(r);return gn.sync(o,s,t)};_t.exports.node=(r,t,o={})=>{t&&!Array.isArray(t)&&typeof t=="object"&&(o=t,t=[]);let s=yu.node(o),i=process.execArgv.filter(m=>!m.startsWith("--inspect")),{nodePath:u=process.execPath,nodeOptions:c=i}=o;return gn(u,[...c,r,...Array.isArray(t)?t:[]],{...o,stdin:void 0,stdout:void 0,stderr:void 0,stdio:s,shell:!1})}});var bm={};Xn(bm,{default:()=>Tu});module.exports=Xl(bm);var _n=require("@raycast/api");var $a=require("react"),So=require("@raycast/api");var lo=require("@raycast/api");var Ta=ae(require("node:http"),1),Pa=ae(require("node:https"),1),Ge=ae(require("node:zlib"),1),ue=ae(require("node:stream"),1),Kt=require("node:buffer");function Zl(r){if(!/^data:/i.test(r))throw new TypeError('`uri` does not appear to be a Data URI (must begin with "data:")');r=r.replace(/\r?\n/g,"");let t=r.indexOf(",");if(t===-1||t<=4)throw new TypeError("malformed data: URI");let o=r.substring(5,t).split(";"),s="",i=!1,u=o[0]||"text/plain",c=u;for(let O=1;O<o.length;O++)o[O]==="base64"?i=!0:o[O]&&(c+=`;${o[O]}`,o[O].indexOf("charset=")===0&&(s=o[O].substring(8)));!o[0]&&!s.length&&(c+=";charset=US-ASCII",s="US-ASCII");let m=i?"base64":"ascii",b=unescape(r.substring(t+1)),h=Buffer.from(b,m);return h.type=u,h.typeFull=c,h.charset=s,h}var Js=Zl;var ce=ae(require("node:stream"),1),Pe=require("node:util"),ie=require("node:buffer");Qt();Gr();var Te=class extends Error{constructor(t,o){super(t),Error.captureStackTrace(this,this.constructor),this.type=o}get name(){return this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}};var ee=class extends Te{constructor(t,o,s){super(t,o),s&&(this.code=this.errno=s.code,this.erroredSysCall=s.syscall)}};var Jr=Symbol.toStringTag,no=r=>typeof r=="object"&&typeof r.append=="function"&&typeof r.delete=="function"&&typeof r.get=="function"&&typeof r.getAll=="function"&&typeof r.has=="function"&&typeof r.set=="function"&&typeof r.sort=="function"&&r[Jr]==="URLSearchParams",Ht=r=>r&&typeof r=="object"&&typeof r.arrayBuffer=="function"&&typeof r.type=="string"&&typeof r.stream=="function"&&typeof r.constructor=="function"&&/^(Blob|File)$/.test(r[Jr]),na=r=>typeof r=="object"&&(r[Jr]==="AbortSignal"||r[Jr]==="EventTarget"),oa=(r,t)=>{let o=new URL(t).hostname,s=new URL(r).hostname;return o===s||o.endsWith(`.${s}`)},sa=(r,t)=>{let o=new URL(t).protocol,s=new URL(r).protocol;return o===s};var mc=(0,Pe.promisify)(ce.default.pipeline),te=Symbol("Body internals"),_e=class{constructor(t,{size:o=0}={}){let s=null;t===null?t=null:no(t)?t=ie.Buffer.from(t.toString()):Ht(t)||ie.Buffer.isBuffer(t)||(Pe.types.isAnyArrayBuffer(t)?t=ie.Buffer.from(t):ArrayBuffer.isView(t)?t=ie.Buffer.from(t.buffer,t.byteOffset,t.byteLength):t instanceof ce.default||(t instanceof Ne?(t=ra(t),s=t.type.split("=")[1]):t=ie.Buffer.from(String(t))));let i=t;ie.Buffer.isBuffer(t)?i=ce.default.Readable.from(t):Ht(t)&&(i=ce.default.Readable.from(t.stream())),this[te]={body:t,stream:i,boundary:s,disturbed:!1,error:null},this.size=o,t instanceof ce.default&&t.on("error",u=>{let c=u instanceof Te?u:new ee(`Invalid response body while trying to fetch ${this.url}: ${u.message}`,"system",u);this[te].error=c})}get body(){return this[te].stream}get bodyUsed(){return this[te].disturbed}async arrayBuffer(){let{buffer:t,byteOffset:o,byteLength:s}=await ao(this);return t.slice(o,o+s)}async formData(){let t=this.headers.get("content-type");if(t.startsWith("application/x-www-form-urlencoded")){let s=new Ne,i=new URLSearchParams(await this.text());for(let[u,c]of i)s.append(u,c);return s}let{toFormData:o}=await Promise.resolve().then(()=>(da(),ca));return o(this.body,t)}async blob(){let t=this.headers&&this.headers.get("content-type")||this[te].body&&this[te].body.type||"",o=await this.arrayBuffer();return new je([o],{type:t})}async json(){let t=await this.text();return JSON.parse(t)}async text(){let t=await ao(this);return new TextDecoder().decode(t)}buffer(){return ao(this)}};_e.prototype.buffer=(0,Pe.deprecate)(_e.prototype.buffer,"Please use 'response.arrayBuffer()' instead of 'response.buffer()'","node-fetch#buffer");Object.defineProperties(_e.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0},data:{get:(0,Pe.deprecate)(()=>{},"data doesn't exist, use json(), text(), arrayBuffer(), or body instead","https://github.com/node-fetch/node-fetch/issues/1000 (response)")}});async function ao(r){if(r[te].disturbed)throw new TypeError(`body used already for: ${r.url}`);if(r[te].disturbed=!0,r[te].error)throw r[te].error;let{body:t}=r;if(t===null)return ie.Buffer.alloc(0);if(!(t instanceof ce.default))return ie.Buffer.alloc(0);let o=[],s=0;try{for await(let i of t){if(r.size>0&&s+i.length>r.size){let u=new ee(`content size at ${r.url} over limit: ${r.size}`,"max-size");throw t.destroy(u),u}s+=i.length,o.push(i)}}catch(i){throw i instanceof Te?i:new ee(`Invalid response body while trying to fetch ${r.url}: ${i.message}`,"system",i)}if(t.readableEnded===!0||t._readableState.ended===!0)try{return o.every(i=>typeof i=="string")?ie.Buffer.from(o.join("")):ie.Buffer.concat(o,s)}catch(i){throw new ee(`Could not create Buffer from response body for ${r.url}: ${i.message}`,"system",i)}else throw new ee(`Premature close of server response while trying to fetch ${r.url}`)}var lt=(r,t)=>{let o,s,{body:i}=r[te];if(r.bodyUsed)throw new Error("cannot clone body after it is used");return i instanceof ce.default&&typeof i.getBoundary!="function"&&(o=new ce.PassThrough({highWaterMark:t}),s=new ce.PassThrough({highWaterMark:t}),i.pipe(o),i.pipe(s),r[te].stream=o,i=s),i},bc=(0,Pe.deprecate)(r=>r.getBoundary(),"form-data doesn't follow the spec and requires special treatment. Use alternative package","https://github.com/node-fetch/node-fetch/issues/1167"),Xr=(r,t)=>r===null?null:typeof r=="string"?"text/plain;charset=UTF-8":no(r)?"application/x-www-form-urlencoded;charset=UTF-8":Ht(r)?r.type||null:ie.Buffer.isBuffer(r)||Pe.types.isAnyArrayBuffer(r)||ArrayBuffer.isView(r)?null:r instanceof Ne?`multipart/form-data; boundary=${t[te].boundary}`:r&&typeof r.getBoundary=="function"?`multipart/form-data;boundary=${bc(r)}`:r instanceof ce.default?null:"text/plain;charset=UTF-8",fa=r=>{let{body:t}=r[te];return t===null?0:Ht(t)?t.size:ie.Buffer.isBuffer(t)?t.length:t&&typeof t.getLengthSync=="function"&&t.hasKnownLength&&t.hasKnownLength()?t.getLengthSync():null},pa=async(r,{body:t})=>{t===null?r.end():await mc(t,r)};var io=require("node:util"),Vt=ae(require("node:http"),1),Zr=typeof Vt.default.validateHeaderName=="function"?Vt.default.validateHeaderName:r=>{if(!/^[\^`\-\w!#$%&'*+.|~]+$/.test(r)){let t=new TypeError(`Header name must be a valid HTTP token [${r}]`);throw Object.defineProperty(t,"code",{value:"ERR_INVALID_HTTP_TOKEN"}),t}},uo=typeof Vt.default.validateHeaderValue=="function"?Vt.default.validateHeaderValue:(r,t)=>{if(/[^\t\u0020-\u007E\u0080-\u00FF]/.test(t)){let o=new TypeError(`Invalid character in header content ["${r}"]`);throw Object.defineProperty(o,"code",{value:"ERR_INVALID_CHAR"}),o}},K=class extends URLSearchParams{constructor(t){let o=[];if(t instanceof K){let s=t.raw();for(let[i,u]of Object.entries(s))o.push(...u.map(c=>[i,c]))}else if(t!=null)if(typeof t=="object"&&!io.types.isBoxedPrimitive(t)){let s=t[Symbol.iterator];if(s==null)o.push(...Object.entries(t));else{if(typeof s!="function")throw new TypeError("Header pairs must be iterable");o=[...t].map(i=>{if(typeof i!="object"||io.types.isBoxedPrimitive(i))throw new TypeError("Each header pair must be an iterable object");return[...i]}).map(i=>{if(i.length!==2)throw new TypeError("Each header pair must be a name/value tuple");return[...i]})}}else throw new TypeError("Failed to construct 'Headers': The provided value is not of type '(sequence<sequence<ByteString>> or record<ByteString, ByteString>)");return o=o.length>0?o.map(([s,i])=>(Zr(s),uo(s,String(i)),[String(s).toLowerCase(),String(i)])):void 0,super(o),new Proxy(this,{get(s,i,u){switch(i){case"append":case"set":return(c,m)=>(Zr(c),uo(c,String(m)),URLSearchParams.prototype[i].call(s,String(c).toLowerCase(),String(m)));case"delete":case"has":case"getAll":return c=>(Zr(c),URLSearchParams.prototype[i].call(s,String(c).toLowerCase()));case"keys":return()=>(s.sort(),new Set(URLSearchParams.prototype.keys.call(s)).keys());default:return Reflect.get(s,i,u)}}})}get[Symbol.toStringTag](){return this.constructor.name}toString(){return Object.prototype.toString.call(this)}get(t){let o=this.getAll(t);if(o.length===0)return null;let s=o.join(", ");return/^content-encoding$/i.test(t)&&(s=s.toLowerCase()),s}forEach(t,o=void 0){for(let s of this.keys())Reflect.apply(t,o,[this.get(s),s,this])}*values(){for(let t of this.keys())yield this.get(t)}*entries(){for(let t of this.keys())yield[t,this.get(t)]}[Symbol.iterator](){return this.entries()}raw(){return[...this.keys()].reduce((t,o)=>(t[o]=this.getAll(o),t),{})}[Symbol.for("nodejs.util.inspect.custom")](){return[...this.keys()].reduce((t,o)=>{let s=this.getAll(o);return o==="host"?t[o]=s[0]:t[o]=s.length>1?s:s[0],t},{})}};Object.defineProperties(K.prototype,["get","entries","forEach","values"].reduce((r,t)=>(r[t]={enumerable:!0},r),{}));function ma(r=[]){return new K(r.reduce((t,o,s,i)=>(s%2===0&&t.push(i.slice(s,s+2)),t),[]).filter(([t,o])=>{try{return Zr(t),uo(t,String(o)),!0}catch{return!1}}))}var hc=new Set([301,302,303,307,308]),en=r=>hc.has(r);var ye=Symbol("Response internals"),H=class extends _e{constructor(t=null,o={}){super(t,o);let s=o.status!=null?o.status:200,i=new K(o.headers);if(t!==null&&!i.has("Content-Type")){let u=Xr(t,this);u&&i.append("Content-Type",u)}this[ye]={type:"default",url:o.url,status:s,statusText:o.statusText||"",headers:i,counter:o.counter,highWaterMark:o.highWaterMark}}get type(){return this[ye].type}get url(){return this[ye].url||""}get status(){return this[ye].status}get ok(){return this[ye].status>=200&&this[ye].status<300}get redirected(){return this[ye].counter>0}get statusText(){return this[ye].statusText}get headers(){return this[ye].headers}get highWaterMark(){return this[ye].highWaterMark}clone(){return new H(lt(this,this.highWaterMark),{type:this.type,url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected,size:this.size,highWaterMark:this.highWaterMark})}static redirect(t,o=302){if(!en(o))throw new RangeError('Failed to execute "redirect" on "response": Invalid status code');return new H(null,{headers:{location:new URL(t).toString()},status:o})}static error(){let t=new H(null,{status:0,statusText:""});return t[ye].type="error",t}static json(t=void 0,o={}){let s=JSON.stringify(t);if(s===void 0)throw new TypeError("data is not JSON serializable");let i=new K(o&&o.headers);return i.has("content-type")||i.set("content-type","application/json"),new H(s,{...o,headers:i})}get[Symbol.toStringTag](){return"Response"}};Object.defineProperties(H.prototype,{type:{enumerable:!0},url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}});var Ea=require("node:url"),Ra=require("node:util");var ba=r=>{if(r.search)return r.search;let t=r.href.length-1,o=r.hash||(r.href[t]==="#"?"#":"");return r.href[t-o.length]==="?"?"?":""};var ya=require("node:net");function ha(r,t=!1){return r==null||(r=new URL(r),/^(about|blob|data):$/.test(r.protocol))?"no-referrer":(r.username="",r.password="",r.hash="",t&&(r.pathname="",r.search=""),r)}var ga=new Set(["","no-referrer","no-referrer-when-downgrade","same-origin","origin","strict-origin","origin-when-cross-origin","strict-origin-when-cross-origin","unsafe-url"]),Sa="strict-origin-when-cross-origin";function _a(r){if(!ga.has(r))throw new TypeError(`Invalid referrerPolicy: ${r}`);return r}function yc(r){if(/^(http|ws)s:$/.test(r.protocol))return!0;let t=r.host.replace(/(^\[)|(]$)/g,""),o=(0,ya.isIP)(t);return o===4&&/^127\./.test(t)||o===6&&/^(((0+:){7})|(::(0+:){0,6}))0*1$/.test(t)?!0:r.host==="localhost"||r.host.endsWith(".localhost")?!1:r.protocol==="file:"}function ct(r){return/^about:(blank|srcdoc)$/.test(r)||r.protocol==="data:"||/^(blob|filesystem):$/.test(r.protocol)?!0:yc(r)}function Oa(r,{referrerURLCallback:t,referrerOriginCallback:o}={}){if(r.referrer==="no-referrer"||r.referrerPolicy==="")return null;let s=r.referrerPolicy;if(r.referrer==="about:client")return"no-referrer";let i=r.referrer,u=ha(i),c=ha(i,!0);u.toString().length>4096&&(u=c),t&&(u=t(u)),o&&(c=o(c));let m=new URL(r.url);switch(s){case"no-referrer":return"no-referrer";case"origin":return c;case"unsafe-url":return u;case"strict-origin":return ct(u)&&!ct(m)?"no-referrer":c.toString();case"strict-origin-when-cross-origin":return u.origin===m.origin?u:ct(u)&&!ct(m)?"no-referrer":c;case"same-origin":return u.origin===m.origin?u:"no-referrer";case"origin-when-cross-origin":return u.origin===m.origin?u:c;case"no-referrer-when-downgrade":return ct(u)&&!ct(m)?"no-referrer":u;default:throw new TypeError(`Invalid referrerPolicy: ${s}`)}}function wa(r){let t=(r.get("referrer-policy")||"").split(/[,\s]+/),o="";for(let s of t)s&&ga.has(s)&&(o=s);return o}var Q=Symbol("Request internals"),Yt=r=>typeof r=="object"&&typeof r[Q]=="object",gc=(0,Ra.deprecate)(()=>{},".data is not a valid RequestInit property, use .body instead","https://github.com/node-fetch/node-fetch/issues/1000 (request)"),xe=class extends _e{constructor(t,o={}){let s;if(Yt(t)?s=new URL(t.url):(s=new URL(t),t={}),s.username!==""||s.password!=="")throw new TypeError(`${s} is an url with embedded credentials.`);let i=o.method||t.method||"GET";if(/^(delete|get|head|options|post|put)$/i.test(i)&&(i=i.toUpperCase()),!Yt(o)&&"data"in o&&gc(),(o.body!=null||Yt(t)&&t.body!==null)&&(i==="GET"||i==="HEAD"))throw new TypeError("Request with GET/HEAD method cannot have body");let u=o.body?o.body:Yt(t)&&t.body!==null?lt(t):null;super(u,{size:o.size||t.size||0});let c=new K(o.headers||t.headers||{});if(u!==null&&!c.has("Content-Type")){let h=Xr(u,this);h&&c.set("Content-Type",h)}let m=Yt(t)?t.signal:null;if("signal"in o&&(m=o.signal),m!=null&&!na(m))throw new TypeError("Expected signal to be an instanceof AbortSignal or EventTarget");let b=o.referrer==null?t.referrer:o.referrer;if(b==="")b="no-referrer";else if(b){let h=new URL(b);b=/^about:(\/\/)?client$/.test(h)?"client":h}else b=void 0;this[Q]={method:i,redirect:o.redirect||t.redirect||"follow",headers:c,parsedURL:s,signal:m,referrer:b},this.follow=o.follow===void 0?t.follow===void 0?20:t.follow:o.follow,this.compress=o.compress===void 0?t.compress===void 0?!0:t.compress:o.compress,this.counter=o.counter||t.counter||0,this.agent=o.agent||t.agent,this.highWaterMark=o.highWaterMark||t.highWaterMark||16384,this.insecureHTTPParser=o.insecureHTTPParser||t.insecureHTTPParser||!1,this.referrerPolicy=o.referrerPolicy||t.referrerPolicy||""}get method(){return this[Q].method}get url(){return(0,Ea.format)(this[Q].parsedURL)}get headers(){return this[Q].headers}get redirect(){return this[Q].redirect}get signal(){return this[Q].signal}get referrer(){if(this[Q].referrer==="no-referrer")return"";if(this[Q].referrer==="client")return"about:client";if(this[Q].referrer)return this[Q].referrer.toString()}get referrerPolicy(){return this[Q].referrerPolicy}set referrerPolicy(t){this[Q].referrerPolicy=_a(t)}clone(){return new xe(this)}get[Symbol.toStringTag](){return"Request"}};Object.defineProperties(xe.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0},referrer:{enumerable:!0},referrerPolicy:{enumerable:!0}});var ja=r=>{let{parsedURL:t}=r[Q],o=new K(r[Q].headers);o.has("Accept")||o.set("Accept","*/*");let s=null;if(r.body===null&&/^(post|put)$/i.test(r.method)&&(s="0"),r.body!==null){let m=fa(r);typeof m=="number"&&!Number.isNaN(m)&&(s=String(m))}s&&o.set("Content-Length",s),r.referrerPolicy===""&&(r.referrerPolicy=Sa),r.referrer&&r.referrer!=="no-referrer"?r[Q].referrer=Oa(r):r[Q].referrer="no-referrer",r[Q].referrer instanceof URL&&o.set("Referer",r.referrer),o.has("User-Agent")||o.set("User-Agent","node-fetch"),r.compress&&!o.has("Accept-Encoding")&&o.set("Accept-Encoding","gzip, deflate, br");let{agent:i}=r;typeof i=="function"&&(i=i(t)),!o.has("Connection")&&!i&&o.set("Connection","close");let u=ba(t),c={path:t.pathname+u,method:r.method,headers:o[Symbol.for("nodejs.util.inspect.custom")](),insecureHTTPParser:r.insecureHTTPParser,agent:i};return{parsedURL:t,options:c}};var tn=class extends Te{constructor(t,o="aborted"){super(t,o)}};Gr();oo();var Sc=new Set(["data:","http:","https:"]);async function Je(r,t){return new Promise((o,s)=>{let i=new xe(r,t),{parsedURL:u,options:c}=ja(i);if(!Sc.has(u.protocol))throw new TypeError(`node-fetch cannot load ${r}. URL scheme "${u.protocol.replace(/:$/,"")}" is not supported.`);if(u.protocol==="data:"){let S=Js(i.url),T=new H(S,{headers:{"Content-Type":S.typeFull}});o(T);return}let m=(u.protocol==="https:"?Pa.default:Ta.default).request,{signal:b}=i,h=null,O=()=>{let S=new tn("The operation was aborted.");s(S),i.body&&i.body instanceof ue.default.Readable&&i.body.destroy(S),!(!h||!h.body)&&h.body.emit("error",S)};if(b&&b.aborted){O();return}let E=()=>{O(),_()},w=m(u.toString(),c);b&&b.addEventListener("abort",E);let _=()=>{w.abort(),b&&b.removeEventListener("abort",E)};w.on("error",S=>{s(new ee(`request to ${i.url} failed, reason: ${S.message}`,"system",S)),_()}),_c(w,S=>{h&&h.body&&h.body.destroy(S)}),process.version<"v14"&&w.on("socket",S=>{let T;S.prependListener("end",()=>{T=S._eventsCount}),S.prependListener("close",x=>{if(h&&T<S._eventsCount&&!x){let C=new Error("Premature close");C.code="ERR_STREAM_PREMATURE_CLOSE",h.body.emit("error",C)}})}),w.on("response",S=>{w.setTimeout(0);let T=ma(S.rawHeaders);if(en(S.statusCode)){let v=T.get("Location"),D=null;try{D=v===null?null:new URL(v,i.url)}catch{if(i.redirect!=="manual"){s(new ee(`uri requested responds with an invalid redirect URL: ${v}`,"invalid-redirect")),_();return}}switch(i.redirect){case"error":s(new ee(`uri requested responds with a redirect, redirect mode is set to error: ${i.url}`,"no-redirect")),_();return;case"manual":break;case"follow":{if(D===null)break;if(i.counter>=i.follow){s(new ee(`maximum redirect reached at: ${i.url}`,"max-redirect")),_();return}let I={headers:new K(i.headers),follow:i.follow,counter:i.counter+1,agent:i.agent,compress:i.compress,method:i.method,body:lt(i),signal:i.signal,size:i.size,referrer:i.referrer,referrerPolicy:i.referrerPolicy};if(!oa(i.url,D)||!sa(i.url,D))for(let V of["authorization","www-authenticate","cookie","cookie2"])I.headers.delete(V);if(S.statusCode!==303&&i.body&&t.body instanceof ue.default.Readable){s(new ee("Cannot follow redirect with body being a readable stream","unsupported-redirect")),_();return}(S.statusCode===303||(S.statusCode===301||S.statusCode===302)&&i.method==="POST")&&(I.method="GET",I.body=void 0,I.headers.delete("content-length"));let ne=wa(T);ne&&(I.referrerPolicy=ne),o(Je(new xe(D,I))),_();return}default:return s(new TypeError(`Redirect option '${i.redirect}' is not a valid value of RequestRedirect`))}}b&&S.once("end",()=>{b.removeEventListener("abort",E)});let x=(0,ue.pipeline)(S,new ue.PassThrough,v=>{v&&s(v)});process.version<"v12.10"&&S.on("aborted",E);let C={url:i.url,status:S.statusCode,statusText:S.statusMessage,headers:T,size:i.size,counter:i.counter,highWaterMark:i.highWaterMark},z=T.get("Content-Encoding");if(!i.compress||i.method==="HEAD"||z===null||S.statusCode===204||S.statusCode===304){h=new H(x,C),o(h);return}let W={flush:Ge.default.Z_SYNC_FLUSH,finishFlush:Ge.default.Z_SYNC_FLUSH};if(z==="gzip"||z==="x-gzip"){x=(0,ue.pipeline)(x,Ge.default.createGunzip(W),v=>{v&&s(v)}),h=new H(x,C),o(h);return}if(z==="deflate"||z==="x-deflate"){let v=(0,ue.pipeline)(S,new ue.PassThrough,D=>{D&&s(D)});v.once("data",D=>{(D[0]&15)===8?x=(0,ue.pipeline)(x,Ge.default.createInflate(),I=>{I&&s(I)}):x=(0,ue.pipeline)(x,Ge.default.createInflateRaw(),I=>{I&&s(I)}),h=new H(x,C),o(h)}),v.once("end",()=>{h||(h=new H(x,C),o(h))});return}if(z==="br"){x=(0,ue.pipeline)(x,Ge.default.createBrotliDecompress(),v=>{v&&s(v)}),h=new H(x,C),o(h);return}h=new H(x,C),o(h)}),pa(w,i).catch(s)})}function _c(r,t){let o=Kt.Buffer.from(`0\r
\r
`),s=!1,i=!1,u;r.on("response",c=>{let{headers:m}=c;s=m["transfer-encoding"]==="chunked"&&!m["content-length"]}),r.on("socket",c=>{let m=()=>{if(s&&!i){let h=new Error("Premature close");h.code="ERR_STREAM_PREMATURE_CLOSE",t(h)}},b=h=>{i=Kt.Buffer.compare(h.slice(-5),o)===0,!i&&u&&(i=Kt.Buffer.compare(u.slice(-3),o.slice(0,3))===0&&Kt.Buffer.compare(h.slice(-2),o.slice(3))===0),u=h};c.prependListener("close",m),c.on("data",b),r.on("close",()=>{c.removeListener("close",m),c.removeListener("data",b)})})}var co=require("url"),fo="7bbb789c01ff44ed842907b7a80c404f",Oc=["playlist-modify-private","playlist-modify-public","playlist-read-collaborative","playlist-read-private","user-follow-read","user-library-modify","user-library-read","user-modify-playback-state","user-read-currently-playing","user-read-playback-state","user-read-private","user-top-read"].join(" "),dt=new lo.OAuth.PKCEClient({redirectMethod:lo.OAuth.RedirectMethod.Web,providerName:"Spotify",providerIcon:"spotify-icon.svg",description:"Connect your Spotify account",providerId:"spotify"});async function po(){let r=await dt.getTokens();if(r?.accessToken){if(r.refreshToken&&r.isExpired()){let i=await Ec(r.refreshToken);return await dt.setTokens(i),i.access_token}return r.accessToken}let t=await dt.authorizationRequest({endpoint:"https://accounts.spotify.com/authorize/",clientId:fo,scope:Oc}),{authorizationCode:o}=await dt.authorize(t),s=await wc(t,o);return await dt.setTokens(s),s.access_token}async function wc(r,t){let o=new co.URLSearchParams;o.append("client_id",fo),o.append("code",t),o.append("code_verifier",r.codeVerifier),o.append("grant_type","authorization_code"),o.append("redirect_uri",r.redirectURI);let s=await Je("https://accounts.spotify.com/api/token",{method:"POST",body:o});if(!s.ok)throw new Error(s.statusText);return await s.json()}async function Ec(r){let t=new co.URLSearchParams;t.append("client_id",fo),t.append("refresh_token",r),t.append("grant_type","refresh_token");let o=await Je("https://accounts.spotify.com/api/token",{method:"POST",body:t});if(!o.ok)throw(await o.json()).error==="invalid_grant"&&(dt.removeTokens(),po()),new Error(o.statusText);let s=await o.json();return s.refresh_token=s.refresh_token??r,s}var yo={};Xn(yo,{defaults:()=>Zt,deleteMeAlbums:()=>_d,deleteMeAudiobooks:()=>nd,deleteMeEpisodes:()=>xd,deleteMeFollowing:()=>Jd,deleteMeShows:()=>Ad,deleteMeTracks:()=>Rd,deletePlaylistsByPlaylistIdFollowers:()=>Dd,deletePlaylistsByPlaylistIdTracks:()=>hd,getAlbums:()=>Lc,getAlbumsById:()=>Fc,getAlbumsByIdTracks:()=>Uc,getArtists:()=>Wc,getArtistsById:()=>Mc,getArtistsByIdAlbums:()=>Qc,getArtistsByIdRelatedArtists:()=>Hc,getArtistsByIdTopTracks:()=>Nc,getAudioAnalysisById:()=>Zd,getAudioFeatures:()=>Kd,getAudioFeaturesById:()=>Xd,getAudiobooks:()=>Zc,getAudiobooksById:()=>Xc,getAudiobooksByIdChapters:()=>ed,getBrowseCategories:()=>Ld,getBrowseCategoriesByCategoryId:()=>Ud,getBrowseCategoriesByCategoryIdPlaylists:()=>Md,getBrowseFeaturedPlaylists:()=>Fd,getBrowseNewReleases:()=>Nd,getChapters:()=>ad,getChaptersById:()=>sd,getEpisodes:()=>Kc,getEpisodesById:()=>Yc,getMarkets:()=>gf,getMe:()=>cd,getMeAlbums:()=>gd,getMeAlbumsContains:()=>Od,getMeAudiobooks:()=>td,getMeAudiobooksContains:()=>od,getMeEpisodes:()=>Td,getMeEpisodesContains:()=>kd,getMeFollowing:()=>Hd,getMeFollowingContains:()=>Vd,getMePlayer:()=>rf,getMePlayerCurrentlyPlaying:()=>sf,getMePlayerDevices:()=>of,getMePlayerQueue:()=>hf,getMePlayerRecentlyPlayed:()=>bf,getMePlaylists:()=>yd,getMeShows:()=>Cd,getMeShowsContains:()=>qd,getMeTopArtists:()=>Sf,getMeTopTracks:()=>_f,getMeTracks:()=>wd,getMeTracksContains:()=>jd,getPlaylistsByPlaylistId:()=>dd,getPlaylistsByPlaylistIdFollowersContains:()=>Yd,getPlaylistsByPlaylistIdImages:()=>Wd,getPlaylistsByPlaylistIdTracks:()=>pd,getRecommendations:()=>ef,getRecommendationsAvailableGenreSeeds:()=>tf,getShows:()=>Jc,getShowsById:()=>Gc,getShowsByIdEpisodes:()=>Vc,getTracks:()=>ud,getTracksById:()=>id,getUsersByUserId:()=>Id,getUsersByUserIdPlaylists:()=>Bd,postMePlayerNext:()=>lf,postMePlayerPrevious:()=>cf,postMePlayerQueue:()=>yf,postPlaylistsByPlaylistIdTracks:()=>md,postUsersByUserIdPlaylists:()=>$d,putMeAlbums:()=>Sd,putMeAudiobooks:()=>rd,putMeEpisodes:()=>Pd,putMeFollowing:()=>Gd,putMePlayer:()=>nf,putMePlayerPause:()=>uf,putMePlayerPlay:()=>af,putMePlayerRepeat:()=>ff,putMePlayerSeek:()=>df,putMePlayerShuffle:()=>mf,putMePlayerVolume:()=>pf,putMeShows:()=>vd,putMeTracks:()=>Ed,putPlaylistsByPlaylistId:()=>fd,putPlaylistsByPlaylistIdFollowers:()=>zd,putPlaylistsByPlaylistIdImages:()=>Qd,putPlaylistsByPlaylistIdTracks:()=>bd,search:()=>ld,servers:()=>Dc});var Ba=ae(Ia()),p=ae(bo()),Zt={baseUrl:"https://api.spotify.com/v1"},d=Ba.runtime(Zt),Dc={server1:"https://api.spotify.com/v1"};function Fc(r,{market:t}={},o){return d.ok(d.fetchJson(`/albums/${encodeURIComponent(r)}${p.query(p.explode({market:t}))}`,{...o}))}function Lc(r,{market:t}={},o){return d.ok(d.fetchJson(`/albums${p.query(p.explode({ids:r,market:t}))}`,{...o}))}function Uc(r,{market:t,limit:o,offset:s}={},i){return d.ok(d.fetchJson(`/albums/${encodeURIComponent(r)}/tracks${p.query(p.explode({market:t,limit:o,offset:s}))}`,{...i}))}function Mc(r,t){return d.ok(d.fetchJson(`/artists/${encodeURIComponent(r)}`,{...t}))}function Wc(r,t){return d.ok(d.fetchJson(`/artists${p.query(p.explode({ids:r}))}`,{...t}))}function Qc(r,{includeGroups:t,market:o,limit:s,offset:i}={},u){return d.ok(d.fetchJson(`/artists/${encodeURIComponent(r)}/albums${p.query(p.explode({include_groups:t,market:o,limit:s,offset:i}))}`,{...u}))}function Nc(r,{market:t}={},o){return d.ok(d.fetchJson(`/artists/${encodeURIComponent(r)}/top-tracks${p.query(p.explode({market:t}))}`,{...o}))}function Hc(r,t){return d.ok(d.fetchJson(`/artists/${encodeURIComponent(r)}/related-artists`,{...t}))}function Gc(r,{market:t}={},o){return d.ok(d.fetchJson(`/shows/${encodeURIComponent(r)}${p.query(p.explode({market:t}))}`,{...o}))}function Jc(r,{market:t}={},o){return d.ok(d.fetchJson(`/shows${p.query(p.explode({market:t,ids:r}))}`,{...o}))}function Vc(r,{market:t,limit:o,offset:s}={},i){return d.ok(d.fetchJson(`/shows/${encodeURIComponent(r)}/episodes${p.query(p.explode({market:t,limit:o,offset:s}))}`,{...i}))}function Yc(r,{market:t}={},o){return d.ok(d.fetchJson(`/episodes/${encodeURIComponent(r)}${p.query(p.explode({market:t}))}`,{...o}))}function Kc(r,{market:t}={},o){return d.ok(d.fetchJson(`/episodes${p.query(p.explode({ids:r,market:t}))}`,{...o}))}function Xc(r,{market:t}={},o){return d.ok(d.fetchJson(`/audiobooks/${encodeURIComponent(r)}${p.query(p.explode({market:t}))}`,{...o}))}function Zc(r,{market:t}={},o){return d.ok(d.fetchJson(`/audiobooks${p.query(p.explode({ids:r,market:t}))}`,{...o}))}function ed(r,{market:t,limit:o,offset:s}={},i){return d.ok(d.fetchJson(`/audiobooks/${encodeURIComponent(r)}/chapters${p.query(p.explode({market:t,limit:o,offset:s}))}`,{...i}))}function td({limit:r,offset:t}={},o){return d.ok(d.fetchJson(`/me/audiobooks${p.query(p.explode({limit:r,offset:t}))}`,{...o}))}function rd(r,t){return d.ok(d.fetchJson(`/me/audiobooks${p.query(p.explode({ids:r}))}`,{...t,method:"PUT"}))}function nd(r,t){return d.ok(d.fetchJson(`/me/audiobooks${p.query(p.explode({ids:r}))}`,{...t,method:"DELETE"}))}function od(r,t){return d.ok(d.fetchJson(`/me/audiobooks/contains${p.query(p.explode({ids:r}))}`,{...t}))}function sd(r,{market:t}={},o){return d.ok(d.fetchJson(`/chapters/${encodeURIComponent(r)}${p.query(p.explode({market:t}))}`,{...o}))}function ad(r,{market:t}={},o){return d.ok(d.fetchJson(`/chapters${p.query(p.explode({ids:r,market:t}))}`,{...o}))}function id(r,{market:t}={},o){return d.ok(d.fetchJson(`/tracks/${encodeURIComponent(r)}${p.query(p.explode({market:t}))}`,{...o}))}function ud(r,{market:t}={},o){return d.ok(d.fetchJson(`/tracks${p.query(p.explode({market:t,ids:r}))}`,{...o}))}function ld(r,t,{market:o,limit:s,offset:i,includeExternal:u}={},c){return d.ok(d.fetchJson(`/search${p.query(p.explode({q:r,market:o,limit:s,offset:i,include_external:u}),p.form({type:t}))}`,{...c}))}function cd(r){return d.ok(d.fetchJson("/me",{...r}))}function dd(r,{market:t,fields:o,additionalTypes:s}={},i){return d.ok(d.fetchJson(`/playlists/${encodeURIComponent(r)}${p.query(p.explode({market:t,fields:o,additional_types:s}))}`,{...i}))}function fd(r,t,o){return d.ok(d.fetchJson(`/playlists/${encodeURIComponent(r)}`,d.json({...o,method:"PUT",body:t})))}function pd(r,{market:t,fields:o,limit:s,offset:i,additionalTypes:u}={},c){return d.ok(d.fetchJson(`/playlists/${encodeURIComponent(r)}/tracks${p.query(p.explode({market:t,fields:o,limit:s,offset:i,additional_types:u}))}`,{...c}))}function md(r,t,{position:o,uris:s}={},i){return d.ok(d.fetchJson(`/playlists/${encodeURIComponent(r)}/tracks${p.query(p.explode({position:o,uris:s}))}`,d.json({...i,method:"POST",body:t})))}function bd(r,t,{uris:o}={},s){return d.ok(d.fetchJson(`/playlists/${encodeURIComponent(r)}/tracks${p.query(p.explode({uris:o}))}`,d.json({...s,method:"PUT",body:t})))}function hd(r,t,o){return d.ok(d.fetchJson(`/playlists/${encodeURIComponent(r)}/tracks`,d.json({...o,method:"DELETE",body:t})))}function yd({limit:r,offset:t}={},o){return d.ok(d.fetchJson(`/me/playlists${p.query(p.explode({limit:r,offset:t}))}`,{...o}))}function gd({limit:r,offset:t,market:o}={},s){return d.ok(d.fetchJson(`/me/albums${p.query(p.explode({limit:r,offset:t,market:o}))}`,{...s}))}function Sd(r,t,o){return d.ok(d.fetchJson(`/me/albums${p.query(p.explode({ids:r}))}`,d.json({...o,method:"PUT",body:t})))}function _d(r,t,o){return d.ok(d.fetchJson(`/me/albums${p.query(p.explode({ids:r}))}`,d.json({...o,method:"DELETE",body:t})))}function Od(r,t){return d.ok(d.fetchJson(`/me/albums/contains${p.query(p.explode({ids:r}))}`,{...t}))}function wd({market:r,limit:t,offset:o}={},s){return d.ok(d.fetchJson(`/me/tracks${p.query(p.explode({market:r,limit:t,offset:o}))}`,{...s}))}function Ed(r,t,o){return d.ok(d.fetchJson(`/me/tracks${p.query(p.explode({ids:r}))}`,d.json({...o,method:"PUT",body:t})))}function Rd(r,t,o){return d.ok(d.fetchJson(`/me/tracks${p.query(p.explode({ids:r}))}`,d.json({...o,method:"DELETE",body:t})))}function jd(r,t){return d.ok(d.fetchJson(`/me/tracks/contains${p.query(p.explode({ids:r}))}`,{...t}))}function Td({market:r,limit:t,offset:o}={},s){return d.ok(d.fetchJson(`/me/episodes${p.query(p.explode({market:r,limit:t,offset:o}))}`,{...s}))}function Pd(r,t,o){return d.ok(d.fetchJson(`/me/episodes${p.query(p.explode({ids:r}))}`,d.json({...o,method:"PUT",body:t})))}function xd(r,t,o){return d.ok(d.fetchJson(`/me/episodes${p.query(p.explode({ids:r}))}`,d.json({...o,method:"DELETE",body:t})))}function kd(r,t){return d.ok(d.fetchJson(`/me/episodes/contains${p.query(p.explode({ids:r}))}`,{...t}))}function Cd({limit:r,offset:t}={},o){return d.ok(d.fetchJson(`/me/shows${p.query(p.explode({limit:r,offset:t}))}`,{...o}))}function vd(r,t,o){return d.ok(d.fetchJson(`/me/shows${p.query(p.explode({ids:r}))}`,d.json({...o,method:"PUT",body:t})))}function Ad(r,t,{market:o}={},s){return d.ok(d.fetchJson(`/me/shows${p.query(p.explode({ids:r,market:o}))}`,d.json({...s,method:"DELETE",body:t})))}function qd(r,t){return d.ok(d.fetchJson(`/me/shows/contains${p.query(p.explode({ids:r}))}`,{...t}))}function Id(r,t){return d.ok(d.fetchJson(`/users/${encodeURIComponent(r)}`,{...t}))}function Bd(r,{limit:t,offset:o}={},s){return d.ok(d.fetchJson(`/users/${encodeURIComponent(r)}/playlists${p.query(p.explode({limit:t,offset:o}))}`,{...s}))}function $d(r,t,o){return d.ok(d.fetchJson(`/users/${encodeURIComponent(r)}/playlists`,d.json({...o,method:"POST",body:t})))}function zd(r,t,o){return d.ok(d.fetchJson(`/playlists/${encodeURIComponent(r)}/followers`,d.json({...o,method:"PUT",body:t})))}function Dd(r,t){return d.ok(d.fetchJson(`/playlists/${encodeURIComponent(r)}/followers`,{...t,method:"DELETE"}))}function Fd({country:r,locale:t,timestamp:o,limit:s,offset:i}={},u){return d.ok(d.fetchJson(`/browse/featured-playlists${p.query(p.explode({country:r,locale:t,timestamp:o,limit:s,offset:i}))}`,{...u}))}function Ld({country:r,locale:t,limit:o,offset:s}={},i){return d.ok(d.fetchJson(`/browse/categories${p.query(p.explode({country:r,locale:t,limit:o,offset:s}))}`,{...i}))}function Ud(r,{country:t,locale:o}={},s){return d.ok(d.fetchJson(`/browse/categories/${encodeURIComponent(r)}${p.query(p.explode({country:t,locale:o}))}`,{...s}))}function Md(r,{country:t,limit:o,offset:s}={},i){return d.ok(d.fetchJson(`/browse/categories/${encodeURIComponent(r)}/playlists${p.query(p.explode({country:t,limit:o,offset:s}))}`,{...i}))}function Wd(r,t){return d.ok(d.fetchJson(`/playlists/${encodeURIComponent(r)}/images`,{...t}))}function Qd(r,t,o){return d.ok(d.fetchJson(`/playlists/${encodeURIComponent(r)}/images`,{...o,method:"PUT",body:t}))}function Nd({country:r,limit:t,offset:o}={},s){return d.ok(d.fetchJson(`/browse/new-releases${p.query(p.explode({country:r,limit:t,offset:o}))}`,{...s}))}function Hd(r,{after:t,limit:o}={},s){return d.ok(d.fetchJson(`/me/following${p.query(p.explode({type:r,after:t,limit:o}))}`,{...s}))}function Gd(r,t,o,s){return d.ok(d.fetchJson(`/me/following${p.query(p.explode({type:r,ids:t}))}`,d.json({...s,method:"PUT",body:o})))}function Jd(r,t,o,s){return d.ok(d.fetchJson(`/me/following${p.query(p.explode({type:r,ids:t}))}`,d.json({...s,method:"DELETE",body:o})))}function Vd(r,t,o){return d.ok(d.fetchJson(`/me/following/contains${p.query(p.explode({type:r,ids:t}))}`,{...o}))}function Yd(r,t,o){return d.ok(d.fetchJson(`/playlists/${encodeURIComponent(r)}/followers/contains${p.query(p.explode({ids:t}))}`,{...o}))}function Kd(r,t){return d.ok(d.fetchJson(`/audio-features${p.query(p.explode({ids:r}))}`,{...t}))}function Xd(r,t){return d.ok(d.fetchJson(`/audio-features/${encodeURIComponent(r)}`,{...t}))}function Zd(r,t){return d.ok(d.fetchJson(`/audio-analysis/${encodeURIComponent(r)}`,{...t}))}function ef({limit:r,market:t,seedArtists:o,seedGenres:s,seedTracks:i,minAcousticness:u,maxAcousticness:c,targetAcousticness:m,minDanceability:b,maxDanceability:h,targetDanceability:O,minDurationMs:E,maxDurationMs:w,targetDurationMs:_,minEnergy:S,maxEnergy:T,targetEnergy:x,minInstrumentalness:C,maxInstrumentalness:z,targetInstrumentalness:W,minKey:v,maxKey:D,targetKey:I,minLiveness:ne,maxLiveness:V,targetLiveness:ar,minLoudness:wt,maxLoudness:de,targetLoudness:ke,minMode:Et,maxMode:ir,targetMode:On,minPopularity:Rt,maxPopularity:wn,targetPopularity:ur,minSpeechiness:lr,maxSpeechiness:cr,targetSpeechiness:jt,minTempo:Tt,maxTempo:dr,targetTempo:En,minTimeSignature:Rn,maxTimeSignature:fe,targetTimeSignature:oe,minValence:jn,maxValence:fr,targetValence:pe}={},Pt){return d.ok(d.fetchJson(`/recommendations${p.query(p.explode({limit:r,market:t,seed_artists:o,seed_genres:s,seed_tracks:i,min_acousticness:u,max_acousticness:c,target_acousticness:m,min_danceability:b,max_danceability:h,target_danceability:O,min_duration_ms:E,max_duration_ms:w,target_duration_ms:_,min_energy:S,max_energy:T,target_energy:x,min_instrumentalness:C,max_instrumentalness:z,target_instrumentalness:W,min_key:v,max_key:D,target_key:I,min_liveness:ne,max_liveness:V,target_liveness:ar,min_loudness:wt,max_loudness:de,target_loudness:ke,min_mode:Et,max_mode:ir,target_mode:On,min_popularity:Rt,max_popularity:wn,target_popularity:ur,min_speechiness:lr,max_speechiness:cr,target_speechiness:jt,min_tempo:Tt,max_tempo:dr,target_tempo:En,min_time_signature:Rn,max_time_signature:fe,target_time_signature:oe,min_valence:jn,max_valence:fr,target_valence:pe}))}`,{...Pt}))}function tf(r){return d.ok(d.fetchJson("/recommendations/available-genre-seeds",{...r}))}function rf({market:r,additionalTypes:t}={},o){return d.ok(d.fetchJson(`/me/player${p.query(p.explode({market:r,additional_types:t}))}`,{...o}))}function nf(r,t){return d.ok(d.fetchJson("/me/player",d.json({...t,method:"PUT",body:r})))}function of(r){return d.ok(d.fetchJson("/me/player/devices",{...r}))}function sf({market:r,additionalTypes:t}={},o){return d.ok(d.fetchJson(`/me/player/currently-playing${p.query(p.explode({market:r,additional_types:t}))}`,{...o}))}function af(r,{deviceId:t}={},o){return d.ok(d.fetchJson(`/me/player/play${p.query(p.explode({device_id:t}))}`,d.json({...o,method:"PUT",body:r})))}function uf({deviceId:r}={},t){return d.ok(d.fetchJson(`/me/player/pause${p.query(p.explode({device_id:r}))}`,{...t,method:"PUT"}))}function lf({deviceId:r}={},t){return d.ok(d.fetchJson(`/me/player/next${p.query(p.explode({device_id:r}))}`,{...t,method:"POST"}))}function cf({deviceId:r}={},t){return d.ok(d.fetchJson(`/me/player/previous${p.query(p.explode({device_id:r}))}`,{...t,method:"POST"}))}function df(r,{deviceId:t}={},o){return d.ok(d.fetchJson(`/me/player/seek${p.query(p.explode({position_ms:r,device_id:t}))}`,{...o,method:"PUT"}))}function ff(r,{deviceId:t}={},o){return d.ok(d.fetchJson(`/me/player/repeat${p.query(p.explode({state:r,device_id:t}))}`,{...o,method:"PUT"}))}function pf(r,{deviceId:t}={},o){return d.ok(d.fetchJson(`/me/player/volume${p.query(p.explode({volume_percent:r,device_id:t}))}`,{...o,method:"PUT"}))}function mf(r,{deviceId:t}={},o){return d.ok(d.fetchJson(`/me/player/shuffle${p.query(p.explode({state:r,device_id:t}))}`,{...o,method:"PUT"}))}function bf({limit:r,after:t,before:o}={},s){return d.ok(d.fetchJson(`/me/player/recently-played${p.query(p.explode({limit:r,after:t,before:o}))}`,{...s}))}function hf(r){return d.ok(d.fetchJson("/me/player/queue",{...r}))}function yf(r,{deviceId:t}={},o){return d.ok(d.fetchJson(`/me/player/queue${p.query(p.explode({uri:r,device_id:t}))}`,{...o,method:"POST"}))}function gf(r){return d.ok(d.fetchJson("/markets",{...r}))}function Sf({timeRange:r,limit:t,offset:o}={},s){return d.ok(d.fetchJson(`/me/top/artists${p.query(p.explode({time_range:r,limit:t,offset:o}))}`,{...s}))}function _f({timeRange:r,limit:t,offset:o}={},s){return d.ok(d.fetchJson(`/me/top/tracks${p.query(p.explode({time_range:r,limit:t,offset:o}))}`,{...s}))}var Ib=require("react/jsx-runtime"),go;function on(){if(!go)throw new Error("getSpotifyClient must be used when authenticated");return{spotifyClient:go}}async function za(){let r=await po();Zt.headers={Authorization:`Bearer ${r}`},Zt.fetch=Je,go=yo}var Da=ae(ho());function ft(r){if(console.log("--- start getErrorMessage ---"),console.log("error",r),console.log("--- end getErrorMessage ---"),r instanceof Da.HttpError)try{return JSON.parse(r.data).error.message}catch{return typeof r.data=="string"?r.data:r.data.error.message}return String(r)}async function Fa(r,t){let{spotifyClient:o}=on();try{return(await o.search(r,["track"],{limit:t})).tracks}catch(s){let i=ft(s);throw console.log("searchTracks.ts Error:",i),new Error(i)}}var Eu=ae(require("node:process"),1),Ru=ae(wu(),1);async function sr(r,{humanReadableOutput:t=!0}={}){if(Eu.default.platform!=="darwin")throw new Error("macOS only");let o=t?[]:["-ss"],{stdout:s}=await(0,Ru.default)("osascript",["-e",r,o]);return s}var mm=require("@raycast/api");function Sn(r){return`
    tell application "Spotify"
      if not application "Spotify" is running then
        activate

        set _maxOpenWaitTimeInSeconds to 5
        set _openCounter to 1
        repeat until application "Spotify" is running
          delay 1
          set _openCounter to _openCounter + 1
          if _openCounter > _maxOpenWaitTimeInSeconds then exit repeat
        end repeat
      end if
      ${r}
    end tell`}var Ot={album:"spotify:album:",artist:"spotify:artist:",playlist:"spotify:playlist:",track:"spotify:track:",show:"spotify:show:",episode:"spotify:episode:"};async function ju({id:r,type:t,contextUri:o}={}){let{spotifyClient:s}=on();try{!t||!r?await s.putMePlayerPlay():t==="track"?o?await s.putMePlayerPlay({context_uri:o,offset:{uri:`${Ot.track}${r}`}}):await s.putMePlayerPlay({uris:[`${Ot.track}${r}`]}):t==="episode"?await s.putMePlayerPlay({uris:[`${Ot.episode}${r}`]}):await s.putMePlayerPlay({context_uri:`${Ot[t]}${r}`})}catch(i){let u=ft(i);if(u?.toLocaleLowerCase().includes("no active device")||u?.toLocaleLowerCase().includes("restricted device")){if(!t||!r){let c=Sn("play");await sr(c)}else if(t==="track"){let c=Sn(`play track "${Ot[t]}${r}"`);await sr(c)}else{let c=Sn(`
          delay 1
          play track "${Ot[t]}${r}"`);await sr(c)}return}throw console.log("play.ts Error: ",u),new Error(u)}}async function Tu(r){let{query:t}=r.arguments;await za();try{let s=(await Fa(t,1))?.items?.[0]??void 0;s?.artists?(await ju({id:s.id,type:"track"}),await(0,_n.showHUD)(`Playing ${s.name} by ${s.artists[0].name}`)):await(0,_n.showHUD)(`No results for ${t}`)}catch(o){let s=ft(o);await(0,_n.showHUD)(s)}}0&&(module.exports={});
/*! fetch-blob. MIT License. Jimmy Wärting <https://jimmy.warting.se/opensource> */
/*! formdata-polyfill. MIT License. Jimmy Wärting <https://jimmy.warting.se/opensource> */
/*! node-domexception. MIT License. Jimmy Wärting <https://jimmy.warting.se/opensource> */
